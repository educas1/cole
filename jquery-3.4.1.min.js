!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(E,e){"use strict";function y(e){return null!=e&&e===e.window}var t=[],S=E.document,r=Object.getPrototypeOf,a=t.slice,m=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,g=n.hasOwnProperty,s=g.toString,c=s.call(Object),v={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},h={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||S).createElement("script");if(o.text=e,t)for(r in h)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var l="3.4.1",C=function(e,t){return new C.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function p(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!b(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:l,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(n){return this.pushStack(C.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||b(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(c&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],o=i&&!Array.isArray(n)?[]:i||C.isPlainObject(n)?n:{},i=!1,s[t]=C.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},C.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e)||(t=r(e))&&("function"!=typeof(n=g.call(t,"constructor")&&t.constructor)||s.call(n)!==c))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){w(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(p(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?C.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!=s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return m.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=t[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){function l(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){T()}var e,p,w,o,s,d,f,y,_,u,c,T,E,a,S,m,h,g,v,C="sizzle"+ +new Date,b=n.document,I=0,r=0,x=ue(),N=ue(),D=ue(),k=ue(),A=function(e,t){return e===t&&(c=!0),0},R={}.hasOwnProperty,t=[],O=t.pop,P=t.push,L=t.push,M=t.slice,F=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+j+"*("+U+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+j+"*\\]",V=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",W=new RegExp(j+"+","g"),H=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),K=new RegExp("^"+j+"*,"+j+"*"),Q=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),z=new RegExp(j+"|>"),G=new RegExp(V),X=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ne=/[+~]/,re=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{L.apply(t=M.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){L={apply:t.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,n,r){var i,o,s,a,u,c,h,l=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!r&&((t?t.ownerDocument||t:b)!==E&&T(t),t=t||E,S)){if(11!==f&&(u=te.exec(e)))if(i=u[1]){if(9===f){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(l&&(s=l.getElementById(i))&&v(t,s)&&s.id===i)return n.push(s),n}else{if(u[2])return L.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&p.getElementsByClassName&&t.getElementsByClassName)return L.apply(n,t.getElementsByClassName(i)),n}if(p.qsa&&!k[e+" "]&&(!m||!m.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(h=e,l=t,1===f&&z.test(e)){for((a=t.getAttribute("id"))?a=a.replace(ie,oe):t.setAttribute("id",a=C),o=(c=d(e)).length;o--;)c[o]="#"+a+" "+be(c[o]);h=c.join(","),l=ne.test(e)&&ge(t.parentNode)||t}try{return L.apply(n,l.querySelectorAll(h)),n}catch(t){k(e,!0)}finally{a===C&&t.removeAttribute("id")}}}return y(e.replace(H,"$1"),t,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>w.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function ce(e){return e[C]=!0,e}function he(e){var t=E.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function de(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ye(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&se(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function me(s){return ce(function(o){return o=+o,ce(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=ae.support={},s=ae.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!$.test(t||n&&n.nodeName||"HTML")},T=ae.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:b;return r!==E&&9===r.nodeType&&r.documentElement&&(a=(E=r).documentElement,S=!s(E),b!==E&&(n=E.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),p.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=he(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=ee.test(E.getElementsByClassName),p.getById=he(function(e){return a.appendChild(e).id=C,!E.getElementsByName||!E.getElementsByName(C).length}),p.getById?(w.filter.ID=function(e){var t=e.replace(re,l);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var n=e.replace(re,l);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),w.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},w.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},h=[],m=[],(p.qsa=ee.test(E.querySelectorAll))&&(he(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+q+")"),e.querySelectorAll("[id~="+C+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=E.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(p.matchesSelector=ee.test(g=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&he(function(e){p.disconnectedMatch=g.call(e,"*"),g.call(e,"[s!='']:x"),h.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),h=h.length&&new RegExp(h.join("|")),t=ee.test(a.compareDocumentPosition),v=t||ee.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===E||e.ownerDocument===b&&v(b,e)?-1:t===E||t.ownerDocument===b&&v(b,t)?1:u?F(u,e)-F(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===E?-1:t===E?1:i?-1:o?1:u?F(u,e)-F(u,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?fe(s[r],a[r]):s[r]===b?-1:a[r]===b?1:0}),E},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==E&&T(e),p.matchesSelector&&S&&!k[t+" "]&&(!h||!h.test(t))&&(!m||!m.test(t)))try{var n=g.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){k(t,!0)}return 0<ae(t,E,null,[e]).length},ae.contains=function(e,t){return(e.ownerDocument||e)!==E&&T(e),v(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==E&&T(e);var n=w.attrHandle[t.toLowerCase()],r=n&&R.call(w.attrHandle,t.toLowerCase())?n(e,t,!S):void 0;return void 0!==r?r:p.attributes||!S?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ie,oe)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],r=0,i=0;if(c=!p.detectDuplicates,u=!p.sortStable&&e.slice(0),e.sort(A),c){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=ae.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(w=ae.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,l),e[3]=(e[3]||e[4]||e[5]||"").replace(re,l),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=d(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,l).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=ae.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(W," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,y,m){var g="nth"!==d.slice(0,3),v="last"!==d.slice(-4),b="of-type"===e;return 1===y&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,u,c=g!=v?"nextSibling":"previousSibling",h=e.parentNode,l=b&&e.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(h){if(g){for(;c;){for(s=e;s=s[c];)if(b?s.nodeName.toLowerCase()===l:1===s.nodeType)return!1;u=c="only"===d&&!u&&"nextSibling"}return!0}if(u=[v?h.firstChild:h.lastChild],v&&f){for(p=(a=(r=(i=(o=(s=h)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1])&&r[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||u.pop();)if(1===s.nodeType&&++p&&s===e){i[d]=[I,a,p];break}}else if(f&&(p=a=(r=(i=(o=(s=e)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1]),!1===p)for(;(s=++a&&s&&s[c]||(p=a=0)||u.pop())&&((b?s.nodeName.toLowerCase()!==l:1!==s.nodeType)||!++p||(f&&((i=(o=s[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[I,p]),s!==e)););return(p-=m)===y||p%y==0&&0<=p/y}}},PSEUDO:function(e,o){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[C]?s(o):1<s.length?(t=[e,e,"",o],w.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=F(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:ce(function(e){var r=[],i=[],a=f(e.replace(H,"$1"));return a[C]?ce(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:ce(function(t){return function(e){return 0<ae(t,e).length}}),contains:ce(function(t){return t=t.replace(re,l),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:ce(function(n){return X.test(n||"")||ae.error("unsupported lang: "+n),n=n.replace(re,l).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=pe(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=de(e);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(a,e,t){var u=e.dir,c=e.next,h=c||u,l=t&&"parentNode"===h,f=r++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||l)return a(e,t,n);return!1}:function(e,t,n){var r,i,o,s=[I,f];if(n){for(;e=e[u];)if((1===e.nodeType||l)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||l)if(i=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[h])&&r[0]===I&&r[1]===f)return s[2]=r[2];if((i[h]=s)[2]=a(e,t,n))return!0}return!1}}function _e(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),c&&t.push(a)));return s}function Ee(p,d,y,m,g,e){return m&&!m[C]&&(m=Ee(m)),g&&!g[C]&&(g=Ee(g,e)),ce(function(e,t,n,r){var i,o,s,a=[],u=[],c=t.length,h=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),l=!p||!e&&d?h:Te(h,a,p,n,r),f=y?g||(e?p:c||m)?[]:t:l;if(y&&y(l,f,n,r),m)for(i=Te(f,u),m(i,[],n,r),o=i.length;o--;)(s=i[o])&&(f[u[o]]=!(l[u[o]]=s));if(e){if(g||p){if(g){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(l[o]=s);g(null,f=[],i,r)}for(o=f.length;o--;)(s=f[o])&&-1<(i=g?F(e,s):a[o])&&(e[i]=!(t[i]=s))}}else f=Te(f===t?f.splice(c,f.length):f),g?g(null,t,f,r):L.apply(t,f)})}function Se(e){for(var i,t,n,r=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,u=we(function(e){return e===i},s,!0),c=we(function(e){return-1<F(i,e)},s,!0),h=[function(e,t,n){var r=!o&&(n||t!==_)||((i=t).nodeType?u:c)(e,t,n);return i=null,r}];a<r;a++)if(t=w.relative[e[a].type])h=[we(_e(h),t)];else{if((t=w.filter[e[a].type].apply(null,e[a].matches))[C]){for(n=++a;n<r&&!w.relative[e[n].type];n++);return Ee(1<a&&_e(h),1<a&&be(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(H,"$1"),t,a<n&&Se(e.slice(a,n)),n<r&&Se(e=e.slice(n)),n<r&&be(e))}h.push(t)}return _e(h)}return ve.prototype=w.filters=w.pseudos,w.setFilters=new ve,d=ae.tokenize=function(e,t){var n,r,i,o,s,a,u,c=N[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],u=w.preFilter;s;){for(o in n&&!(r=K.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=Q.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(H," ")}),s=s.slice(n.length)),w.filter)!(r=Y[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):N(e,a).slice(0)},f=ae.compile=function(e,t){var n,m,g,v,b,r,i=[],o=[],s=D[e+" "];if(!s){for(n=(t=t||d(e)).length;n--;)(s=Se(t[n]))[C]?i.push(s):o.push(s);(s=D(e,(m=o,v=0<(g=i).length,b=0<m.length,r=function(e,t,n,r,i){var o,s,a,u=0,c="0",h=e&&[],l=[],f=_,p=e||b&&w.find.TAG("*",i),d=I+=null==f?1:Math.random()||.1,y=p.length;for(i&&(_=t===E||t||i);c!==y&&null!=(o=p[c]);c++){if(b&&o){for(s=0,t||o.ownerDocument===E||(T(o),n=!S);a=m[s++];)if(a(o,t||E,n)){r.push(o);break}i&&(I=d)}v&&((o=!a&&o)&&u--,e&&h.push(o))}if(u+=c,v&&c!==u){for(s=0;a=g[s++];)a(h,l,t,n);if(e){if(0<u)for(;c--;)h[c]||l[c]||(l[c]=O.call(r));l=Te(l)}L.apply(r,l),i&&!e&&0<l.length&&1<u+g.length&&ae.uniqueSort(r)}return i&&(I=d,_=f),h},v?ce(r):r))).selector=e}return s},y=ae.select=function(e,t,n,r){var i,o,s,a,u,c="function"==typeof e&&e,h=!r&&d(e=c.selector||e);if(n=n||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===t.nodeType&&S&&w.relative[o[1].type]){if(!(t=(w.find.ID(s.matches[0].replace(re,l),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Y.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((u=w.find[a])&&(r=u(s.matches[0].replace(re,l),ne.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&be(o)))return L.apply(n,r),n;break}}return(c||f(e,h))(r,t,!S,n,!t||ne.test(e)&&ge(t.parentNode)||t),n},p.sortStable=C.split("").sort(A).join("")===C,p.detectDuplicates=!!c,T(),p.sortDetached=he(function(e){return 1&e.compareDocumentPosition(E.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||le(q,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(E);C.find=d,C.expr=d.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=d.uniqueSort,C.text=d.getText,C.isXMLDoc=d.isXML,C.contains=d.contains,C.escapeSelector=d.escape;function T(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r}function I(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var x=C.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(e,n,r){return b(n)?C.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?C.grep(e,function(e){return e===n!==r}):"string"!=typeof n?C.grep(e,function(e){return-1<i.call(n,e)!==r}):C.filter(n,e,r)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<r;t++)if(C.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,i[t],n);return 1<r?C.uniqueSort(n):n},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&x.test(e)?C(e):e||[],!1).length}});var A,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||A,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:R.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),D.test(r[1])&&C.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=S.getElementById(r[2]))&&(this[0]=i,this.length=1),this}).prototype=C.fn,A=C(S);var O=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&C(e);if(!x.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(C(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(N(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},function(r,i){C.fn[r]=function(e,t){var n=C.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=C.filter(t,n)),1<this.length&&(P[r]||C.uniqueSort(n),O.test(r)&&n.reverse()),this.pushStack(n)}});var M=/[^\x20\t\r\n\f]+/g;function F(e){return e}function q(e){throw e}function j(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(r){var n;r="string"==typeof r?(n={},C.each(r.match(M)||[],function(e,t){n[t]=!0}),n):C.extend({},r);function i(){for(s=s||r.once,t=o=!0;u.length;c=-1)for(e=u.shift();++c<a.length;)!1===a[c].apply(e[0],e[1])&&r.stopOnFalse&&(c=a.length,e=!1);r.memory||(e=!1),o=!1,s&&(a=e?[]:"")}var o,e,t,s,a=[],u=[],c=-1,h={add:function(){return a&&(e&&!o&&(c=a.length-1,u.push(e)),function n(e){C.each(e,function(e,t){b(t)?r.unique&&h.has(t)||a.push(t):t&&t.length&&"string"!==_(t)&&n(t)})}(arguments),e&&!o&&i()),this},remove:function(){return C.each(arguments,function(e,t){for(var n;-1<(n=C.inArray(t,a,n));)a.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<C.inArray(e,a):0<a.length},empty:function(){return a=a&&[],this},disable:function(){return s=u=[],a=e="",this},disabled:function(){return!a},lock:function(){return s=u=[],e||o||(a=e=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),o||i()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!t}};return h},C.extend({Deferred:function(e){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var i=arguments;return C.Deferred(function(r){C.each(o,function(e,t){var n=b(i[t[4]])&&i[t[4]];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&b(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function c(i,o,s,a){return function(){function e(){var e,t;if(!(i<u)){if((e=s.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,b(t)?a?t.call(e,c(u,o,F,a),c(u,o,q,a)):(u++,t.call(e,c(u,o,F,a),c(u,o,q,a),c(u,o,F,o.notifyWith))):(s!==F&&(n=void 0,r=[e]),(a||o.resolveWith)(n,r))}}var n=this,r=arguments,t=a?e:function(){try{e()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(s!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(C.Deferred.getStackHook&&(t.stackTrace=C.Deferred.getStackHook()),E.setTimeout(t))}}return C.Deferred(function(e){o[0][3].add(c(0,e,b(r)?r:F,e.notifyWith)),o[1][3].add(c(0,e,b(t)?t:F)),o[2][3].add(c(0,e,b(n)?n:q))}).promise()},promise:function(e){return null!=e?C.extend(e,s):s}},a={};return C.each(o,function(e,t){var n=t[2],r=t[5];s[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t){return function(e){i[t]=this,o[t]=1<arguments.length?a.call(arguments):e,--n||s.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=a.call(arguments),s=C.Deferred();if(n<=1&&(j(e,s.done(t(r)).resolve,s.reject,!n),"pending"===s.state()||b(o[r]&&o[r].then)))return s.then();for(;r--;)j(o[r],t(r),s.reject);return s.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){E.console&&E.console.warn&&e&&U.test(e.name)&&E.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){E.setTimeout(function(){throw e})};var B=C.Deferred();function V(){S.removeEventListener("DOMContentLoaded",V),E.removeEventListener("load",V),C.ready()}C.fn.ready=function(e){return B.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0)!==e&&0<--C.readyWait||B.resolveWith(S,[C])}}),C.ready.then=B.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?E.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",V),E.addEventListener("load",V));var W=function(e,t,n,r,i,o,s){var a=0,u=e.length,c=null==n;if("object"===_(n))for(a in i=!0,n)W(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,b(r)||(s=!0),c&&(t=s?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(C(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):u?t(e[0],n):o},H=/^-ms-/,K=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function z(e){return e.replace(H,"ms-").replace(K,Q)}function G(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function X(){this.expando=C.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[z(t)]=n;else for(r in t)i[z(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][z(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(z):(t=z(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!C.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Y=new X,$=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}$.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return $.hasData(e)||Y.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),C.fn.extend({data:function(n,e){var t,r,i,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){$.set(this,n)}):W(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=$.get(o,n))||void 0!==(t=ee(o,n))?t:void 0;this.each(function(){$.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=$.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(r=s[t].name).indexOf("data-")&&(r=z(r.slice(5)),ee(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){$.remove(this,e)})}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,i=n.shift(),o=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){C.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:C.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),C.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===n?this:this.each(function(){var e=C.queue(this,t,n);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=C.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=Y.get(s[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=S.documentElement,oe=function(e){return C.contains(e.ownerDocument,e)},se={composed:!0};ie.getRootNode&&(oe=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});function ae(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===C.css(e,"display")}function ue(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i}function ce(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return C.css(e,t,"")},u=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),h=e.nodeType&&(C.cssNumber[t]||"px"!==c&&+u)&&ne.exec(C.css(e,t));if(h&&h[3]!==c){for(u/=2,c=c||h[3],h=+u||1;s--;)C.style(e,t,h+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),h/=o;h*=2,C.style(e,t,h+c),n=n||[]}return n&&(h=+h||+u||0,i=n[1]?h+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=h,r.end=i)),i}var he={};function le(e,t){for(var n,r,i,o,s,a,u=[],c=0,h=e.length;c<h;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(u[c]=Y.get(r,"display")||null,u[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(u[c]=(a=o=i=void 0,o=r.ownerDocument,s=r.nodeName,(a=he[s])||(i=o.body.appendChild(o.createElement(s)),a=C.css(i,"display"),i.parentNode.removeChild(i),"none"===a&&(a="block"),he[s]=a)))):"none"!==n&&(u[c]="none",Y.set(r,"display",n)));for(c=0;c<h;c++)null!=u[c]&&(e[c].style.display=u[c]);return e}C.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?C(this).show():C(this).hide()})}});var fe=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,de=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?C.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var ve,be,we=/<|&#?\w+;/;function _e(e,t,n,r,i){for(var o,s,a,u,c,h,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((o=e[p])||0===o)if("object"===_(o))C.merge(f,o.nodeType?[o]:o);else if(we.test(o)){for(s=s||l.appendChild(t.createElement("div")),a=(pe.exec(o)||["",""])[1].toLowerCase(),u=ye[a]||ye._default,s.innerHTML=u[1]+C.htmlPrefilter(o)+u[2],h=u[0];h--;)s=s.lastChild;C.merge(f,s.childNodes),(s=l.firstChild).textContent=""}else f.push(t.createTextNode(o));for(l.textContent="",p=0;o=f[p++];)if(r&&-1<C.inArray(o,r))i&&i.push(o);else if(c=oe(o),s=me(l.appendChild(o),"script"),c&&ge(s),n)for(h=0;o=s[h++];)de.test(o.type||"")&&n.push(o);return l}ve=S.createDocumentFragment().appendChild(S.createElement("div")),(be=S.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ve.appendChild(be),v.checkClone=ve.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ve.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ie(){return!1}function xe(e,t){return e===function(){try{return S.activeElement}catch(e){}}()==("focus"===t)}function Ne(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Ne(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ie;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return C().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),e.each(function(){C.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Y.set(e,i,!1),C.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(C.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:C.event.trigger(C.extend(r[0],C.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&C.event.add(e,i,Ce)}C.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=Y.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&C.find.matchesSelector(ie,i),n.guid||(n.guid=C.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(M)||[""]).length;c--;)p=y=(a=Se.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=C.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=C.event.special[p]||{},h=C.extend({type:p,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,r,d,s)||t.addEventListener&&t.addEventListener(p,s)),l.add&&(l.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),C.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=Y.hasData(e)&&Y.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(p=y=(a=Se.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=C.event.special[p]||{},f=u[p=(r?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)h=f[o],!i&&y!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||r&&r!==h.selector&&("**"!==r||!h.selector)||(f.splice(o,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(e,h));s&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,m.handle)||C.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)C.event.remove(e,p+t[c],n,r,!0);C.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=C.event.fix(e),u=new Array(arguments.length),c=(Y.get(this,"events")||{})[a.type]||[],h=C.event.special[a.type]||{};for(u[0]=a,t=1;t<arguments.length;t++)u[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(s=C.event.handlers.call(this,a,c),t=0;(i=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,o,s,a=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?-1<C(i,this).index(c):C.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<t.length&&a.push({elem:c,handlers:t.slice(u)}),a},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:b(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&N(t,"input")&&De(t,"click",Ce),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&N(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&N(t,"input")&&Y.get(t,"click")||N(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ee.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(e,t){C.event.special[e]={setup:function(){return De(this,e,xe),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){C.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),C.fn.extend({on:function(e,t,n,r){return Ne(this,e,t,n,r)},one:function(e,t,n,r){return Ne(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ie),this.each(function(){C.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,s,a,u,c;if(1===t.nodeType){if(Y.hasData(e)&&(o=Y.access(e),s=Y.set(t,o),c=o.events))for(i in delete s.handle,s.events={},c)for(n=0,r=c[i].length;n<r;n++)C.event.add(t,i,c[i][n]);$.hasData(e)&&(a=$.access(e),u=C.extend({},a),$.set(t,u))}}function qe(n,r,i,o){r=m.apply([],r);var e,t,s,a,u,c,h=0,l=n.length,f=l-1,p=r[0],d=b(p);if(d||1<l&&"string"==typeof p&&!v.checkClone&&Re.test(p))return n.each(function(e){var t=n.eq(e);d&&(r[0]=p.call(this,e,t.html())),qe(t,r,i,o)});if(l&&(t=(e=_e(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=C.map(me(e,"script"),Le)).length;h<l;h++)u=e,h!==f&&(u=C.clone(u,!0,!0),a&&C.merge(s,me(u,"script"))),i.call(n[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,C.map(s,Me),h=0;h<a;h++)u=s[h],de.test(u.type||"")&&!Y.access(u,"globalEval")&&C.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?C._evalUrl&&!u.noModule&&C._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):w(u.textContent.replace(Oe,""),u,c))}return n}function je(e,t,n){for(var r,i=t?C.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(me(r)),r.parentNode&&(n&&oe(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a,u,c,h=e.cloneNode(!0),l=oe(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=me(h),r=0,i=(o=me(e)).length;r<i;r++)a=o[r],"input"===(c=(u=s[r]).nodeName.toLowerCase())&&fe.test(a.type)?u.checked=a.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=a.defaultValue);if(t)if(n)for(o=o||me(e),s=s||me(h),r=0,i=o.length;r<i;r++)Fe(o[r],s[r]);else Fe(e,h);return 0<(s=me(h,"script")).length&&ge(s,!l&&me(e,"script")),h},cleanData:function(e){for(var t,n,r,i=C.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),C.fn.extend({detach:function(e){return je(this,e,!0)},remove:function(e){return je(this,e)},text:function(e){return W(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return qe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return qe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return qe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return qe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ye[(pe.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return qe(this,arguments,function(e){var t=this.parentNode;C.inArray(this,n)<0&&(C.cleanData(me(this)),t&&t.replaceChild(e,this))},n)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){C.fn[e]=function(e){for(var t,n=[],r=C(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),C(r[o])[s](t),u.apply(n,t.get());return this.pushStack(n)}});var Ue,Be,Ve,We,He,Ke,Qe,ze=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Ge=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=E),t.getComputedStyle(e)},Xe=new RegExp(re.join("|"),"i");function Ye(e,t,n){var r,i,o,s,a=e.style;return(n=n||Ge(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||oe(e)||(s=C.style(e,t)),!v.pixelBoxStyles()&&ze.test(s)&&Xe.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Je(){if(Qe){Ke.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Qe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(Ke).appendChild(Qe);var e=E.getComputedStyle(Qe);Ue="1%"!==e.top,He=12===Ze(e.marginLeft),Qe.style.right="60%",We=36===Ze(e.right),Be=36===Ze(e.width),Qe.style.position="absolute",Ve=12===Ze(Qe.offsetWidth/3),ie.removeChild(Ke),Qe=null}}function Ze(e){return Math.round(parseFloat(e))}Ke=S.createElement("div"),(Qe=S.createElement("div")).style&&(Qe.style.backgroundClip="content-box",Qe.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Qe.style.backgroundClip,C.extend(v,{boxSizingReliable:function(){return Je(),Be},pixelBoxStyles:function(){return Je(),We},pixelPosition:function(){return Je(),Ue},reliableMarginLeft:function(){return Je(),He},scrollboxSize:function(){return Je(),Ve}}));var et=["Webkit","Moz","ms"],tt=S.createElement("div").style,nt={};function rt(e){return C.cssProps[e]||nt[e]||(e in tt?e:nt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,ot=/^--/,st={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ut(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,i,o){var s="width"===t?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=C.css(e,n+re[s],!0,i)),r?("content"===n&&(u-=C.css(e,"padding"+re[s],!0,i)),"margin"!==n&&(u-=C.css(e,"border"+re[s]+"Width",!0,i))):(u+=C.css(e,"padding"+re[s],!0,i),"padding"!==n?u+=C.css(e,"border"+re[s]+"Width",!0,i):a+=C.css(e,"border"+re[s]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-a-.5))||0),u}function ht(e,t,n){var r=Ge(e),i=(!v.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),o=i,s=Ye(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||"auto"===s||!parseFloat(s)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===C.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+ct(e,t,n||(i?"border":"content"),o,r,s)+"px"}function lt(e,t,n,r,i){return new lt.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ye(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=z(t),u=ot.test(t),c=e.style;if(u||(t=rt(a)),s=C.cssHooks[t]||C.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:c[t];"string"==(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=ce(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(C.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,s,a=z(t);return ot.test(t)||(t=rt(a)),(s=C.cssHooks[t]||C.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=Ye(e,t,r)),"normal"===i&&t in at&&(i=at[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],function(e,u){C.cssHooks[u]={get:function(e,t,n){if(t)return!it.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ht(e,u,n):ue(e,st,function(){return ht(e,u,n)})},set:function(e,t,n){var r,i=Ge(e),o=!v.scrollboxSize()&&"absolute"===i.position,s=(o||n)&&"border-box"===C.css(e,"boxSizing",!1,i),a=n?ct(e,u,n,s,i):0;return s&&o&&(a-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-ct(e,u,"border",!1,i)-.5)),a&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=C.css(e,u)),ut(0,t,a)}}}),C.cssHooks.marginLeft=$e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(i,o){C.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(C.cssHooks[i+o].set=ut)}),C.fn.extend({css:function(e,t){return W(this,function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=Ge(e),i=t.length;s<i;s++)o[t[s]]=C.css(e,t[s],!1,r);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)},e,t,1<arguments.length)}}),((C.Tween=lt).prototype={constructor:lt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}}).init.prototype=lt.prototype,(lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=lt.prototype.init,C.fx.step={};var ft,pt,dt,yt,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function vt(){pt&&(!1===S.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(vt):E.setTimeout(vt,C.fx.interval),C.fx.tick())}function bt(){return E.setTimeout(function(){ft=void 0}),ft=Date.now()}function wt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function _t(e,t,n){for(var r,i=(Tt.tweeners[t]||[]).concat(Tt.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function Tt(o,e,t){var n,s,r=0,i=Tt.prefilters.length,a=C.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=ft||bt(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return a.notifyWith(o,[c,n,t]),n<1&&i?t:(i||a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:ft||bt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=C.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,e])):a.rejectWith(o,[c,e]),this}}),h=c.props;for(function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=z(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=C.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(h,c.opts.specialEasing);r<i;r++)if(n=Tt.prefilters[r].call(c,o,h,c.opts))return b(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return C.map(h,_t,c),b(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(u,{elem:o,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(Tt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=b(e)?(t=e,["*"]):e.match(M)).length;r<i;r++)n=e[r],Tt.tweeners[n]=Tt.tweeners[n]||[],Tt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,u,c,h,l="width"in t||"height"in t,f=this,p={},d=e.style,y=e.nodeType&&ae(e),m=Y.get(e,"fxshow");for(r in n.queue||(null==(s=C._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,C.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[r],mt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;y=!0}p[r]=m&&m[r]||C.style(e,r)}if((u=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(r in l&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=m&&m.display)&&(c=Y.get(e,"display")),"none"===(h=C.css(e,"display"))&&(c?h=c:(le([e],!0),c=e.style.display||c,h=C.css(e,"display"),le([e]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===C.css(e,"float")&&(u||(f.done(function(){d.display=c}),null==c&&(h=d.display,c="none"===h?"":h)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),u=!1,p)u||(m?"hidden"in m&&(y=m.hidden):m=Y.access(e,"fxshow",{display:c}),o&&(m.hidden=!y),y&&le([e],!0),f.done(function(){for(r in y||le([e]),Y.remove(e,"fxshow"),p)C.style(e,r,p[r])})),u=_t(y?m[r]:0,r,f),r in m||(m[r]=u.start,y&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?Tt.prefilters.unshift(e):Tt.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=Tt(this,C.extend({},t),s);(o||Y.get(this,"finish"))&&e.stop(!0)}var o=C.isEmptyObject(t),s=C.speed(e,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=C.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&gt.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||C.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=Y.get(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=C.timers,o=n?n.length:0;for(t.finish=!0,C.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,r){var i=C.fn[r];C.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(wt(r,!0),e,t,n)}}),C.each({slideDown:wt("show"),slideUp:wt("hide"),slideToggle:wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){C.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(ft=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),ft=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){pt||(pt=!0,vt())},C.fx.stop=function(){pt=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(r,e){return r=C.fx&&C.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=E.setTimeout(e,r);t.stop=function(){E.clearTimeout(n)}})},dt=S.createElement("input"),yt=S.createElement("select").appendChild(S.createElement("option")),dt.type="checkbox",v.checkOn=""!==dt.value,v.optSelected=yt.selected,(dt=S.createElement("input")).value="t",dt.type="radio",v.radioValue="t"===dt.value;var Et,St=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return W(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?Et:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Et={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var s=St[t]||C.find.attr;St[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=St[o],St[o]=r,r=null!=s(e,t,n)?o:null,St[o]=i),r}});var Ct=/^(?:input|select|textarea|button)$/i,It=/^(?:a|area)$/i;function xt(e){return(e.match(M)||[]).join(" ")}function Nt(e){return e.getAttribute&&e.getAttribute("class")||""}function Dt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}C.fn.extend({prop:function(e,t){return W(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||It.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(b(t))return this.each(function(e){C(this).addClass(t.call(this,e,Nt(this)))});if((e=Dt(t)).length)for(;n=this[u++];)if(i=Nt(n),r=1===n.nodeType&&" "+xt(i)+" "){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=xt(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(b(t))return this.each(function(e){C(this).removeClass(t.call(this,e,Nt(this)))});if(!arguments.length)return this.attr("class","");if((e=Dt(t)).length)for(;n=this[u++];)if(i=Nt(n),r=1===n.nodeType&&" "+xt(i)+" "){for(s=0;o=e[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=xt(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,t){var o=typeof i,s="string"==o||Array.isArray(i);return"boolean"==typeof t&&s?t?this.addClass(i):this.removeClass(i):b(i)?this.each(function(e){C(this).toggleClass(i.call(this,e,Nt(this),t),t)}):this.each(function(){var e,t,n,r;if(s)for(t=0,n=C(this),r=Dt(i);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=Nt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+xt(Nt(n))+" ").indexOf(t))return!0;return!1}});var kt=/\r/g;C.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=b(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,C(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(r=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(kt,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:xt(C.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=C(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=C.makeArray(t),s=i.length;s--;)((r=i[s]).selected=-1<C.inArray(C.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},v.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in E;function At(e){e.stopPropagation()}var Rt=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,n,r){var i,o,s,a,u,c,h,l,f=[n||S],p=g.call(e,"type")?e.type:e,d=g.call(e,"namespace")?e.namespace.split("."):[];if(o=l=s=n=n||S,3!==n.nodeType&&8!==n.nodeType&&!Rt.test(p+C.event.triggered)&&(-1<p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,(e=e[C.expando]?e:new C.Event(p,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[p]||{},r||!h.trigger||!1!==h.trigger.apply(n,t))){if(!r&&!h.noBubble&&!y(n)){for(a=h.delegateType||p,Rt.test(a+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(n.ownerDocument||S)&&f.push(s.defaultView||s.parentWindow||E)}for(i=0;(o=f[i++])&&!e.isPropagationStopped();)l=o,e.type=1<i?a:h.bindType||p,(c=(Y.get(o,"events")||{})[e.type]&&Y.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&G(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!G(n)||u&&b(n[p])&&!y(n)&&((s=n[u])&&(n[u]=null),C.event.triggered=p,e.isPropagationStopped()&&l.addEventListener(p,At),n[p](),e.isPropagationStopped()&&l.removeEventListener(p,At),C.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),v.focusin||C.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){C.event.simulate(r,e.target,C.event.fix(e))}C.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Ot=E.location,Pt=Date.now(),Lt=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var Mt=/\[\]$/,Ft=/\r?\n/g,qt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function Ut(n,e,r,i){var t;if(Array.isArray(e))C.each(e,function(e,t){r||Mt.test(n)?i(n,t):Ut(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==_(e))i(n,e);else for(t in e)Ut(n+"["+t+"]",e[t],r,i)}C.param=function(e,t){function n(e,t){var n=b(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)}var r,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){n(this.name,this.value)});else for(r in e)Ut(r,e[r],t,n);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&jt.test(this.nodeName)&&!qt.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:n.replace(Ft,"\r\n")}}).get()}});var Bt=/%20/g,Vt=/#.*$/,Wt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,zt={},Gt={},Xt="*/".concat("*"),Yt=S.createElement("a");function $t(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(M)||[];if(b(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Jt(t,i,o,s){var a={},u=t===Gt;function c(e){var r;return a[e]=!0,C.each(t[e]||[],function(e,t){var n=t(i,o,s);return"string"!=typeof n||u||a[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),r}return c(i.dataTypes[0])||!a["*"]&&c("*")}function Zt(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&C.extend(!0,e,r),e}Yt.href=Ot.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ot.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Zt(Zt(e,C.ajaxSettings),t):Zt(C.ajaxSettings,e)},ajaxPrefilter:$t(zt),ajaxTransport:$t(Gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,l,f,n,p,r,d,y,i,o,m=C.ajaxSetup({},t),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?C(g):C.event,b=C.Deferred(),w=C.Callbacks("once memory"),_=m.statusCode||{},s={},a={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(d){if(!n)for(n={};t=Ht.exec(f);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?f:null},setRequestHeader:function(e,t){return null==d&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==d&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)T.always(e[T.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||u;return h&&h.abort(t),c(0,t),this}};if(b.promise(T),m.url=((e||m.url||Ot.href)+"").replace(Qt,Ot.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(M)||[""],null==m.crossDomain){r=S.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=Yt.protocol+"//"+Yt.host!=r.protocol+"//"+r.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=C.param(m.data,m.traditional)),Jt(zt,m,t,T),d)return T;for(i in(y=C.event&&m.global)&&0==C.active++&&C.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Kt.test(m.type),l=m.url.replace(Vt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Bt,"+")):(o=m.url.slice(l.length),m.data&&(m.processData||"string"==typeof m.data)&&(l+=(Lt.test(l)?"&":"?")+m.data,delete m.data),!1===m.cache&&(l=l.replace(Wt,"$1"),o=(Lt.test(l)?"&":"?")+"_="+Pt+++o),m.url=l+o),m.ifModified&&(C.lastModified[l]&&T.setRequestHeader("If-Modified-Since",C.lastModified[l]),C.etag[l]&&T.setRequestHeader("If-None-Match",C.etag[l])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Xt+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(i,m.headers[i]);if(m.beforeSend&&(!1===m.beforeSend.call(g,T,m)||d))return T.abort();if(u="abort",w.add(m.complete),T.done(m.success),T.fail(m.error),h=Jt(Gt,m,t,T)){if(T.readyState=1,y&&v.trigger("ajaxSend",[T,m]),d)return T;m.async&&0<m.timeout&&(p=E.setTimeout(function(){T.abort("timeout")},m.timeout));try{d=!1,h.send(s,c)}catch(e){if(d)throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,n,r){var i,o,s,a,u,c=t;d||(d=!0,p&&E.clearTimeout(p),h=void 0,f=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(m,T,n)),a=function(e,t,n,r){var i,o,s,a,u,c={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=h.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=h.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(m,a,T,i),i?(m.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(C.lastModified[l]=u),(u=T.getResponseHeader("etag"))&&(C.etag[l]=u)),204===e||"HEAD"===m.type?c="nocontent":304===e?c="notmodified":(c=a.state,o=a.data,i=!(s=a.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",i?b.resolveWith(g,[o,c,T]):b.rejectWith(g,[T,c,s]),T.statusCode(_),_=void 0,y&&v.trigger(i?"ajaxSuccess":"ajaxError",[T,m,i?o:s]),w.fireWith(g,[T,c]),y&&(v.trigger("ajaxComplete",[T,m]),--C.active||C.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,i){C[i]=function(e,t,n,r){return b(t)&&(r=r||n,n=t,t=void 0),C.ajax(C.extend({url:e,type:i,dataType:r,data:t,success:n},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e,t){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return b(n)?this.each(function(e){C(this).wrapInner(n.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=b(t);return this.each(function(e){C(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var en={0:200,1223:204},tn=C.ajaxSettings.xhr();v.cors=!!tn&&"withCredentials"in tn,v.ajax=tn=!!tn,C.ajaxTransport(function(i){var o,s;if(v.cors||tn&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(en[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&E.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=C("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(r[0])},abort:function(){i&&i()}}});var nn,rn=[],on=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=rn.pop()||C.expando+"_"+Pt++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(on.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(on,"$1"+r):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=E[r],E[r]=function(){o=arguments},n.always(function(){void 0===i?C(E).removeProp(r):E[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,rn.push(r)),o&&b(i)&&i(o[0]),o=i=void 0}),"script"}),v.createHTMLDocument=((nn=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===nn.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(r)):t=S),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=_e([e],t,o),o&&o.length&&C(o).remove(),C.merge([],i.childNodes)));var r,i,o},C.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return-1<a&&(r=xt(e.slice(a)),e=e.slice(0,a)),b(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,c=C.css(e,"position"),h=C(e),l={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=C.css(e,"top"),u=C.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+u).indexOf("auto")?(s=(r=h.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(u)||0),b(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(l.top=t.top-a.top+s),null!=t.left&&(l.left=t.left-a.left+i),"using"in t?t.using.call(e,l):h.css(l)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),i.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-C.css(r,"marginTop",!0),left:t.left-i.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ie})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;C.fn[t]=function(e){return W(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),C.each(["top","left"],function(e,n){C.cssHooks[n]=$e(v.pixelPosition,function(e,t){if(t)return t=Ye(e,n),ze.test(t)?C(e).position()[n]+"px":t})}),C.each({Height:"height",Width:"width"},function(s,a){C.each({padding:"inner"+s,content:a,"":"outer"+s},function(r,o){C.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return W(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+s],r["scroll"+s],e.body["offset"+s],r["offset"+s],r["client"+s])):void 0===n?C.css(e,t,i):C.style(e,t,n,i)},a,n?e:void 0,n)}})}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){C.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),C.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||C.guid++,i},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=N,C.isFunction=b,C.isWindow=y,C.camelCase=z,C.type=_,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var sn=E.jQuery,an=E.$;return C.noConflict=function(e){return E.$===C&&(E.$=an),e&&E.jQuery===C&&(E.jQuery=sn),C},e||(E.jQuery=E.$=C),C}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.firebase=t()}(this,function(){"use strict";!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,i="ArrayBuffer"in e;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<o.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(e,t){e=l(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=f(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),p(n)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},d.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},T.error=function(){var e=new T(null,{status:0,statusText:""});return e.type="error",e};var h=[301,302,303,307,308];T.redirect=function(e,t){if(-1===h.indexOf(t))throw new RangeError("Invalid status code");return new T(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=w,e.Response=T,e.fetch=function(n,i){return new Promise(function(r,e){var t=new w(n,i),o=new XMLHttpRequest;o.onload=function(){var e,i,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",i=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();i.append(n,r)}}),i)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new T(n,t))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.open(t.method,t.url,!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0}function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function g(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(s&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&s&&a(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=y(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n,r,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function T(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function s(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?r.onFulfilled:r.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(e){return void u(r.promise,e)}a(r.promise,t)}else(1===n._state?a:u)(r.promise,n._value)})):n._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}var r,i}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(r,e){var t=new this.constructor(i);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof r?r:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(r,e,t)),t},o.prototype.finally=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})},o.all=function(t){return new o(function(r,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return r([]);var s=o.length;function a(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){a(t,e)},i)}o[t]=e,0==--s&&r(o)}catch(t){i(t)}}for(var e=0;e<o.length;e++)a(e,o[e])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(i){return new o(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},o._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:e;r.Promise||(r.Promise=o);function l(e){if(!w(e))throw TypeError(e+" is not an object!");return e}function f(e){try{return!!e()}catch(e){return!0}}function p(e){return S?E.createElement(e):{}}function d(e,t){if(!w(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!w(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!w(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!w(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function T(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function y(e,t){return D.call(e,t)}function m(e){return"Symbol(".concat(void 0===e?"":e,")_",(++k+A).toString(36))}function b(r,i,e){if(function(){if("function"!=typeof r)throw TypeError(r+" is not a function!")}(),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}var g=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),v=t(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),w=(v.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),_=!f(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),E=g.document,S=w(E)&&w(E.createElement),C=!_&&!f(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),I=Object.defineProperty,x={f:_?Object.defineProperty:function(e,t,n){if(l(e),t=d(t,!0),l(n),C)try{return I(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},N=_?function(e,t,n){return x.f(e,t,T(1,n))}:function(e,t,n){return e[t]=n,e},D={}.hasOwnProperty,k=0,A=Math.random(),R=t(function(e){var o=m("src"),t=Function.toString,s=(""+t).split("toString");v.inspectSource=function(e){return t.call(e)},(e.exports=function(e,t,n,r){var i="function"==typeof n;i&&(y(n,"name")||N(n,"name",t)),e[t]!==n&&(i&&(y(n,o)||N(n,o,e[t]?""+e[t]:s.join(String(t)))),e===g?e[t]=n:r?e[t]?e[t]=n:N(e,t,n):(delete e[t],N(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||t.call(this)})}),O=function(e,t,n){var r,i,o,s,a=e&O.F,u=e&O.G,c=e&O.S,h=e&O.P,l=e&O.B,f=u?g:c?g[t]||(g[t]={}):(g[t]||{}).prototype,p=u?v:v[t]||(v[t]={}),d=p.prototype||(p.prototype={});for(r in u&&(n=t),n)o=((i=!a&&f&&void 0!==f[r])?f:n)[r],s=l&&i?b(o,g):h&&"function"==typeof o?b(Function.call,o):o,f&&R(f,r,o,e&O.U),p[r]!=o&&N(p,r,s),h&&d[r]!=o&&(d[r]=o)};g.core=v,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;function P(e){return W.call(e).slice(8,-1)}function L(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}function M(e){return Object(L(e))}function F(e){return isNaN(e=+e)?0:(0<e?Q:K)(e)}function q(e){return 0<e?z(F(e),9007199254740991):0}function j(e){return X[e]||(X[e]={})}function U(e,t){return G(n=e)&&("function"!=typeof(r=n.constructor)||r!==Array&&!G(r.prototype)||(r=void 0),w(r)&&null===(r=r[$])&&(r=void 0)),new(void 0===r?Array:r)(t);var n,r}function B(l,e){var f=1==l,p=2==l,d=3==l,y=4==l,m=6==l,g=5==l||m,v=e||U;return function(e,t,n){for(var r,i,o=M(e),s=H(o),a=b(t,n,3),u=q(s.length),c=0,h=f?v(e,u):p?v(e,0):void 0;c<u;c++)if((g||c in s)&&(i=a(r=s[c],c,o),l))if(f)h[c]=i;else if(i)switch(l){case 3:return!0;case 5:return r;case 6:return c;case 2:h.push(r)}else if(y)return!1;return m?-1:d||y?y:h}}var V=O,W={}.toString,H=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==P(e)?e.split(""):Object(e)},K=Math.ceil,Q=Math.floor,z=Math.min,G=Array.isArray||function(e){return"Array"==P(e)},X=g["__core-js_shared__"]||(g["__core-js_shared__"]={}),Y=t(function(e){var t=j("wks"),n=g.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:m)("Symbol."+e))}).store=t}),$=Y("species"),J=Y("unscopables"),Z=Array.prototype;null==Z[J]&&N(Z,J,{});function ee(e){Z[J][e]=!0}var te=B(5),ne=!0;"find"in[]&&Array(1).find(function(){ne=!1}),V(V.P+V.F*ne,"Array",{find:function(e){return te(this,e,1<arguments.length?arguments[1]:void 0)}}),ee("find"),v.Array.find;var re=B(6),ie=!0;"findIndex"in[]&&Array(1).findIndex(function(){ie=!1}),V(V.P+V.F*ie,"Array",{findIndex:function(e){return re(this,e,1<arguments.length?arguments[1]:void 0)}}),ee("findIndex"),v.Array.findIndex;function oe(e){return H(L(e))}function se(e){return he[e]||(he[e]=m(e))}function ae(e,t){var n,r=oe(e),i=0,o=[];for(n in r)n!=fe&&y(r,n)&&o.push(n);for(;t.length>i;)y(r,n=t[i++])&&(~le(o,n)||o.push(n));return o}var ue=Math.max,ce=Math.min,he=j("keys"),le=function(e,t,n){var r,i,o=oe(e),s=q(o.length),a=(i=s,(r=F(r=n))<0?ue(r+i,0):ce(r,i));for(0;a<s;a++)if(a in o&&o[a]===t)return a||0;return-1},fe=se("IE_PROTO"),pe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),de=Object.keys||function(e){return ae(e,pe)},ye={f:Object.getOwnPropertySymbols},me={f:{}.propertyIsEnumerable},ge=Object.assign,ve=!ge||f(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=ge({},e)[n]||Object.keys(ge({},t)).join("")!=r})?function(e,t){for(var n=M(e),r=arguments.length,i=1,o=ye.f,s=me.f;i<r;)for(var a,u=H(arguments[i++]),c=o?de(u).concat(o(u)):de(u),h=c.length,l=0;l<h;)s.call(u,a=c[l++])&&(n[a]=u[a]);return n}:ge;V(V.S+V.F,"Object",{assign:ve}),v.Object.assign;var be=Y("match"),we=Y("match"),_e="".startsWith;V(V.P+V.F*function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[we]=!1,!"/./"[t](n)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(e){var t=function(e,t,n){if(w(r=t)&&(void 0!==(i=r[be])?i:"RegExp"==P(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(L(e))}(this,e,"startsWith"),n=q(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return _e?_e.call(t,r,n):t.slice(n,n+r.length)===r}}),v.String.startsWith,V(V.P,"String",{repeat:function(e){var t=String(L(this)),n="",r=F(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}}),v.String.repeat;function Te(e,t,n){e&&!y(e=n?e:e.prototype,Oe)&&Re(e,Oe,{configurable:!0,value:t})}function Ee(e){var t=v.Symbol||(v.Symbol=g.Symbol||{});"_"==e.charAt(0)||e in t||Le(t,e,{value:Pe.f(e)})}function Se(){}function Ce(e){var t=at[e]=Be(et.prototype);return t._k=e,t}function Ie(e,t){l(e);for(var n,r=function(e){var t=de(e),n=ye.f;if(n)for(var r,i=n(e),o=me.f,s=0;i.length>s;)o.call(e,r=i[s++])&&t.push(r);return t}(t=oe(t)),i=0,o=r.length;i<o;)yt(e,n=r[i++],t[n]);return e}function xe(e){var t=ot.call(this,e=d(e,!0));return!(this===ct&&y(at,e)&&!y(ut,e))&&(!(t||!y(this,e)||!y(at,e)||y(this,rt)&&this[rt][e])||t)}function Ne(e,t){if(e=oe(e),t=d(t,!0),e!==ct||!y(at,t)||y(ut,t)){var n=$e(e,t);return!n||!y(at,t)||y(e,rt)&&e[rt][t]||(n.enumerable=!0),n}}function De(e){for(var t,n=Ze(oe(e)),r=[],i=0;n.length>i;)y(at,t=n[i++])||t==rt||t==Ye||r.push(t);return r}function ke(e){for(var t,n=e===ct,r=Ze(n?ut:oe(e)),i=[],o=0;r.length>o;)!y(at,t=r[o++])||n&&!y(ct,t)||i.push(at[t]);return i}var Ae=t(function(e){function n(e){t(e,r,{value:{i:"O"+ ++i,w:{}}})}var r=m("meta"),t=x.f,i=0,o=Object.isExtensible||function(){return!0},s=!f(function(){return o(Object.preventExtensions({}))}),a=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!w(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!y(e,r)){if(!o(e))return"F";if(!t)return"E";n(e)}return e[r].i},getWeak:function(e,t){if(!y(e,r)){if(!o(e))return!0;if(!t)return!1;n(e)}return e[r].w},onFreeze:function(e){return s&&a.NEED&&o(e)&&!y(e,r)&&n(e),e}}}),Re=(Ae.KEY,Ae.NEED,Ae.fastKey,Ae.getWeak,Ae.onFreeze,x.f),Oe=Y("toStringTag"),Pe={f:Y},Le=x.f,Me=_?Object.defineProperties:function(e,t){l(e);for(var n,r=de(t),i=r.length,o=0;o<i;)x.f(e,n=r[o++],t[n]);return e},Fe=g.document,qe=Fe&&Fe.documentElement,je=se("IE_PROTO"),Ue=function(){var e,t=p("iframe"),n=pe.length;for(t.style.display="none",qe.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ue=e.F;n--;)delete Ue.prototype[pe[n]];return Ue()},Be=Object.create||function(e,t){var n;return null!==e?(Se.prototype=l(e),n=new Se,Se.prototype=null,n[je]=e):n=Ue(),void 0===t?n:Me(n,t)},Ve=pe.concat("length","prototype"),We={f:Object.getOwnPropertyNames||function(e){return ae(e,Ve)}},He=We.f,Ke={}.toString,Qe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ze={f:function(e){return Qe&&"[object Window]"==Ke.call(e)?function(e){try{return He(e)}catch(e){return Qe.slice()}}(e):He(oe(e))}},Ge=Object.getOwnPropertyDescriptor,Xe={f:_?Ge:function(e,t){if(e=oe(e),t=d(t,!0),C)try{return Ge(e,t)}catch(e){}if(y(e,t))return T(!me.f.call(e,t),e[t])}},Ye=Ae.KEY,$e=Xe.f,Je=x.f,Ze=ze.f,et=g.Symbol,tt=g.JSON,nt=tt&&tt.stringify,rt=Y("_hidden"),it=Y("toPrimitive"),ot={}.propertyIsEnumerable,st=j("symbol-registry"),at=j("symbols"),ut=j("op-symbols"),ct=Object.prototype,ht="function"==typeof et,lt=g.QObject,ft=!lt||!lt.prototype||!lt.prototype.findChild,pt=_&&f(function(){return 7!=Be(Je({},"a",{get:function(){return Je(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=$e(ct,t);r&&delete ct[t],Je(e,t,n),r&&e!==ct&&Je(ct,t,r)}:Je,dt=ht&&"symbol"==typeof et.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof et},yt=function(e,t,n){return e===ct&&yt(ut,t,n),l(e),t=d(t,!0),l(n),y(at,t)?(n.enumerable?(y(e,rt)&&e[rt][t]&&(e[rt][t]=!1),n=Be(n,{enumerable:T(0,!1)})):(y(e,rt)||Je(e,rt,T(1,{})),e[rt][t]=!0),pt(e,t,n)):Je(e,t,n)};ht||(R((et=function(){if(this instanceof et)throw TypeError("Symbol is not a constructor!");var t=m(0<arguments.length?arguments[0]:void 0),n=function(e){this===ct&&n.call(ut,e),y(this,rt)&&y(this[rt],t)&&(this[rt][t]=!1),pt(this,t,T(1,e))};return _&&ft&&pt(ct,t,{configurable:!0,set:n}),Ce(t)}).prototype,"toString",function(){return this._k}),Xe.f=Ne,x.f=yt,We.f=ze.f=De,me.f=xe,ye.f=ke,_&&R(ct,"propertyIsEnumerable",xe,!0),Pe.f=function(e){return Ce(Y(e))}),V(V.G+V.W+V.F*!ht,{Symbol:et});for(var mt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),gt=0;mt.length>gt;)Y(mt[gt++]);for(var vt=de(Y.store),bt=0;vt.length>bt;)Ee(vt[bt++]);V(V.S+V.F*!ht,"Symbol",{for:function(e){return y(st,e+="")?st[e]:st[e]=et(e)},keyFor:function(e){if(!dt(e))throw TypeError(e+" is not a symbol!");for(var t in st)if(st[t]===e)return t},useSetter:function(){ft=!0},useSimple:function(){ft=!1}}),V(V.S+V.F*!ht,"Object",{create:function(e,t){return void 0===t?Be(e):Ie(Be(e),t)},defineProperty:yt,defineProperties:Ie,getOwnPropertyDescriptor:Ne,getOwnPropertyNames:De,getOwnPropertySymbols:ke}),tt&&V(V.S+V.F*(!ht||f(function(){var e=et();return"[null]"!=nt([e])||"{}"!=nt({a:e})||"{}"!=nt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=t=r[1],(w(t)||void 0!==e)&&!dt(e))return G(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!dt(t))return t}),r[1]=t,nt.apply(tt,r)}}),et.prototype[it]||N(et.prototype,it,et.prototype.valueOf),Te(et,"Symbol"),Te(Math,"Math",!0),Te(g.JSON,"JSON",!0);var wt=Y("toStringTag"),_t="Arguments"==P(function(){return arguments}()),Tt={};Tt[Y("toStringTag")]="z",Tt+""!="[object z]"&&R(Object.prototype,"toString",function(){return"[object "+(void 0===this?"Undefined":null===this?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(this),wt))?t:_t?P(e):"Object"==(n=P(e))&&"function"==typeof e.callee?"Arguments":n)+"]";var e,t,n},!0),Ee("asyncIterator"),Ee("observable"),v.Symbol;var Et={},St={};N(St,Y("iterator"),function(){return this});function Ct(){return this}function It(e,t,n,r,i,o,s){var a,u,c;function h(e){if(!At&&e in g)return g[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}}u=t,c=r,(a=n).prototype=Be(St,{next:T(1,c)}),Te(a,u+" Iterator");var l,f,p,d=t+" Iterator",y="values"==i,m=!1,g=e.prototype,v=g[kt]||g["@@iterator"]||i&&g[i],b=v||h(i),w=i?y?h("entries"):b:void 0,_="Array"==t&&g.entries||v;if(_&&(p=Dt(_.call(new e)))!==Object.prototype&&p.next&&(Te(p,d,!0),"function"!=typeof p[kt]&&N(p,kt,Ct)),y&&v&&"values"!==v.name&&(m=!0,b=function(){return v.call(this)}),!At&&!m&&g[kt]||N(g,kt,b),Et[t]=b,Et[d]=Ct,i)if(l={values:y?b:h("values"),keys:o?b:h("keys"),entries:w},s)for(f in l)f in g||R(g,f,l[f]);else V(V.P+V.F*(At||m),t,l);return l}var xt=se("IE_PROTO"),Nt=Object.prototype,Dt=Object.getPrototypeOf||function(e){return e=M(e),y(e,xt)?e[xt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Nt:null},kt=Y("iterator"),At=!([].keys&&"next"in[].keys()),Rt=function(e,t){var n,r,i=String(L(e)),o=F(t),s=i.length;return o<0||s<=o?"":(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?i.charAt(o):i.slice(o,o+2)};It(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Rt(t,n),this._i+=e.length,{value:e,done:!1})});function Ot(e,t){return{value:t,done:!!e}}var Pt=It(Array,"Array",function(e,t){this._t=oe(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Ot(1)):Ot(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");Et.Arguments=Et.Array,ee("keys"),ee("values"),ee("entries");for(var Lt=Y("iterator"),Mt=Y("toStringTag"),Ft=Et.Array,qt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},jt=de(qt),Ut=0;Ut<jt.length;Ut++){var Bt,Vt=jt[Ut],Wt=qt[Vt],Ht=g[Vt],Kt=Ht&&Ht.prototype;if(Kt&&(Kt[Lt]||N(Kt,Lt,Ft),Kt[Mt]||N(Kt,Mt,Vt),Et[Vt]=Ft,Wt))for(Bt in Pt)Kt[Bt]||R(Kt,Bt,Pt[Bt],!0)}Pe.f("iterator");var Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function zt(e,t){function n(){this.constructor=e}Qt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function Xt(o,s,a,u){return new(a=a||Promise)(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,s||[])).next())})}function Yt(n,r){var i,o,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(o,t[1])).done)return s;switch(o=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function $t(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function Jt(e){try{return tn.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var Zt=function(e,t){if(!e)throw en(t)},en=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},tn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($t(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!=a){var h=s<<4&240|a>>2;if(r.push(h),64!=u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function nn(e){return rn(void 0,e)}function rn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=rn(e[n],t[n]));return e}function on(e,t,n){e[t]=n}function sn(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}var un=(fn.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},fn),cn="FirebaseError",hn=Error.captureStackTrace,ln=function(e,t){if(this.code=e,this.message=t,hn)hn(this,pn.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=cn,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};function fn(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}ln.prototype=Object.create(Error.prototype),(ln.prototype.constructor=ln).prototype.name=cn;var pn=(dn.prototype.create=function(e,r){void 0===r&&(r={});var t,n=this.errors[e],i=this.service+"/"+e;t=void 0===n?"Error":n.replace(this.pattern,function(e,t){var n=r[t];return void 0!==n?n.toString():"<"+t+"?>"}),t=this.serviceName+": "+t+" ("+i+").";var o=new ln(i,t);for(var s in r)r.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=r[s]);return o},dn);function dn(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}function yn(e){return JSON.parse(e)}function mn(e){return JSON.stringify(e)}function gn(e){var t={},n={},r={},i="";try{var o=e.split(".");t=yn(Jt(o[0])||""),n=yn(Jt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}function vn(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function bn(e){return n={},xn(e,function(e,t){n[e]=t}),n;var n}function wn(e){for(var t in e)return!1;return!0}function _n(e){var t=0;for(var n in e)t++;return t}function Tn(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r}function En(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r}function Sn(e){for(var t in e)return t}var Cn,In=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},xn=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},Nn=(zt(Dn,Cn=function(){this.blockSize=-1}),Dn.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Dn.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Dn.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},Dn.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},Dn);function Dn(){var e=Cn.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var t=1;t<e.blockSize;++t)e.pad_[t]=0;return e.reset(),e}function kn(e,t){var n=new An(e,t);return n.subscribe.bind(n)}var An=(Rn.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},Rn.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},Rn.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},Rn.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e){if("object"==typeof e&&null!==e)for(var t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return 1}}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=On),void 0===r.error&&(r.error=On),void 0===r.complete&&(r.complete=On);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},Rn.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Rn.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},Rn.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},Rn.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},Rn);function Rn(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function On(){}function Pn(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ln(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+(r+" argument ")}function Mn(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ln(e,t,r)+"must be a valid function.")}function Fn(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ln(e,t,r)+"must be a valid context object.")}function qn(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t}function jn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Un="[DEFAULT]",Bn=[],Vn=(Object.defineProperty(Wn.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Wn.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Wn.prototype.delete=function(){var r=this;return new Promise(function(e){r.checkDestroyed_(),e()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(t){Object.keys(r.services_[t]).forEach(function(e){n.push(r.services_[t][e])})}),Promise.all(n.map(function(e){return e.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},Wn.prototype._getService=function(e,t){if(void 0===t&&(t=Un),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==Un?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},Wn.prototype.extendApp=function(e){var t=this;rn(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(Bn.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),Bn=[])},Wn.prototype.checkDestroyed_=function(){this.isDeleted_&&Hn("app-deleted",{name:this.name_})},Wn);function Wn(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=nn(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){Bn.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(t){Bn=Bn.filter(function(e){return e!==t})}}}function Hn(e,t){throw zn.create(e,t)}Vn.prototype.name&&Vn.prototype.options||Vn.prototype.delete||console.log("dc");var Kn,Qn,zn=new pn("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),fh=function e(){var o={},s={},a={},u={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={}),"object"==typeof t&&null!==t||(t={name:t});var n=t;void 0===n.name&&(n.name=Un);var r=n.name;"string"==typeof r&&r||Hn("bad-app-name",{name:r+""}),jn(o,r)&&Hn("duplicate-app",{name:r});var i=new Vn(e,n,u);return l(o[r]=i,"create"),i},app:c,apps:null,Promise:Promise,SDK_VERSION:"5.8.3",INTERNAL:{registerService:function(n,e,t,r,i){s[n]&&Hn("duplicate-service",{name:n}),s[n]=e,r&&(a[n]=r,h().forEach(function(e){r("create",e)}));function o(e){return void 0===e&&(e=c()),"function"!=typeof e[n]&&Hn("invalid-app-argument",{name:n}),e[n]()}return void 0!==t&&rn(o,t),u[n]=o,Vn.prototype[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,n).apply(this,i?e:[])},o},createFirebaseNamespace:e,extendNamespace:function(e){rn(u,e)},createSubscribe:kn,ErrorFactory:pn,removeApp:function(e){l(o[e],"delete"),delete o[e]},factories:s,useAsService:i,Promise:Promise,deepExtend:rn}};function c(e){return jn(o,e=e||Un)||Hn("no-app",{name:e}),o[e]}function h(){return Object.keys(o).map(function(e){return o[e]})}function l(n,r){Object.keys(s).forEach(function(e){var t=i(n,e);null!==t&&a[t]&&a[t](r,n)})}function i(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}return on(u,"default",u),Object.defineProperty(u,"apps",{get:h}),on(c,"App",Vn),u}();(function(){var e,u=u||{},h=this;function c(e){return"string"==typeof e}function n(e){return"boolean"==typeof e}function o(){}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function r(e){return null===e}function l(e){return"array"==a(e)}function f(e){var t=a(e);return"array"==t||"object"==t&&"number"==typeof e.length}function s(e){return"function"==a(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var i="closure_uid_"+(1e9*Math.random()>>>0),d=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function m(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function g(e,t,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function v(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function t(e,o){function t(){}t.prototype=o.prototype,e.ob=o.prototype,e.prototype=new t,(e.prototype.constructor=e).ed=function(e,t,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[t].apply(e,r)}}function w(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0}function _(e){if(e)try{return e.$goog_Thenable}catch(e){return}}function T(e){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function E(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");T.call(this,n+e[r])}function S(e,t){throw new E("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function C(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function I(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function x(){this.b=this.a=null}t(T,Error),T.prototype.name="CustomError",t(E,T),E.prototype.name="AssertionError",C.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var N=new C(function(){return new D},function(e){e.reset()});function D(){this.next=this.b=this.a=null}x.prototype.add=function(e,t){var n=N.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},D.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},D.prototype.reset=function(){this.next=this.b=this.a=null};var k=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(c(e))return c(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},A=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=c(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},R=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=c(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},O=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function P(e,t){return 0<=k(e,t)}function L(e,t){var n;return(n=0<=(t=k(e,t)))&&Array.prototype.splice.call(e,t,1),n}function M(n,r){!function(e,t){var n=e.length,r=c(e)?e.split(""):e;for(--n;0<=n;--n)n in r&&t.call(void 0,r[n],n,e)}(n,function(e,t){r.call(void 0,e,t,n)&&Array.prototype.splice.call(n,t,1).length})}function F(e){return Array.prototype.concat.apply([],arguments)}function q(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function j(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var U=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function B(e){return X.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(W,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(H,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(K,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(Q,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(z,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(G,"&#0;"))),e}var V,W=/&/g,H=/</g,K=/>/g,Q=/"/g,z=/'/g,G=/\x00/g,X=/[\x00&<>"']/;function Y(e,t){return-1!=e.indexOf(t)}function $(e,t){return e<t?-1:t<e?1:0}e:{var J=h.navigator;if(J){var Z=J.userAgent;if(Z){V=Z;break e}}V=""}function ee(e){return Y(V,e)}function te(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ne(e){for(var t in e)return;return 1}function re(e){var t,n={};for(t in e)n[t]=e[t];return n}var ie,oe,se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<se.length;o++)n=se[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ue(e){h.setTimeout(function(){throw e},0)}function ce(e,t){oe||function(){if(h.Promise&&h.Promise.resolve){var e=h.Promise.resolve(void 0);oe=function(){e.then(fe)}}else oe=function(){var e=fe;!s(h.setImmediate)||h.Window&&h.Window.prototype&&!ee("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(ie=ie||function(){var e=h.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ee("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=g(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||ee("Trident")||ee("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){h.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).wb;n.wb=null,e()}},function(e){r.next={wb:e},r=r.next,t.port2.postMessage(0)}}())(e):h.setImmediate(e)}}(),he||(oe(),he=!0),le.add(e,t)}var he=!1,le=new x;function fe(){for(var e;n=t=void 0,n=null,(t=le).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){ue(e)}I(N,e)}var t,n;he=!1}function pe(e,t){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=o)try{var n=this;e.call(t,function(e){Ie(n,ye,e)},function(e){if(!(e instanceof Oe))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Ie(n,me,e)})}catch(e){Ie(this,me,e)}}var de=0,ye=2,me=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ve=new C(function(){return new ge},function(e){e.reset()});function be(e,t,n){var r=ve.get();return r.g=e,r.b=t,r.f=n,r}function we(e){if(e instanceof pe)return e;var t=new pe(o);return Ie(t,ye,e),t}function _e(n){return new pe(function(e,t){t(n)})}function Te(e,t,n){xe(e,t,n,null)||ce(v(t,e))}function Ee(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var e=function(e,t,n){i--,o[e]=t?{Db:!0,value:n}:{Db:!1,reason:n},0==i&&r(o)},t=0;t<n.length;t++)Te(n[t],v(e,t,!0),v(e,t,!1));else r(o)})}function Se(e,t){e.b||e.a!=ye&&e.a!=me||Ne(e),e.f?e.f.next=t:e.b=t,e.f=t}function Ce(e,i,o,s){var t=be(null,null,null);return t.a=new pe(function(n,r){t.g=i?function(e){try{var t=i.call(s,e);n(t)}catch(e){r(e)}}:n,t.b=o?function(e){try{var t=o.call(s,e);void 0===t&&e instanceof Oe?r(e):n(t)}catch(e){r(e)}}:r}),Se(t.a.c=e,t),t.a}function Ie(e,t,n){var r,i;e.a==de&&(e===n&&(t=me,n=new TypeError("Promise cannot resolve to itself")),e.a=1,xe(n,e.Nc,e.Oc,e)||(e.i=n,e.a=t,e.c=null,Ne(e),t!=me||n instanceof Oe||(i=n,(r=e).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function xe(e,t,n,r){if(e instanceof pe)return Se(e,be(t||o,n||null,r)),1;if(_(e))return e.then(t,n,r),1;if(p(e))try{var i=e.then;if(s(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}var s=!1;try{t.call(e,function(e){s||(s=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),1}catch(e){return n.call(r,e),1}}function Ne(e){e.h||(e.h=!0,ce(e.Yb,e))}function De(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ke(e,t,n,r){if(n==me&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ae(t,n,r);else try{t.c?t.g.call(t.f):Ae(t,n,r)}catch(e){Re.call(null,e)}I(ve,t)}function Ae(e,t,n){t==ye?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}pe.prototype.then=function(e,t,n){return Ce(this,s(e)?e:null,s(t)?t:null,n)},w(pe),(e=pe.prototype).ia=function(e,t){return(e=be(e,e,t)).c=!0,Se(this,e),this},e.s=function(e,t){return Ce(this,null,e,t)},e.cancel=function(e){this.a==de&&ce(function(){!function e(t,n){if(t.a==de)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==t&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?e(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):De(r),ke(r,o,me,n)))}t.c=null}else Ie(t,me,n)}(this,new Oe(e))},this)},e.Nc=function(e){this.a=de,Ie(this,ye,e)},e.Oc=function(e){this.a=de,Ie(this,me,e)},e.Yb=function(){for(var e;e=De(this);)ke(this,e,this.a,this.i);this.h=!1};var Re=ue;function Oe(e){T.call(this,e)}function Pe(){0!=Le&&(Me[this[i]||(this[i]=++d)]=this),this.qa=this.qa,this.ja=this.ja}t(Oe,T);var Le=0,Me={};function Fe(e){if(!e.qa&&(e.qa=!0,e.va(),0!=Le)){var t=e[i]||(e[i]=++d);if(0!=Le&&e.ja&&0<e.ja.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Me[t]}}function qe(e){return qe[" "](e),e}Pe.prototype.qa=!(Oe.prototype.name="cancel"),Pe.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},qe[" "]=o;var je,Ue,Be=ee("Opera"),Ve=ee("Trident")||ee("MSIE"),We=ee("Edge"),He=We||Ve,Ke=ee("Gecko")&&!(Y(V.toLowerCase(),"webkit")&&!ee("Edge"))&&!(ee("Trident")||ee("MSIE"))&&!ee("Edge"),Qe=Y(V.toLowerCase(),"webkit")&&!ee("Edge");function ze(){var e=h.document;return e?e.documentMode:void 0}e:{var Ge="",Xe=(Ue=V,Ke?/rv:([^\);]+)(\)|;)/.exec(Ue):We?/Edge\/([\d\.]+)/.exec(Ue):Ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ue):Qe?/WebKit\/(\S+)/.exec(Ue):Be?/(?:Version)[ \/]?(\S+)/.exec(Ue):void 0);if(Xe&&(Ge=Xe?Xe[1]:""),Ve){var Ye=ze();if(null!=Ye&&Ye>parseFloat(Ge)){je=String(Ye);break e}}je=Ge}var $e,Je={};function Ze(a){return e=a,t=Je,Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(){for(var e=0,t=U(String(je)).split("."),n=U(String(a)).split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;e=$(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||$(0==o[2].length,0==s[2].length)||$(o[2],s[2]),o=o[3],s=s[3]}while(0==e)}return 0<=e}();var e,t}var et=h.document;$e=et&&Ve?ze()||("CSS1Compat"==et.compatMode?parseInt(je,10):5):void 0;var tt=Object.freeze||function(e){return e},nt=!Ve||9<=Number($e),rt=Ve&&!Ze("9"),it=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return h.addEventListener("test",o,t),h.removeEventListener("test",o,t),e}();function ot(e,t){this.type=e,this.b=this.target=t,this.Kb=!0}function st(e,t){if(ot.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Ke){e:{try{qe(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=c(e.pointerType)?e.pointerType:at[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}ot.prototype.preventDefault=function(){this.Kb=!1},t(st,ot);var at=tt({2:"touch",3:"pen",4:"mouse"});st.prototype.preventDefault=function(){st.ob.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,rt)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},st.prototype.f=function(){return this.a};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ht(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function lt(e){this.src=e,this.a={},this.b=0}function ft(e,t){var n=t.type;n in e.a&&L(e.a[n],t)&&(ht(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function pt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.La==r)return i}return-1}lt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=pt(e,t,r,i);return-1<s?(t=e[s],n||(t.Ia=!1)):((t=new function(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++ct,this.oa=this.Ia=!1}(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var dt="closure_lm_"+(1e6*Math.random()|0),yt={};function mt(e,t,n,r,i){if(r&&r.once)vt(e,t,n,r,i);else if(l(t))for(var o=0;o<t.length;o++)mt(e,t[o],n,r,i);else n=xt(n),e&&e[ut]?Dt(e,t,n,p(r)?!!r.capture:!!r,i):gt(e,t,n,!1,r,i)}function gt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s,a,u=p(i)?!!i.capture:!!i,c=Ct(e);if(c||(e[dt]=c=new lt(e)),!(n=c.add(t,n,r,u,o)).proxy)if(s=St,r=a=nt?function(e){return s.call(a.src,a.listener,e)}:function(e){if(!(e=s.call(a.src,a.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)it||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_t(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function vt(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)vt(e,t[o],n,r,i);else n=xt(n),e&&e[ut]?kt(e,t,n,p(r)?!!r.capture:!!r,i):gt(e,t,n,!0,r,i)}function bt(e,t,n,r,i){if(l(t))for(var o=0;o<t.length;o++)bt(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=xt(n),e&&e[ut]?(e=e.l,(t=String(t).toString())in e.a&&-1<(n=pt(o=e.a[t],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&Ct(e))&&(t=e.a[t.toString()],e=-1,t&&(e=pt(t,n,r,i)),(n=-1<e?t[e]:null)&&wt(n))}function wt(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[ut])ft(t.l,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_t(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ct(t))?(ft(n,e),0==n.b&&(n.src=null,t[dt]=null)):ht(e)}}}function _t(e){return e in yt?yt[e]:yt[e]="on"+e}function Tt(e,t,n,r){var i=!0;if((e=Ct(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=Et(o,r),i=i&&!1!==o)}return i}function Et(e,t){var n=e.listener,r=e.La||e.src;return e.Ia&&wt(e),n.call(r,t)}function St(e,t){if(e.oa)return!0;if(nt)return Et(e,new st(t,this));if(!t)e:{t=["window","event"];for(var n=h,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new st(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Tt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Tt(r[i],e,!1,t),n=n&&o}return n}function Ct(e){return(e=e[dt])instanceof lt?e:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(t){return s(t)?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Nt(){Pe.call(this),this.l=new lt(this),(this.Rb=this).Va=null}function Dt(e,t,n,r,i){e.l.add(String(t),n,!1,r,i)}function kt(e,t,n,r,i){e.l.add(String(t),n,!0,r,i)}function At(e,t,n,r){if(!(t=e.l.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.oa&&s.capture==n){var a=s.listener,u=s.La||s.src;s.Ia&&ft(e.l,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Kb}function Rt(e,t,n){if(s(e))n&&(e=g(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=g(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Ot(n){var r=null;return new pe(function(e,t){-1==(r=Rt(function(){e(void 0)},n))&&t(Error("Failed to schedule timer."))}).s(function(e){throw h.clearTimeout(r),e})}function Pt(e){if(e.S&&"function"==typeof e.S)return e.S();if(c(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Lt(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(f(e)||c(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Mt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Mt)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ft(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];qt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)qt(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function qt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t(Nt,Pe),Nt.prototype[ut]=!0,Nt.prototype.addEventListener=function(e,t,n,r){mt(this,e,t,n,r)},Nt.prototype.removeEventListener=function(e,t,n,r){bt(this,e,t,n,r)},Nt.prototype.dispatchEvent=function(e){var t,n=this.Va;if(n)for(t=[];n;n=n.Va)t.push(n);n=this.Rb;var r=e.type||e;if(c(e))e=new ot(e,n);else if(e instanceof ot)e.target=e.target||n;else{var i=e;ae(e=new ot(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];i=At(s,r,!0,e)&&i}if(i=At(s=e.b=n,r,!0,e)&&i,i=At(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=At(s=e.b=t[o],r,!1,e)&&i;return i},Nt.prototype.va=function(){if(Nt.ob.va.call(this),this.l){var e,t=this.l;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ht(n[r]);delete t.a[e],t.b--}}this.Va=null},(e=Mt.prototype).S=function(){Ft(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.U=function(){return Ft(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return qt(this.b,e)?this.b[e]:t},e.set=function(e,t){qt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var jt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ut(e,t){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof Ut){this.f=void 0!==t?t:e.f,Bt(this,e.c),this.l=e.l,this.b=e.b,Vt(this,e.i),this.g=e.g,t=e.a;var n=new nn;n.c=t.c,t.a&&(n.a=new Mt(t.a),n.b=t.b),Wt(this,n),this.h=e.h}else e&&(n=String(e).match(jt))?(this.f=!!t,Bt(this,n[1]||"",!0),this.l=Gt(n[2]||""),this.b=Gt(n[3]||"",!0),Vt(this,n[4]),this.g=Gt(n[5]||"",!0),Wt(this,n[6]||"",!0),this.h=Gt(n[7]||"")):(this.f=!!t,this.a=new nn(null,this.f))}function Bt(e,t,n){e.c=n?Gt(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Wt(e,t,n){var r,i;t instanceof nn?(e.a=t,r=e.a,(i=e.f)&&!r.f&&(rn(r),r.c=null,r.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(sn(this,t),un(this,n,e))},r)),r.f=i):(n||(t=Xt(t,en)),e.a=new nn(t,e.f))}function Ht(e,t,n){e.a.set(t,n)}function Kt(e,t){return e.a.get(t)}function Qt(e){return e instanceof Ut?new Ut(e):new Ut(e,void 0)}function zt(e,t){var n=new Ut(null,void 0);return Bt(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function Gt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xt(e,t,n){return c(e)?(e=encodeURI(e).replace(t,Yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ut.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Xt(t,$t,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.l)&&e.push(Xt(t,$t,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xt(n,"/"==n.charAt(0)?Zt:Jt,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Xt(n,tn)),e.join("")};var $t=/[#\/\?@]/g,Jt=/[#\?:]/g,Zt=/[#\?]/g,en=/[#\?@]/g,tn=/#/g;function nn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function rn(a){a.a||(a.a=new Mt,a.b=0,a.c&&function(e){if(e){e=e.split("&");for(var t=0;t<e.length;t++){var n=e[t].indexOf("="),r=null;if(0<=n){var i=e[t].substring(0,n);r=e[t].substring(n+1)}else i=e[t];o=i,s=r?decodeURIComponent(r.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function on(e){var t=Lt(e);if(void 0===t)throw Error("Keys are undefined");var n=new nn(null,void 0);e=Pt(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];l(o)?un(n,i,o):n.add(i,o)}return n}function sn(e,t){rn(e),t=cn(e,t),qt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,qt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Ft(e)))}function an(e,t){return rn(e),t=cn(e,t),qt(e.a.b,t)}function un(e,t,n){sn(e,t),0<n.length&&(e.c=null,e.a.set(cn(e,t),q(n)),e.b+=n.length)}function cn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=nn.prototype).add=function(e,t){rn(this),this.c=null,e=cn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(n,r){rn(this),this.a.forEach(function(e,t){A(e,function(e){n.call(r,e,t,this)},this)},this)},e.U=function(){rn(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.S=function(e){rn(this);var t=[];if(c(e))an(this,e)&&(t=F(t,this.a.get(cn(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=F(t,e[n])}return t},e.set=function(e,t){return rn(this),this.c=null,an(this,e=cn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return 0<(e=e?this.S(e):[]).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")};var hn=!Ve||9<=Number($e);function ln(){this.a="",this.b=pn}function fn(e){return e instanceof ln&&e.constructor===ln&&e.b===pn?e.a:(S("expected object of type Const, got '"+e+"'"),"type_error:Const")}ln.prototype.na=!0,ln.prototype.ma=function(){return this.a},ln.prototype.toString=function(){return"Const{"+this.a+"}"};var pn={};function dn(e){var t=new ln;return t.a=e,t}function yn(){this.a="",this.b=wn}function mn(e){return e instanceof yn&&e.constructor===yn&&e.b===wn?e.a:(S("expected object of type TrustedResourceUrl, got '"+e+"' of type "+a(e)),"type_error:TrustedResourceUrl")}function gn(e,n){var t,r,i=fn(e);if(!bn.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return t=e=i.replace(vn,function(e,t){if(!Object.prototype.hasOwnProperty.call(n,t))throw Error('Found marker, "'+t+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(n));return(e=n[t])instanceof ln?fn(e):encodeURIComponent(String(e))}),(r=new yn).a=t,r}dn(""),yn.prototype.na=!0,yn.prototype.ma=function(){return this.a},yn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var vn=/%{(\w+)}/g,bn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function _n(){this.a="",this.b=Cn}function Tn(e){return e instanceof _n&&e.constructor===_n&&e.b===Cn?e.a:(S("expected object of type SafeUrl, got '"+e+"' of type "+a(e)),"type_error:SafeUrl")}_n.prototype.na=!0,_n.prototype.ma=function(){return this.a},_n.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var En=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Sn(e){return e instanceof _n?e:(e=e.na?e.ma():String(e),En.test(e)||(e="about:invalid#zClosurez"),In(e))}var Cn={};function In(e){var t=new _n;return t.a=e,t}function xn(){this.a="",this.b=Nn}In("about:blank"),xn.prototype.na=!0,xn.prototype.ma=function(){return this.a},xn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nn={};function Dn(e){var t=new xn;return t.a=e,t}function kn(e){var t=document;return c(e)?t.getElementById(e):e}function An(n,e){te(e,function(e,t){e&&e.na&&(e=e.ma()),"style"==t?n.style.cssText=e:"class"==t?n.className=e:"for"==t?n.htmlFor=e:Rn.hasOwnProperty(t)?n.setAttribute(Rn[t],e):0==t.lastIndexOf("aria-",0)||0==t.lastIndexOf("data-",0)?n.setAttribute(t,e):n[t]=e})}Dn("<!DOCTYPE html>"),Dn(""),Dn("<br>");var Rn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function On(e){if(e&&"number"==typeof e.length){if(p(e))return"function"==typeof e.item||"string"==typeof e.item;if(s(e))return"function"==typeof e.item}}function Pn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),e(t,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Fn(i,r),r.push(":"),e(t,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Fn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},e,t),t.join("")}var Ln={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Mn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Fn(e,t){t.push('"',e.replace(Mn,function(e){var t=Ln[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Ln[e]=t),t}),'"')}function qn(){var e=rr();return Ve&&$e&&11==$e||/Edge\/\d+/.test(e)}function jn(){return h.window&&h.window.location.href||self&&self.location&&self.location.href||""}function Un(e,t){t=t||h.window;var n="about:blank";e&&(n=Tn(Sn(e))),t.location.href=n}function Bn(e){return!!((e=(e||rr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Vn(e){e=e||h.window;try{e.close()}catch(e){}}function Wn(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=rr().toLowerCase(),r&&(t.target=r,Y(n,"crios/")&&(t.target="_blank")),er(rr())==Jn&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof _n?n:Sn(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(e[s]?1:0))}var s=i.join(",");if((ee("iPhone")&&!ee("iPod")&&!ee("iPad")||ee("iPad")||ee("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=r.document.createElement("A"),t instanceof _n||t instanceof _n||(t=t.na?t.ma():String(t),En.test(t)||(t="about:invalid#zClosurez"),t=In(t)),s.href=Tn(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=r.open("",n,s),e=Tn(t),s&&(He&&Y(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,dn("b/12014412, meta tag with sanitized URL"),e=Dn(e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+B(e)+'">'),s.document.write(e instanceof xn&&e.constructor===xn&&e.b===Nn?e.a:(S("expected object of type SafeHtml, got '"+e+"' of type "+a(e)),"type_error:SafeHtml")),s.document.close())):(s=r.open(Tn(t),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(e){}return s}var Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kn=/^[^@]+@[^@]+$/;function Qn(){var t=null;return new pe(function(e){"complete"==h.document.readyState?e():(t=function(){e()},vt(window,"load",t))}).s(function(e){throw bt(window,"load",t),e})}function zn(e){return e=e||rr(),!("file:"!==ur()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gn(){var e=h.window;try{return e&&e!=e.top}catch(e){return}}function Xn(){return"object"!=typeof h.window&&"function"==typeof h.importScripts}function Yn(){return fh.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":fh.INTERNAL.hasOwnProperty("node")?"Node":Xn()?"Worker":"Browser"}function $n(){var e=Yn();return"ReactNative"===e||"Node"===e}var Jn="Firefox",Zn="Chrome";function er(e){var t=e.toLowerCase();return Y(t,"opera/")||Y(t,"opr/")||Y(t,"opios/")?"Opera":Y(t,"iemobile")?"IEMobile":Y(t,"msie")||Y(t,"trident/")?"IE":Y(t,"edge/")?"Edge":Y(t,"firefox/")?Jn:Y(t,"silk/")?"Silk":Y(t,"blackberry")?"Blackberry":Y(t,"webos")?"Webos":!Y(t,"safari/")||Y(t,"chrome/")||Y(t,"crios/")||Y(t,"android")?!Y(t,"chrome/")&&!Y(t,"crios/")||Y(t,"edge/")?Y(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Zn:"Safari"}var tr={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function nr(e,t){t=t||[];var n,r=[],i={};for(n in tr)i[tr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Yn())?r=er(i=rr()):"Worker"===r&&(r=er(i=rr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function rr(){return h.navigator&&h.navigator.userAgent||""}function ir(e,t){e=e.split("."),t=t||h;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function or(){try{var e=h.localStorage,t=pr();if(e)return e.setItem(t,"1"),e.removeItem(t),!qn()||!!h.indexedDB}catch(e){return Xn()&&!!h.indexedDB}return!1}function sr(){return(ar()||"chrome-extension:"===ur()||zn())&&!$n()&&or()&&!Xn()}function ar(){return"http:"===ur()||"https:"===ur()}function ur(){return h.location&&h.location.protocol||null}function cr(e){return!Bn(e=e||rr())&&er(e)!=Jn}function hr(e){return void 0===e?null:Pn(e)}function lr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function fr(e){if(null!==e)return JSON.parse(e)}function pr(e){return e||Math.floor(1e9*Math.random()).toString()}function dr(e){return"Safari"!=er(e=e||rr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function yr(){var e=h.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function mr(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=rr(),t=Yn(),this.b=Bn(e)||"ReactNative"===t}function gr(){var e=h.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function vr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function br(){return ir("fireauth.oauthhelper",h)||ir("fireauth.iframe",h)}mr.prototype.get=function(){var e=h.navigator;return!e||"boolean"!=typeof e.onLine||!ar()&&"chrome-extension:"!==ur()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var wr,_r={};function Tr(e){_r[e]||(_r[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Er={};Object.defineProperty(Er,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Er,"abcd",{configurable:!0,enumerable:!0,value:2}),wr=2==Er.abcd}catch(Ue){wr=!1}function Sr(e,t,n){wr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Cr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Sr(e,n,t[n])}function Ir(e){var t={};return Cr(t,e),t}function xr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Sr(t,n,xr(e[n]));return t}function Nr(e,t){this.code=kr+e,this.message=t||Ar[e]||""}function Dr(e){var t=e&&e.code;return t?new Nr(t.substring(kr.length),e.message):null}t(Nr,Error),Nr.prototype.C=function(){return{code:this.code,message:this.message}},Nr.prototype.toJSON=function(){return this.C()};var kr="auth/",Ar={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Rr(e){var t=e[Fr];if(void 0===t)throw new Nr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Nr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Or];if(n&&"object"==typeof n){t=n[Ur];var r=n[qr];if(n=n[jr],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Nr("argument-error",qr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Nr("argument-error",jr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Nr("argument-error",Ur+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Nr("missing-android-pkg-name")}}else if(void 0!==n)throw new Nr("argument-error",Or+" property must be a non null object when specified.");if(this.f=null,(t=e[Mr])&&"object"==typeof t){if("string"==typeof(t=t[Br])&&t.length)this.f=t;else if(void 0!==t)throw new Nr("argument-error",Br+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Nr("argument-error",Mr+" property must be a non null object when specified.");if(void 0!==(t=e[Lr])&&"boolean"!=typeof t)throw new Nr("argument-error",Lr+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Pr])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Nr("argument-error",Pr+" property must be a non empty string when specified.");this.i=e||null}var Or="android",Pr="dynamicLinkDomain",Lr="handleCodeInApp",Mr="iOS",Fr="url",qr="installApp",jr="minimumVersion",Ur="packageName",Br="bundleId";function Vr(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Wr=null,Hr=null;function Kr(e){this.c=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Qr(e){return(e=zr(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Kr(e):null}function zr(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse((r="",function(r,e){function t(e){for(;i<r.length;){var t=r.charAt(i++),n=Hr[t];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(t))throw Error("Unknown base64 encoding at char: "+t)}return e}!function(){if(!Wr){Wr={},Hr={};for(var e=0;e<65;e++)Wr[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(Hr[Wr[e]]=e)&&(Hr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var i=0;;){var n=t(-1),o=t(0),s=t(64),a=t(64);if(64===a&&-1===n)break;e(n<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(e,function(e){r+=String.fromCharCode(e)}),r))}catch(e){}var r;return null}Kr.prototype.f=function(){return this.b};var Gr,Xr={$c:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Yr(e){for(var t in Xr)if(Xr[t].id===e)return{firebaseEndpoint:(e=Xr[t]).ab,secureTokenEndpoint:e.ib};return null}Gr=Yr("__EID__")?"__EID__":void 0;var $r="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Jr=["client_id","response_type","scope","redirect_uri","state"],Zr={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",hb:Jr},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",hb:Jr},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",hb:Jr},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",hb:$r}};function ei(e){for(var t in Zr)if(Zr[t].Na==e)return Zr[t];return null}function ti(e){var t={};t["facebook.com"]=si,t["google.com"]=ui,t["github.com"]=ai,t["twitter.com"]=ci;var n=e&&e[ri];try{if(n)return t[n]?new t[n](e):new oi(e);if(void 0!==e[ni])return new ii(e)}catch(e){}return null}var ni="idToken",ri="providerId";function ii(e){var t=e[ri];if(!t&&e[ni]){var n=Qr(e[ni]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Sr(this,"providerId",t),Sr(this,"isNewUser",n)}function oi(e){ii.call(this,e),Sr(this,"profile",xr((e=fr(e.rawUserInfo||"{}"))||{}))}function si(e){if(oi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ai(e){if(oi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",this.profile&&this.profile.login||null)}function ui(e){if(oi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ci(e){if(oi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",e.screenName||null)}function hi(e){var t=Qt(e),n=Kt(t,"link"),r=Kt(Qt(n),"link");return Kt(Qt(t=Kt(t,"deep_link_id")),"link")||t||r||n||e}function li(e,n){return e.then(function(e){if(e[zo]){var t=Qr(e[zo]);if(!t||n!=t.c)throw new Nr("user-mismatch");return e}throw new Nr("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==kr+"user-not-found"?new Nr("user-mismatch"):e})}function fi(e,t){if(!t)throw new Nr("internal-error","failed to construct a credential");this.a=t,Sr(this,"providerId",e),Sr(this,"signInMethod",e)}function pi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function di(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Sr(this,"idToken",t.idToken),t.accessToken&&Sr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Sr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Nr("internal-error","failed to construct a credential");Sr(this,"accessToken",t.oauthToken),Sr(this,"secret",t.oauthTokenSecret)}Sr(this,"providerId",e),Sr(this,"signInMethod",n)}function yi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:on(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function mi(e,t){this.Dc=t||[],Cr(this,{providerId:e,isOAuthProvider:!0}),this.yb={},this.cb=(ei(e)||{}).Ma||null,this.$a=null}function gi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Nr("argument-error",'SAML provider IDs must be prefixed with "saml."');mi.call(this,e,[])}function vi(e){mi.call(this,e,Jr),this.a=[]}function bi(){vi.call(this,"facebook.com")}function wi(e){if(!e)throw new Nr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new bi).credential(null,t)}function _i(){vi.call(this,"github.com")}function Ti(e){if(!e)throw new Nr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new _i).credential(null,t)}function Ei(){vi.call(this,"google.com"),this.ua("profile")}function Si(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new Ei).credential(n,t)}function Ci(){mi.call(this,"twitter.com",$r)}function Ii(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Nr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new di("twitter.com",n,"twitter.com")}function xi(e,t,n){this.a=e,this.c=t,Sr(this,"providerId","password"),Sr(this,"signInMethod",n===Ni.EMAIL_LINK_SIGN_IN_METHOD?Ni.EMAIL_LINK_SIGN_IN_METHOD:Ni.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ni(){Cr(this,{providerId:"password",isOAuthProvider:!1})}function Di(e,t){if(!(t=ki(t)))throw new Nr("argument-error","Invalid email link!");return new xi(e,t,Ni.EMAIL_LINK_SIGN_IN_METHOD)}function ki(e){var t=Kt((e=new function(e){this.a=Qt(e)}(e=hi(e))).a,"oobCode")||null;return"signIn"===(Kt(e.a,"mode")||null)&&t?t:null}function Ai(e){if(!(e.Ta&&e.Sa||e.Fa&&e.$))throw new Nr("internal-error");this.a=e,Sr(this,"providerId","phone"),Sr(this,"signInMethod","phone")}function Ri(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ta,code:e.a.Sa}}function Oi(e){try{this.a=e||fh.auth()}catch(e){throw new Nr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Cr(this,{providerId:"phone",isOAuthProvider:!1})}function Pi(e,t){if(!e)throw new Nr("missing-verification-id");if(!t)throw new Nr("missing-verification-code");return new Ai({Ta:e,Sa:t})}function Li(e){if(e.temporaryProof&&e.phoneNumber)return new Ai({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return Si(o,n);case"facebook.com":return wi(n);case"github.com":return Ti(n);case"twitter.com":return Ii(n,r);default:return n||r||o||s?s?0==t.indexOf("saml.")?new fi(t,s):new di(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new vi(t).credential(o,n,i):null}}catch(e){return null}}function Mi(e){if(!e.isOAuthProvider)throw new Nr("invalid-oauth-provider")}function Fi(e,t,n,r,i,o){if(this.b=e,this.c=t||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new Nr("invalid-auth-event");if(this.f&&this.a)throw new Nr("invalid-auth-event");if(this.f&&!this.g)throw new Nr("invalid-auth-event")}function qi(e){return(e=e||{}).type?new Fi(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Dr(e.error),e.postBody):null}function ji(){this.b=null,this.a=[]}t(oi,ii),t(si,oi),t(ai,oi),t(ui,oi),t(ci,oi),fi.prototype.la=function(e){return ls(e,pi(this))},fi.prototype.b=function(e,t){var n=pi(this);return n.idToken=t,fs(e,n)},fi.prototype.f=function(e,t){return li(ps(e,pi(this)),t)},fi.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},di.prototype.la=function(e){return ls(e,yi(this))},di.prototype.b=function(e,t){var n=yi(this);return n.idToken=t,fs(e,n)},di.prototype.f=function(e,t){return li(ps(e,yi(this)),t)},di.prototype.C=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},mi.prototype.Da=function(e){return this.yb=re(e),this},t(gi,mi),t(vi,mi),vi.prototype.ua=function(e){return P(this.a,e)||this.a.push(e),this},vi.prototype.Eb=function(){return q(this.a)},vi.prototype.credential=function(e,t,n){if(!e&&!t)throw new Nr("argument-error","credential failed: must provide the ID token and/or the access token.");return new di(this.providerId,{idToken:e||null,accessToken:t||null,nonce:n||null},this.providerId)},t(bi,vi),Sr(bi,"PROVIDER_ID","facebook.com"),Sr(bi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),t(_i,vi),Sr(_i,"PROVIDER_ID","github.com"),Sr(_i,"GITHUB_SIGN_IN_METHOD","github.com"),t(Ei,vi),Sr(Ei,"PROVIDER_ID","google.com"),Sr(Ei,"GOOGLE_SIGN_IN_METHOD","google.com"),t(Ci,mi),Sr(Ci,"PROVIDER_ID","twitter.com"),Sr(Ci,"TWITTER_SIGN_IN_METHOD","twitter.com"),xi.prototype.la=function(e){return this.signInMethod==Ni.EMAIL_LINK_SIGN_IN_METHOD?Vs(e,_s,{email:this.a,oobCode:this.c}):Vs(e,qs,{email:this.a,password:this.c})},xi.prototype.b=function(e,t){return this.signInMethod==Ni.EMAIL_LINK_SIGN_IN_METHOD?Vs(e,Ts,{idToken:t,email:this.a,oobCode:this.c}):Vs(e,Rs,{idToken:t,email:this.a,password:this.c})},xi.prototype.f=function(e,t){return li(this.la(e),t)},xi.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Cr(Ni,{PROVIDER_ID:"password"}),Cr(Ni,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Cr(Ni,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ai.prototype.la=function(e){return e.Ua(Ri(this))},Ai.prototype.b=function(e,t){var n=Ri(this);return n.idToken=t,Vs(e,Us,n)},Ai.prototype.f=function(e,t){var n=Ri(this);return n.operation="REAUTH",li(e=Vs(e,Bs,n),t)},Ai.prototype.C=function(){var e={providerId:"phone"};return this.a.Ta&&(e.verificationId=this.a.Ta),this.a.Sa&&(e.verificationCode=this.a.Sa),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},Oi.prototype.Ua=function(t,n){var r=this.a.b;return we(n.verify()).then(function(e){if(!c(e))throw new Nr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return Vs(r,ks,{phoneNumber:t,recaptchaToken:e}).then(function(e){return"function"==typeof n.reset&&n.reset(),e},function(e){throw"function"==typeof n.reset&&n.reset(),e});default:throw new Nr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Cr(Oi,{PROVIDER_ID:"phone"}),Cr(Oi,{PHONE_SIGN_IN_METHOD:"phone"}),Fi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var Ui,Bi=null;function Vi(e){var t="unauthorized-domain",n=void 0,r=Qt(e);e=r.b,"chrome-extension"==(r=r.c)?n=j("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=j("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Nr.call(this,t,n)}function Wi(e,t,n){Nr.call(this,e,n),(e=t||{}).zb&&Sr(this,"email",e.zb),e.$&&Sr(this,"phoneNumber",e.$),e.credential&&Sr(this,"credential",e.credential)}function Hi(e){if(e.code){var t=e.code||"";0==t.indexOf(kr)&&(t=t.substring(kr.length));var n={credential:Li(e)};if(e.email)n.zb=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new Nr(t,e.message||void 0);return new Wi(t,n,e.message)}return null}function Ki(){}function Qi(e){return e.c||(e.c=e.b())}function zi(){}function Gi(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Xi(){}function Yi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=g(this.ec,this),this.a.onerror=g(this.Fb,this),this.a.onprogress=g(this.fc,this),this.a.ontimeout=g(this.ic,this)}function $i(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ji(e,t,n){this.reset(e,t,n,void 0,void 0)}function Zi(e){this.f=e,this.b=this.c=this.a=null}function eo(e,t){this.name=e,this.value=t}ji.prototype.subscribe=function(e){var n=this;this.a.push(e),this.b||(this.b=function(e){for(var t=0;t<n.a.length;t++)n.a[t](e)},"function"==typeof(e=ir("universalLinks.subscribe",h))&&e(null,this.b))},ji.prototype.unsubscribe=function(t){M(this.a,function(e){return e==t})},t(Vi,Nr),t(Wi,Nr),Wi.prototype.C=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.C();return t&&ae(e,t),e},Wi.prototype.toJSON=function(){return this.C()},Ki.prototype.c=null,t(zi,Ki),zi.prototype.a=function(){var e=Gi(this);return e?new ActiveXObject(e):new XMLHttpRequest},zi.prototype.b=function(){var e={};return Gi(this)&&(e[0]=!0,e[1]=!0),e},Ui=new zi,t(Xi,Ki),Xi.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Yi;throw Error("Unsupported browser")},Xi.prototype.b=function(){return{}},(e=Yi.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.ec=function(){this.status=200,this.responseText=this.a.responseText,$i(this,4)},e.Fb=function(){this.status=500,this.responseText="",$i(this,4)},e.ic=function(){this.Fb()},e.fc=function(){this.status=200,$i(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ji.prototype.a=null,Ji.prototype.reset=function(e,t,n,r,i){delete this.a},eo.prototype.toString=function(){return this.name};var to=new eo("SEVERE",1e3),no=new eo("WARNING",900),ro=new eo("CONFIG",700),io=new eo("FINE",500);Zi.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(S("Root logger has no level set."),null)}(this).value)for(s(t)&&(t=t()),e=new Ji(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var oo,so={},ao=null;function uo(e){var t;if(ao||(ao=new Zi(""),(so[""]=ao).c=ro),!(t=so[e])){t=new Zi(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=uo(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,so[e]=t}return t}function co(e,t){e&&e.log(io,t,void 0)}function ho(e){this.f=e}function lo(e){Nt.call(this),this.i=e,this.readyState=fo,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=uo("goog.net.FetchXmlHttp")}t(ho,Ki),ho.prototype.a=function(){return new lo(this.f)},ho.prototype.b=(oo={},function(){return oo}),t(lo,Nt);var fo=0;function po(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function yo(e){Nt.call(this),this.headers=new Mt,this.D=e||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.m="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=mo,this.v=this.O=!1}(e=lo.prototype).open=function(e,t){if(this.readyState!=fo)throw this.abort(),Error("Error reopening a connection");this.h=e,this.c=t,this.readyState=1,po(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.g,method:this.h,credentials:void 0,cache:void 0};e&&(t.body=e),this.i.fetch(new Request(this.c,t)).then(this.hc.bind(this),this.Gb.bind(this))},e.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,po(this)),this.readyState=fo},e.hc=function(e){this.a&&(this.b||(this.b=e.headers,this.readyState=2,po(this)),this.a&&(this.readyState=3,po(this),this.a&&e.text().then(this.gc.bind(this,e),this.Gb.bind(this))))},e.gc=function(e,t){this.a&&(this.status=e.status,this.statusText=e.statusText,this.responseText=t,this.readyState=4,po(this))},e.Gb=function(e){var t=this.f;t&&t.log(no,"Failed to fetch url "+this.c,e instanceof Error?e:Error(e)),this.a&&(this.readyState=4,po(this))},e.setRequestHeader=function(e,t){this.g.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.f)&&e.log(no,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.f;return e&&e.log(no,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},t(yo,Nt);var mo="";yo.prototype.b=uo("goog.net.XhrIo");var go=/^https?$/i,vo=["POST","PUT"];function bo(e){return"content-type"==e.toLowerCase()}function wo(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,_o(e),Eo(e)}function _o(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function To(t){if(t.c&&void 0!==u)if(t.w[1]&&4==Co(t)&&2==Io(t))co(t.b,xo(t,"Local request error detected and ignored"));else if(t.i&&4==Co(t))Rt(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==Co(t)){co(t.b,xo(t,"Request complete")),t.c=!1;try{var e,n=Io(t);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.m).match(jt)[1]||null;if(!o&&h.self&&h.self.location){var s=h.self.location.protocol;o=s.substr(0,s.length-1)}i=!go.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<Co(t)?t.a.statusText:""}catch(e){co(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+Io(t)+"]",_o(t)}}finally{Eo(t)}}}function Eo(e,t){if(e.a){So(e);var n=e.a,r=e.w[0]?o:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(to,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function So(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(h.clearTimeout(e.u),e.u=null)}function Co(e){return e.a?e.a.readyState:0}function Io(e){try{return 2<Co(e)?e.a.status:-1}catch(e){return-1}}function xo(e,t){return t+" ["+e.N+" "+e.m+" "+Io(e)+"]"}function No(e,t){this.g=[],this.v=e,this.u=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Do(e,t,n){e.a=!0,e.c=n,e.f=!t,Oo(e)}function ko(e){if(e.a){if(!e.m)throw new Po(e);e.m=!1}}function Ao(e,t,n,r){e.g.push([t,n,r]),e.a&&Oo(e)}function Ro(e){return O(e.g,function(e){return s(e[1])})}function Oo(t){if(t.h&&t.a&&Ro(t)){var n=t.h,r=Fo[n];r&&(h.clearTimeout(r.a),delete Fo[n]),t.h=0}t.b&&(t.b.l--,delete t.b),n=t.c;for(var e=r=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.u,n);void 0!==a&&(t.f=t.f&&(a==n||a instanceof Error),t.c=n=a),(_(n)||"function"==typeof h.Promise&&n instanceof h.Promise)&&(e=!0,t.i=!0)}catch(e){n=e,t.f=!0,Ro(t)||(r=!0)}}t.c=n,e&&(a=g(t.o,t,!0),e=g(t.o,t,!1),n instanceof No?(Ao(n,a,e),n.w=!0):n.then(a,e)),r&&(n=new Mo(n),Fo[n.a]=n,t.h=n.a)}function Po(){T.call(this)}function Lo(){T.call(this)}function Mo(e){this.a=h.setTimeout(g(this.c,this),0),this.b=e}(e=yo.prototype).Ga=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",co(this.b,xo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(co(this.b,xo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Eo(this))},e.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Eo(this,!0)),yo.ob.va.call(this)},e.Jb=function(){this.qa||(this.I||this.i||this.f?To(this):this.wc())},e.wc=function(){To(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case mo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(to,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(e){return co(this.b,"Can not get response: "+e.message),null}},No.prototype.cancel=function(e){if(this.a)this.c instanceof No&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.u,this):this.m=!0,this.a||(e=new Lo(this),ko(this),Do(this,!1,e))}},No.prototype.o=function(e,t){this.i=!1,Do(this,e,t)},No.prototype.D=function(){ko(this),Do(this,!0,null)},No.prototype.then=function(e,t,n){var r,i,o=new pe(function(e,t){r=e,i=t});return Ao(this,r,function(e){e instanceof Lo?o.cancel():i(e)}),o.then(e,t,n)},w(No),t(Po,T),Po.prototype.message="Deferred has already fired",Po.prototype.name="AlreadyCalledError",t(Lo,T),Lo.prototype.message="Deferred was canceled",Lo.prototype.name="CanceledError",Mo.prototype.c=function(){throw delete Fo[this.a],this.b};var Fo={};function qo(e){var t,n,r={},i=r.document||document,o=mn(e),s=document.createElement("SCRIPT"),a={Lb:s,Ga:void 0},u=new No(jo,a),c=null,h=null!=r.timeout?r.timeout:5e3;return 0<h&&(c=window.setTimeout(function(){Uo(s,!0);var e=new Wo(Vo,"Timeout reached for loading script "+o);ko(u),Do(u,!1,e)},h),a.Ga=c),s.onload=s.onreadystatechange=function(){s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(Uo(s,r.fd||!1,c),u.D())},s.onerror=function(){Uo(s,!0,c);var e=new Wo(Bo,"Error while loading script "+o);ko(u),Do(u,!1,e)},ae(a=r.attributes||{},{type:"text/javascript",charset:"UTF-8"}),An(s,a),s.src=mn(e),((n=((t=i)||document).getElementsByTagName("HEAD"))&&0!=n.length?n[0]:t.documentElement).appendChild(s),u}function jo(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&Uo(e,!0,this.Ga)}}function Uo(e,t,n){null!=n&&h.clearTimeout(n),e.onload=o,e.onerror=o,e.onreadystatechange=o,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var Bo=0,Vo=1;function Wo(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),T.call(this,n),this.code=e}function Ho(e){this.f=e}function Ko(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=e.secureTokenTimeout||Go,this.f=re(e.secureTokenHeaders||Xo),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||Yo,this.a=re(e.firebaseHeaders||$o),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Yn(),!(n=h.XMLHttpRequest||n&&fh.INTERNAL.node&&fh.INTERNAL.node.XMLHttpRequest)&&!Xn())throw new Nr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Xn()?this.c=new ho(self):$n()?this.c=new Ho(n):this.c=new Xi}t(Wo,T),t(Ho,Ki),Ho.prototype.a=function(){return new this.f},Ho.prototype.b=function(){return{}};var Qo,zo="idToken",Go=new mr(3e4,6e4),Xo={"Content-Type":"application/x-www-form-urlencoded"},Yo=new mr(3e4,6e4),$o={"Content-Type":"application/json"};function Jo(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Zo(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function es(e,t,n,r,i,o,s){var a;(e=!((a=er(a=rr())!=Zn?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Ve&&$e&&!(9<$e))||Xn()?g(e.o,e):(Qo=Qo||new pe(function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(h[ns]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Ao(qo(gn(ts,{onload:ns})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),g(e.m,e)))(t,n,r,i,o,s)}Ko.prototype.o=function(e,n,t,r,i,o){if(Xn()&&(void 0===h.fetch||void 0===h.Headers||void 0===h.Request))throw new Nr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new yo(this.c);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}Dt(s,"complete",function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return co(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}n&&n(t)}),kt(s,"ready",function(){a&&clearTimeout(a),Fe(this)}),kt(s,"timeout",function(){a&&clearTimeout(a),Fe(this),n&&n(null)}),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.m+"; newUri="+t);n=n?n.toUpperCase():"GET",e.m=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():Ui.a(),e.w=e.D?Qi(e.D):Qi(Ui),e.a.onreadystatechange=g(e.Jb,e);try{co(e.b,xo(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return co(e.b,xo(e,"Error opening Xhr: "+t.message)),wo(e,t)}t=r||"";var o,s=new Mt(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||c(e))A(e,t,void 0);else for(var n=Lt(e),r=Pt(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){s.set(t,e)}),i=function(e){e:{for(var t=bo,n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:c(e)?e.charAt(t):e[t]}(s.U()),r=h.FormData&&t instanceof h.FormData,!P(vo,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.o&&(e.a.responseType=e.o),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{So(e),0<e.g&&(e.v=(o=e.a,Ve&&Ze(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),co(e.b,xo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ga,e)):e.u=Rt(e.Ga,e.g,e)),co(e.b,xo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){co(e.b,xo(e,"Send error: "+t.message)),wo(e,t)}}(s,e,t,r,i)};var ts=dn("https://apis.google.com/js/client.js?onload=%{onload}"),ns="__fcb"+Math.floor(1e6*Math.random()).toString();function rs(e){if(!c(e=e.email)||!Kn.test(e))throw new Nr("invalid-email")}function is(e){"email"in e&&rs(e)}function os(e){if(!e[zo])throw new Nr("internal-error")}function ss(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Nr("internal-error")}else{if(!e.sessionInfo)throw new Nr("missing-verification-id");if(!e.code)throw new Nr("missing-verification-code")}}Ko.prototype.m=function(e,n,r,i,o){var s=this;Qo.then(function(){window.gapi.client.setApiKey(s.b);var t=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:r,body:i,headers:o,authType:"none",callback:function(e){window.gapi.auth.setToken(t),n&&n(e)}})}).s(function(e){n&&n({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},Ko.prototype.Qa=function(){return Vs(this,Os,{})},Ko.prototype.pb=function(e,t){return Vs(this,As,{idToken:e,email:t})},Ko.prototype.qb=function(e,t){return Vs(this,Rs,{idToken:e,password:t})};var as={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function us(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Nr("internal-error")}function cs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&an(e=new nn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function hs(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Hi(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Hi(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Hi(e)):e.errorMessage&&(t=Ws(e.errorMessage)),t)throw t;if(!e[zo])throw new Nr("internal-error")}function ls(e,t){return t.returnIdpCredential=!0,Vs(e,Ps,t)}function fs(e,t){return t.returnIdpCredential=!0,Vs(e,Ms,t)}function ps(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Vs(e,Ls,t)}function ds(e){if(!e.oobCode)throw new Nr("invalid-action-code")}(e=Ko.prototype).rb=function(e,r){var i={idToken:e},o=[];return te(as,function(e,t){var n=r[t];null===n?o.push(e):t in r&&(i[t]=n)}),o.length&&(i.deleteAttribute=o),Vs(this,As,i)},e.kb=function(e,t){return ae(e={requestType:"PASSWORD_RESET",email:e},t),Vs(this,Is,e)},e.lb=function(e,t){return ae(e={requestType:"EMAIL_SIGNIN",email:e},t),Vs(this,Ss,e)},e.jb=function(e,t){return ae(e={requestType:"VERIFY_EMAIL",idToken:e},t),Vs(this,Cs,e)},e.Ua=function(e){return Vs(this,js,e)},e.Za=function(e,t){return Vs(this,Ds,{oobCode:e,newPassword:t})},e.Ja=function(e){return Vs(this,ms,{oobCode:e})},e.Wa=function(e){return Vs(this,ys,{oobCode:e})};var ys={endpoint:"setAccountInfo",B:ds,da:"email"},ms={endpoint:"resetPassword",B:ds,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Nr("internal-error")}},gs={endpoint:"signupNewUser",B:function(e){if(rs(e),!e.password)throw new Nr("weak-password")},J:os,R:!0},vs={endpoint:"createAuthUri"},bs={endpoint:"deleteAccount",T:["idToken"]},ws={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(e){if(!l(e.deleteProvider))throw new Nr("internal-error")}},_s={endpoint:"emailLinkSignin",T:["email","oobCode"],B:rs,J:os,R:!0},Ts={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:rs,J:os,R:!0},Es={endpoint:"getAccountInfo"},Ss={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Nr("internal-error");rs(e)},da:"email"},Cs={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Nr("internal-error")},da:"email"},Is={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Nr("internal-error");rs(e)},da:"email"},xs={ub:!0,endpoint:"getProjectConfig",Ib:"GET"},Ns={ub:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new Nr("internal-error")}},Ds={endpoint:"resetPassword",B:ds,da:"email"},ks={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},As={endpoint:"setAccountInfo",T:["idToken"],B:is,R:!0},Rs={endpoint:"setAccountInfo",T:["idToken"],B:function(e){if(is(e),!e.password)throw new Nr("weak-password")},J:os,R:!0},Os={endpoint:"signupNewUser",J:os,R:!0},Ps={endpoint:"verifyAssertion",B:us,Oa:cs,J:hs,R:!0},Ls={endpoint:"verifyAssertion",B:us,Oa:cs,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Nr("user-not-found");if(e.errorMessage)throw Ws(e.errorMessage);if(!e[zo])throw new Nr("internal-error")},R:!0},Ms={endpoint:"verifyAssertion",B:function(e){if(us(e),!e.idToken)throw new Nr("internal-error")},Oa:cs,J:hs,R:!0},Fs={endpoint:"verifyCustomToken",B:function(e){if(!e.token)throw new Nr("invalid-custom-token")},J:os,R:!0},qs={endpoint:"verifyPassword",B:function(e){if(rs(e),!e.password)throw new Nr("wrong-password")},J:os,R:!0},js={endpoint:"verifyPhoneNumber",B:ss,J:os},Us={endpoint:"verifyPhoneNumber",B:function(e){if(!e.idToken)throw new Nr("internal-error");ss(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Hi(e);os(e)}},Bs={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ss,J:os};function Vs(e,t,n){if(!function(e,t){if(!t||!t.length)return 1;if(e){for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return}return 1}}(n,t.T))return _e(new Nr("internal-error"));var r,i=t.Ib||"POST";return we(n).then(t.B).then(function(){return t.R&&(n.returnSecureToken=!0),function(e,t,r,i,o,n){var s=Qt(e.g+t);Ht(s,"key",e.b),n&&Ht(s,"cb",b().toString());var a="GET"==r;if(a)for(var u in i)i.hasOwnProperty(u)&&Ht(s,u,i[u]);return new pe(function(t,n){es(e,s.toString(),function(e){e?e.error?n(Hs(e,o||{})):t(e):n(new Nr("network-request-failed"))},r,a?void 0:Pn(lr(i)),e.a,e.h.get())})}(e,t.endpoint,i,n,t.Xb,t.ub||!1)}).then(function(e){return r=e,t.Oa?t.Oa(n,r):r}).then(t.J).then(function(){if(!t.da)return r;if(!(t.da in r))throw new Nr("internal-error");return r[t.da]})}function Ws(e){return Hs({error:{errors:[{message:e}],code:400,message:e}})}function Hs(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Nr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ae(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Nr(r[i],t);return!t&&e&&(t=hr(e)),new Nr("internal-error",t)}function Ks(e){var o;this.b=e,this.a=null,this.fb=(o=this,(Xs=Xs||new pe(function(e,t){function n(){yr(),ir("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){yr(),t(Error("Network Error"))},timeout:zs.get()})}if(ir("gapi.iframes.Iframe"))e();else if(ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();h[r]=function(){ir("gapi.load")?n():t(Error("Network Error"))},we(qo(r=gn(Qs,{onload:r}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw Xs=null,e})).then(function(){return new pe(function(r,i){ir("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(e){function t(){clearTimeout(n),r()}o.a=e,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Gs.get());e.ping(t).then(t,function(){i(Error("Network Error"))})})})}))}var Qs=dn("https://apis.google.com/js/api.js?onload=%{onload}"),zs=new mr(3e4,6e4),Gs=new mr(5e3,15e3),Xs=null;function Ys(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=zt(this.i,"/__/auth/iframe"),Ht(this.a,"apiKey",this.g),Ht(this.a,"appName",this.h),this.b=null,this.c=[]}function $s(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Js(e){try{return fh.app(e).auth().ya()}catch(e){return[]}}function Zs(e,t,n,r,i){this.m=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.l=this.a=null}function ea(e){var a=jn();return Vs(e,xs,{}).then(function(e){return e.authorizedDomains||[]}).then(function(e){e:{var t=Qt(a),n=t.c;t=t.b;for(var r=0;r<e.length;r++){var i=e[r],o=t,s=n;if(o=0==i.indexOf("chrome-extension://")?Qt(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(Hn.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){e=!0;break e}}e=!1}if(!e)throw new Vi(jn())})}function ta(i){return i.l||(i.l=Qn().then(function(){if(!i.u){var e=i.c,t=i.h,n=Js(i.b),r=new Ys(i.m,i.f,i.b);r.f=e,r.b=t,r.c=q(n||[]),i.u=r.toString()}i.i=new Ks(i.u),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");var e,t;e=r.i,t=function(e){var t={};if(e&&e.authEvent){var n=!1;for(e=qi(e.authEvent),t=0;t<r.g.length;t++)n=r.g[t](e)||n;return(t={}).status=n?"ACK":"ERROR",we(t)}return t.status="ERROR",we(t)},e.fb.then(function(){e.a.register("authEvent",t,ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.l}function na(e){return e.o||(e.v=e.c?nr(e.c,Js(e.b)):null,e.o=new Ko(e.f,Yr(e.h),e.v)),e.o}function ra(e,t,n,r,i,o,s,a,u,c){return(e=new $s(e,t,n,r,i)).i=o,e.g=s,e.h=a,e.b=re(u||null),e.f=c,e.toString()}function ia(e){if(this.a=e||fh.INTERNAL.reactNative&&fh.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Nr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function oa(e){this.b=e,this.a={},this.c=g(this.f,this)}Ys.prototype.toString=function(){return this.f?Ht(this.a,"v",this.f):sn(this.a.a,"v"),this.b?Ht(this.a,"eid",this.b):sn(this.a.a,"eid"),this.c.length?Ht(this.a,"fw",this.c.join(",")):sn(this.a.a,"fw"),this.a.toString()},$s.prototype.toString=function(){var e=zt(this.o,"/__/auth/handler");if(Ht(e,"apiKey",this.m),Ht(e,"appName",this.c),Ht(e,"authType",this.l),this.a.isOAuthProvider){var t=this.a;try{var n=fh.app(this.c).auth().ea()}catch(e){n=null}for(var r in t.$a=n,Ht(e,"providerId",this.a.providerId),n=lr((t=this.a).yb))n[r]=n[r].toString();r=t.Dc,n=re(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.cb&&t.$a&&!n[t.cb]&&(n[t.cb]=t.$a),ne(n)||Ht(e,"customParameters",hr(n))}if("function"==typeof this.a.Eb&&(t=this.a.Eb()).length&&Ht(e,"scopes",t.join(",")),this.i?Ht(e,"redirectUrl",this.i):sn(e.a,"redirectUrl"),this.g?Ht(e,"eventId",this.g):sn(e.a,"eventId"),this.h?Ht(e,"v",this.h):sn(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Kt(e,s)&&Ht(e,s,this.b[s]);return this.f?Ht(e,"eid",this.f):sn(e.a,"eid"),(s=Js(this.c)).length&&Ht(e,"fw",s.join(",")),e.toString()},(e=Zs.prototype).Ea=function(t,n,e){var r=new Nr("popup-closed-by-user"),i=new Nr("web-storage-unsupported"),o=this,s=!1;return this.ga().then(function(){var e,r;(r={type:"webStorageSupport"},ta(e=o).then(function(){return t=e.i,n=r,t.fb.then(function(){return new pe(function(e){t.a.send(n.type,n,e,ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var t,n}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then(function(e){e||(t&&Vn(t),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=t,new pe(function(t){return function e(){Ot(2e3).then(function(){if(n&&!n.closed)return e();t()})}()});var n}).then(function(){if(!s)return Ot(e).then(function(){n(r)})})},e.Mb=function(){var e=rr();return!cr(e)&&!dr(e)},e.Hb=function(){return!1},e.Cb=function(t,e,n,r,i,o,s){if(!t)return _e(new Nr("popup-blocked"));if(s&&!cr())return this.ga().s(function(e){Vn(t),i(e)}),r(),we();this.a||(this.a=ea(na(this)));var a=this;return this.a.then(function(){var e=a.ga().s(function(e){throw Vn(t),i(e),e});return r(),e}).then(function(){Mi(n),s||Un(ra(a.m,a.f,a.b,e,n,null,o,a.c,void 0,a.h),t)}).s(function(e){throw"auth/network-request-failed"==e.code&&(a.a=null),e})},e.Ca=function(e,t,n){this.a||(this.a=ea(na(this)));var r=this;return this.a.then(function(){Mi(t),Un(ra(r.m,r.f,r.b,e,t,jn(),n,r.c,void 0,r.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},e.ga=function(){var e=this;return ta(this).then(function(){return e.i.fb}).s(function(){throw e.a=null,new Nr("network-request-failed")})},e.Qb=function(){return!0},e.wa=function(e){this.g.push(e)},e.Ka=function(t){M(this.g,function(e){return e==t})},(e=ia.prototype).get=function(e){return we(this.a.getItem(e)).then(function(e){return e&&fr(e)})},e.set=function(e,t){return we(this.a.setItem(e,hr(t)))},e.P=function(e){return we(this.a.removeItem(e))},e.Y=function(){},e.ca=function(){};var sa,aa=[];function ua(e){this.a=e}function ca(e){this.c=e,this.b=!1,this.a=[]}function ha(r,e,t,n){var i,o,s,a,u=t||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(t,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(a),void 0!==e.data.response?t(e.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(e){return la(r,c),e}).s(function(e){throw la(r,c),e})}function la(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),M(e.a,function(e){return e==t})}}function fa(){if(!ya())throw new Nr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=h.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.u=!1,this.h=null;var e,r=this;Xn()&&self?(this.l=function(){var t=Xn()?self:null;if(A(aa,function(e){e.b==t&&(n=e)}),!n){var n=new oa(t);aa.push(n)}return n}(),this.l.subscribe("keyChanged",function(e,n){return wa(r).then(function(t){return 0<t.length&&A(r.a,function(e){e(t)}),{keyProcessed:P(t,n.key)}})}),this.l.subscribe("ping",function(){return we(["keyChanged"])})):((e=h.navigator)&&e.serviceWorker?we().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):we(null)).then(function(e){(r.h=e)&&(r.g=new ca(new ua(e)),ha(r.g,"ping",null,!0).then(function(e){e[0].fulfilled&&P(e[0].value,"keyChanged")&&(r.u=!0)}).s(function(){}))})}function pa(i){return new pe(function(t,n){var e=i.m.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},e.onsuccess=function(e){var r;(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(e):(r=i,new pe(function(e,t){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})).then(function(){return pa(i)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function da(e){return e.o||(e.o=pa(e)),e.o}function ya(){try{return h.indexedDB}catch(e){return}}function ma(e){return e.objectStore("firebaseLocalStorage")}function ga(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function va(e){return new pe(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function ba(e,t){return e.g&&e.h&&((n=h.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?ha(e.g,"keyChanged",{key:t},e.u).then(function(){}).s(function(){}):we();var n}function wa(r){return da(r).then(function(e){var i=ma(ga(e,!1));return i.getAll?va(i.getAll()):new pe(function(t,n){var r=[],e=i.openCursor();e.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},e.onerror=function(e){n(e.target.error)}})}).then(function(e){var t={},n=[];if(0==r.b){for(n=0;n<e.length;n++)t[e[n].fbase_key]=e[n].value;n=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(r.c,t),r.c=t}return n})}function _a(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Ta(e){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=e,this.b=we().then(function(){if(ya()){var t=pr(),n="__sak"+t;return sa=sa||new fa,(i=sa).set(n,t).then(function(){return i.get(n)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return i.P(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(e){return r.type=e.type,e.Y(function(t){A(r.a,function(e){e(t)})}),e})}function Ea(){this.a={},this.type="inMemory"}function Sa(){if(!function(){var e="Node"==Yn();if(e=Ca()||e&&fh.INTERNAL.node&&fh.INTERNAL.node.localStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==Yn())throw new Nr("internal-error","The LocalStorage compatibility library was not found.");throw new Nr("web-storage-unsupported")}this.a=Ca()||fh.INTERNAL.node.localStorage,this.type="localStorage"}function Ca(){try{var e=h.localStorage,t=pr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Ia(){this.type="nullStorage"}function xa(){if(!function(){var e="Node"==Yn();if(e=Na()||e&&fh.INTERNAL.node&&fh.INTERNAL.node.sessionStorage)try{return e.setItem("__sak","1"),e.removeItem("__sak"),1}catch(e){return}}()){if("Node"==Yn())throw new Nr("internal-error","The SessionStorage compatibility library was not found.");throw new Nr("web-storage-unsupported")}this.a=Na()||fh.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Na(){try{var e=h.sessionStorage,t=pr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}oa.prototype.f=function(n){var r=n.data.eventType,i=n.data.eventId,e=this.a[r];if(e&&0<e.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var t=[];A(e,function(e){t.push(we().then(function(){return e(n.origin,n.data.data)}))}),Ee(t).then(function(e){var t=[];A(e,function(e){t.push({fulfilled:e.Db,value:e.value,reason:e.reason?e.reason.message:void 0})}),A(t,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:t})})}},oa.prototype.subscribe=function(e,t){ne(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[e]&&(this.a[e]=[]),this.a[e].push(t)},oa.prototype.unsubscribe=function(e,t){void 0!==this.a[e]&&t?(M(this.a[e],function(e){return e==t}),0==this.a[e].length&&delete this.a[e]):t||delete this.a[e],ne(this.a)&&this.b.removeEventListener("message",this.c)},ua.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},ca.prototype.close=function(){for(;0<this.a.length;)la(this,this.a[0]);this.b=!0},(e=fa.prototype).set=function(n,r){var i,o=!1,s=this;return da(this).then(function(e){return va((e=ma(ga(i=e,!0))).get(n))}).then(function(e){var t=ma(ga(i,!0));return e?(e.value=r,va(t.put(e))):(s.b++,o=!0,(e={}).fbase_key=n,e.value=r,va(t.add(e)))}).then(function(){return s.c[n]=r,ba(s,n)}).ia(function(){o&&s.b--})},e.get=function(t){return da(this).then(function(e){return va(ma(ga(e,!1)).get(t))}).then(function(e){return e&&e.value})},e.P=function(t){var n=!1,r=this;return da(this).then(function(e){return n=!0,r.b++,va(ma(ga(e,!0)).delete(t))}).then(function(){return delete r.c[t],ba(r,t)}).ia(function(){n&&r.b--})},e.Y=function(e){var n;0==this.a.length&&(_a(n=this),function t(){n.f=setTimeout(function(){n.i=wa(n).then(function(t){0<t.length&&A(n.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}()),this.a.push(e)},e.ca=function(t){M(this.a,function(e){return e==t}),0==this.a.length&&_a(this)},(e=Ta.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},e.set=function(t,n){return this.b.then(function(e){return e.set(t,n)})},e.P=function(t){return this.b.then(function(e){return e.P(t)})},e.Y=function(e){this.a.push(e)},e.ca=function(t){M(this.a,function(e){return e==t})},(e=Ea.prototype).get=function(e){return we(this.a[e])},e.set=function(e,t){return this.a[e]=t,we()},e.P=function(e){return delete this.a[e],we()},e.Y=function(){},e.ca=function(){},(e=Sa.prototype).get=function(e){var t=this;return we().then(function(){return fr(t.a.getItem(e))})},e.set=function(t,n){var r=this;return we().then(function(){var e=hr(n);null===e?r.P(t):r.a.setItem(t,e)})},e.P=function(e){var t=this;return we().then(function(){t.a.removeItem(e)})},e.Y=function(e){h.window&&mt(h.window,"storage",e)},e.ca=function(e){h.window&&bt(h.window,"storage",e)},(e=Ia.prototype).get=function(){return we(null)},e.set=function(){return we()},e.P=function(){return we()},e.Y=function(){},e.ca=function(){},(e=xa.prototype).get=function(e){var t=this;return we().then(function(){return fr(t.a.getItem(e))})},e.set=function(t,n){var r=this;return we().then(function(){var e=hr(n);null===e?r.P(t):r.a.setItem(t,e)})},e.P=function(e){var t=this;return we().then(function(){t.a.removeItem(e)})},e.Y=function(){},e.ca=function(){};var Da,ka,Aa={A:Sa,Ra:xa},Ra={A:Sa,Ra:xa},Oa={A:ia,Ra:Ia},Pa={A:Sa,Ra:Ia},La={Zc:"local",NONE:"none",ad:"session"};function Ma(){var e=!(dr(rr())||!Gn()),t=cr(),n=or();this.o=e,this.h=t,this.l=n,this.a={},e=Da=Da||new function(){var e={};e.Browser=Aa,e.Node=Ra,e.ReactNative=Oa,e.Worker=Pa,this.a=e[Yn()]};try{this.g=!qn()&&br()||!h.indexedDB?new e.a.A:new Ta(Xn()?new Ea:new e.a.A)}catch(e){this.g=new Ea,this.h=!0}try{this.i=new e.a.Ra}catch(e){this.i=new Ea}this.m=new Ea,this.f=g(this.Pb,this),this.b={}}function Fa(){return ka=ka||new Ma}function qa(e,t){switch(t){case"session":return e.i;case"none":return e.m;default:return e.g}}function ja(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Ua(e,t,n){return n=ja(t,n),"local"==t.A&&(e.b[n]=null),qa(e,t.A).P(n)}function Ba(e){e.c&&(clearInterval(e.c),e.c=null)}(e=Ma.prototype).get=function(e,t){return qa(this,e.A).get(ja(e,t))},e.set=function(t,e,n){var r=ja(t,n),i=this,o=qa(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},e.addListener=function(e,t,n){var r;e=ja(e,t),this.l&&(this.b[e]=h.localStorage.getItem(e)),ne(this.a)&&(qa(this,"local").Y(this.f),this.h||(qn()||!br())&&h.indexedDB||!this.l||(Ba(r=this),r.c=setInterval(function(){for(var e in r.a){var t=h.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new st({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Pb(t))}},1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=ja(e,t),this.a[e]&&(M(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),ne(this.a)&&(qa(this,"local").ca(this.f),Ba(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=h.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Xa(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?qa(this,"local").ca(this.f):Ba(this),this.o)if(n=h.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?h.localStorage.setItem(t,r):h.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===h.localStorage.getItem(t)||(o.b[t]=h.localStorage.getItem(t),o.Xa(t))},Ve&&$e&&10==$e&&h.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else A(e,g(this.Xa,this))},e.Xa=function(e){this.a[e]&&A(this.a[e],function(e){e()})};var Va,Wa={name:"authEvent",A:"local"};function Ha(e,t){this.b=Ka,this.f=h.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=h.Int32Array?new Int32Array(64):Array(64),void 0!==Va||(Va=h.Int32Array?new Int32Array(Ja):Ja),this.reset()}t(Ha,function(){this.b=-1});for(var Ka=64,Qa=Ka-1,za=[],Ga=0;Ga<Qa;Ga++)za[Ga]=0;var Xa=F(128,za);function Ya(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+s|0}r=0|e.a[0],i=0|e.a[1];var a=0|e.a[2],u=0|e.a[3],c=0|e.a[4],h=0|e.a[5],l=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Va[t])|0)+(0|n[t])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+a|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+h|0,e.a[6]=e.a[6]+l|0,e.a[7]=e.a[7]+o|0}function $a(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(c(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Ya(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Ya(e),i=0)}}e.c=i,e.g+=n}Ha.prototype.reset=function(){this.g=this.c=0,this.a=h.Int32Array?new Int32Array(this.h):q(this.h)};var Ja=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Za(){Ha.call(this,8,eu)}t(Za,Ha);var eu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function tu(e,t,n,r,i){this.m=e,this.i=t,this.l=n,this.o=r||null,this.u=i||null,this.h=t+":"+n,this.v=new function(){this.a=Fa()},this.g=new function(e){this.a=e,this.b=Fa()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function nu(e){return new Nr("invalid-cordova-configuration",e)}function ru(e){var t=new Za;$a(t,e),e=[];var n=8*t.g;t.c<56?$a(t,Xa,56-t.c):$a(t,Xa,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Ya(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return R(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}function iu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function ou(a){return a.f||(a.f=a.ga().then(function(){return new pe(function(n){function t(r){e=!0,s&&s.cancel(),su(i).then(function(e){var t=o;if(e&&r&&r.url){var n=null;-1!=(t=hi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=fr(Kt(n=Qt(t),"firebaseError")||null))?Dr(n):null)?new Fi(e.b,e.c,null,null,n):new Fi(e.b,e.c,t,e.g)),t=n||o}iu(i,t)})}var i,o,e,s,r;a.wa(function e(t){return n(t),a.Ka(e),!1}),i=a,o=new Fi("unknown",null,null,null,new Nr("no-auth-event")),e=!1,s=Ot(500).then(function(){return su(i).then(function(){e||iu(i,o)})}),r=h.handleOpenURL,h.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ir("BuildInfo.packageName",h).toLowerCase()+"://")&&t({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}},(Bi=Bi||new ji).subscribe(t)})})),a.f}function su(t){var e,n=null;return(e=t.g).b.get(Wa,e.a).then(function(e){return qi(e)}).then(function(e){return n=e,Ua((e=t.g).b,Wa,e.a)}).then(function(){return n})}(e=tu.prototype).ga=function(){return this.za?this.za:this.za=(zn(void 0)?Qn().then(function(){return new pe(function(e,t){var n=h.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof ir("universalLinks.subscribe",h))throw nu("cordova-universal-links-plugin-fix is not installed");if(void 0===ir("BuildInfo.packageName",h))throw nu("cordova-plugin-buildinfo is not installed");if("function"!=typeof ir("cordova.plugins.browsertab.openUrl",h))throw nu("cordova-plugin-browsertab is not installed");if("function"!=typeof ir("cordova.InAppBrowser.open",h))throw nu("cordova-plugin-inappbrowser is not installed")},function(){throw new Nr("cordova-not-ready")})},e.Ea=function(e,t){return t(new Nr("operation-not-supported-in-this-environment")),we()},e.Cb=function(){return _e(new Nr("operation-not-supported-in-this-environment"))},e.Qb=function(){return!1},e.Mb=function(){return!0},e.Hb=function(){return!0},e.Ca=function(e,t,n){if(this.c)return _e(new Nr("redirect-operation-pending"));var r=this,i=h.document,o=null,s=null,a=null,u=null;return this.c=we().then(function(){return Mi(t),ou(r)}).then(function(){return function(n,e,t,r){var i=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),o=new Fi(e,r,null,i,new Nr("no-auth-event")),s=ir("BuildInfo.packageName",h);if("string"!=typeof s)throw new Nr("invalid-cordova-configuration");var a=ir("BuildInfo.displayName",h),u={};if(rr().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=s;else{if(!rr().toLowerCase().match(/android/))return _e(new Nr("operation-not-supported-in-this-environment"));u.apn=s}a&&(u.appDisplayName=a),i=ru(i),u.sessionId=i;var c=ra(n.m,n.i,n.l,e,t,null,r,n.o,u,n.u);return n.ga().then(function(){var e=n.h;return n.v.a.set(Wa,o.C(),e)}).then(function(){var e=ir("cordova.plugins.browsertab.isAvailable",h);if("function"!=typeof e)throw new Nr("invalid-cordova-configuration");var t=null;e(function(e){if(e){if("function"!=typeof(t=ir("cordova.plugins.browsertab.openUrl",h)))throw new Nr("invalid-cordova-configuration");t(c)}else{if("function"!=typeof(t=ir("cordova.InAppBrowser.open",h)))throw new Nr("invalid-cordova-configuration");e=!(!(e=rr()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),n.a=t(c,e?"_blank":"_system","location=yes")}})})}(r,e,t,n)}).then(function(){return new pe(function(t,e){s=function(){var e=ir("cordova.plugins.browsertab.close",h);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(s),a=function(){o=o||Ot(2e3).then(function(){e(new Nr("redirect-cancelled-by-user"))})},u=function(){gr()&&a()},i.addEventListener("resume",a,!1),rr().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(e){return su(r).then(function(){throw e})})}).ia(function(){a&&i.removeEventListener("resume",a,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),s&&r.Ka(s),r.c=null})},e.wa=function(t){this.b.push(t),ou(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fi("unknown",null,null,null,new Nr("no-auth-event")),t(e))})},e.Ka=function(t){M(this.b,function(e){return e==t})};var au={name:"pendingRedirect",A:"session"};function uu(e){return Ua(e.b,au,e.a)}function cu(e,t,n){this.u=e,this.l=t,this.m=n,this.h=[],this.f=!1,this.i=g(this.bb,this),this.b=new bu,this.o=new Eu,this.g=new function(e){this.a=e,this.b=Fa()}(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=hu(this.u,this.l,this.m,Gr)}function hu(e,t,n,r){var i=fh.SDK_VERSION||null;return new(zn()?tu:Zs)(e,t,n,i,r)}function lu(t){t.f||(t.f=!0,t.a.wa(t.i));var n=t.a;return t.a.ga().s(function(e){throw t.a==n&&t.reset(),e})}function fu(n){n.a.Mb()&&lu(n).s(function(e){var t=new Fi("unknown",null,null,null,new Nr("operation-not-supported-in-this-environment"));mu(e)&&n.bb(t)}),n.a.Hb()||wu(n.b)}(e=cu.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=hu(this.u,this.l,this.m)},e.Ya=function(){this.b.Ya()},e.subscribe=function(e){if(P(this.h,e)||this.h.push(e),!this.f){var n=this;(t=this.g).b.get(au,t.a).then(function(e){return"pending"==e}).then(function(e){e?uu(n.g).then(function(){lu(n).s(function(e){var t=new Fi("unknown",null,null,null,new Nr("operation-not-supported-in-this-environment"));mu(e)&&n.bb(t)})}):fu(n)}).s(function(){fu(n)})}var t},e.unsubscribe=function(t){M(this.h,function(e){return e==t})},e.bb=function(e){if(!e)throw new Nr("invalid-auth-event");for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.vb(e.b,e.c)){(t=this.c[e.b])&&t.h(e,r),t=!0;break}}return wu(this.b),t};var pu=new mr(2e3,1e4),du=new mr(3e4,6e4);function yu(e,t,n,r,i,o){return e.a.Cb(t,n,r,function(){e.f||(e.f=!0,e.a.wa(e.i))},function(){e.reset()},i,o)}function mu(e){return e&&"auth/cordova-not-ready"==e.code}cu.prototype.fa=function(){return this.b.fa()},cu.prototype.Ca=function(e,t,n){var r,i,o=this;return(i=this.g).b.set(au,"pending",i.a).then(function(){return o.a.Ca(e,t,n).s(function(e){if(mu(e))throw new Nr("operation-not-supported-in-this-environment");return r=e,uu(o.g).then(function(){throw r})}).then(function(){return o.a.Qb()?new pe(function(){}):uu(o.g).then(function(){return o.fa()}).then(function(){}).s(function(){})})})},cu.prototype.Ea=function(t,n,e,r){return this.a.Ea(e,function(e){t.ha(n,null,e,r)},pu.get())};var gu={};function vu(e,t,n){var r=t+":"+n;return gu[r]||(gu[r]=new cu(e,t,n)),gu[r]}function bu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function wu(e){e.g||(e.g=!0,Tu(e,!1,null,null))}function _u(e,t){if(e.b=function(){return we(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Tu(e,t,n,r){t?r?function(e,t){if(e.b=function(){return _e(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):_u(e,n):_u(e,{user:null}),e.f=[],e.c=[]}function Eu(){}function Su(){this.sb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.sb},set:function(e){this.sb=e},enumerable:!1})}function Cu(e,t){this.a=t,Sr(this,"verificationId",e)}function Iu(e,t,n,r){return new Oi(e).Ua(t,n).then(function(e){return new Cu(e,r)})}function xu(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Nu(e){this.f=e,this.b=this.a=null,this.c=0}function Du(e,t){var n=t[zo],r=t.refreshToken;t=ku(t.expiresIn),e.b=n,e.c=t,e.a=r}function ku(e){return b()+1e3*parseInt(e,10)}function Au(t,e){return(r=t.f,i=e,new pe(function(t,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?es(r,r.i+"?key="+encodeURIComponent(r.b),function(e){e?e.error?n(Hs(e)):e.access_token&&e.refresh_token?t(e):n(new Nr("internal-error")):n(new Nr("network-request-failed"))},"POST",on(i).toString(),r.f,r.l.get()):n(new Nr("internal-error"))})).then(function(e){return t.b=e.access_token,t.c=ku(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e});var r,i}function Ru(e,t){this.a=e||null,this.b=t||null,Cr(this,{lastSignInTime:vr(t||null),creationTime:vr(e||null)})}function Ou(e,t){for(var n in ot.call(this,e),t)this[n]=t[n]}function Pu(e,t,n){var r;this.G=[],this.m=e.apiKey,this.o=e.appName,this.u=e.authDomain||null,e=fh.SDK_VERSION?nr(fh.SDK_VERSION):null,this.b=new Ko(this.m,Yr(Gr),e),this.h=new Nu(this.b),Bu(this,t[zo]),Du(this.h,t),Sr(this,"refreshToken",this.h.a),Hu(this,n||{}),Nt.call(this),this.I=!1,this.u&&sr()&&(this.a=vu(this.u,this.m,this.o)),this.N=[],this.i=null,this.w=(r=this,new xu(function(){return r.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var e=r.h.c-b()-3e5;return 0<e?e:0})),this.V=g(this.Ha,this);var i=this;this.ka=null,this.ta=function(e){i.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){Mu(i,e.c)},this.W=null}function Lu(e,t){e.X&&bt(e.X,"languageCodeChanged",e.ta),(e.X=t)&&mt(t,"languageCodeChanged",e.ta)}function Mu(e,t){e.O=t,Zo(e.b,fh.SDK_VERSION?nr(fh.SDK_VERSION,e.O):null)}function Fu(e,t){e.W&&bt(e.W,"frameworkChanged",e.sa),(e.W=t)&&mt(t,"frameworkChanged",e.sa)}function qu(t){try{return fh.app(t.o).auth()}catch(e){throw new Nr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function ju(e){e.D||e.w.b||(e.w.start(),bt(e,"tokenChanged",e.V),mt(e,"tokenChanged",e.V))}function Uu(e){bt(e,"tokenChanged",e.V),e.w.stop()}function Bu(e,t){e.ra=t,Sr(e,"_lat",t)}function Vu(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return Ee(t).then(function(){return e})}function Wu(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function Hu(e,t){Cr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Ru(t.createdAt,t.lastLoginAt),providerData:[]})}function Ku(){}function Qu(e){return we().then(function(){if(e.D)throw new Nr("app-deleted")})}function zu(e){return R(e.providerData,function(e){return e.providerId})}function Gu(e,t){t&&(Xu(e,t.providerId),e.providerData.push(t))}function Xu(e,t){M(e.providerData,function(e){return e.providerId==t})}function Yu(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Sr(e,t,n)}function $u(t,e){var n,r,i;t!=e&&(Cr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Sr(t,"metadata",new Ru((i=e.metadata).a,i.b)):Sr(t,"metadata",new Ru),A(e.providerData,function(e){Gu(t,e)}),n=t.h,r=e.h,n.b=r.b,n.a=r.a,n.c=r.c,Sr(t,"refreshToken",t.h.a))}function Ju(i){return i.F().then(function(e){var t,n,r=i.isAnonymous;return(n=e,Vs((t=i).b,Es,{idToken:n}).then(g(t.xc,t))).then(function(){return r||Yu(i,"isAnonymous",!1),e})})}function Zu(e,t){t[zo]&&e.ra!=t[zo]&&(Du(e.h,t),e.dispatchEvent(new Ou("tokenChanged")),Bu(e,t[zo]),Yu(e,"refreshToken",e.h.a))}function ec(e,t){return Ju(e).then(function(){if(P(zu(e),t))return Vu(e).then(function(){throw new Nr("provider-already-linked")})})}function tc(e,t,n){return Ir({user:e,credential:Li(t),additionalUserInfo:t=ti(t),operationType:n})}function nc(e,t){return Zu(e,t),e.reload().then(function(){return e})}function rc(n,r,e,t,i){if(!sr())return _e(new Nr("operation-not-supported-in-this-environment"));if(n.i&&!i)return _e(n.i);var o=ei(e.providerId),s=pr(n.uid+":::"),a=null;(!cr()||Gn())&&n.u&&e.isOAuthProvider&&(a=ra(n.u,n.m,n.o,r,e,null,s,fh.SDK_VERSION||null));var u=Wn(a,o&&o.Ba,o&&o.Aa);return t=t().then(function(){if(oc(n),!i)return n.F().then(function(){})}).then(function(){return yu(n.a,u,r,e,s,!!a)}).then(function(){return new pe(function(e,t){n.ha(r,null,new Nr("cancelled-popup-request"),n.g||null),n.f=e,n.v=t,n.g=s,n.c=n.a.Ea(n,r,u,s)})}).then(function(e){return u&&Vn(u),e?Ir(e):null}).s(function(e){throw u&&Vn(u),e}),sc(n,t,i)}function ic(t,e,n,r,i){if(!sr())return _e(new Nr("operation-not-supported-in-this-environment"));if(t.i&&!i)return _e(t.i);var o=null,s=pr(t.uid+":::");return r=r().then(function(){if(oc(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=s,Vu(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(uc,t.C(),e.a)),e}).then(function(){return t.a.Ca(e,n,s)}).s(function(e){if(o=e,t.ba)return cc(t.ba);throw o}).then(function(){if(o)throw o}),sc(t,r,i)}function oc(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new Nr("internal-error");throw new Nr("auth-domain-config-required")}}function sc(e,t,n){var r,i,o,s=(i=t,o=n,(r=e).i&&!o?(i.cancel(),_e(r.i)):i.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(r.i||r.dispatchEvent(new Ou("userInvalidated")),r.i=e),e}));return e.G.push(s),s.ia(function(){L(e.G,s)}),s}function ac(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[zo]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-b())/1e3;var r=new Pu(t,n,e);return e.providerData&&A(e.providerData,function(e){e&&Gu(r,Ir(e))}),e.redirectEventId&&(r.aa=e.redirectEventId),r}bu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},bu.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.b,r=e.c,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Tu(this,!0,null,e.a),we()):t.xa(n,r)?function(t,e,n){n=n.xa(e.b,e.c);var r=e.f,i=e.g,o=e.h,s=!!e.b.match(/Redirect$/);n(r,i,o).then(function(e){Tu(t,s,e,null)}).s(function(e){Tu(t,s,null,e)})}(this,e,t):_e(new Nr("invalid-auth-event")):(Tu(this,!1,null,null),we())}else _e(new Nr("invalid-auth-event"))},bu.prototype.Ya=function(){this.g&&!this.i&&Tu(this,!1,null,null)},bu.prototype.fa=function(){var i=this;return new pe(function(e,t){var n,r;i.b?i.b().then(e,t):(i.f.push(e),i.c.push(t),n=i,r=new Nr("timeout"),n.a&&n.a.cancel(),n.a=Ot(du.get()).then(function(){n.b||(n.g=!0,Tu(n,!0,null,r))}))})},Eu.prototype.h=function(e,t){if(e){var n=e.b,r=e.c;e.a?(t.ha(e.b,null,e.a,e.c),we()):t.xa(n,r)?(o=t,s=(i=e).c,a=i.b,o.xa(a,s)(i.f,i.g,i.h).then(function(e){o.ha(a,e,null,s)}).s(function(e){o.ha(a,null,e,s)})):_e(new Nr("invalid-auth-event"))}else _e(new Nr("invalid-auth-event"));var i,o,s,a},Cu.prototype.confirm=function(e){return e=Pi(this.verificationId,e),this.a(e)},xu.prototype.start=function(){this.a=this.c,function t(n,e){var r,i;n.stop(),n.b=Ot((r=n,(i=e)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then(function(){return t=h.document,n=null,gr()||!t?we():new pe(function(e){n=function(){gr()&&(t.removeEventListener("visibilitychange",n,!1),e())},t.addEventListener("visibilitychange",n,!1)}).s(function(e){throw t.removeEventListener("visibilitychange",n,!1),e});var t,n}).then(function(){return n.h()}).then(function(){t(n,!0)}).s(function(e){n.i(e)&&t(n,!1)})}(this,!0)},xu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Nu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Nu.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?_e(new Nr("user-token-expired")):e||!this.b||b()>this.c-3e4?this.a?Au(this,{grant_type:"refresh_token",refresh_token:this.a}):we(null):we({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ru.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},t(Ou,ot),t(Pu,Nt),Pu.prototype.pa=function(e){this.ka=e,Jo(this.b,e)},Pu.prototype.ea=function(){return this.ka},Pu.prototype.ya=function(){return q(this.O)},Pu.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Sr(Pu.prototype,"providerId","firebase"),(e=Pu.prototype).reload=function(){var e=this;return sc(this,Qu(this).then(function(){return Ju(e).then(function(){return Vu(e)}).then(Ku)}))},e.dc=function(e){return this.F(e).then(function(e){return new function(e){var t=zr(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Nr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Cr(this,{token:e,expirationTime:vr(1e3*t.exp),authTime:vr(1e3*t.auth_time),issuedAtTime:vr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}(e)})},e.F=function(e){var t=this;return sc(this,Qu(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new Nr("internal-error");return e.accessToken!=t.ra&&(Bu(t,e.accessToken),t.dispatchEvent(new Ou("tokenChanged"))),Yu(t,"refreshToken",e.refreshToken),e.accessToken}))},e.xc=function(e){if(!(e=e.users)||!e.length)throw new Nr("internal-error");Hu(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=(r=(r=e).providerUserInfo)&&r.length?R(r,function(s){return new function(e,t,n,r,i,o){Cr(this,{uid:e,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:n||null,phoneNumber:s.phoneNumber||null,providerId:t})}(s.rawId,s.providerId,s.email,0,0,0)}):[],n=0;n<t.length;n++)Gu(this,t[n]);var r;Yu(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.gb=function(e){var t=this,n=null;return sc(this,e.f(this.b,this.uid).then(function(e){return Zu(t,e),n=tc(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},e.yc=function(e){return Tr("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.gb(e).then(function(){})},e.eb=function(t){var n=this,r=null;return sc(this,ec(this,t.providerId).then(function(){return n.F()}).then(function(e){return t.b(n.b,e)}).then(function(e){return r=tc(n,e,"link"),nc(n,e)}).then(function(){return r}))},e.pc=function(e){return Tr("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.eb(e).then(function(e){return e.user})},e.qc=function(e,t){var n=this;return sc(this,ec(this,"phone").then(function(){return Iu(qu(n),e,t,g(n.eb,n))}))},e.zc=function(e,t){var n=this;return sc(this,we().then(function(){return Iu(qu(n),e,t,g(n.gb,n))}),!0)},e.pb=function(t){var n=this;return sc(this,this.F().then(function(e){return n.b.pb(e,t)}).then(function(e){return Zu(n,e),n.reload()}))},e.Rc=function(t){var n=this;return sc(this,this.F().then(function(e){return t.b(n.b,e)}).then(function(e){return Zu(n,e),n.reload()}))},e.qb=function(t){var n=this;return sc(this,this.F().then(function(e){return n.b.qb(e,t)}).then(function(e){return Zu(n,e),n.reload()}))},e.rb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Qu(this);var n=this;return sc(this,this.F().then(function(e){return n.b.rb(e,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(e){return Zu(n,e),Yu(n,"displayName",e.displayName||null),Yu(n,"photoURL",e.photoUrl||null),A(n.providerData,function(e){"password"===e.providerId&&(Sr(e,"displayName",n.displayName),Sr(e,"photoURL",n.photoURL))}),Vu(n)}).then(Ku))},e.Pc=function(t){var n=this;return sc(this,Ju(this).then(function(e){return P(zu(n),t)?Vs(n.b,ws,{idToken:e,deleteProvider:[t]}).then(function(e){var t={};return A(e.providerUserInfo||[],function(e){t[e.providerId]=!0}),A(zu(n),function(e){t[e]||Xu(n,e)}),t[Oi.PROVIDER_ID]||Sr(n,"phoneNumber",null),Vu(n)}):Vu(n).then(function(){throw new Nr("no-such-provider")})}))},e.delete=function(){var t=this;return sc(this,this.F().then(function(e){return Vs(t.b,bs,{idToken:e})}).then(function(){t.dispatchEvent(new Ou("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Lu(t,null),Fu(t,null),t.G=[],t.D=!0,Uu(t),Sr(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},e.vb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},e.ha=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?g(this.Ab,this):"reauthViaPopup"==e&&t==(this.g||null)?g(this.Bb,this):"linkViaRedirect"==e&&(this.aa||null)==t?g(this.Ab,this):"reauthViaRedirect"==e&&(this.aa||null)==t?g(this.Bb,this):null},e.rc=function(e){var t=this;return rc(this,"linkViaPopup",e,function(){return ec(t,e.providerId).then(function(){return Vu(t)})},!1)},e.Ac=function(e){return rc(this,"reauthViaPopup",e,function(){return we()},!0)},e.sc=function(e){var t=this;return ic(this,"linkViaRedirect",e,function(){return ec(t,e.providerId)},!1)},e.Bc=function(e){return ic(this,"reauthViaRedirect",e,function(){return we()},!0)},e.Ab=function(t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return sc(this,this.F().then(function(e){return fs(i.b,{requestUri:t,postBody:r,sessionId:n,idToken:e})}).then(function(e){return o=tc(i,e,"link"),nc(i,e)}).then(function(){return o}))},e.Bb=function(e,t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return sc(this,we().then(function(){return li(ps(r.b,{requestUri:e,sessionId:t,postBody:n}),r.uid)}).then(function(e){return i=tc(r,e,"reauthenticate"),Zu(r,e),r.i=null,r.reload()}).then(function(){return i}),!0)},e.jb=function(t){var n=this,r=null;return sc(this,this.F().then(function(e){return r=e,void 0===t||ne(t)?{}:Vr(new Rr(t))}).then(function(e){return n.b.jb(r,e)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},e.toJSON=function(){return this.C()},e.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&ae(t,this.metadata.C()),A(this.providerData,function(e){t.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(e))}),t};var uc={name:"redirectUser",A:"session"};function cc(e){return Ua(e.b,uc,e.a)}function hc(e){var t,n,r,i,o,s,a,u,c;this.a=e,this.b=Fa(),this.c=null,this.f=(t=this,a=pc("local"),u=pc("session"),c=pc("none"),(n=t.b,r=a,i=t.a,o=ja(r,i),s=qa(n,r.A),n.get(r,i).then(function(e){var t=null;try{t=fr(h.localStorage.getItem(o))}catch(e){}if(t&&!e)return h.localStorage.removeItem(o),n.set(r,t,i);t&&e&&"localStorage"!=s.type&&h.localStorage.removeItem(o)})).then(function(){return t.b.get(u,t.a)}).then(function(e){return e?u:t.b.get(c,t.a).then(function(e){return e?c:t.b.get(a,t.a).then(function(e){return e?a:t.b.get(fc,t.a).then(function(e){return e?pc(e):a})})})}).then(function(e){return t.c=e,lc(t,e.A)}).s(function(){t.c||(t.c=a)})),this.b.addListener(pc("local"),this.a,g(this.g,this))}function lc(e,t){var n,a,r=[];for(n in La)La[n]!==t&&r.push(Ua(e.b,pc(La[n]),e.a));return r.push(Ua(e.b,fc,e.a)),a=r,new pe(function(n,t){var r=a.length,i=[];if(r)for(var e=function(e,t){r--,i[e]=t,0==r&&n(i)},o=function(e){t(e)},s=0;s<a.length;s++)Te(a[s],v(e,s),o);else n(i)})}hc.prototype.g=function(){var t=this,n=pc("local");gc(this,function(){return we().then(function(){return t.c&&"local"!=t.c.A?t.b.get(n,t.a):null}).then(function(e){if(e)return lc(t,"local").then(function(){t.c=n})})})};var fc={name:"persistence",A:"session"};function pc(e){return{name:"authUser",A:e}}function dc(e,t){return gc(e,function(){return e.b.set(e.c,t.C(),e.a)})}function yc(e){return gc(e,function(){return Ua(e.b,e.c,e.a)})}function mc(e,t){return gc(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),ac(e||{})})})}function gc(e,t){return e.f=e.f.then(t,t),e.f}function vc(e){if(this.m=!1,Sr(this,"settings",new Su),Sr(this,"app",e),!Cc(this).options||!Cc(this).options.apiKey)throw new Nr("invalid-api-key");var t,n,r,i,o,s,a,u,c,h,l,f;e=fh.SDK_VERSION?nr(fh.SDK_VERSION):null,this.b=new Ko(Cc(this).options&&Cc(this).options.apiKey,Yr(Gr),e),this.N=[],this.o=[],this.I=[],this.Tb=fh.INTERNAL.createSubscribe(g(this.mc,this)),this.O=void 0,this.Ub=fh.INTERNAL.createSubscribe(g(this.nc,this)),Ec(this,null),this.h=new hc(Cc(this).options.apiKey+":"+Cc(this).name),this.w=new function(e){this.a=e,this.b=Fa()}(Cc(this).options.apiKey+":"+Cc(this).name),this.V=Dc(this,(l=Cc(s=this).options.authDomain,f=(h=(u=(a=s).w,c=Cc(a).options.authDomain,u.b.get(uc,u.a).then(function(e){return e&&c&&(e.authDomain=c),ac(e||{})})).then(function(e){return(a.D=e)&&(e.ba=a.w),cc(a.w)}),Dc(a,h)).then(function(){return mc(s.h,l)}).then(function(t){return t?(t.ba=s.w,s.D&&(s.D.aa||null)==(t.aa||null)?t:t.reload().then(function(){return dc(s.h,t).then(function(){return t})}).s(function(e){return"auth/network-request-failed"==e.code?t:yc(s.h)})):null}).then(function(e){Ec(s,e||null)}),Dc(s,f))),this.i=Dc(this,(o=this).V.then(function(){return o.fa()}).s(function(){}).then(function(){if(!o.m)return o.ka()}).s(function(){}).then(function(){if(!o.m){o.X=!0;var e=o.h;e.b.addListener(pc("local"),e.a,o.ka)}})),this.X=!1,this.ka=g(this.Mc,this),this.Ha=g(this.Z,this),this.ra=g(this.bc,this),this.sa=g(this.jc,this),this.ta=g(this.kc,this),r=Cc(n=this).options.authDomain,i=Cc(n).options.apiKey,r&&sr()&&(n.Sb=n.V.then(function(){if(!n.m){if(n.a=vu(r,i,Cc(n).name),n.a.subscribe(n),Ic(n)&&Wu(Ic(n)),n.D){Wu(n.D);var e=n.D;e.pa(n.ea()),Lu(e,n),Mu(e=n.D,n.G),Fu(e,n),n.D=null}return n.a}})),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.tc,this),this.u=0,Nt.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),t.W=null,this.G=[]}function bc(e){ot.call(this,"languageCodeChanged"),this.g=e}function wc(e){ot.call(this,"frameworkChanged"),this.c=e}function _c(e){return e.Sb||_e(new Nr("auth-domain-config-required"))}function Tc(o,s){var a={};return a.apiKey=Cc(o).options.apiKey,a.authDomain=Cc(o).options.authDomain,a.appName=Cc(o).name,o.V.then(function(){return e=a,t=s,n=o.w,r=o.ya(),i=new Pu(e,t),n&&(i.ba=n),r&&Mu(i,r),i.reload().then(function(){return i});var e,t,n,r,i}).then(function(e){return Ic(o)&&e.uid==Ic(o).uid?$u(Ic(o),e):(Ec(o,e),Wu(e)),o.Z(e)}).then(function(){Nc(o)})}function Ec(e,t){var n,r;Ic(e)&&(n=Ic(e),r=e.Ha,M(n.N,function(e){return e==r}),bt(Ic(e),"tokenChanged",e.ra),bt(Ic(e),"userDeleted",e.sa),bt(Ic(e),"userInvalidated",e.ta),Uu(Ic(e))),t&&(t.N.push(e.Ha),mt(t,"tokenChanged",e.ra),mt(t,"userDeleted",e.sa),mt(t,"userInvalidated",e.ta),0<e.u&&ju(t)),Sr(e,"currentUser",t),t&&(t.pa(e.ea()),Lu(t,e),Mu(t,e.G),Fu(t,e))}function Sc(t,e){var n=null,r=null;return Dc(t,e.then(function(e){return n=Li(e),r=ti(e),Tc(t,e)}).then(function(){return Ir({user:Ic(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Cc(e){return e.app}function Ic(e){return e.currentUser}function xc(e){return Ic(e)&&Ic(e)._lat||null}function Nc(e){if(e.X){for(var t=0;t<e.o.length;t++)e.o[t]&&e.o[t](xc(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](xc(e))}}function Dc(e,t){return e.N.push(t),t.ia(function(){L(e.N,t)}),t}function kc(){}function Ac(){this.a={},this.b=1e12}hc.prototype.mb=function(t){var n=null,r=this;return function(e){var t=new Nr("invalid-persistence-type"),n=new Nr("unsupported-persistence-type");e:{for(r in La)if(La[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(Yn()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!or()&&"none"!==e)throw n}}(t),gc(this,function(){return t!=r.c.A?r.b.get(r.c,r.a).then(function(e){return n=e,lc(r,t)}).then(function(){if(r.c=pc(t),n)return r.b.set(r.c,n,r.a)}):we()})},t(vc,Nt),t(bc,ot),t(wc,ot),(e=vc.prototype).mb=function(e){return Dc(this,e=this.h.mb(e))},e.pa=function(e){this.W===e||this.m||(this.W=e,Jo(this.b,this.W),this.dispatchEvent(new bc(this.ea())))},e.ea=function(){return this.W},e.Sc=function(){var e=h.navigator;this.pa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.tc=function(e){this.G.push(e),Zo(this.b,fh.SDK_VERSION?nr(fh.SDK_VERSION,this.G):null),this.dispatchEvent(new wc(this.G))},e.ya=function(){return q(this.G)},e.toJSON=function(){return{apiKey:Cc(this).options.apiKey,authDomain:Cc(this).options.authDomain,appName:Cc(this).name,currentUser:Ic(this)&&Ic(this).C()}},e.vb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ha=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?g(this.ac,this):null},e.ac=function(e,t,n){var r=this;e={requestUri:e,postBody:n,sessionId:t},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,s=ls(r.b,e).then(function(e){return i=Li(e),o=ti(e),e});return Dc(this,e=r.V.then(function(){return s}).then(function(e){return Tc(r,e)}).then(function(){return Ir({user:Ic(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},e.Kc=function(t){if(!sr())return _e(new Nr("operation-not-supported-in-this-environment"));var n=this,e=ei(t.providerId),r=pr(),i=null;(!cr()||Gn())&&Cc(this).options.authDomain&&t.isOAuthProvider&&(i=ra(Cc(this).options.authDomain,Cc(this).options.apiKey,Cc(this).name,"signInViaPopup",t,null,r,fh.SDK_VERSION||null));var o=Wn(i,e&&e.Ba,e&&e.Aa);return Dc(this,e=_c(this).then(function(e){return yu(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new pe(function(e,t){n.ha("signInViaPopup",null,new Nr("cancelled-popup-request"),n.g),n.f=e,n.v=t,n.g=r,n.c=n.a.Ea(n,"signInViaPopup",o,r)})}).then(function(e){return o&&Vn(o),e?Ir(e):null}).s(function(e){throw o&&Vn(o),e}))},e.Lc=function(e){if(!sr())return _e(new Nr("operation-not-supported-in-this-environment"));var t=this;return Dc(this,_c(this).then(function(){return gc(e=t.h,function(){return e.b.set(fc,e.c.A,e.a)});var e}).then(function(){return t.a.Ca("signInViaRedirect",e)}))},e.fa=function(){if(!sr())return _e(new Nr("operation-not-supported-in-this-environment"));var e=this;return Dc(this,_c(this).then(function(){return e.a.fa()}).then(function(e){return e?Ir(e):null}))},e.Qc=function(e){if(!e)return _e(new Nr("null-user"));var t=this,n={};n.apiKey=Cc(this).options.apiKey,n.authDomain=Cc(this).options.authDomain,n.appName=Cc(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.m,authDomain:e.u,appName:e.o};var i=e.h,o={};return o[zo]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-b())/1e3,t=new Pu(t,o),n&&(t.ba=n),r&&Mu(t,r),$u(t,e),t}(e,n,t.w,t.ya());return Dc(this,this.i.then(function(){if(Cc(t).options.apiKey!=e.m)return r.reload()}).then(function(){return Ic(t)&&e.uid==Ic(t).uid?($u(Ic(t),e),t.Z(e)):(Ec(t,r),Wu(r),t.Z(r))}).then(function(){Nc(t)}))},e.nb=function(){var e=this;return Dc(this,this.i.then(function(){return Ic(e)?(Ec(e,null),yc(e.h).then(function(){Nc(e)})):we()}))},e.Mc=function(){var r=this;return mc(this.h,Cc(this).options.authDomain).then(function(e){if(!r.m){var t;if(t=Ic(r)&&e){t=Ic(r).uid;var n=e.uid;t=null!=t&&""!==t&&null!=n&&""!==n&&t==n}if(t)return $u(Ic(r),e),Ic(r).F();(Ic(r)||e)&&(Ec(r,e),e&&(Wu(e),e.ba=r.w),r.a&&r.a.subscribe(r),Nc(r))}})},e.Z=function(e){return dc(this.h,e)},e.bc=function(){Nc(this),this.Z(Ic(this))},e.jc=function(){this.nb()},e.kc=function(){this.nb()},e.mc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(Ic(t))})},e.nc=function(e){var t,n,r=this;n=function(){e.next(Ic(r))},(t=this).I.push(n),Dc(t,t.i.then(function(){!t.m&&P(t.I,n)&&t.O!==t.getUid()&&(t.O=t.getUid(),n(xc(t)))}))},e.vc=function(e,t,n){var r=this;return this.X&&fh.Promise.resolve().then(function(){s(e)?e(Ic(r)):s(e.next)&&e.next(Ic(r))}),this.Tb(e,t,n)},e.uc=function(e,t,n){var r=this;return this.X&&fh.Promise.resolve().then(function(){r.O=r.getUid(),s(e)?e(Ic(r)):s(e.next)&&e.next(Ic(r))}),this.Ub(e,t,n)},e.cc=function(e){var t=this;return Dc(this,this.i.then(function(){return Ic(t)?Ic(t).F(e).then(function(e){return{accessToken:e}}):null}))},e.Nb=function(e){var n=this;return this.i.then(function(){return Sc(n,Vs(n.b,Fs,{token:e}))}).then(function(e){var t=e.user;return Yu(t,"isAnonymous",!1),n.Z(t),e})},e.Ec=function(e){return Tr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(e)},e.Fc=function(e,t){return Tr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(e,t)},e.Ob=function(e,t){var n=this;return this.i.then(function(){return Sc(n,Vs(n.b,qs,{email:e,password:t}))})},e.xb=function(e,t){var n=this;return this.i.then(function(){return Sc(n,Vs(n.b,gs,{email:e,password:t}))})},e.Wb=function(e,t){return Tr("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.xb(e,t)},e.Hc=function(e){return Tr("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Pa(e).then(function(e){return e.user})},e.Pa=function(e){var t=this;return this.i.then(function(){return Sc(t,e.la(t.b))})},e.Qa=function(){var n=this;return this.i.then(function(){var e=Ic(n);return e&&e.isAnonymous?Ir({user:e,credential:null,additionalUserInfo:Ir({providerId:null,isNewUser:!1}),operationType:"signIn"}):Sc(n,n.b.Qa()).then(function(e){var t=e.user;return Yu(t,"isAnonymous",!0),n.Z(t),e})})},e.Gc=function(){return Tr("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Qa()},e.getUid=function(){return Ic(this)&&Ic(this).uid||null},e.Vb=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Ic(this)&&ju(Ic(this))},e.Cc=function(t){var n=this;A(this.o,function(e){e==t&&n.u--}),this.u<0&&(this.u=0),0==this.u&&Ic(this)&&Uu(Ic(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(e){var t=this;this.o.push(e),Dc(this,this.i.then(function(){t.m||P(t.o,e)&&e(xc(t))}))},e.removeAuthTokenListener=function(t){M(this.o,function(e){return e==t})},e.delete=function(){this.m=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h).b.removeListener(pc("local"),e.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),fh.Promise.resolve()},e.Zb=function(e){return Tr("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Dc(this,Vs(this.b,vs,{identifier:e,continueUri:ar()?jn():"http://localhost"}).then(function(e){return e.allProviders||[]}))},e.$b=function(e){return Dc(this,Vs(this.b,vs,{identifier:e,continueUri:ar()?jn():"http://localhost"}).then(function(e){return e.signinMethods||[]}))},e.oc=function(e){return!!ki(e)},e.lb=function(t,n){var r=this;return Dc(this,we().then(function(){var e=new Rr(n);if(!e.c)throw new Nr("argument-error",Lr+" must be true when sending sign in link to email");return Vr(e)}).then(function(e){return r.b.lb(t,e)}).then(function(){}))},e.Tc=function(e){return this.Ja(e).then(function(e){return e.data.email})},e.Za=function(e,t){return Dc(this,this.b.Za(e,t).then(function(){}))},e.Ja=function(e){return Dc(this,this.b.Ja(e).then(function(e){return new function(e){var t={},n=e.email,r=e.newEmail;if(!(e=e.requestType)||"EMAIL_SIGNIN"!=e&&!n)throw Error("Invalid provider user info!");t.fromEmail=r||null,t.email=n||null,Sr(this,"operation",e),Sr(this,"data",xr(t))}(e)}))},e.Wa=function(e){return Dc(this,this.b.Wa(e).then(function(){}))},e.kb=function(t,e){var n=this;return Dc(this,we().then(function(){return void 0===e||ne(e)?{}:Vr(new Rr(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},e.Jc=function(e,t){return Dc(this,Iu(this,e,t,g(this.Pa,this)))},e.Ic=function(t,n){var r=this;return Dc(this,we().then(function(){var e=Di(t,n||jn());return r.Pa(e)}))},kc.prototype.render=function(){},kc.prototype.reset=function(){},kc.prototype.getResponse=function(){},kc.prototype.execute=function(){};var Rc=null;function Oc(e,t){return(t=Pc(t))&&e.a[t]||null}function Pc(e){return(e=void 0===e?1e12:e)?e.toString():null}function Lc(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=kn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():mt(this.f,"click",this.i)}function Mc(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Fc(){}Ac.prototype.render=function(e,t){return this.a[this.b.toString()]=new Lc(e,t),this.b++},Ac.prototype.reset=function(e){var t=Oc(this,e);e=Pc(e),t&&e&&(t.delete(),delete this.a[e])},Ac.prototype.getResponse=function(e){return(e=Oc(this,e))?e.getResponse():null},Ac.prototype.execute=function(e){(e=Oc(this,e))&&e.execute()},Lc.prototype.getResponse=function(){return Mc(this),this.b},Lc.prototype.execute=function(){Mc(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var e=n.c.callback,t=n.c["expired-callback"];if(e)try{e(n.b)}catch(e){}n.a=setTimeout(function(){if(n.a=null,n.b=null,t)try{t()}catch(e){}n.h&&n.execute()},6e4)},500))},Lc.prototype.delete=function(){Mc(this),this.g=!0,clearTimeout(this.a),this.a=null,bt(this.f,"click",this.i)},Fc.prototype.g=function(){return we(Rc=Rc||new Ac)},Fc.prototype.c=function(){};var qc=null;function jc(){this.b=h.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Uc=dn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Bc=new mr(3e4,6e4);jc.prototype.g=function(i){var o=this;return new pe(function(e,t){var r=setTimeout(function(){t(new Nr("network-request-failed"))},Bc.get());!h.grecaptcha||i!==o.f&&!o.b?(h[o.a]=function(){if(h.grecaptcha){o.f=i;var n=h.grecaptcha.render;h.grecaptcha.render=function(e,t){return e=n(e,t),o.b++,e},clearTimeout(r),e(h.grecaptcha)}else clearTimeout(r),t(new Nr("internal-error"));delete h[o.a]},we(qo(gn(Uc,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),t(new Nr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),e(h.grecaptcha))})},jc.prototype.c=function(){this.b--};var Vc=null;function Wc(e,t,n,r,i,o,s){if(Sr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.m=t,this.g=null,s=s?qc=qc||new Fc:Vc=Vc||new jc,this.o=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Qc])throw new Nr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[zc],!h.document)throw new Nr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!kn(t)||!this.i&&kn(t).hasChildNodes())throw new Nr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Ko(e,o||null,i||null),this.v=r||function(){return null};var a=this;this.l=[];var u=this.a[Hc];this.a[Hc]=function(e){if(Gc(a,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=ir(u,h);"function"==typeof t&&t(e)}};var c=this.a[Kc];this.a[Kc]=function(){if(Gc(a,null),"function"==typeof c)c();else if("string"==typeof c){var e=ir(c,h);"function"==typeof e&&e()}}}var Hc="callback",Kc="expired-callback",Qc="sitekey",zc="size";function Gc(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Xc(e,t){return e.h.push(t),t.ia(function(){L(e.h,t)}),t}function Yc(e){if(e.D)throw new Nr("internal-error","RecaptchaVerifier instance has been destroyed.")}function $c(e,t,n){var r=!1;try{this.b=n||fh.app()}catch(e){throw new Nr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Nr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=fh.SDK_VERSION?nr(fh.SDK_VERSION,o):null,Wc.call(this,n,e,t,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,Yr(Gr),r)}function Jc(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<t.length;s++)if(t[s].optional)o=!0;else{if(o)throw new Nr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],i<0||i>=Zc.length)throw new Nr("internal-error","Argument validator received an unsupported number of arguments.");n=Zc[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new Nr("argument-error",e+" failed: "+r)}(e=Wc.prototype).za=function(){var t=this;return this.f?this.f:this.f=Xc(this,we().then(function(){if(ar()&&!Xn())return Qn();throw new Nr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,Vs(t.u,Ns,{})}).then(function(e){t.a[Qc]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},e.render=function(){Yc(this);var n=this;return Xc(this,this.za().then(function(){if(null===n.c){var e=n.m;if(!n.i){var t=kn(e);e=function(e,t,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!hn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',B(s.name),'"'),s.type){o.push(' type="',B(s.type),'"');var a={};ae(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(c(s)?o.className=s:l(s)?o.className=s.join(" "):An(o,s)),2<r.length&&function(t,n,e){function r(e){e&&n.appendChild(c(e)?t.createTextNode(e):e)}for(var i=2;i<e.length;i++){var o=e[i];!f(o)||p(o)&&0<o.nodeType?r(o):A(On(o)?q(o):o,r)}}(i,o,r),o}("DIV"),t.appendChild(e)}n.c=n.g.render(e,n.a)}return n.c}))},e.verify=function(){Yc(this);var i=this;return Xc(this,this.render().then(function(t){return new pe(function(n){var e=i.g.getResponse(t);if(e)n(e);else{var r=function(e){var t;e&&(t=r,M(i.l,function(e){return e==t}),n(e))};i.l.push(r),i.i&&i.g.execute(i.c)}})}))},e.reset=function(){Yc(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Yc(this),this.D=!0,this.o.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=kn(this.m);for(var t;t=e.firstChild;)e.removeChild(t)}},t($c,Wc);var Zc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function eh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:c}}function th(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:n}}function nh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function rh(e,t){return{name:e||"",K:"a function",optional:!!t,M:s}}function ih(e,t){return{name:e||"",K:"null",optional:!!t,M:r}}function oh(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var t=!n||e.providerId===n;return!(!e.la||!t)}}}function sh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&c(e.type)&&s(e.verify))}}}function ah(t,n,e,r){return{name:e||"",K:t.K+" or "+n.K,optional:!!r,M:function(e){return t.M(e)||n.M(e)}}}function uh(e,t){for(var n in t){var r=t[n].name;e[r]=lh(r,e[n],t[n].j)}}function ch(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:v(function(e){return this[e]},n),set:v(function(e,t,n,r){Jc(e,[n],[r],!0),this[t]=r},r,n,t[n].tb),enumerable:!0})}}function hh(e,t,n,r){e[t]=lh(t,n,r)}function lh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Jc(s,n,e),t.apply(this,e)}if(!n)return t;var i,o,s=(o=(o=e).split("."))[o.length-1];for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}uh(vc.prototype,{Wa:{name:"applyActionCode",j:[eh("code")]},Ja:{name:"checkActionCode",j:[eh("code")]},Za:{name:"confirmPasswordReset",j:[eh("code"),eh("newPassword")]},xb:{name:"createUserWithEmailAndPassword",j:[eh("email"),eh("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[eh("email"),eh("password")]},Zb:{name:"fetchProvidersForEmail",j:[eh("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[eh("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[eh("emailLink")]},uc:{name:"onAuthStateChanged",j:[ah(nh(),rh(),"nextOrObserver"),rh("opt_error",!0),rh("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[ah(nh(),rh(),"nextOrObserver"),rh("opt_error",!0),rh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[eh("email"),ah(nh("opt_actionCodeSettings",!0),ih(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[eh("email"),nh("actionCodeSettings")]},mb:{name:"setPersistence",j:[eh("persistence")]},Pa:{name:"signInAndRetrieveDataWithCredential",j:[oh()]},Qa:{name:"signInAnonymously",j:[]},Gc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Hc:{name:"signInWithCredential",j:[oh()]},Nb:{name:"signInWithCustomToken",j:[eh("token")]},Ec:{name:"signInAndRetrieveDataWithCustomToken",j:[eh("token")]},Ob:{name:"signInWithEmailAndPassword",j:[eh("email"),eh("password")]},Ic:{name:"signInWithEmailLink",j:[eh("email"),eh("emailLink",!0)]},Fc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[eh("email"),eh("password")]},Jc:{name:"signInWithPhoneNumber",j:[eh("phoneNumber"),sh()]},Kc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Qc:{name:"updateCurrentUser",j:[ah({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Pu)}},ih(),"user")]},nb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[eh(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[eh("code")]}}),ch(vc.prototype,{lc:{name:"languageCode",tb:ah(eh(),ih(),"languageCode")}}),(vc.Persistence=La).LOCAL="local",vc.Persistence.SESSION="session",vc.Persistence.NONE="none",uh(Pu.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[th("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[th("opt_forceRefresh",!0)]},eb:{name:"linkAndRetrieveDataWithCredential",j:[oh()]},pc:{name:"linkWithCredential",j:[oh()]},qc:{name:"linkWithPhoneNumber",j:[eh("phoneNumber"),sh()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},gb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[oh()]},yc:{name:"reauthenticateWithCredential",j:[oh()]},zc:{name:"reauthenticateWithPhoneNumber",j:[eh("phoneNumber"),sh()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[ah(nh("opt_actionCodeSettings",!0),ih(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[eh(null,!0)]},Pc:{name:"unlink",j:[eh("provider")]},pb:{name:"updateEmail",j:[eh("email")]},qb:{name:"updatePassword",j:[eh("password")]},Rc:{name:"updatePhoneNumber",j:[oh("phone")]},rb:{name:"updateProfile",j:[nh("profile")]}}),uh(Ac.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uh(kc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uh(pe.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),ch(Su.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",tb:th("appVerificationDisabledForTesting")}}),uh(Cu.prototype,{confirm:{name:"confirm",j:[eh("verificationCode")]}}),hh(Ni,"credential",function(e,t){return new xi(e,t)},[eh("email"),eh("password")]),uh(bi.prototype,{ua:{name:"addScope",j:[eh("scope")]},Da:{name:"setCustomParameters",j:[nh("customOAuthParameters")]}}),hh(bi,"credential",wi,[ah(eh(),nh(),"token")]),hh(Ni,"credentialWithLink",Di,[eh("email"),eh("emailLink")]),uh(_i.prototype,{ua:{name:"addScope",j:[eh("scope")]},Da:{name:"setCustomParameters",j:[nh("customOAuthParameters")]}}),hh(_i,"credential",Ti,[ah(eh(),nh(),"token")]),uh(Ei.prototype,{ua:{name:"addScope",j:[eh("scope")]},Da:{name:"setCustomParameters",j:[nh("customOAuthParameters")]}}),hh(Ei,"credential",Si,[ah(eh(),ah(nh(),ih()),"idToken"),ah(eh(),ih(),"accessToken",!0)]),uh(Ci.prototype,{Da:{name:"setCustomParameters",j:[nh("customOAuthParameters")]}}),hh(Ci,"credential",Ii,[ah(eh(),nh(),"token"),eh("secret",!0)]),uh(vi.prototype,{ua:{name:"addScope",j:[eh("scope")]},credential:{name:"credential",j:[ah(eh(),ih(),"idToken",!0),ah(eh(),ih(),"accessToken",!0),ah(eh(),ih(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[nh("customOAuthParameters")]}}),hh(Oi,"credential",Pi,[eh("verificationId"),eh("verificationCode")]),uh(Oi.prototype,{Ua:{name:"verifyPhoneNumber",j:[eh("phoneNumber"),sh()]}}),uh(Nr.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh(Wi.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh(Vi.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh($c.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===fh||!fh.INTERNAL||!fh.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:vc,Error:Nr};hh(e,"EmailAuthProvider",Ni,[]),hh(e,"FacebookAuthProvider",bi,[]),hh(e,"GithubAuthProvider",_i,[]),hh(e,"GoogleAuthProvider",Ei,[]),hh(e,"TwitterAuthProvider",Ci,[]),hh(e,"OAuthProvider",vi,[eh("providerId")]),hh(e,"SAMLAuthProvider",gi,[eh("providerId")]),hh(e,"PhoneAuthProvider",Oi,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof vc)}}]),hh(e,"RecaptchaVerifier",$c,[ah(eh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),nh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof fh.app.App)}}]),fh.INTERNAL.registerService("auth",function(e,t){return t({INTERNAL:{getUid:g((e=new vc(e)).getUid,e),getToken:g(e.cc,e),addAuthTokenListener:g(e.Vb,e),removeAuthTokenListener:g(e.Cc,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),fh.INTERNAL.extendNamespace({User:Pu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),(Qn=Kn=Kn||{})[Qn.DEBUG=0]="DEBUG",Qn[Qn.VERBOSE=1]="VERBOSE",Qn[Qn.INFO=2]="INFO",Qn[Qn.WARN=3]="WARN",Qn[Qn.ERROR=4]="ERROR",Qn[Qn.SILENT=5]="SILENT";function Gn(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case Kn.DEBUG:case Kn.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case Kn.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case Kn.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case Kn.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}function Xn(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new dr(t)}}catch(e){}return new yr}function Yn(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Zt(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}(e),n=new Nn;n.update(t);var r=n.digest();return tn.encodeByteArray(r)}function $n(e,t){Zt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(vr.logLevel=Kn.VERBOSE,_r=vr.log.bind(vr),t&&gr.set("logging_enabled",!0)):"function"==typeof e?_r=e:(_r=null,gr.remove("logging_enabled"))}function Jn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===Tr&&(Tr=!1,null===_r&&!0===gr.get("logging_enabled")&&$n(!0)),_r){var n=wr.apply(null,e);_r(n)}}function Zn(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Jn.apply(void 0,[n].concat(e))}}function er(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+wr.apply(void 0,e);vr.error(n)}function tr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+wr.apply(void 0,e);throw vr.error(n),new Error(n)}function nr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+wr.apply(void 0,e);vr.warn(n)}function rr(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)}function ir(e,t){return e===t?0:e<t?-1:1}function or(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+mn(t))}function sr(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r}function ar(e,n){if(Array.isArray(e))for(var t=0;t<e.length;++t)n(t,e[t]);else xn(e,function(e,t){return n(t,e)})}function ur(e){var t,n,r,i,o,s,a;for(Zt(!rr(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074)))),s=[],o=52;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse(),a=s.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function cr(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw nr("Exception was thrown by user callback.",e),t},Math.floor(0))}}function hr(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}var lr,fr=Kn.INFO,pr=(Object.defineProperty(qr.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Kn))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),qr.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,Kn.DEBUG].concat(e))},qr.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,Kn.VERBOSE].concat(e))},qr.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,Kn.INFO].concat(e))},qr.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,Kn.WARN].concat(e))},qr.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,Kn.ERROR].concat(e))},qr),dr=(Fr.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mn(t))},Fr.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:yn(t)},Fr.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},Fr.prototype.prefixedName_=function(e){return this.prefix_+e},Fr.prototype.toString=function(){return this.domStorage_.toString()},Fr),yr=(Mr.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},Mr.prototype.get=function(e){return In(this.cache_,e)?this.cache_[e]:null},Mr.prototype.remove=function(e){delete this.cache_[e]},Mr),mr=Xn("localStorage"),gr=Xn("sessionStorage"),vr=new pr("@firebase/database"),br=(lr=1,function(){return lr++}),wr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=wr.apply(null,e[r]):"object"==typeof e[r]?n+=mn(e[r]):n+=e[r],n+=" ";return n},_r=null,Tr=!0,Er="[MIN_NAME]",Sr="[MAX_NAME]",Cr=function(e,t){if(e===t)return 0;if(e===Er||t===Sr)return-1;if(t===Er||e===Sr)return 1;var n=Nr(e),r=Nr(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ir=function(e){if("object"!=typeof e||null===e)return mn(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=mn(t[i]),r+=":",r+=Ir(e[t[i]]);return r+"}"},xr=new RegExp("^-?\\d{1,10}$"),Nr=function(e){if(xr.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},Dr=(Object.defineProperty(Lr,"Empty",{get:function(){return new Lr("")},enumerable:!0,configurable:!0}),Lr.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Lr.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Lr.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new Lr(this.pieces_,e)},Lr.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Lr.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},Lr.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},Lr.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},Lr.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new Lr(e,0)},Lr.prototype.child=function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof Lr)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)0<r[n].length&&t.push(r[n])}return new Lr(t,0)},Lr.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Lr.relativePath=function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return Lr.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")},Lr.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=Cr(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Lr.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},Lr.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},Lr),kr=(Object.defineProperty(Pr,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Pr,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Pr.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=qn(e),this.checkValid_()},Pr.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=qn(e),0<this.parts_.length&&--this.byteLength_},Pr.prototype.checkValid_=function(){if(this.byteLength_>Pr.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Pr.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Pr.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pr.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Pr.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Pr),Ar="long_polling",Rr=(Or.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},Or.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Or.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Or.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Or.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mr.set("host:"+this.host,this.internalHost))},Or.prototype.connectionURL=function(e,t){var n;if(Zt("string"==typeof e,"typeof type must == string"),Zt("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==Ar)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return xn(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},Or.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},Or.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Or);function Or(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=mr.get("host:"+e)||this.host}function Pr(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=qn(this.parts_[n]);this.checkValid_()}function Lr(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}function Mr(){this.cache_={},this.isInMemoryStorage=!0}function Fr(e){this.domStorage_=e,this.prefix_="firebase:"}function qr(e){this.name=e,this._logLevel=fr,this._logHandler=Gn}function jr(e){var t=ri(e),n=t.subdomain;"firebase"===t.domain&&tr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||tr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new Rr(t.host,t.secure,n,r),path:new Dr(t.pathString)}}function Ur(e){return"string"==typeof e&&0!==e.length&&!ii.test(e)}function Br(e){return"string"==typeof e&&0!==e.length&&!oi.test(e)}function Vr(e){return null===e||"string"==typeof e||"number"==typeof e&&!rr(e)||e&&"object"==typeof e&&In(e,".sv")}function Wr(e,t,n,r,i){i&&void 0===n||si(Ln(e,t,i),n,r)}function Hr(e,t,n,r,i){if(!i||void 0!==n){var o=Ln(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];xn(n,function(e,t){var n=new Dr(e);if(si(o,t,r.child(n)),".priority"===n.getBack()&&!Vr(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Ur(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Dr.comparePaths);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function Kr(e,t,n,r){if(!r||void 0!==n){if(rr(n))throw new Error(Ln(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Vr(n))throw new Error(Ln(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Qr(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ln(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function zr(e,t,n,r){if(!(r&&void 0===n||Ur(n)))throw new Error(Ln(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Gr(e,t,n,r){if(!(r&&void 0===n||Br(n)))throw new Error(Ln(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Xr(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")}function Yr(e,t,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ur(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Br(r)))throw new Error(Ln(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var $r,Jr,Zr,ei,ti,ni,ri=function(i){var e="",t="",n="",r="",o=!0,s="https",a=443;if("string"==typeof i){var u=i.indexOf("//");0<=u&&(s=i.substring(0,u-1),i=i.substring(u+2));var c=i.indexOf("/");-1===c&&(c=i.length);var h=i.indexOf("?");-1===h&&(h=i.length),e=i.substring(0,Math.min(c,h)),c<h&&(r=function(){for(var e="",t=i.substring(c,h).split("/"),n=0;n<t.length;n++)if(0<t[n].length){var r=t[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}e+="/"+r}return e}());var l=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));for(var n=0,r=e.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):nr("Invalid query segment '"+i+"' in query '"+e+"'")}}return t}(i.substring(Math.min(i.length,h)));0<=(u=e.indexOf(":"))?(o="https"===s||"wss"===s,a=parseInt(e.substring(u+1),10)):u=i.length;var f=e.split(".");3===f.length?(t=f[1],n=f[0].toLowerCase()):2===f.length?t=f[0]:"localhost"===f[0].slice(0,u).toLowerCase()&&(t="localhost"),""===n&&"ns"in l&&(n=l.ns)}return{host:e,port:a,domain:t,subdomain:n,secure:o,scheme:s,pathString:r}},ii=/[\[\].#$\/\u0000-\u001F\u007F]/,oi=/[\[\].#$\u0000-\u001F\u007F]/,si=function(n,e,t){var r=t instanceof Dr?new kr(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(rr(e))throw new Error(n+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&10485760<qn(e))throw new Error(n+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(xn(e,function(e,t){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ur(e)))throw new Error(n+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),si(n,t,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ai=(vi.prototype.cancel=function(e){Pn("OnDisconnect.cancel",0,1,arguments.length),Mn("OnDisconnect.cancel",1,e,!0);var t=new un;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},vi.prototype.remove=function(e){Pn("OnDisconnect.remove",0,1,arguments.length),Xr("OnDisconnect.remove",this.path_),Mn("OnDisconnect.remove",1,e,!0);var t=new un;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},vi.prototype.set=function(e,t){Pn("OnDisconnect.set",1,2,arguments.length),Xr("OnDisconnect.set",this.path_),Wr("OnDisconnect.set",1,e,this.path_,!1),Mn("OnDisconnect.set",2,t,!0);var n=new un;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},vi.prototype.setWithPriority=function(e,t,n){Pn("OnDisconnect.setWithPriority",2,3,arguments.length),Xr("OnDisconnect.setWithPriority",this.path_),Wr("OnDisconnect.setWithPriority",1,e,this.path_,!1),Kr("OnDisconnect.setWithPriority",2,t,!1),Mn("OnDisconnect.setWithPriority",3,n,!0);var r=new un;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},vi.prototype.update=function(e,t){if(Pn("OnDisconnect.update",1,2,arguments.length),Xr("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,nr("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hr("OnDisconnect.update",1,e,this.path_,!1),Mn("OnDisconnect.update",2,t,!0);var i=new un;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},vi),ui=(gi.prototype.toJSON=function(){return Pn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},gi),ci=($r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Jr=0,Zr=[],function(e){var t,n=e===Jr;Jr=e;var r=new Array(8);for(t=7;0<=t;t--)r[t]=$r.charAt(e%64),e=Math.floor(e/64);Zt(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;0<=t&&63===Zr[t];t--)Zr[t]=0;Zr[t]++}else for(t=0;t<12;t++)Zr[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=$r.charAt(Zr[t]);return Zt(20===i.length,"nextPushId: Length should be 20."),i}),hi=(mi.Wrap=function(e,t){return new mi(e,t)},mi),li=(yi.prototype.getCompare=function(){return this.compare.bind(this)},yi.prototype.indexedValueChanged=function(e,t){var n=new hi(Er,e),r=new hi(Er,t);return 0!==this.compare(n,r)},yi.prototype.minPost=function(){return hi.MIN},yi),fi=(zt(di,ni=li),Object.defineProperty(di,"__EMPTY_NODE",{get:function(){return ei},set:function(e){ei=e},enumerable:!0,configurable:!0}),di.prototype.compare=function(e,t){return Cr(e.name,t.name)},di.prototype.isDefinedOn=function(e){throw en("KeyIndex.isDefinedOn not expected to be called.")},di.prototype.indexedValueChanged=function(e,t){return!1},di.prototype.minPost=function(){return hi.MIN},di.prototype.maxPost=function(){return new hi(Sr,ei)},di.prototype.makePost=function(e,t){return Zt("string"==typeof e,"KeyIndex indexValue must always be a string."),new hi(e,ei)},di.prototype.toString=function(){return".key"},di),pi=new fi;function di(){return null!==ni&&ni.apply(this,arguments)||this}function yi(){}function mi(e,t){this.name=e,this.node=t}function gi(e,t){this.committed=e,this.snapshot=t}function vi(e,t){this.repo_=e,this.path_=t}function bi(e){return"number"==typeof e?"number:"+ur(e):"string:"+e}function wi(e){if(e.isLeafNode()){var t=e.val();Zt("string"==typeof t||"number"==typeof t||"object"==typeof t&&In(t,".sv"),"Priority must be a string or number.")}else Zt(e===ti||e.isEmpty(),"priority of unexpected type.");Zt(e===ti||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var _i,Ti,Ei,Si=(Object.defineProperty(Ci,"__childrenNodeConstructor",{get:function(){return _i},set:function(e){_i=e},enumerable:!0,configurable:!0}),Ci.prototype.isLeafNode=function(){return!0},Ci.prototype.getPriority=function(){return this.priorityNode_},Ci.prototype.updatePriority=function(e){return new Ci(this.value_,e)},Ci.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:Ci.__childrenNodeConstructor.EMPTY_NODE},Ci.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:Ci.__childrenNodeConstructor.EMPTY_NODE},Ci.prototype.hasChild=function(){return!1},Ci.prototype.getPredecessorChildName=function(e,t){return null},Ci.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Ci.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},Ci.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(Zt(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Ci.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),t)))},Ci.prototype.isEmpty=function(){return!1},Ci.prototype.numChildren=function(){return 0},Ci.prototype.forEachChild=function(e,t){return!1},Ci.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Ci.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+bi(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"==t?ur(this.value_):this.value_,this.lazyHash_=Yn(e)}return this.lazyHash_},Ci.prototype.getValue=function(){return this.value_},Ci.prototype.compareTo=function(e){return e===Ci.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ci.__childrenNodeConstructor?-1:(Zt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},Ci.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=Ci.VALUE_TYPE_ORDER.indexOf(t),i=Ci.VALUE_TYPE_ORDER.indexOf(n);return Zt(0<=r,"Unknown leaf type: "+t),Zt(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},Ci.prototype.withIndex=function(){return this},Ci.prototype.isIndexed=function(){return!0},Ci.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))},Ci.VALUE_TYPE_ORDER=["object","boolean","number","string"],Ci);function Ci(e,t){void 0===t&&(t=Ci.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Zt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),wi(this.priorityNode_)}var Ii,xi,Ni,Di=(zt(Ki,Ni=li),Ki.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Cr(e.name,t.name):i},Ki.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},Ki.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},Ki.prototype.minPost=function(){return hi.MIN},Ki.prototype.maxPost=function(){return new hi(Sr,new Si("[PRIORITY-POST]",Ei))},Ki.prototype.makePost=function(e,t){var n=Ti(e);return new hi(t,new Si("[PRIORITY-POST]",n))},Ki.prototype.toString=function(){return".priority"},new Ki),ki=(Hi.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Hi.prototype.hasNext=function(){return 0<this.nodeStack_.length},Hi.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},Hi),Ai=(Wi.prototype.copy=function(e,t,n,r,i){return new Wi(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Wi.prototype.count=function(){return this.left.count()+1+this.right.count()},Wi.prototype.isEmpty=function(){return!1},Wi.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Wi.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Wi.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Wi.prototype.minKey=function(){return this.min_().key},Wi.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Wi.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},Wi.prototype.removeMin_=function(){if(this.left.isEmpty())return Oi.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},Wi.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Oi.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},Wi.prototype.isRed_=function(){return this.color},Wi.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},Wi.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},Wi.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},Wi.prototype.rotateLeft_=function(){var e=this.copy(null,null,Wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Wi.prototype.rotateRight_=function(){var e=this.copy(null,null,Wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Wi.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Wi.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},Wi.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},Wi.RED=!0,Wi.BLACK=!1,Wi),Ri=(Vi.prototype.copy=function(e,t,n,r,i){return this},Vi.prototype.insert=function(e,t,n){return new Ai(e,t,null)},Vi.prototype.remove=function(e,t){return this},Vi.prototype.count=function(){return 0},Vi.prototype.isEmpty=function(){return!0},Vi.prototype.inorderTraversal=function(e){return!1},Vi.prototype.reverseTraversal=function(e){return!1},Vi.prototype.minKey=function(){return null},Vi.prototype.maxKey=function(){return null},Vi.prototype.check_=function(){return 0},Vi.prototype.isRed_=function(){return!1},Vi),Oi=(Bi.prototype.insert=function(e,t){return new Bi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ai.BLACK,null,null))},Bi.prototype.remove=function(e){return new Bi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ai.BLACK,null,null))},Bi.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},Bi.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Bi.prototype.isEmpty=function(){return this.root_.isEmpty()},Bi.prototype.count=function(){return this.root_.count()},Bi.prototype.minKey=function(){return this.root_.minKey()},Bi.prototype.maxKey=function(){return this.root_.maxKey()},Bi.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},Bi.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},Bi.prototype.getIterator=function(e){return new ki(this.root_,null,this.comparator_,!1,e)},Bi.prototype.getIteratorFrom=function(e,t){return new ki(this.root_,e,this.comparator_,!1,t)},Bi.prototype.getReverseIteratorFrom=function(e,t){return new ki(this.root_,e,this.comparator_,!0,t)},Bi.prototype.getReverseIterator=function(e){return new ki(this.root_,null,this.comparator_,!0,e)},Bi.EMPTY_NODE=new Ri,Bi),Pi=Math.log(2),Li=(Ui.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},Ui),Mi=function(c,e,h,t){c.sort(e);var l=function(e,t){var n,r,i=t-e;if(0==i)return null;if(1==i)return n=c[e],r=h?h(n):n,new Ai(r,n.node,Ai.BLACK,null,null);var o=parseInt(i/2,10)+e,s=l(e,o),a=l(o+1,t);return n=c[o],r=h?h(n):n,new Ai(r,n.node,Ai.BLACK,s,a)},n=function(e){for(var t=null,n=null,a=c.length,r=function(e,t){var n=a-e,r=a;a-=e;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new Ai(s,o.node,t,null,i))},u=function(e){t=(t?t.left=e:n=e,e)},i=0;i<e.count;++i){var o=e.nextBitIsOne(),s=Math.pow(2,e.count-(i+1));o?r(s,Ai.BLACK):(r(s,Ai.BLACK),r(s,Ai.RED))}return n}(new Li(c.length));return new Oi(t||e,n)},Fi={},qi=(Object.defineProperty(ji,"Default",{get:function(){return Zt(Di,"ChildrenNode.ts has not been loaded"),Ii=Ii||new ji({".priority":Fi},{".priority":Di})},enumerable:!0,configurable:!0}),ji.prototype.get=function(e){var t=vn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===Fi?null:t},ji.prototype.hasIndex=function(e){return In(this.indexSet_,e.toString())},ji.prototype.addIndex=function(e,t){Zt(e!==pi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=t.getIterator(hi.Wrap),s=o.getNext();s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Mi(r,e.getCompare()):Fi;var a=e.toString(),u=bn(this.indexSet_);u[a]=e;var c=bn(this.indexes_);return c[a]=n,new ji(c,u)},ji.prototype.addToIndexes=function(u,c){var h=this;return new ji(Tn(this.indexes_,function(e,t){var n=vn(h.indexSet_,t);if(Zt(n,"Missing index implementation for "+t),e===Fi){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(hi.Wrap),o=i.getNext();o;)o.name!=u.name&&r.push(o),o=i.getNext();return r.push(u),Mi(r,n.getCompare())}return Fi}var s=c.get(u.name),a=e;return s&&(a=a.remove(new hi(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},ji.prototype.removeFromIndexes=function(n,r){return new ji(Tn(this.indexes_,function(e){if(e===Fi)return e;var t=r.get(n.name);return t?e.remove(new hi(n.name,t)):e}),this.indexSet_)},ji);function ji(e,t){this.indexes_=e,this.indexSet_=t}function Ui(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Pi,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}function Bi(e,t){void 0===t&&(t=Bi.EMPTY_NODE),this.comparator_=e,this.root_=t}function Vi(){}function Wi(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wi.RED,this.left=null!=r?r:Oi.EMPTY_NODE,this.right=null!=i?i:Oi.EMPTY_NODE}function Hi(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}function Ki(){return null!==Ni&&Ni.apply(this,arguments)||this}function Qi(e,t){return Cr(e.name,t.name)}function zi(e,t){return Cr(e,t)}var Gi,Xi=(Object.defineProperty(Ji,"EMPTY_NODE",{get:function(){return xi=xi||new Ji(new Oi(zi),null,qi.Default)},enumerable:!0,configurable:!0}),Ji.prototype.isLeafNode=function(){return!1},Ji.prototype.getPriority=function(){return this.priorityNode_||xi},Ji.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new Ji(this.children_,e,this.indexMap_)},Ji.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?xi:t},Ji.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},Ji.prototype.hasChild=function(e){return null!==this.children_.get(e)},Ji.prototype.updateImmediateChild=function(e,t){if(Zt(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n=new hi(e,t),r=void 0,i=void 0;return i=t.isEmpty()?(r=this.children_.remove(e),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),this.indexMap_.addToIndexes(n,this.children_)),new Ji(r,r.isEmpty()?xi:this.priorityNode_,i)},Ji.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;Zt(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},Ji.prototype.isEmpty=function(){return this.children_.isEmpty()},Ji.prototype.numChildren=function(){return this.children_.count()},Ji.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Di,function(e,t){r[e]=t.val(n),i++,s&&Ji.INTEGER_REGEXP_.test(e)?o=Math.max(o,Number(e)):s=!1}),!n&&s&&o<2*i){var e=[];for(var t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Ji.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+bi(this.getPriority().val())+":"),this.forEachChild(Di,function(e,t){var n=t.hash();""!==n&&(r+=":"+e+":"+n)}),this.lazyHash_=""===r?"":Yn(r)}return this.lazyHash_},Ji.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new hi(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},Ji.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},Ji.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new hi(t,this.children_.get(t)):null},Ji.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},Ji.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new hi(t,this.children_.get(t)):null},Ji.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},Ji.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},Ji.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,hi.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},Ji.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},Ji.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,hi.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},Ji.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yi?-1:0},Ji.prototype.withIndex=function(e){if(e===pi||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new Ji(this.children_,this.priorityNode_,t)},Ji.prototype.isIndexed=function(e){return e===pi||this.indexMap_.hasIndex(e)},Ji.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(Di),r=t.getIterator(Di),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Ji.prototype.resolveIndex_=function(e){return e===pi?null:this.indexMap_.get(e.toString())},Ji.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Ji),Yi=(zt($i,Gi=Xi),$i.prototype.compareTo=function(e){return e===this?0:1},$i.prototype.equals=function(e){return e===this},$i.prototype.getPriority=function(){return this},$i.prototype.getImmediateChild=function(e){return Xi.EMPTY_NODE},$i.prototype.isEmpty=function(){return!1},new $i);function $i(){return Gi.call(this,new Oi(zi),Xi.EMPTY_NODE,qi.Default)||this}function Ji(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&wi(this.priorityNode_),this.children_.isEmpty()&&Zt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}Object.defineProperties(hi,{MIN:{value:new hi(Er,Xi.EMPTY_NODE)},MAX:{value:new hi(Sr,Yi)}}),fi.__EMPTY_NODE=Xi.EMPTY_NODE,Si.__childrenNodeConstructor=Xi,Ei=ti=Yi;var Zi=!0;function eo(e,t){if(void 0===t&&(t=null),null===e)return Xi.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Zt(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Si(e,eo(t));if(e instanceof Array||!Zi){var r=Xi.EMPTY_NODE,i=e;return xn(i,function(e,t){if(In(i,e)&&"."!==e.substring(0,1)){var n=eo(t);!n.isLeafNode()&&n.isEmpty()||(r=r.updateImmediateChild(e,n))}}),r.updatePriority(eo(t))}var o=[],s=!1,a=e;if(xn(a,function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=eo(a[e]);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new hi(e,n)))}}),0==o.length)return Xi.EMPTY_NODE;var n=Mi(o,Qi,function(e){return e.name},zi);if(s){var u=Mi(o,Di.getCompare());return new Xi(n,eo(t),new qi({".priority":u},{".priority":Di}))}return new Xi(n,eo(t),qi.Default)}Ti=eo;function to(e,t){return e&&"object"==typeof e?(Zt(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}var no,ro,io,oo,so,ao=(zt(No,oo=li),No.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Cr(e.name,t.name):n},No.prototype.isDefinedOn=function(e){return!0},No.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},No.prototype.minPost=function(){return hi.MIN},No.prototype.maxPost=function(){return hi.MAX},No.prototype.makePost=function(e,t){var n=eo(e);return new hi(t,n)},No.prototype.toString=function(){return".value"},new No),uo=(zt(xo,io=li),xo.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},xo.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},xo.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Cr(e.name,t.name):i},xo.prototype.makePost=function(e,t){var n=eo(e),r=Xi.EMPTY_NODE.updateChild(this.indexPath_,n);return new hi(t,r)},xo.prototype.maxPost=function(){var e=Xi.EMPTY_NODE.updateChild(this.indexPath_,Yi);return new hi(Sr,e)},xo.prototype.toString=function(){return this.indexPath_.slice().join("/")},xo),co=(Io.prototype.val=function(){return Pn("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Io.prototype.exportVal=function(){return Pn("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Io.prototype.toJSON=function(){return Pn("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Io.prototype.exists=function(){return Pn("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Io.prototype.child=function(e){Pn("DataSnapshot.child",0,1,arguments.length),e=String(e),Gr("DataSnapshot.child",1,e,!1);var t=new Dr(e),n=this.ref_.child(t);return new Io(this.node_.getChild(t),n,Di)},Io.prototype.hasChild=function(e){Pn("DataSnapshot.hasChild",1,1,arguments.length),Gr("DataSnapshot.hasChild",1,e,!1);var t=new Dr(e);return!this.node_.getChild(t).isEmpty()},Io.prototype.getPriority=function(){return Pn("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Io.prototype.forEach=function(n){var r=this;return Pn("DataSnapshot.forEach",1,1,arguments.length),Mn("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(e,t){return n(new Io(t,r.ref_.child(e),Di))})},Io.prototype.hasChildren=function(){return Pn("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Io.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Io.prototype.numChildren=function(){return Pn("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Io.prototype.getRef=function(){return Pn("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Io.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Io),ho=(Co.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},Co.prototype.getEventType=function(){return this.eventType},Co.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Co.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+mn(this.snapshot.exportVal())},Co),lo=(So.prototype.getPath=function(){return this.path},So.prototype.getEventType=function(){return"cancel"},So.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},So.prototype.toString=function(){return this.path.toString()+":cancel"},So),fo=(Eo.prototype.respondsTo=function(e){return"value"===e},Eo.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new ho("value",this,new co(e.snapshotNode,t.getRef(),n))},Eo.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Zt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},Eo.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new lo(this,e,t):null},Eo.prototype.matches=function(e){return e instanceof Eo&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},Eo.prototype.hasAnyCallback=function(){return null!==this.callback_},Eo),po=(To.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,In(this.callbacks_,t)},To.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new lo(this,e,t):null},To.prototype.createEvent=function(e,t){Zt(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new ho(e.type,this,new co(e.snapshotNode,n,r),e.prevName)},To.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Zt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},To.prototype.matches=function(i){if(i instanceof To){if(!this.callbacks_||!i.callbacks_)return!0;if(this.context_===i.context_){var e=_n(i.callbacks_);if(e===_n(this.callbacks_)){if(1!==e)return function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(r=e[n=t],i.callbacks_[n]!==r))return!1;var n,r;return!0}(this.callbacks_);var t=Sn(i.callbacks_),n=Sn(this.callbacks_);return!(n!==t||i.callbacks_[t]&&this.callbacks_[n]&&i.callbacks_[t]!==this.callbacks_[n])}}}return!1},To.prototype.hasAnyCallback=function(){return null!==this.callbacks_},To),yo=(Object.defineProperty(_o,"__referenceConstructor",{get:function(){return Zt(no,"Reference.ts has not been loaded"),no},set:function(e){no=e},enumerable:!0,configurable:!0}),_o.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===pi){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=Er)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=Sr)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Di){if(null!=t&&!Vr(t)||null!=n&&!Vr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Zt(e.getIndex()instanceof uo||e.getIndex()===ao,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},_o.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},_o.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},_o.prototype.getQueryParams=function(){return this.queryParams_},_o.prototype.getRef=function(){return Pn("Query.ref",0,0,arguments.length),new _o.__referenceConstructor(this.repo,this.path)},_o.prototype.on=function(e,t,n,r){Pn("Query.on",2,4,arguments.length),Qr("Query.on",1,e,!1),Mn("Query.on",2,t,!1);var i=_o.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,i.cancel,i.context);else{var o={};o[e]=t,this.onChildEvent(o,i.cancel,i.context)}return t},_o.prototype.onValueEvent=function(e,t,n){var r=new fo(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},_o.prototype.onChildEvent=function(e,t,n){var r=new po(e,t,n);this.repo.addEventCallbackForQuery(this,r)},_o.prototype.off=function(e,t,n){Pn("Query.off",0,3,arguments.length),Qr("Query.off",1,e,!0),Mn("Query.off",2,t,!0),Fn("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new fo(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new po(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},_o.prototype.once=function(t,n,e,r){var i=this;Pn("Query.once",1,4,arguments.length),Qr("Query.once",1,t,!1),Mn("Query.once",2,n,!0);var o=_o.getCancelAndContextArgs_("Query.once",e,r),s=!0,a=new un;a.promise.catch(function(){});var u=function(e){s&&(s=!1,i.off(t,u),n&&n.bind(o.context)(e),a.resolve(e))};return this.on(t,u,function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),a.reject(e)}),a.promise},_o.prototype.limitToFirst=function(e){if(Pn("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new _o(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},_o.prototype.limitToLast=function(e){if(Pn("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new _o(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},_o.prototype.orderByChild=function(e){if(Pn("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Gr("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new Dr(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new uo(t),r=this.queryParams_.orderBy(n);return _o.validateQueryEndpoints_(r),new _o(this.repo,this.path,r,!0)},_o.prototype.orderByKey=function(){Pn("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(pi);return _o.validateQueryEndpoints_(e),new _o(this.repo,this.path,e,!0)},_o.prototype.orderByPriority=function(){Pn("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Di);return _o.validateQueryEndpoints_(e),new _o(this.repo,this.path,e,!0)},_o.prototype.orderByValue=function(){Pn("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(ao);return _o.validateQueryEndpoints_(e),new _o(this.repo,this.path,e,!0)},_o.prototype.startAt=function(e,t){void 0===e&&(e=null),Pn("Query.startAt",0,2,arguments.length),Wr("Query.startAt",1,e,this.path,!0),zr("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(_o.validateLimit_(n),_o.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(t=e=null),new _o(this.repo,this.path,n,this.orderByCalled_)},_o.prototype.endAt=function(e,t){void 0===e&&(e=null),Pn("Query.endAt",0,2,arguments.length),Wr("Query.endAt",1,e,this.path,!0),zr("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(_o.validateLimit_(n),_o.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new _o(this.repo,this.path,n,this.orderByCalled_)},_o.prototype.equalTo=function(e,t){if(Pn("Query.equalTo",1,2,arguments.length),Wr("Query.equalTo",1,e,this.path,!1),zr("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},_o.prototype.toString=function(){return Pn("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},_o.prototype.toJSON=function(){return Pn("Query.toJSON",0,1,arguments.length),this.toString()},_o.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},_o.prototype.queryIdentifier=function(){var e=this.queryObject(),t=Ir(e);return"{}"===t?"default":t},_o.prototype.isEqual=function(e){if(Pn("Query.isEqual",1,1,arguments.length),!(e instanceof _o))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.repo===e.repo,n=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return t&&n&&r},_o.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,Mn(e,3,r.cancel,!0),r.context=n,Fn(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(Ln(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(_o.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),_o),mo=(wo.prototype.add=function(e,t){this.set[e]=null===t||t},wo.prototype.contains=function(e){return In(this.set,e)},wo.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},wo.prototype.remove=function(e){delete this.set[e]},wo.prototype.clear=function(){this.set={}},wo.prototype.isEmpty=function(){return wn(this.set)},wo.prototype.count=function(){return _n(this.set)},wo.prototype.each=function(n){xn(this.set,function(e,t){return n(e,t)})},wo.prototype.keys=function(){var t=[];return xn(this.set,function(e){t.push(e)}),t},wo),go=(bo.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},bo.prototype.remember=function(e,t){if(e.isEmpty())this.value_=t,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,t);else{null==this.children_&&(this.children_=new mo);var n=e.getFront();this.children_.contains(n)||this.children_.add(n,new bo);var r=this.children_.get(n);e=e.popFront(),r.remember(e,t)}},bo.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,!(this.children_=null);if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(Di,function(e,t){n.remember(new Dr(e),t)}),this.forget(e)}if(null===this.children_)return!0;var r=e.getFront();return e=e.popFront(),!this.children_.contains(r)||this.children_.get(r).forget(e)&&this.children_.remove(r),!!this.children_.isEmpty()&&!(this.children_=null)},bo.prototype.forEachTree=function(r,i){null!==this.value_?i(r,this.value_):this.forEachChild(function(e,t){var n=new Dr(r.toString()+"/"+e);t.forEachTree(n,i)})},bo.prototype.forEachChild=function(n){null!==this.children_&&this.children_.each(function(e,t){n(e,t)})},bo),vo=function(e,r){var i,t=e.getPriority().val(),n=to(t,r);if(e.isLeafNode()){var o=e,s=to(o.getValue(),r);return s!==o.getValue()||n!==o.getPriority().val()?new Si(s,eo(n)):e}var a=e;return n!==(i=a).getPriority().val()&&(i=i.updatePriority(new Si(n))),a.forEachChild(Di,function(e,t){var n=vo(t,r);n!==t&&(i=i.updateImmediateChild(e,n))}),i};function bo(){this.value_=null,this.children_=null}function wo(){this.set={}}function _o(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}function To(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}function Eo(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}function So(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}function Co(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}function Io(e,t,n){this.node_=e,this.ref_=t,this.index_=n}function xo(e){var t=io.call(this)||this;return t.indexPath_=e,Zt(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),t}function No(){return null!==oo&&oo.apply(this,arguments)||this}(so=ro=ro||{})[so.OVERWRITE=0]="OVERWRITE",so[so.MERGE=1]="MERGE",so[so.ACK_USER_WRITE=2]="ACK_USER_WRITE",so[so.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Do,ko,Ao,Ro,Oo=(Ys.User=new Ys(!0,!1,null,!1),Ys.Server=new Ys(!1,!0,null,!1),Ys.forServerTaggedQuery=function(e){return new Ys(!1,!0,e,!0)},Ys),Po=(Xs.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Zt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new Dr(e));return new Xs(Dr.Empty,t,this.revert)}return Zt(this.path.getFront()===e,"operationForChild called for unrelated child."),new Xs(this.path.popFront(),this.affectedTree,this.revert)},Xs),Lo=(Gs.fromObject=function(e){var n=Gs.Empty;return xn(e,function(e,t){n=n.set(new Dr(e),t)}),n},Gs.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Gs.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:Dr.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new Dr(n).child(i.path),value:i.value}:null},Gs.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},Gs.prototype.subtree=function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):Gs.Empty},Gs.prototype.set=function(e,t){if(e.isEmpty())return new Gs(t,this.children);var n=e.getFront(),r=(this.children.get(n)||Gs.Empty).set(e.popFront(),t),i=this.children.insert(n,r);return new Gs(this.value,i)},Gs.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?Gs.Empty:new Gs(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r=n.remove(e.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?Gs.Empty:new Gs(this.value,i)}return this},Gs.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},Gs.prototype.setTree=function(e,t){if(e.isEmpty())return t;var n,r=e.getFront(),i=(this.children.get(r)||Gs.Empty).setTree(e.popFront(),t);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new Gs(this.value,n)},Gs.prototype.fold=function(e){return this.fold_(Dr.Empty,e)},Gs.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(e,t){i[e]=t.fold_(n.child(e),r)}),r(n,this.value,i)},Gs.prototype.findOnPath=function(e,t){return this.findOnPath_(e,Dr.Empty,t)},Gs.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},Gs.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,Dr.Empty,t)},Gs.prototype.foreachOnPath_=function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(e.popFront(),t.child(r),n):Gs.Empty},Gs.prototype.foreach=function(e){this.foreach_(Dr.Empty,e)},Gs.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(e,t){t.foreach_(n.child(e),r)}),this.value&&r(n,this.value)},Gs.prototype.foreachChild=function(n){this.children.inorderTraversal(function(e,t){t.value&&n(e,t.value)})},Gs.Empty=new Gs(null),Gs),Mo=(zs.prototype.operationForChild=function(e){return this.path.isEmpty()?new zs(this.source,Dr.Empty):new zs(this.source,this.path.popFront())},zs),Fo=(Qs.prototype.operationForChild=function(e){return this.path.isEmpty()?new Qs(this.source,Dr.Empty,this.snap.getImmediateChild(e)):new Qs(this.source,this.path.popFront(),this.snap)},Qs),qo=(Ks.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new Dr(e));return t.isEmpty()?null:t.value?new Fo(this.source,Dr.Empty,t.value):new Ks(this.source,Dr.Empty,t)}return Zt(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new Ks(this.source,this.path.popFront(),this.children)},Ks.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Ks),jo=(Hs.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Hs.prototype.isFiltered=function(){return this.filtered_},Hs.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},Hs.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},Hs.prototype.getNode=function(){return this.node_},Hs),Uo=(Ws.prototype.updateEventSnap=function(e,t,n){return new Ws(new jo(e,t,n),this.serverCache_)},Ws.prototype.updateServerSnap=function(e,t,n){return new Ws(this.eventCache_,new jo(e,t,n))},Ws.prototype.getEventCache=function(){return this.eventCache_},Ws.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Ws.prototype.getServerCache=function(){return this.serverCache_},Ws.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Ws.Empty=new Ws(new jo(Xi.EMPTY_NODE,!1,!1),new jo(Xi.EMPTY_NODE,!1,!1)),Ws),Bo=(Vs.valueChange=function(e){return new Vs(Vs.VALUE,e)},Vs.childAddedChange=function(e,t){return new Vs(Vs.CHILD_ADDED,t,e)},Vs.childRemovedChange=function(e,t){return new Vs(Vs.CHILD_REMOVED,t,e)},Vs.childChangedChange=function(e,t,n){return new Vs(Vs.CHILD_CHANGED,t,e,n)},Vs.childMovedChange=function(e,t){return new Vs(Vs.CHILD_MOVED,t,e)},Vs.CHILD_ADDED="child_added",Vs.CHILD_REMOVED="child_removed",Vs.CHILD_CHANGED="child_changed",Vs.CHILD_MOVED="child_moved",Vs.VALUE="value",Vs),Vo=(Bs.prototype.updateChild=function(e,t,n,r,i,o){Zt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Bo.childRemovedChange(t,s)):Zt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Bo.childAddedChange(t,n)):o.trackChildChange(Bo.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},Bs.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Di,function(e,t){n.hasChild(e)||i.trackChildChange(Bo.childRemovedChange(e,t))}),n.isLeafNode()||n.forEachChild(Di,function(e,t){if(r.hasChild(e)){var n=r.getImmediateChild(e);n.equals(t)||i.trackChildChange(Bo.childChangedChange(e,t,n))}else i.trackChildChange(Bo.childAddedChange(e,t))})),n.withIndex(this.index_)},Bs.prototype.updatePriority=function(e,t){return e.isEmpty()?Xi.EMPTY_NODE:e.updatePriority(t)},Bs.prototype.filtersNodes=function(){return!1},Bs.prototype.getIndexedFilter=function(){return this},Bs.prototype.getIndex=function(){return this.index_},Bs),Wo=(Us.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;Zt(t==Bo.CHILD_ADDED||t==Bo.CHILD_CHANGED||t==Bo.CHILD_REMOVED,"Only child changes supported for tracking"),Zt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=vn(this.changeMap_,n);if(r){var i=r.type;if(t==Bo.CHILD_ADDED&&i==Bo.CHILD_REMOVED)this.changeMap_[n]=Bo.childChangedChange(n,e.snapshotNode,r.snapshotNode);else if(t==Bo.CHILD_REMOVED&&i==Bo.CHILD_ADDED)delete this.changeMap_[n];else if(t==Bo.CHILD_REMOVED&&i==Bo.CHILD_CHANGED)this.changeMap_[n]=Bo.childRemovedChange(n,r.oldSnap);else if(t==Bo.CHILD_CHANGED&&i==Bo.CHILD_ADDED)this.changeMap_[n]=Bo.childAddedChange(n,e.snapshotNode);else{if(t!=Bo.CHILD_CHANGED||i!=Bo.CHILD_CHANGED)throw en("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap_[n]=Bo.childChangedChange(n,e.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=e},Us.prototype.getChanges=function(){return function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t}(this.changeMap_)},Us),Ho=(js.prototype.getCompleteChild=function(e){return null},js.prototype.getChildAfterChild=function(e,t,n){return null},new js),Ko=(qs.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new jo(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},qs.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},qs),Qo=function(e,t){this.viewCache=e,this.changes=t},zo=(Fs.prototype.assertIndexed=function(e){Zt(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Zt(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Fs.prototype.applyOperation=function(e,t,n,r){var i,o,s=new Wo;if(t.type===ro.OVERWRITE){var a=t;i=a.source.fromUser?this.applyUserOverwrite_(e,a.path,a.snap,n,r,s):(Zt(a.source.fromServer,"Unknown source."),o=a.source.tagged||e.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(e,a.path,a.snap,n,r,o,s))}else if(t.type===ro.MERGE){var u=t;i=u.source.fromUser?this.applyUserMerge_(e,u.path,u.children,n,r,s):(Zt(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.getServerCache().isFiltered(),this.applyServerMerge_(e,u.path,u.children,n,r,o,s))}else if(t.type===ro.ACK_USER_WRITE){var c=t;i=c.revert?this.revertUserWrite_(e,c.path,n,r,s):this.ackUserWrite_(e,c.path,c.affectedTree,n,r,s)}else{if(t.type!==ro.LISTEN_COMPLETE)throw en("Unknown operation type: "+t.type);i=this.listenComplete_(e,t.path,n,s)}var h=s.getChanges();return Fs.maybeAddValueEvent_(e,i,h),new Qo(i,h)},Fs.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Bo.valueChange(t.getCompleteEventSnap()))}},Fs.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,a=void 0;if(t.isEmpty())if(Zt(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof Xi?u:Xi.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var f=t.getFront();if(".priority"==f){Zt(1==t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=t.popFront(),m=void 0;if(o.isCompleteForChild(f)){a=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),a);m=null!=g?o.getNode().getImmediateChild(f).updateChild(y,g):o.getNode().getImmediateChild(f)}else m=n.calcCompleteChild(f,e.getServerCache());s=null!=m?this.filter_.updateChild(o.getNode(),f,m,y,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},Fs.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(t,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"==l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,Ho,null)}var d=e.updateServerSnap(a,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),y=new Ko(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,y,s)},Fs.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,u=e.getEventCache(),c=new Ko(r,e,i);if(t.isEmpty())a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=t.getFront();if(".priority"===h)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=t.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Xi.EMPTY_NODE}if(f.equals(p))s=e;else{var y=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=e.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},Fs.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},Fs.prototype.applyUserMerge_=function(r,i,e,o,s,a){var u=this,c=r;return e.foreach(function(e,t){var n=i.child(e);Fs.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,t,o,s,a))}),e.foreach(function(e,t){var n=i.child(e);Fs.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,t,o,s,a))}),c},Fs.prototype.applyMerge_=function(n,e){return e.foreach(function(e,t){n=n.updateChild(e,t)}),n},Fs.prototype.applyServerMerge_=function(o,e,t,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=e.isEmpty()?t:Lo.Empty.setTree(e,t);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(e,t){if(f.hasChild(e)){var n=o.getServerCache().getNode().getImmediateChild(e),r=h.applyMerge_(n,t);l=h.applyServerOverwrite_(l,new Dr(e),r,s,a,u,c)}}),n.children.inorderTraversal(function(e,t){var n=!o.getServerCache().isCompleteForChild(e)&&null==t.value;if(!f.hasChild(e)&&!n){var r=o.getServerCache().getNode().getImmediateChild(e),i=h.applyMerge_(r,t);l=h.applyServerOverwrite_(l,new Dr(e),i,s,a,u,c)}}),l},Fs.prototype.ackUserWrite_=function(e,r,t,n,i,o){if(null!=n.shadowingWrite(r))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=t.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(e,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Lo.Empty;return a.getNode().forEachChild(pi,function(e,t){u=u.set(new Dr(e),t)}),this.applyServerMerge_(e,r,u,n,i,s,o)}return e}var c=Lo.Empty;return t.foreach(function(e,t){var n=r.child(e);a.isCompleteForPath(n)&&(c=c.set(e,a.getNode().getChild(n)))}),this.applyServerMerge_(e,r,c,n,i,s,o)},Fs.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,Ho,r)},Fs.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new Ko(n,e,r),a=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();Zt(h instanceof Xi,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=t.getFront(),f=n.calcCompleteChild(l,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,t.popFront(),s,i):e.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,Xi.EMPTY_NODE,t.popFront(),s,i):a).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Dr.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},Fs),Go=(Ms.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===Bo.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Bo.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,Bo.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,Bo.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,Bo.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,Bo.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,Bo.VALUE,e,n,t),i},Ms.prototype.generateEventsForType_=function(r,t,e,i,o){var s=this,n=e.filter(function(e){return e.type===t});n.sort(this.compareChanges_.bind(this)),n.forEach(function(t){var n=s.materializeSingleChange_(t,o);i.forEach(function(e){e.respondsTo(t.type)&&r.push(e.createEvent(n,s.query_))})})},Ms.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},Ms.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw en("Should only compare child_ events.");var n=new hi(e.childName,e.snapshotNode),r=new hi(t.childName,t.snapshotNode);return this.index_.compare(n,r)},Ms),Xo=(Ls.prototype.getQuery=function(){return this.query_},Ls.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Ls.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},Ls.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Ls.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},Ls.prototype.removeEventRegistration=function(e,n){var r=[];if(n){Zt(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){n=n;var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(e){for(var t=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){t=t.concat(this.eventRegistrations_.slice(o+1));break}}else t.push(s)}this.eventRegistrations_=t}else this.eventRegistrations_=[];return r},Ls.prototype.applyOperation=function(e,t,n){e.type===ro.MERGE&&null!==e.source.queryId&&(Zt(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Zt(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),Zt(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Ls.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Di,function(e,t){n.push(Bo.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(Bo.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},Ls.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},Ls),Yo=(Object.defineProperty(Ps,"__referenceConstructor",{get:function(){return Zt(ko,"Reference.ts has not been loaded"),ko},set:function(e){Zt(!ko,"__referenceConstructor has already been defined"),ko=e},enumerable:!0,configurable:!0}),Ps.prototype.isEmpty=function(){return wn(this.views_)},Ps.prototype.applyOperation=function(n,r,i){var e=n.source.queryId;if(null!==e){var t=vn(this.views_,e);return Zt(null!=t,"SyncTree gave us an op for an invalid query."),t.applyOperation(n,r,i)}var o=[];return xn(this.views_,function(e,t){o=o.concat(t.applyOperation(n,r,i))}),o},Ps.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),s=vn(this.views_,o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;u=!!a||(a=r instanceof Xi?n.calcCompleteEventChildren(r):Xi.EMPTY_NODE,!1);var c=new Uo(new jo(a,u,!1),new jo(r,i,!1));s=new Xo(e,c),this.views_[o]=s}return s.addEventRegistration(t),s.getInitialEvents(t)},Ps.prototype.removeEventRegistration=function(e,n,r){var t=e.queryIdentifier(),i=[],o=[],s=this.hasCompleteView();if("default"===t){var a=this;xn(this.views_,function(e,t){o=o.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete a.views_[e],t.getQuery().getQueryParams().loadsAllData()||i.push(t.getQuery()))})}else{var u=vn(this.views_,t);u&&(o=o.concat(u.removeEventRegistration(n,r)),u.isEmpty()&&(delete this.views_[t],u.getQuery().getQueryParams().loadsAllData()||i.push(u.getQuery())))}return s&&!this.hasCompleteView()&&i.push(new Ps.__referenceConstructor(e.repo,e.path)),{removed:i,events:o}},Ps.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},Ps.prototype.getCompleteServerCache=function(n){var r=null;return xn(this.views_,function(e,t){r=r||t.getCompleteServerCache(n)}),r},Ps.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return vn(this.views_,t)},Ps.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},Ps.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Ps.prototype.getCompleteView=function(){var e,t;return e=this.views_,(t=En(e,function(e){return e.getQuery().getQueryParams().loadsAllData()},void 0))&&e[t]||null},Ps),$o=(Os.prototype.addWrite=function(e,t){if(e.isEmpty())return new Os(new Lo(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,i=n.value,o=Dr.relativePath(r,e);return i=i.updateChild(o,t),new Os(this.writeTree_.set(r,i))}var s=new Lo(t);return new Os(this.writeTree_.setTree(e,s))},Os.prototype.addWrites=function(n,e){var r=this;return xn(e,function(e,t){r=r.addWrite(n.child(e),t)}),r},Os.prototype.removeWrite=function(e){return e.isEmpty()?Os.Empty:new Os(this.writeTree_.setTree(e,Lo.Empty))},Os.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},Os.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(Dr.relativePath(t.path,e)):null},Os.prototype.getCompleteChildren=function(){var n=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Di,function(e,t){n.push(new hi(e,t))}):this.writeTree_.children.inorderTraversal(function(e,t){null!=t.value&&n.push(new hi(e,t.value))}),n},Os.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return new Os(null!=t?new Lo(t):this.writeTree_.subtree(e))},Os.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},Os.prototype.apply=function(e){return Os.applySubtreeWrite_(Dr.Empty,this.writeTree_,e)},Os.Empty=new Os(new Lo(null)),Os.applySubtreeWrite_=function(n,e,r){if(null!=e.value)return r.updateChild(n,e.value);var i=null;return e.children.inorderTraversal(function(e,t){".priority"===e?(Zt(null!==t.value,"Priority writes must always be leaf nodes"),i=t.value):r=Os.applySubtreeWrite_(n.child(e),t,r)}),r.getChild(n).isEmpty()||null===i||(r=r.updateChild(n.child(".priority"),i)),r},Os),Jo=(Rs.prototype.childWrites=function(e){return new Zo(e,this)},Rs.prototype.addOverwrite=function(e,t,n,r){Zt(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},Rs.prototype.addMerge=function(e,t,n){Zt(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},Rs.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},Rs.prototype.removeWrite=function(t){var n=this,e=this.allWrites_.findIndex(function(e){return e.writeId===t});Zt(0<=e,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[e];this.allWrites_.splice(e,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(e<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;xn(u,function(e){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(e))})}return!0}return!1},Rs.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},Rs.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);if(!r&&i.isEmpty())return e;if(r||null!=e||i.hasCompleteWrite(Dr.Empty)){var o=Rs.layerTree_(this.allWrites_,function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t);return u=e||Xi.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(t);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(t);if(a.isEmpty())return e;if(null!=e||a.hasCompleteWrite(Dr.Empty)){var u=e||Xi.EMPTY_NODE;return a.apply(u)}return null},Rs.prototype.calcCompleteEventChildren=function(e,t){var r=Xi.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(e);if(n)return n.isLeafNode()||n.forEachChild(Di,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Di,function(e,t){var n=i.childCompoundWrite(new Dr(e)).apply(t);r=r.updateImmediateChild(e,n)}),i.getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r},Rs.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){Zt(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},Rs.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},Rs.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},Rs.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(e),u=a.getCompleteNode(Dr.Empty);if(null!=u)s=u;else{if(null==t)return[];s=a.apply(t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Rs.prototype.recordContainsPath_=function(n,r){return n.snap?n.path.contains(r):!!En(n.children,function(e,t){return n.path.child(t).contains(r)})},Rs.prototype.resetTree_=function(){this.visibleWrites_=Rs.layerTree_(this.allWrites_,Rs.DefaultFilter_,Dr.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Rs.DefaultFilter_=function(e){return e.visible},Rs.layerTree_=function(e,t,n){for(var r=$o.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Dr.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Dr.relativePath(s,n),r=r.addWrite(Dr.Empty,o.snap.getChild(a)));else{if(!o.children)throw en("WriteRecord should have .snap or .children");if(n.contains(s))a=Dr.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Dr.relativePath(s,n)).isEmpty())r=r.addWrites(Dr.Empty,o.children);else{var u=vn(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Dr.Empty,c)}}}}}return r},Rs),Zo=(As.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},As.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},As.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},As.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},As.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},As.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},As.prototype.child=function(e){return new As(this.treePath_.child(e),this.writeTree_)},As),es=(ks.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Fo(Oo.User,e,t)):[]},ks.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=Lo.fromObject(t);return this.applyOperationToSyncPoints_(new qo(Oo.User,e,r))},ks.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=Lo.Empty;return null!=n.snap?r=r.set(Dr.Empty,!0):xn(n.children,function(e,t){r=r.set(new Dr(e),t)}),this.applyOperationToSyncPoints_(new Po(n.path,r,t))}return[]},ks.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Fo(Oo.Server,e,t))},ks.prototype.applyServerMerge=function(e,t){var n=Lo.fromObject(t);return this.applyOperationToSyncPoints_(new qo(Oo.Server,e,n))},ks.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Mo(Oo.Server,e))},ks.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=ks.parseQueryKey_(r),o=i.path,s=i.queryId,a=Dr.relativePath(o,e),u=new Fo(Oo.forServerTaggedQuery(s),a,t);return this.applyTaggedOperation_(o,u)},ks.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var i=ks.parseQueryKey_(r),o=i.path,s=i.queryId,a=Dr.relativePath(o,e),u=Lo.fromObject(t),c=new qo(Oo.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},ks.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=ks.parseQueryKey_(n),i=r.path,o=r.queryId,s=Dr.relativePath(i,e),a=new Mo(Oo.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},ks.prototype.addEventRegistration=function(e,t){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=Dr.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Dr.Empty)):(s=new Yo,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=Xi.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(Dr.Empty);n&&(i=i.updateImmediateChild(e,n))}));var a=s.viewExistsForQuery(e);if(!a&&!e.getQueryParams().loadsAllData()){var u=ks.makeQueryKey_(e);Zt(!(u in this.queryToTagMap_),"View does not exist, but we have a tag");var c=ks.getNextQueryTag_();this.queryToTagMap_[u]=c,this.tagToQueryMap_["_"+c]=u}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(e,t,h,i,n);if(!a&&!o){var f=s.viewForQuery(e);l=l.concat(this.setupListener_(e,f))}return l},ks.prototype.removeEventRegistration=function(e,t,n){var r=this,i=e.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var a=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],y=d.getQuery(),m=this.createListenerForView_(d);this.listenProvider_.startListening(ks.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(ks.queryForListening_(e),null):u.forEach(function(e){var t=r.queryToTagMap_[ks.makeQueryKey_(e)];r.listenProvider_.stopListening(ks.queryForListening_(e),t)})),this.removeTags_(u)}return s},ks.prototype.calcCompleteEventCache=function(i,e){var t=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(e,t){var n=Dr.relativePath(e,i),r=t.getCompleteServerCache(n);if(r)return r});return t.calcCompleteEventCache(i,n,e,!0)},ks.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),xn(n,function(e,t){r=r.concat(t)}),r})},ks.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=ks.makeQueryKey_(n),i=this.queryToTagMap_[r];delete this.queryToTagMap_[r],delete this.tagToQueryMap_["_"+i]}}},ks.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},ks.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),i=this.createListenerForView_(t),o=this.listenProvider_.startListening(ks.queryForListening_(e),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Zt(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),xn(n,function(e,t){r=r.concat(t)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(ks.queryForListening_(c),this.tagForQuery_(c))}return o},ks.prototype.createListenerForView_=function(e){var n=this,r=e.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(e.getServerCache()||Xi.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var t=function(e){var t="Unknown Error";"too_big"===e?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?t="Client doesn't have permission to access the desired data.":"unavailable"==e&&(t="The service is unavailable");var n=new Error(e+" at "+r.path.toString()+": "+t);return n.code=e.toUpperCase(),n}(e);return n.removeEventRegistration(r,null,t)}}},ks.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},ks.parseQueryKey_=function(e){var t=e.indexOf("$");return Zt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dr(e.substr(0,t))}},ks.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},ks.prototype.tagForQuery_=function(e){var t=ks.makeQueryKey_(e);return vn(this.queryToTagMap_,t)},ks.getNextQueryTag_=function(){return ks.nextQueryTag_++},ks.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);Zt(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},ks.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Dr.Empty))},ks.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(Dr.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Dr.Empty));var o=[],s=e.path.getFront(),a=e.operationForChild(s),u=t.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},ks.prototype.applyOperationDescendantsHelper_=function(o,e,s,a){var u=this,t=e.get(Dr.Empty);null==s&&null!=t&&(s=t.getCompleteServerCache(Dr.Empty));var c=[];return e.children.inorderTraversal(function(e,t){var n=s?s.getImmediateChild(e):null,r=a.child(e),i=o.operationForChild(e);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,t,n,r)))}),t&&(c=c.concat(t.applyOperation(o,a,s))),c},ks.nextQueryTag_=1,ks),ts=(Ds.prototype.getNode=function(e){return this.rootNode_.getChild(e)},Ds.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},Ds),ns=(Ns.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(Jn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},Ns.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},Ns.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},Ns.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nr(e)},Ns),rs=(xs.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),In(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},xs.prototype.get=function(){return nn(this.counters_)},xs),is=(Is.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new rs),this.collections_[t]},Is.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},Is.collections_={},Is.reporters_={},Is),os=(Cs.prototype.get=function(){var e=this.collection_.get(),n=bn(e);return this.last_&&xn(this.last_,function(e,t){n[e]=n[e]-t}),this.last_=e,n},Cs),ss=(Ss.prototype.includeStat=function(e){this.statsToReport_[e]=!0},Ss.prototype.reportStats_=function(){var n=this,e=this.statsListener_.get(),r={},i=!1;xn(e,function(e,t){0<t&&In(n.statsToReport_,e)&&(r[e]=t,i=!0)}),i&&this.server_.reportStats(r),hr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Ss),as=(Es.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new us(i)),t.add(r)}t&&this.eventLists_.push(t)},Es.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},Es.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},Es.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},Es),us=(Ts.prototype.add=function(e){this.events_.push(e)},Ts.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();_r&&Jn("event: "+t.toString()),cr(n)}}},Ts.prototype.getPath=function(){return this.path_},Ts),cs=(_s.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},_s.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},_s.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},_s.prototype.validateEventType_=function(t){Zt(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},_s),hs=(zt(ws,Ro=cs),ws.getInstance=function(){return new ws},ws.prototype.getInitialEvent=function(e){return Zt("visible"===e,"Unknown event type: "+e),[this.visible_]},ws),ls=(zt(bs,Ao=cs),bs.getInstance=function(){return new bs},bs.prototype.getInitialEvent=function(e){return Zt("online"===e,"Unknown event type: "+e),[this.online_]},bs.prototype.currentlyOnline=function(){return this.online_},bs),fs=(vs.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},vs.prototype.handleResponse=function(e,t){var r=this;this.pendingResponses[e]=t;for(var n=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&cr(function(){r.onMessage_(t[e])})},n=0;n<t.length;++n)e(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},vs),ps=(gs.prototype.open=function(e,t){var o=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fs(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!o.isClosed_){o.scriptTagHolder=new ds(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1],i=e[2];if(o.incrementIncomingBytes_(e),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"==n)o.id=r,o.password=i;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);r?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(r,function(){o.onClosed_()})):o.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];o.incrementIncomingBytes_(e),o.myPacketOrderer.handleResponse(n,r)},function(){o.onClosed_()},o.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=o.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",o.transportSessionId&&(e.s=o.transportSessionId),o.lastSessionId&&(e.ls=o.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=o.urlFn(e);o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,function(){})}})},gs.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},gs.forceAllow=function(){gs.forceAllow_=!0},gs.forceDisallow=function(){gs.forceDisallow_=!0},gs.isAvailable=function(){return gs.forceAllow_||!gs.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!0},gs.prototype.markConnectionHealthy=function(){},gs.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},gs.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},gs.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},gs.prototype.send=function(e){var t=mn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n,r=(n=$t(t),tn.encodeByteArray(n,!0)),i=sr(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},gs.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},gs.prototype.incrementIncomingBytes_=function(e){var t=mn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},gs),ds=(ms.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Jn("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},ms.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},ms.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},ms.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},ms.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},ms.prototype.addLongPollTag_=function(e,t){var n=this;function r(){n.outstandingRequests.remove(t),n.newRequest_()}this.outstandingRequests.add(t,1);var i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},ms.prototype.addTag=function(e,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var t=r.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){var e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=function(){Jn("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(t)}catch(e){}},Math.floor(1))},ms),ys=null;function ms(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new mo,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=br(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ms.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(e){Jn("frame writing exception"),e.stack&&Jn(e.stack),Jn(e)}}function gs(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zn(e),this.stats_=is.getCollection(t),this.urlFn=function(e){return t.connectionURL(Ar,e)}}function vs(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}function bs(){var e=Ao.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||sn()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}function ws(){var t,e,n=Ro.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}function _s(e){this.allowedEvents_=e,this.listeners_={},Zt(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}function Ts(e){this.path_=e,this.events_=[]}function Es(){this.eventLists_=[],this.recursionDepth_=0}function Ss(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new os(e);var n=1e4+2e4*Math.random();hr(this.reportStats_.bind(this),Math.floor(n))}function Cs(e){this.collection_=e,this.last_=null}function Is(){}function xs(){this.counters_={}}function Ns(e){this.app_=e}function Ds(){this.rootNode_=Xi.EMPTY_NODE}function ks(e){this.listenProvider_=e,this.syncPointTree_=Lo.Empty,this.pendingWriteTree_=new Jo,this.tagToQueryMap_={},this.queryToTagMap_={}}function As(e,t){this.treePath_=e,this.writeTree_=t}function Rs(){this.visibleWrites_=$o.Empty,this.allWrites_=[],this.lastWriteId_=-1}function Os(e){this.writeTree_=e}function Ps(){this.views_={}}function Ls(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Vo(n.getIndex()),i=n.getNodeFilter();this.processor_=new zo(i);var o=t.getServerCache(),s=t.getEventCache(),a=r.updateFullNode(Xi.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Xi.EMPTY_NODE,s.getNode(),null),c=new jo(a,o.isFullyInitialized(),r.filtersNodes()),h=new jo(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Uo(h,c),this.eventGenerator_=new Go(this.query_)}function Ms(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}function Fs(e){this.filter_=e}function qs(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}function js(){}function Us(){this.changeMap_={}}function Bs(e){this.index_=e}function Vs(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}function Ws(e,t){this.eventCache_=e,this.serverCache_=t}function Hs(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}function Ks(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ro.MERGE}function Qs(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ro.OVERWRITE}function zs(e,t){this.source=e,this.path=t,this.type=ro.LISTEN_COMPLETE}function Gs(e,t){void 0===t&&(t=Do=Do||new Oi(ir)),this.value=e,this.children=t}function Xs(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ro.ACK_USER_WRITE,this.source=Oo.User}function Ys(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,Zt(!r||t,"Tagged queries must be from server.")}"undefined"!=typeof MozWebSocket?ys=MozWebSocket:"undefined"!=typeof WebSocket&&(ys=WebSocket);var $s,Js,Zs,ea=(_a.connectionURL_=function(e,t,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},_a.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mr.set("previous_websocket_failure",!0);try{this.mySock=new ys(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var r=e.message||e.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},_a.prototype.start=function(){},_a.forceDisallow=function(){_a.forceDisallow_=!0},_a.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==ys&&!_a.forceDisallow_},_a.previouslyFailed=function(){return mr.isInMemoryStorage||!0===mr.get("previous_websocket_failure")},_a.prototype.markConnectionHealthy=function(){mr.remove("previous_websocket_failure")},_a.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=yn(t);this.onMessage(n)}},_a.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},_a.prototype.extractFrameCount_=function(e){if(Zt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},_a.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},_a.prototype.send=function(e){this.resetKeepAlive();var t=mn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=sr(t,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},_a.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},_a.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},_a.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},_a.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},_a.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},_a.responsesRequiredToBeHealthy=2,_a.healthyTimeout=3e4,_a),ta=(Object.defineProperty(wa,"ALL_TRANSPORTS",{get:function(){return[ps,ea]},enumerable:!0,configurable:!0}),wa.prototype.initTransports_=function(e){var t=ea&&ea.isAvailable(),n=t&&!ea.previouslyFailed();if(e.webSocketOnly&&(t||nr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ea];else{var r=this.transports_=[];ar(wa.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&r.push(t)})}},wa.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},wa.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},wa),na=(ba.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;0<i&&(this.healthyTimeout_=hr(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},ba.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},ba.prototype.disconnReceiver_=function(t){var n=this;return function(e){t===n.conn_?n.onConnectionLost_(e):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},ba.prototype.connReceiver_=function(t){var n=this;return function(e){2!=n.state_&&(t===n.rx_?n.onPrimaryMessageReceived_(e):t===n.secondaryConn_?n.onSecondaryMessageReceived_(e):n.log_("message on old connection"))}},ba.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},ba.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},ba.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},ba.prototype.onSecondaryMessageReceived_=function(e){var t=or("t",e),n=or("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},ba.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},ba.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},ba.prototype.onPrimaryMessageReceived_=function(e){var t=or("t",e),n=or("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},ba.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},ba.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},ba.prototype.onControl_=function(e){var t=or("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?er("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):er("Unknown control packet command: "+t)}},ba.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&nr("Protocol version mismatch detected"),this.tryStartUpgrade_())},ba.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},ba.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hr(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},ba.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},ba.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hr(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},ba.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},ba.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},ba.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},ba.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},ba.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},ba.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},ba.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},ba),ra=(va.prototype.put=function(e,t,n,r){},va.prototype.merge=function(e,t,n,r){},va.prototype.refreshAuthToken=function(e){},va.prototype.onDisconnectPut=function(e,t,n){},va.prototype.onDisconnectMerge=function(e,t,n){},va.prototype.onDisconnectCancel=function(e,t){},va.prototype.reportStats=function(e){},va),ia=(zt(ga,Zs=ra),ga.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(mn(i)),Zt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},ga.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},Zt(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Zt(!this.listens_[o][i],"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[o][i]=s,this.connected_&&this.sendListen_(s)},ga.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var e={p:s};r.tag&&(e.q=o.queryObject(),e.t=r.tag),e.h=r.hashFn(),this.sendRequest("q",e,function(e){var t=e.d,n=e.s;ga.warnOnListenWarnings_(t,o),(i.listens_[s]&&i.listens_[s][a])===r&&(i.log_("listen response",e),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,t))})},ga.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&In(e,"w")){var n=vn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();nr("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},ga.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},ga.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t;(e&&40===e.length||"object"==typeof(t=gn(e).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},ga.prototype.tryAuth=function(){var e,r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=(e=gn(i).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",n={cred:i};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,function(e){var t=e.s,n=e.d||"error";r.authToken_===i&&("ok"===t?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(t,n))})}},ga.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Zt(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},ga.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},ga.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},ga.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},ga.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},ga.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},ga.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},ga.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},ga.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)},ga.prototype.sendPut_=function(t){var n=this,r=this.outstandingPuts_[t].action,e=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,e,function(e){n.log_(r+" response",e),delete n.outstandingPuts_[t],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(e.s,e.d)})},ga.prototype.reportStats=function(e){var n=this;if(this.connected_){var t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,function(e){if("ok"!==e.s){var t=e.d;n.log_("reportStats","Error sending stats: "+t)}})}},ga.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+mn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},ga.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):er("Unrecognized action received from server: "+mn(e)+"\nAre you using the latest client?")},ga.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},ga.prototype.scheduleConnect_=function(e){var t=this;Zt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},ga.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},ga.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},ga.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},ga.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ga.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(e){Zt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var e=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(e).then(function(e){a?Jn("getToken() completed but was canceled"):(Jn("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new na(i,o.repoInfo_,t,n,r,function(e){nr(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(e){o.log_("Failed to get token: "+e),a||c()})}},ga.prototype.interrupt=function(e){Jn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},ga.prototype.resume=function(e){Jn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],wn(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},ga.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},ga.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},ga.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return Ir(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},ga.prototype.removeListen_=function(e,t){var n,r=new Dr(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===_n(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},ga.prototype.onAuthRevoked_=function(e,t){Jn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},ga.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},ga.prototype.restoreState_=function(){var n=this;this.tryAuth(),xn(this.listens_,function(e,t){xn(t,function(e,t){n.sendListen_(t)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}},ga.prototype.sendConnectStats_=function(){var e={},t="js";e["sdk."+t+"."+fh.SDK_VERSION.replace(/\./g,"-")]=1,sn()?e["framework.cordova"]=1:an()&&(e["framework.reactnative"]=1),this.reportStats(e)},ga.prototype.shouldReconnect_=function(){var e=ls.getInstance().currentlyOnline();return wn(this.interruptReasons_)&&e},ga.nextPersistentConnectionId_=0,ga.nextConnectionId_=0,ga),oa=(zt(ma,Js=ra),ma.prototype.reportStats=function(e){throw new Error("Method not implemented.")},ma.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(Zt(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},ma.prototype.listen=function(e,t,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var a=ma.getListenId_(e,r),u={};this.listens_[a]=u;var n=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(e,t){var n=t;404===e&&(e=n=null),null===e&&o.onDataUpdate_(s,n,!1,r),vn(o.listens_,a)===u&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)})},ma.prototype.unlisten=function(e,t){var n=ma.getListenId_(e,t);delete this.listens_[n]},ma.prototype.refreshAuthToken=function(e){},ma.prototype.restRequest_=function(o,s,a){var u=this;void 0===s&&(s={}),s.format="export",this.authTokenProvider_.getToken(!1).then(function(e){var t=e&&e.accessToken;t&&(s.auth=t);var n,r=(u.repoInfo_.secure?"https://":"http://")+u.repoInfo_.host+o+"?ns="+u.repoInfo_.namespace+(n=[],xn(s,function(t,e){Array.isArray(e)?e.forEach(function(e){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.length?"&"+n.join("&"):"");u.log_("Sending REST request for "+r);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(a&&4===i.readyState){u.log_("REST Response for "+r+" received. status:",i.status,"response:",i.responseText);var e=null;if(200<=i.status&&i.status<300){try{e=yn(i.responseText)}catch(e){nr("Failed to parse JSON response for "+r+": "+i.responseText)}a(null,e)}else 401!==i.status&&404!==i.status&&nr("Got unsuccessful REST response for "+r+" Status: "+i.status),a(i.status);a=null}},i.open("GET",r,!0),i.send()})},ma),sa=(ya.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},ya.prototype.name=function(){return this.repoInfo_.namespace},ya.prototype.serverTime=function(){var e=this.infoData_.getNode(new Dr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},ya.prototype.generateServerValues=function(){return(e={timestamp:this.serverTime()}).timestamp=e.timestamp||(new Date).getTime(),e;var e},ya.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new Dr(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=Tn(t,function(e){return eo(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=eo(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Tn(t,function(e){return eo(e)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=eo(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},ya.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},ya.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},ya.prototype.onServerInfoUpdate_=function(e){var n=this;ar(e,function(e,t){n.updateInfo_(t,e)})},ya.prototype.updateInfo_=function(e,t){var n=new Dr("/.info/"+e),r=eo(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},ya.prototype.getNextWriteId_=function(){return this.nextWriteId_++},ya.prototype.setWithPriority=function(i,e,t,o){var s=this;this.log_("set",{path:i.toString(),value:e,priority:t});var n=this.generateServerValues(),r=eo(e,t),a=vo(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(e,t){var n="ok"===e;n||nr("set at "+i+" failed: "+e);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,e,t)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},ya.prototype.update=function(o,e,s){var a=this;this.log_("update",{path:o.toString(),value:e});var r=!0,i=this.generateServerValues(),u={};if(xn(e,function(e,t){r=!1;var n=eo(t);u[e]=vo(n,i)}),r)Jn("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var c=this.getNextWriteId_(),t=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(t),this.server_.merge(o.toString(),e,function(e,t){var n="ok"===e;n||nr("update at "+o+" failed: "+e);var r=a.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,e,t)}),xn(e,function(e){var t=a.abortTransactions_(o.child(e));a.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},ya.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var e,n,i,t=this.generateServerValues(),o=[];(e=this.onDisconnect_,n=t,i=new go,e.forEachTree(new Dr(""),function(e,t){i.remember(e,vo(t,n))}),i).forEachTree(Dr.Empty,function(e,t){o=o.concat(r.serverSyncTree_.applyServerOverwrite(e,t));var n=r.abortTransactions_(e);r.rerunTransactions_(n)}),this.onDisconnect_=new go,this.eventQueue_.raiseEventsForChangedPath(Dr.Empty,o)},ya.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(e,t){"ok"===e&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,e,t)})},ya.prototype.onDisconnectSet=function(n,e,r){var i=this,o=eo(e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},ya.prototype.onDisconnectSetWithPriority=function(n,e,t,r){var i=this,o=eo(e,t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},ya.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(wn(n))return Jn("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(e,t){"ok"===e&&xn(n,function(e,t){var n=eo(t);o.onDisconnect_.remember(r.child(e),n)}),o.callOnCompleteCallback(i,e,t)})},ya.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},ya.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},ya.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},ya.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},ya.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new os(this.stats_)),this.statsListener_.get()):this.stats_.get();var r=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);xn(t,function(e,t){for(var n=e.length;n<r+2;n++)e+=" ";console.log(e+t)})}},ya.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},ya.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Jn.apply(void 0,[n].concat(e))},ya.prototype.callOnCompleteCallback=function(r,i,o){r&&cr(function(){if("ok"==i)r(null);else{var e=(i||"error").toUpperCase(),t=e;o&&(t+=": "+o);var n=new Error(t);n.code=e,r(n)}})},Object.defineProperty(ya.prototype,"database",{get:function(){return this.__database||(this.__database=new Da(this))},enumerable:!0,configurable:!0}),ya),aa=(da.prototype.getStartPost=function(){return this.startPost_},da.prototype.getEndPost=function(){return this.endPost_},da.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},da.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new hi(t,n))||(n=Xi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},da.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Xi.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Xi.EMPTY_NODE);var i=this;return t.forEachChild(Di,function(e,t){i.matches(new hi(e,t))||(r=r.updateImmediateChild(e,Xi.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},da.prototype.updatePriority=function(e,t){return e},da.prototype.filtersNodes=function(){return!0},da.prototype.getIndexedFilter=function(){return this.indexedFilter_},da.prototype.getIndex=function(){return this.index_},da.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},da.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},da),ua=(pa.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new hi(t,n))||(n=Xi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},pa.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Xi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Xi.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(Xi.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Xi.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},pa.prototype.updatePriority=function(e,t){return e},pa.prototype.filtersNodes=function(){return!0},pa.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},pa.prototype.getIndex=function(){return this.index_},pa.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var a=e;Zt(a.numChildren()==this.limit_,"");var u=new hi(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(t)){for(var l=a.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name==t||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Bo.childChangedChange(t,n,l)),a.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Bo.childRemovedChange(t,l));var d=a.updateImmediateChild(t,Xi.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Bo.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?e:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(Bo.childRemovedChange(c.name,c.node)),i.trackChildChange(Bo.childAddedChange(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,Xi.EMPTY_NODE)):e},pa),ca=(fa.prototype.hasStart=function(){return this.startSet_},fa.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===fa.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},fa.prototype.getIndexStartValue=function(){return Zt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},fa.prototype.getIndexStartName=function(){return Zt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Er},fa.prototype.hasEnd=function(){return this.endSet_},fa.prototype.getIndexEndValue=function(){return Zt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},fa.prototype.getIndexEndName=function(){return Zt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sr},fa.prototype.hasLimit=function(){return this.limitSet_},fa.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},fa.prototype.getLimit=function(){return Zt(this.limitSet_,"Only valid if limit has been set"),this.limit_},fa.prototype.getIndex=function(){return this.index_},fa.prototype.copy_=function(){var e=new fa;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},fa.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},fa.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=fa.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},fa.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=fa.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},fa.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},fa.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},fa.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},fa.prototype.getQueryObject=function(){var e=fa.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==Di&&(t[e.INDEX]=this.index_.toString()),t},fa.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},fa.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Di},fa.prototype.getNodeFilter=function(){return this.loadsAllData()?new Vo(this.getIndex()):new(this.hasLimit()?ua:aa)(this)},fa.prototype.toRestQueryStringParameters=function(){var e,t=fa.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(e=this.index_===Di?t.PRIORITY_INDEX:this.index_===ao?t.VALUE_INDEX:this.index_===pi?t.KEY_INDEX:(Zt(this.index_ instanceof uo,"Unrecognized index type!"),this.index_.toString()),n[t.ORDER_BY]=mn(e),this.startSet_&&(n[t.START_AT]=mn(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+mn(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=mn(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+mn(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_)),n},fa.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},fa.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},fa.DEFAULT=new fa,fa),ha=(zt(la,$s=yo),la.prototype.getKey=function(){return Pn("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},la.prototype.child=function(e){return Pn("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof Dr||(null===this.path.getFront()?(t=(t=e)&&t.replace(/^\/*\.info(\/|$)/,"/"),Gr("Reference.child",1,t,!1)):Gr("Reference.child",1,e,!1)),new la(this.repo,this.path.child(e));var t},la.prototype.getParent=function(){Pn("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new la(this.repo,e)},la.prototype.getRoot=function(){Pn("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},la.prototype.databaseProp=function(){return this.repo.database},la.prototype.set=function(e,t){Pn("Reference.set",1,2,arguments.length),Xr("Reference.set",this.path),Wr("Reference.set",1,e,this.path,!1),Mn("Reference.set",2,t,!0);var n=new un;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},la.prototype.update=function(e,t){if(Pn("Reference.update",1,2,arguments.length),Xr("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,nr("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hr("Reference.update",1,e,this.path,!1),Mn("Reference.update",2,t,!0);var i=new un;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},la.prototype.setWithPriority=function(e,t,n){if(Pn("Reference.setWithPriority",2,3,arguments.length),Xr("Reference.setWithPriority",this.path),Wr("Reference.setWithPriority",1,e,this.path,!1),Kr("Reference.setWithPriority",2,t,!1),Mn("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new un;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},la.prototype.remove=function(e){return Pn("Reference.remove",0,1,arguments.length),Xr("Reference.remove",this.path),Mn("Reference.remove",1,e,!0),this.set(null,e)},la.prototype.transaction=function(e,r,t){if(Pn("Reference.transaction",1,3,arguments.length),Xr("Reference.transaction",this.path),Mn("Reference.transaction",1,e,!1),Mn("Reference.transaction",2,r,!0),function(){if(void 0!==t&&"boolean"!=typeof t)throw new Error(Ln("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===t&&(t=!0);var i=new un;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,e,function(e,t,n){e?i.reject(e):i.resolve(new ui(t,n)),"function"==typeof r&&r(e,t,n)},t),i.promise},la.prototype.setPriority=function(e,t){Pn("Reference.setPriority",1,2,arguments.length),Xr("Reference.setPriority",this.path),Kr("Reference.setPriority",1,e,!1),Mn("Reference.setPriority",2,t,!0);var n=new un;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},la.prototype.push=function(e,t){Pn("Reference.push",0,2,arguments.length),Xr("Reference.push",this.path),Wr("Reference.push",1,e,this.path,!0),Mn("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=ci(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},la.prototype.onDisconnect=function(){return Xr("Reference.onDisconnect",this.path),new ai(this.repo,this.path)},Object.defineProperty(la.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(la.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(la.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(la.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),la);function la(e,t){if(!(e instanceof sa))throw new Error("new Reference() no longer supported - use app.database().");return $s.call(this,e,t,ca.DEFAULT,!1)||this}function fa(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Di}function pa(e){this.rangedFilter_=new aa(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}function da(e){this.indexedFilter_=new Vo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=da.getStartPost_(e),this.endPost_=da.getEndPost_(e)}function ya(e,t,n){var s=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new as,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new go,this.persistentConnection_=null;var r=new ns(n);if(this.stats_=is.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new oa(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mn(i)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new ia(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(e){s.server_.refreshAuthToken(e)}),this.statsReporter_=is.getOrCreateReporter(e,function(){return new ss(s.stats_,s.server_)}),this.transactions_init_(),this.infoData_=new ts,this.infoSyncTree_=new es({startListening:function(e,t,n,r){var i=[],o=s.infoData_.getNode(e.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(e.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new es({startListening:function(r,e,t,i){return s.server_.listen(r,t,e,function(e,t){var n=i(e,t);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(e,t){s.server_.unlisten(e,t)}})}function ma(e,t,n){var r=Js.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=t,r.authTokenProvider_=n,r.log_=Zn("p:rest:"),r.listens_={},r}function ga(e,t,n,r,i,o){var s=Zs.call(this)||this;if(s.repoInfo_=e,s.onDataUpdate_=t,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=ga.nextPersistentConnectionId_++,s.log_=Zn("p:"+s.id+":"),s.interruptReasons_={},s.listens_={},s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),hs.getInstance().on("visible",s.onVisible_,s),-1===e.host.indexOf("fblocal")&&ls.getInstance().on("online",s.onOnline_,s),s}function va(){}function ba(e,t,n,r,i,o,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zn("c:"+this.id+":"),this.transportManager_=new ta(t),this.log_("Connection created"),this.start_()}function wa(e){this.initTransports_(e)}function _a(e,t,n,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zn(this.connId),this.stats_=is.getCollection(t),this.connURL=_a.connectionURL_(t,n,r)}yo.__referenceConstructor=ha,Yo.__referenceConstructor=ha;var Ta,Ea,Sa=function(){this.children={},this.childCount=0,this.value=null},Ca=(Ia.prototype.subTree=function(e){for(var t,n=e instanceof Dr?e:new Dr(e),r=this;null!==(t=n.getFront());)r=new Ia(t,r,vn(r.node_.children,t)||new Sa),n=n.popFront();return r},Ia.prototype.getValue=function(){return this.node_.value},Ia.prototype.setValue=function(e){Zt(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},Ia.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Ia.prototype.hasChildren=function(){return 0<this.node_.childCount},Ia.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Ia.prototype.forEachChild=function(n){var r=this;xn(this.node_.children,function(e,t){n(new Ia(e,r,t))})},Ia.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},Ia.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},Ia.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},Ia.prototype.path=function(){return new Dr(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Ia.prototype.name=function(){return this.name_},Ia.prototype.parent=function(){return this.parent_},Ia.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Ia.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=In(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},Ia);function Ia(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Sa),this.name_=e,this.parent_=t,this.node_=n}(Ea=Ta=Ta||{})[Ea.RUN=0]="RUN",Ea[Ea.SENT=1]="SENT",Ea[Ea.COMPLETED=2]="COMPLETED",Ea[Ea.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Ea[Ea.NEEDS_ABORT=4]="NEEDS_ABORT",sa.MAX_TRANSACTION_RETRIES_=25,sa.prototype.transactions_init_=function(){this.transactionQueueTree_=new Ca},sa.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);function i(){}var o=new ha(this,e);o.on("value",i);var s={path:e,update:t,onComplete:n,status:null,order:br(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(e);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new co(s.currentInputSnapshot,new ha(this,s.path),Di);s.onComplete(null,!1,c)}}else{si("transaction failed: Data returned ",u,s.path),s.status=Ta.RUN;var h=this.transactionQueueTree_.subTree(e),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;"object"==typeof u&&null!==u&&In(u,".priority")?(f=vn(u,".priority"),Zt(Vr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(e)||Xi.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),d=eo(u,f),y=vo(d,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(e,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,m),this.sendReadyTransactions_()}},sa.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Xi.EMPTY_NODE},sa.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);Zt(0<n.length,"Sending zero length transaction queue"),n.every(function(e){return e.status===Ta.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},sa.prototype.sendTransactionQueue_=function(a,u){for(var c=this,e=u.map(function(e){return e.currentWriteId}),t=this.getLatestState_(a,e),n=t,r=t.hash(),i=0;i<u.length;i++){var o=u[i];Zt(o.status===Ta.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Ta.SENT,o.retryCount++;var s=Dr.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(e){c.log_("transaction put response",{path:l.toString(),status:e});var t=[];if("ok"===e){for(var n=[],r=0;r<u.length;r++){if(u[r].status=Ta.COMPLETED,t=t.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new ha(c,u[r].path),s=new co(i,o,Di);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}for(c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,t),r=0;r<n.length;r++)cr(n[r])}else{if("datastale"===e)for(r=0;r<u.length;r++)u[r].status===Ta.SENT_NEEDS_ABORT?u[r].status=Ta.NEEDS_ABORT:u[r].status=Ta.RUN;else for(nr("transaction at "+l.toString()+" failed: "+e),r=0;r<u.length;r++)u[r].status=Ta.NEEDS_ABORT,u[r].abortReason=e;c.rerunTransactions_(a)}},r)},sa.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},sa.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter(function(e){return e.status===Ta.RUN}).map(function(e){return e.currentWriteId}),s=0;s<e.length;s++){var a=e[s],u=Dr.relativePath(t,a.path),c=!1,h=void 0;if(Zt(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Ta.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Ta.RUN)if(a.retryCount>=sa.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=e[s].update(l.val());if(void 0!==f){si("transaction failed: Data returned ",f,a.path);var p=eo(f);"object"==typeof f&&null!=f&&In(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,y=this.generateServerValues(),m=vo(p,y);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[s].status=Ta.COMPLETED,n=e[s].unwatcher,setTimeout(n,Math.floor(0)),e[s].onComplete))if("nodata"===h){var g=new ha(this,e[s].path),v=e[s].currentInputSnapshot,b=new co(v,g,Di);r.push(e[s].onComplete.bind(null,null,!1,b))}else r.push(e[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)cr(r[s]);this.sendReadyTransactions_()}},sa.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},sa.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},sa.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},sa.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Ta.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(0<n.length?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},sa.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},sa.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===Ta.SENT_NEEDS_ABORT||(t[o].status===Ta.SENT?(Zt(i===o-1,"All SENT items should be at beginning of queue."),t[i=o].status=Ta.SENT_NEEDS_ABORT,t[o].abortReason="set"):(Zt(t[o].status===Ta.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)cr(n[o])}};var xa,Na=(La.getInstance=function(){return xa=xa||new La},La.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},La.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},La.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&tr("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=jr(n),i=r.repoInfo;return Yr("Invalid Firebase Database URL",1,r),r.path.isEmpty()||tr("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},La.prototype.deleteRepo=function(e){var t=vn(this.repos_,e.app.name);t&&vn(t,e.repoInfo_.toURLString())===e||tr("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},La.prototype.createRepo=function(e,t){var n=vn(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=vn(n,e.toURLString());return r&&tr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new sa(e,this.useRestClient_,t),n[e.toURLString()]=r},La.prototype.forceRestClient=function(e){this.useRestClient_=e},La),Da=(Object.defineProperty(Pa.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Pa.prototype.ref=function(e){return this.checkDeleted_("ref"),Pn("database.ref",0,1,arguments.length),e instanceof ha?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},Pa.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Pn(t,1,1,arguments.length);var n=jr(e);Yr(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&tr(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Pa.prototype.checkDeleted_=function(e){null===this.repo_&&tr("Cannot call "+e+" on a deleted database.")},Pa.prototype.goOffline=function(){Pn("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Pa.prototype.goOnline=function(){Pn("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Pa.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Pa),ka=(Oa.prototype.delete=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return this.database.checkDeleted_("delete"),Na.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Oa),Aa=Object.freeze({forceLongPolling:function(){ea.forceDisallow(),ps.forceAllow()},forceWebSockets:function(){ps.forceDisallow()},isWebSocketsAvailable:function(){return ea.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),Ra=ia;function Oa(e){this.database=e}function Pa(e){(this.repo_=e)instanceof sa||tr("Don't call new Database() directly - please use firebase.database()."),this.root_=new ha(e,Dr.Empty),this.INTERNAL=new ka(this)}function La(){this.repos_={},this.useRestClient_=!1}ia.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ia.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Ma=na,Fa=Rr,qa=Object.freeze({DataConnection:Ra,RealTimeConnection:Ma,hijackHash:function(i){var o=ia.prototype.put;return ia.prototype.put=function(e,t,n,r){void 0!==r&&(r=i()),o.call(this,e,t,n,r)},function(){ia.prototype.put=o}},ConnectionTarget:Fa,queryIdentifier:function(e){return e.queryIdentifier()},listens:function(e){return e.repo.persistentConnection_.listens_},forceRestClient:function(e){Na.getInstance().forceRestClient(e)}}),ja=Da.ServerValue;fh.INTERNAL.registerService("database",function(e,t,n){return Na.getInstance().databaseFromApp(e,n)},{Reference:ha,Query:yo,Database:Da,enableLogging:$n,INTERNAL:Aa,ServerValue:ja,TEST_ACCESS:qa},null,!0);var Ua,Ba="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Va=Va||{},Wa=Ba;function Ha(e){return"string"==typeof e}function Ka(e,t){e=e.split("."),t=t||Wa;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function Qa(){}function za(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function Ga(e){return"array"==za(e)}function Xa(e){var t=za(e);return"array"==t||"object"==t&&"number"==typeof e.length}function Ya(e){return"function"==za(e)}function $a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ja="closure_uid_"+(1e9*Math.random()>>>0),Za=0;function eu(e,t,n){return e.call.apply(e.bind,arguments)}function tu(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function nu(e,t,n){return(nu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eu:tu).apply(null,arguments)}function ru(t){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var iu=Date.now||function(){return+new Date};function ou(e,o){function t(){}t.prototype=o.prototype,e.L=o.prototype,e.prototype=new t,(e.prototype.constructor=e).mh=function(e,t,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[t].apply(e,r)}}function su(e){if(Error.captureStackTrace)Error.captureStackTrace(this,su);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function au(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");su.call(this,n+e[r])}function uu(){0!=cu&&(hu[this[Ja]||(this[Ja]=++Za)]=this),this.Ka=this.Ka,this.Qa=this.Qa}ou(su,Error),su.prototype.name="CustomError",ou(au,su);var cu=0,hu={};uu.prototype.Ka=!(au.prototype.name="AssertionError"),uu.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=cu)){var e=this[Ja]||(this[Ja]=++Za);if(0!=cu&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete hu[e]}},uu.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var lu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(Ha(e))return Ha(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},fu=Array.prototype.lastIndexOf?function(e,t){return Array.prototype.lastIndexOf.call(e,t,e.length-1)}:function(e,t){var n=e.length-1;if(n<0&&(n=Math.max(0,e.length+n)),Ha(e))return Ha(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},pu=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=Ha(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},du=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Ha(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function yu(e){if(!Ga(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0}function mu(e,t){var n;return(n=0<=(t=lu(e,t)))&&Array.prototype.splice.call(e,t,1),n}function gu(){return Array.prototype.concat.apply([],arguments)}function vu(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function bu(e){return/^[\s\xa0]*$/.test(e)}var wu,_u=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Tu(e,t){return e<t?-1:t<e?1:0}e:{var Eu=Wa.navigator;if(Eu){var Su=Eu.userAgent;if(Su){wu=Su;break e}}wu=""}function Cu(e){return-1!=wu.indexOf(e)}function Iu(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xu(e){var t,n=[],r=0;for(t in e)n[r++]=e[t];return n}function Nu(e){var t,n=[],r=0;for(t in e)n[r++]=t;return n}function Du(e){var t,n={};for(t in e)n[t]=e[t];return n}var ku="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Au(e){for(var t,n,r=1;r<arguments.length;r++){for(t in n=arguments[r])e[t]=n[t];for(var i=0;i<ku.length;i++)t=ku[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function Ru(e){return Ru[" "](e),e}Ru[" "]=Qa;var Ou,Pu,Lu=Cu("Opera"),Mu=Cu("Trident")||Cu("MSIE"),Fu=Cu("Edge"),qu=Fu||Mu,ju=Cu("Gecko")&&!(-1!=wu.toLowerCase().indexOf("webkit")&&!Cu("Edge"))&&!(Cu("Trident")||Cu("MSIE"))&&!Cu("Edge"),Uu=-1!=wu.toLowerCase().indexOf("webkit")&&!Cu("Edge");function Bu(){var e=Wa.document;return e?e.documentMode:void 0}e:{var Vu="",Wu=(Pu=wu,ju?/rv:([^\);]+)(\)|;)/.exec(Pu):Fu?/Edge\/([\d\.]+)/.exec(Pu):Mu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Pu):Uu?/WebKit\/(\S+)/.exec(Pu):Lu?/(?:Version)[ \/]?(\S+)/.exec(Pu):void 0);if(Wu&&(Vu=Wu?Wu[1]:""),Mu){var Hu=Bu();if(null!=Hu&&Hu>parseFloat(Vu)){Ou=String(Hu);break e}}Ou=Vu}var Ku,Qu={};function zu(a){return e=a,t=Qu,Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(){for(var e=0,t=_u(String(Ou)).split("."),n=_u(String(a)).split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;e=Tu(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Tu(0==o[2].length,0==s[2].length)||Tu(o[2],s[2]),o=o[3],s=s[3]}while(0==e)}return 0<=e}();var e,t}var Gu=Wa.document;Ku=Gu&&Mu?Bu()||("CSS1Compat"==Gu.compatMode?parseInt(Ou,10):5):void 0;var Xu=Object.freeze||function(e){return e},Yu=!Mu||9<=Number(Ku),$u=Mu&&!zu("9"),Ju=function(){if(!Wa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wa.addEventListener("test",Qa,t),Wa.removeEventListener("test",Qa,t)}catch(e){}return e}();function Zu(e,t){this.type=e,this.currentTarget=this.target=t,this.defaultPrevented=this.Ea=!1,this.Be=!0}function ec(e,t){Zu.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,e&&this.Kf(e,t)}Zu.prototype.stopPropagation=function(){this.Ea=!0},Zu.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},ou(ec,Zu);var tc=Xu({2:"touch",3:"pen",4:"mouse"});ec.prototype.Kf=function(e,t){var n=this.type=e.type,r=e.changedTouches?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=t,t=e.relatedTarget){if(ju){e:{try{Ru(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,null===r?(this.offsetX=Uu||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=Uu||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=Ha(e.pointerType)?e.pointerType:tc[e.pointerType]||"",this.state=e.state,(this.fb=e).defaultPrevented&&this.preventDefault()},ec.prototype.stopPropagation=function(){ec.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},ec.prototype.preventDefault=function(){ec.L.preventDefault.call(this);var e=this.fb;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,$u)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var nc="closure_listenable_"+(1e6*Math.random()|0);function rc(e){return e&&e[nc]}var ic=0;function oc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Ob=i,this.key=++ic,this.Sa=this.Eb=!1}function sc(e){this.src=e,this.J={},this.xb=0}function ac(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Sa&&o.listener==t&&o.capture==!!n&&o.Ob==r)return i}return-1}oc.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(Ua=sc.prototype).add=function(e,t,n,r,i){var o=e.toString();(e=this.J[o])||(e=this.J[o]=[],this.xb++);var s=ac(e,t,r,i);return-1<s?(t=e[s],n||(t.Eb=!1)):((t=new oc(t,this.src,o,!!r,i)).Eb=n,e.push(t)),t},Ua.remove=function(e,t,n,r){if(!((e=e.toString())in this.J))return!1;var i=this.J[e];return-1<(t=ac(i,t,n,r))&&(i[t].Vb(),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.J[e],this.xb--),!0)},Ua.ye=function(e){var t=e.type;t in this.J&&mu(this.J[t],e)&&(e.Vb(),0==this.J[t].length&&(delete this.J[t],this.xb--))},Ua.pb=function(e){var t;for(t in e=e&&e.toString(),this.J)if(!e||t==e){for(var n=this.J[t],r=0;r<n.length;r++)n[r].Vb();delete this.J[t],this.xb--}},Ua.jb=function(e,t,n,r){var i=-1;return(e=this.J[e.toString()])&&(i=ac(e,t,n,r)),-1<i?e[i]:null};var uc="closure_lm_"+(1e6*Math.random()|0),cc={};function hc(e,t,n,r,i){if(r&&r.once)return fc(e,t,n,r,i);if(Ga(t)){for(var o=0;o<t.length;o++)hc(e,t[o],n,r,i);return null}return n=wc(n),rc(e)?e.nb(t,n,$a(r)?!!r.capture:!!r,i):lc(e,t,n,!1,r,i)}function lc(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s,a,u=$a(i)?!!i.capture:!!i,c=vc(e);if(c||(e[uc]=c=new sc(e)),(n=c.add(t,n,r,u,o)).proxy)return n;if(s=gc,r=a=Yu?function(e){return s.call(a.src,a.listener,e)}:function(e){if(!(e=s.call(a.src,a.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)Ju||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(dc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function fc(e,t,n,r,i){if(Ga(t)){for(var o=0;o<t.length;o++)fc(e,t[o],n,r,i);return null}return n=wc(n),rc(e)?e.Oc(t,n,$a(r)?!!r.capture:!!r,i):lc(e,t,n,!0,r,i)}function pc(e){if("number"!=typeof e&&e&&!e.Sa){var t=e.src;if(rc(t))t.Le(e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(dc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=vc(t))?(n.ye(e),0==n.xb&&(n.src=null,t[uc]=null)):e.Vb()}}}function dc(e){return e in cc?cc[e]:cc[e]="on"+e}function yc(e,t,n,r){var i=!0;if((e=vc(e))&&(t=e.J[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.Sa&&(o=mc(o,r),i=i&&!1!==o)}return i}function mc(e,t){var n=e.listener,r=e.Ob||e.src;return e.Eb&&pc(e),n.call(r,t)}function gc(e,t){if(e.Sa)return!0;if(Yu)return mc(e,new ec(t,this));var n=t||Ka("window.event");t=new ec(n,this);var r=!0;if(!(n.keyCode<0||null!=n.returnValue)){e:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break e}catch(e){i=!0}!i&&null!=n.returnValue||(n.returnValue=!0)}for(n=[],i=t.currentTarget;i;i=i.parentNode)n.push(i);for(e=e.type,i=n.length-1;!t.Ea&&0<=i;i--){t.currentTarget=n[i];var o=yc(n[i],e,!0,t);r=r&&o}for(i=0;!t.Ea&&i<n.length;i++)t.currentTarget=n[i],o=yc(n[i],e,!1,t),r=r&&o}return r}function vc(e){return(e=e[uc])instanceof sc?e:null}var bc="__closure_events_fn_"+(1e9*Math.random()>>>0);function wc(t){return Ya(t)?t:(t[bc]||(t[bc]=function(e){return t.handleEvent(e)}),t[bc])}function _c(){uu.call(this),this.ka=new sc(this),(this.Pe=this).Uc=null}ou(_c,uu),_c.prototype[nc]=!0,(Ua=_c.prototype).addEventListener=function(e,t,n,r){hc(this,e,t,n,r)},Ua.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Ga(n))for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);else i=$a(i)?!!i.capture:!!i,r=wc(r),rc(t)?t.ed(n,r,i,o):(t=t&&vc(t))&&(n=t.jb(n,r,i,o))&&pc(n)}(this,e,t,n,r)},Ua.dispatchEvent=function(e){var t,n=this.Uc;if(n)for(t=[];n;n=n.Uc)t.push(n);n=this.Pe;var r=e.type||e;if(Ha(e))e=new Zu(e,n);else if(e instanceof Zu)e.target=e.target||n;else{var i=e;Au(e=new Zu(r,n),i)}if(i=!0,t)for(var o=t.length-1;!e.Ea&&0<=o;o--){var s=e.currentTarget=t[o];i=s.Lb(r,!0,e)&&i}if(e.Ea||(i=(s=e.currentTarget=n).Lb(r,!0,e)&&i,e.Ea||(i=s.Lb(r,!1,e)&&i)),t)for(o=0;!e.Ea&&o<t.length;o++)i=(s=e.currentTarget=t[o]).Lb(r,!1,e)&&i;return i},Ua.F=function(){_c.L.F.call(this),this.pg(),this.Uc=null},Ua.nb=function(e,t,n,r){return this.ka.add(String(e),t,!1,n,r)},Ua.Oc=function(e,t,n,r){return this.ka.add(String(e),t,!0,n,r)},Ua.ed=function(e,t,n,r){this.ka.remove(String(e),t,n,r)},Ua.Le=function(e){this.ka.ye(e)},Ua.pg=function(){this.ka&&this.ka.pb(void 0)},Ua.Lb=function(e,t,n){if(!(e=this.ka.J[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.Sa&&o.capture==t){var s=o.listener,a=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==s.call(a,n)&&r}}return r&&0!=n.Be},Ua.jb=function(e,t,n,r){return this.ka.jb(String(e),t,n,r)};var Tc=Wa.JSON.stringify;function Ec(e,t){this.Sf=100,this.ef=e,this.ug=t,this.Zb=0,this.Pb=null}function Sc(){this.lc=this.Va=null}Ec.prototype.get=function(){if(0<this.Zb){this.Zb--;var e=this.Pb;this.Pb=e.next,e.next=null}else e=this.ef();return e},Ec.prototype.put=function(e){this.ug(e),this.Zb<this.Sf&&(this.Zb++,e.next=this.Pb,this.Pb=e)};var Cc,Ic,xc=new Ec(function(){return new Nc},function(e){e.reset()});function Nc(){this.next=this.scope=this.Gc=null}function Dc(e){Wa.setTimeout(function(){throw e},0)}Sc.prototype.add=function(e,t){var n=this.Af();n.set(e,t),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Sc.prototype.remove=function(){var e=null;return this.Va&&(e=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),e.next=null),e},Sc.prototype.wg=function(e){xc.put(e)},Sc.prototype.Af=function(){return xc.get()},Nc.prototype.set=function(e,t){this.Gc=e,this.scope=t,this.next=null};var kc=!(Nc.prototype.reset=function(){this.next=this.scope=this.Gc=null}),Ac=new Sc;function Rc(){for(var e;e=Ac.remove();){try{e.Gc.call(e.scope)}catch(e){Dc(e)}Ac.wg(e)}kc=!1}function Oc(e,t){_c.call(this),this.Na=e||1,this.wb=t||Wa,this.nd=nu(this.Rg,this),this.ie=iu()}function Pc(e,t,n){if(Ya(e))n&&(e=nu(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=nu(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wa.setTimeout(e,t||0)}function Lc(e,t,n){uu.call(this),this.Uf=null!=n?nu(e,n):e,this.Na=t,this.Xe=nu(this.fg,this),this.qc=[]}function Mc(e){uu.call(this),this.i=e,this.o={}}ou(Oc,_c),(Ua=Oc.prototype).enabled=!1,Ua.B=null,Ua.setInterval=function(e){this.Na=e,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},Ua.Rg=function(){if(this.enabled){var e=iu()-this.ie;0<e&&e<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-e):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},Ua.ff=function(){this.dispatchEvent("tick")},Ua.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=iu())},Ua.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},Ua.F=function(){Oc.L.F.call(this),this.stop(),delete this.wb},ou(Lc,uu),(Ua=Lc.prototype).Ta=!1,Ua.ob=0,Ua.B=null,Ua.mf=function(e){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},Ua.stop=function(){this.B&&(Wa.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},Ua.pause=function(){this.ob++},Ua.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},Ua.F=function(){Lc.L.F.call(this),this.stop()},Ua.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},Ua.Cc=function(){this.B=Pc(this.Xe,this.Na),this.Uf.apply(null,this.qc)},ou(Mc,uu);var Fc=[];function qc(e,t,n){this.reset(e,t,n,void 0,void 0)}function jc(e){this.pe=e,this.Zd=this.uc=this.mb=this.$b=null}function Uc(e,t){this.name=e,this.value=t}(Ua=Mc.prototype).nb=function(e,t,n,r){return this.Tf(e,t,n,r)},Ua.Tf=function(e,t,n,r){Ga(t)||(t&&(Fc[0]=t.toString()),t=Fc);for(var i=0;i<t.length;i++){var o=hc(e,t[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},Ua.Oc=function(e,t,n,r){return this.je(e,t,n,r)},Ua.je=function(e,t,n,r,i){if(Ga(t))for(var o=0;o<t.length;o++)this.je(e,t[o],n,r,i);else{if(!(e=fc(e,t,n||this.handleEvent,r,i||this.i||this)))return this;this.o[e.key]=e}return this},Ua.ed=function(e,t,n,r,i){if(Ga(t))for(var o=0;o<t.length;o++)this.ed(e,t[o],n,r,i);else n=n||this.handleEvent,r=$a(r)?!!r.capture:!!r,i=i||this.i||this,n=wc(n),r=!!r,(t=rc(e)||(e=e&&vc(e))?e.jb(t,n,r,i):null)&&(pc(t),delete this.o[t.key])},Ua.pb=function(){Iu(this.o,function(e,t){this.o.hasOwnProperty(t)&&pc(e)},this),this.o={}},Ua.F=function(){Mc.L.F.call(this),this.pb()},Ua.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qc.prototype.Md=null,qc.prototype.reset=function(e,t,n,r,i){this.mb=e,delete this.Md},qc.prototype.Bg=function(e){this.Md=e},qc.prototype.Ge=function(e){this.mb=e},Uc.prototype.toString=function(){return this.name};var Bc=new Uc("SEVERE",1e3),Vc=new Uc("WARNING",900),Wc=new Uc("INFO",800),Hc=new Uc("CONFIG",700),Kc=new Uc("FINE",500);(Ua=jc.prototype).getName=function(){return this.pe},Ua.getParent=function(){return this.$b},Ua.pf=function(){return this.uc||(this.uc={}),this.uc},Ua.Ge=function(e){this.mb=e},Ua.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(e,t){throw new au("Failure: "+e,Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},Ua.Pf=function(e){return e.value>=this.Qd().value},Ua.log=function(e,t,n){this.Pf(e)&&(Ya(t)&&(t=t()),this.gf(this.uf(e,t,n)))},Ua.uf=function(e,t,n){return e=new qc(e,String(t),this.pe),n&&e.Bg(n),e},Ua.ca=function(e,t){this.log(Bc,e,t)},Ua.T=function(e,t){this.log(Vc,e,t)},Ua.info=function(e,t){this.log(Wc,e,t)},Ua.lf=function(e){this.log(Kc,e,void 0)},Ua.gf=function(e){for(var t=this;t;)t.We(e),t=t.getParent()},Ua.We=function(e){if(this.Zd)for(var t,n=0;t=this.Zd[n];n++)t(e)},Ua.Fg=function(e){this.$b=e},Ua.Qe=function(e,t){this.pf()[e]=t};var Qc={},zc=null;function Gc(e){var t;if(zc||(zc=new jc(""),(Qc[""]=zc).Ge(Hc)),!(t=Qc[e])){t=new jc(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Gc(e.substr(0,n))).Qe(r,t),t.Fg(n),Qc[e]=t}return t}function Xc(e,t){e&&e.info(t,void 0)}function Yc(e,t){e&&e.lf(t)}function $c(){this.s=Gc("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(Ua=$c.prototype).Id=function(){this.Wc=!1},Ua.Tg=function(e,t,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+e+"\n"+t+"\n"+o.Xf(i)})},Ua.Ug=function(e,t,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+i+" "+o})},Ua.Wa=function(e,t,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+e+"): "+r.ng(t)+(n?" "+n:"")})},Ua.Sg=function(e){this.info(function(){return"TIMEOUT: "+e})},Ua.debug=function(e){Yc(this.s,e)},Ua.cb=function(e,t){var n=this.s;n&&n.ca(t||"Exception",e)},Ua.info=function(e){Xc(this.s,e)},Ua.T=function(e){var t=this.s;t&&t.T(e,void 0)},Ua.ca=function(e){var t=this.s;t&&t.ca(e,void 0)},Ua.ng=function(e){if(!this.Wc)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(var n=0;n<t.length;n++)Ga(t[n])&&this.Wf(t[n]);return Tc(t)}catch(t){return this.debug("Exception parsing expected JS array - probably was not JS"),e}},Ua.Wf=function(e){if(!(e.length<2||(!Ga(e=e[1])||e.length<1))){var t=e[0];if("noop"!=t&&"stop"!=t&&"close"!=t)for(t=1;t<e.length;t++)e[t]=""}},Ua.Xf=function(e){if(!this.Wc)return e;if(!e)return null;var t="";e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");t=2<=o.length&&"type"==o[1]?t+(i+"=")+r+"&":t+(i+"=redacted&")}}return t};var Jc=new _c;function Zc(e){Zu.call(this,"serverreachability",e)}function eh(e){Jc.dispatchEvent(new Zc(Jc,e))}function th(e,t){Zu.call(this,"statevent",e),this.stat=t}function nh(e){Jc.dispatchEvent(new th(Jc,e))}function rh(e,t,n){Zu.call(this,"timingevent",e),this.size=t,this.rtt=n}function ih(e,t){if(!Ya(e))throw Error("Fn must not be null and must be a function");return Wa.setTimeout(function(){e()},t)}ou(Zc,Zu),ou(th,Zu),ou(rh,Zu);var oh={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},sh={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function ah(){}function uh(){}ah.prototype.pd=null,ah.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var ch,hh={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function lh(){Zu.call(this,"d")}function ph(){Zu.call(this,"c")}function dh(){}function yh(e,t,n,r,i){this.b=e,this.a=t,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new Mc(this),this.Ua=45e3,e=qu?125:void 0,this.Vc=new Oc(e),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}ou(lh,Zu),ou(ph,Zu),ou(dh,ah),dh.prototype.Dd=function(){var e=this.Wd();return e?new ActiveXObject(e):new XMLHttpRequest},dh.prototype.Mf=function(){var e={};return this.Wd()&&(e[0]=!0,e[1]=!0),e},dh.prototype.Wd=function(){if(this.be||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return this.be;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<e.length;t++){var n=e[t];try{return new ActiveXObject(n),this.be=n}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")},ch=new dh;var mh={},gh={};function vh(e){if(e.H&&"function"==typeof e.H)return e.H();if(Ha(e))return e.split("");if(Xa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}return xu(e)}function bh(e,t,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,n);else if(Xa(e)||Ha(e))pu(e,t,n);else{if(e.W&&"function"==typeof e.W)var r=e.W();else if(e.H&&"function"==typeof e.H)r=void 0;else if(Xa(e)||Ha(e)){r=[];for(var i=e.length,o=0;o<i;o++)r.push(o)}else r=Nu(e);o=(i=vh(e)).length;for(var s=0;s<o;s++)t.call(n,i[s],r&&r[s],e)}}function wh(e,t){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else e&&this.addAll(e)}function _h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ua=yh.prototype).ga=function(e){this.A=e},Ua.setTimeout=function(e){this.Ua=e},Ua.He=function(e){this.Ra=e},Ua.Gg=function(e){this.ba=e},Ua.la=function(){return this.ba},Ua.kd=function(e,t){this.ic=1,this.ua=e.clone().Ub(),this.Da=t,this.yc=!0,this.Ce(null)},Ua.jd=function(e,t,n){this.ic=1,this.ua=e.clone().Ub(),this.Da=null,this.yc=t,this.Ce(n)},Ua.Ce=function(e){this.qb=iu(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?e:null),0<this.Ra&&(this.ac=new Lc(nu(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),e=this.A?Du(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),e["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,e)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,e)),eh(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},Ua.mg=function(e){e=e.target;var t=this.ac;t&&3==e.ma()?(this.a.debug("Throttling readystatechange."),t.mf()):this.Me(e)},Ua.Me=function(e){try{e==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(e){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var t=this;this.a.cb(e,function(){return"ResponseText: "+t.h.ya()})}else this.a.cb(e,"No response text")}},Ua.hg=function(){var e=this.h.ma(),t=this.h.Ud(),n=this.h.za();if(!(e<3||3==e&&!qu&&!this.h.ya())){this.Za||4!=e||7==t||eh(8==t||n<=0?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(t=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,e,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,nh(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(e,t),qu&&this.S&&3==e&&this.Ng()):(this.a.Wa(this.R,t,null),this.Yc(t)),4==e&&this.Ia(),this.S&&!this.Za&&(4==e?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<t.indexOf("Unknown SID")?(this.I=3,nh(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,nh(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},Ua.Ig=function(){return this.Ed&&!this.lb},Ua.sf=function(){if(this.h){var e=this.h.kb("X-HTTP-Initial-Response");if(e&&!bu(e))return e}return null},Ua.Ag=function(){this.Ed=!0},Ua.Fd=function(e,t){for(var n=!0;!this.Za&&this.Bb<t.length;){var r=this.vf(t);if(r==gh){4==e&&(this.I=4,nh(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==mh){this.I=4,nh(15),this.a.Wa(this.R,t,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==e&&0==t.length&&(this.I=1,nh(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,t,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},Ua.kg=function(){if(this.h){var e=this.h.ma(),t=this.h.ya();this.Bb<t.length&&(this.Fb(),this.Fd(e,t),this.S&&4!=e&&this.eb())}},Ua.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},Ua.vf=function(e){var t=this.Bb,n=e.indexOf("\n",t);return-1==n?gh:(t=Number(e.substring(t,n)),isNaN(t)?mh:(n+=1)+t>e.length?gh:(e=e.substr(n,t),this.Bb=n+t,e))},Ua.yg=function(e){this.ic=2,this.ua=e.clone().Ub(),e=!1,Wa.navigator&&Wa.navigator.sendBeacon&&(e=Wa.navigator.sendBeacon(this.ua.toString(),"")),!e&&Wa.Image&&((new Image).src=this.ua,e=!0),e||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=iu(),this.eb()},Ua.cancel=function(){this.Za=!0,this.Ia()},Ua.tg=function(e){e&&this.setTimeout(e),this.Ga&&(this.Fb(),this.eb())},Ua.eb=function(){this.hd=iu()+this.Ua,this.Ke(this.Ua)},Ua.Ke=function(e){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=ih(nu(this.gg,this),e)},Ua.Fb=function(){this.Ga&&(Wa.clearTimeout(this.Ga),this.Ga=null)},Ua.gg=function(){this.Ga=null;var e=iu();0<=e-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-e))},Ua.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(eh(3),nh(17)),this.Ia(),this.I=2,this.Kb()},Ua.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},Ua.Ia=function(){this.Fb();var e=this.ac;e&&"function"==typeof e.bb&&e.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(e=this.h,this.h=null,e.abort(),e.bb())},Ua.Hc=function(){return this.I},Ua.Yc=function(e){try{this.b.ue(this,e),eh(4)}catch(e){this.a.cb(e,"Error in httprequest callback")}},(Ua=wh.prototype).C=function(){return this.j},Ua.H=function(){this.wc();for(var e=[],t=0;t<this.o.length;t++)e.push(this.D[this.o[t]]);return e},Ua.W=function(){return this.wc(),this.o.concat()},Ua.va=function(e){return _h(this.D,e)},Ua.X=function(){return 0==this.j},Ua.clear=function(){this.D={},this.j=this.o.length=0},Ua.remove=function(e){return!!_h(this.D,e)&&(delete this.D[e],this.j--,this.o.length>2*this.j&&this.wc(),!0)},Ua.wc=function(){if(this.j!=this.o.length){for(var e=0,t=0;e<this.o.length;){var n=this.o[e];_h(this.D,n)&&(this.o[t++]=n),e++}this.o.length=t}if(this.j!=this.o.length){var r={};for(t=e=0;e<this.o.length;)_h(r,n=this.o[e])||(r[this.o[t++]=n]=1),e++;this.o.length=t}},Ua.get=function(e,t){return _h(this.D,e)?this.D[e]:t},Ua.set=function(e,t){_h(this.D,e)||(this.j++,this.o.push(e)),this.D[e]=t},Ua.addAll=function(e){if(e instanceof wh)for(var t=e.W(),n=0;n<t.length;n++)this.set(t[n],e.get(t[n]));else for(t in e)this.set(t,e[t])},Ua.forEach=function(e,t){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}},Ua.clone=function(){return new wh(this)};var Th=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Eh(e,t){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,e instanceof Eh?(this.O=void 0!==t?t:e.O,this.tb(e.qa),this.cd(e.zb),this.rb(e.xa),this.sb(e.Ca),this.ec(e.K),this.bd(e.P.clone()),this.$c(e.ib)):e&&(n=String(e).match(Th))?(this.O=!!t,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!t,this.P=new Rh(null,this.O))}function Sh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ch(e,t,n){return Ha(e)?(e=encodeURI(e).replace(t,Ih),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ih(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(Ua=Eh.prototype).toString=function(){var e=[],t=this.qa;t&&e.push(Ch(t,xh,!0),":");var n=this.xa;return!n&&"file"!=t||(e.push("//"),(t=this.zb)&&e.push(Ch(t,xh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&e.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ch(n,"/"==n.charAt(0)?Dh:Nh,!0))),(n=this.Rd())&&e.push("?",n),(n=this.ib)&&e.push("#",Ch(n,Ah)),e.join("")},Ua.resolve=function(e){var t=this.clone(),n=e.Hf();n?t.tb(e.qa):n=e.If(),n?t.cd(e.zb):n=e.Ic(),n?t.rb(e.xa):n=e.Ff();var r=e.K;if(n)t.sb(e.Ca);else if(n=e.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=t.K.lastIndexOf("/");-1!=i&&(r=t.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.ec(r):n=e.Gf(),n?t.bd(e.P.clone()):n=e.Ef(),n&&t.$c(e.ib),t},Ua.clone=function(){return new Eh(this)},Ua.tb=function(e,t){this.U(),(this.qa=t?Sh(e,!0):e)&&(this.qa=this.qa.replace(/:$/,""))},Ua.Hf=function(){return!!this.qa},Ua.cd=function(e,t){this.U(),this.zb=t?Sh(e):e},Ua.If=function(){return!!this.zb},Ua.rb=function(e,t){this.U(),this.xa=t?Sh(e,!0):e},Ua.Ic=function(){return!!this.xa},Ua.sb=function(e){if(this.U(),e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this.Ca=e}else this.Ca=null},Ua.Ff=function(){return null!=this.Ca},Ua.ec=function(e,t){this.U(),this.K=t?Sh(e,!0):e},Ua.ae=function(){return!!this.K},Ua.Gf=function(){return""!==this.P.toString()},Ua.bd=function(e,t){this.U(),e instanceof Rh?(this.P=e,this.P.ad(this.O)):(t||(e=Ch(e,kh)),this.P=new Rh(e,this.O))},Ua.Rd=function(){return this.P.toString()},Ua.getQuery=function(){return this.Rd()},Ua.l=function(e,t){this.U(),this.P.set(e,t)},Ua.dc=function(e,t){this.U(),Ga(t)||(t=[String(t)]),this.P.Ie(e,t)},Ua.$c=function(e,t){this.U(),this.ib=t?Sh(e):e},Ua.Ef=function(){return!!this.ib},Ua.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^iu()).toString(36)),this},Ua.removeParameter=function(e){return this.U(),this.P.remove(e),this},Ua.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},Ua.ad=function(e){this.O=e,this.P&&this.P.ad(e)};var xh=/[#\/\?@]/g,Nh=/[#\?:]/g,Dh=/[#\?]/g,kh=/[#\?@]/g,Ah=/#/g;function Rh(e,t){this.j=this.m=null,this.ja=e||null,this.O=!!t}function Oh(e,t){this.b=e,this.a=t,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Ph(e){this.D=new wh,e&&this.addAll(e)}function Lh(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[Ja]||(e[Ja]=++Za)):t.substr(0,1)+e}function Mh(e){this.me=e||Fh,e=Wa.PerformanceNavigationTiming?0<(e=Wa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Wa.vc&&Wa.vc.ke&&Wa.vc.ke()&&Wa.vc.ke().nh),this.Xb=e?this.me:1,this.v=null,1<this.Xb&&(this.v=new Ph),this.f=null,this.ba=[]}(Ua=Rh.prototype).$=function(){if(!this.m&&(this.m=new wh,this.j=0,this.ja)){var a=this;!function(e){if(e){e=e.split("&");for(var t=0;t<e.length;t++){var n=e[t].indexOf("="),r=null;if(0<=n){var i=e[t].substring(0,n);r=e[t].substring(n+1)}else i=e[t];o=i,s=r?decodeURIComponent(r.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(this.ja)}},Ua.C=function(){return this.$(),this.j},Ua.add=function(e,t){this.$(),this.Oa(),e=this.Ma(e);var n=this.m.get(e);return n||this.m.set(e,n=[]),n.push(t),this.j+=1,this},Ua.remove=function(e){return this.$(),e=this.Ma(e),!!this.m.va(e)&&(this.Oa(),this.j-=this.m.get(e).length,this.m.remove(e))},Ua.clear=function(){this.Oa(),this.m=null,this.j=0},Ua.X=function(){return this.$(),0==this.j},Ua.va=function(e){return this.$(),e=this.Ma(e),this.m.va(e)},Ua.forEach=function(n,r){this.$(),this.m.forEach(function(e,t){pu(e,function(e){n.call(r,e,t,this)},this)},this)},Ua.W=function(){this.$();for(var e=this.m.H(),t=this.m.W(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Ua.H=function(e){this.$();var t=[];if(Ha(e))this.va(e)&&(t=gu(t,this.m.get(this.Ma(e))));else{e=this.m.H();for(var n=0;n<e.length;n++)t=gu(t,e[n])}return t},Ua.set=function(e,t){return this.$(),this.Oa(),e=this.Ma(e),this.va(e)&&(this.j-=this.m.get(e).length),this.m.set(e,[t]),this.j+=1,this},Ua.get=function(e,t){return e&&0<(e=this.H(e)).length?String(e[0]):t},Ua.Ie=function(e,t){this.remove(e),0<t.length&&(this.Oa(),this.m.set(this.Ma(e),vu(t)),this.j+=t.length)},Ua.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var e=[],t=this.m.W(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.ja=e.join("&")},Ua.Oa=function(){this.ja=null},Ua.clone=function(){var e=new Rh;return e.ja=this.ja,this.m&&(e.m=this.m.clone(),e.j=this.j),e},Ua.Ma=function(e){return e=String(e),this.O&&(e=e.toLowerCase()),e},Ua.ad=function(e){e&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(this.remove(t),this.Ie(n,e))},this)),this.O=e},Ua.extend=function(e){for(var t=0;t<arguments.length;t++)bh(arguments[t],function(e,t){this.add(t,e)},this)},ou(function(){},function(){}),(Ua=Oh.prototype).g=null,Ua.ga=function(e){this.A=e},Ua.connect=function(e){this.K=e,e=this.b.Sd(this.K),nh(3);var t=this.b.Ib.$d;null!=t?(this.na=this.b.$a(t[0]),this.g=1,this.xd()):(e.dc("MODE","init"),!this.b.ta&&this.b.aa&&e.dc("X-HTTP-Session-Id",this.b.aa),this.f=new yh(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(e,!1,null),this.g=0)},Ua.xd=function(){this.a.debug("TestConnection: starting stage 2");var e=this.b.Ib.od;if(null!=e)this.a.debug(function(){return"Buffered"}),nh(4),e?(nh(10),this.b.ub(this,!1)):(nh(11),this.b.ub(this,!0));else{this.f=new yh(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var t=this.b.Pd(this.na,this.K);nh(4),t.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&t.l(n,r),this.f.jd(t,!1,this.na)}},Ua.Jb=function(e){return this.b.Jb(e)},Ua.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},Ua.de=function(){return!1},Ua.ue=function(e,t){if(this.w=e.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(e),t){try{var n=this.b.kc.zc(t)}catch(e){return this.a.cb(e),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?nh(6):"11111"==t?(nh(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),nh(11),this.b.ub(this,!0))):(nh(7),this.bc=!1))},Ua.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),nh(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),nh(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?nh(8):1==this.g&&nh(9),this.b.dd(this))},Ua.pc=function(e){if(!this.b.ta&&(e=e.h)){var t=e.kb("X-Client-Wire-Protocol");this.Ad=t||null,this.b.aa&&((e=e.kb("X-HTTP-Session-Id"))?this.b.Fe(e):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},Ua.fc=function(){return this.b.fc()},Ua.Ba=function(){return this.b.Ba()},Ua.Ze=function(){return!Mu||10<=Number(Ku)},(Ua=Ph.prototype).C=function(){return this.D.C()},Ua.add=function(e){this.D.set(Lh(e),e)},Ua.addAll=function(e){for(var t=(e=vh(e)).length,n=0;n<t;n++)this.add(e[n])},Ua.pb=function(e){for(var t=(e=vh(e)).length,n=0;n<t;n++)this.remove(e[n])},Ua.remove=function(e){return this.D.remove(Lh(e))},Ua.clear=function(){this.D.clear()},Ua.X=function(){return this.D.X()},Ua.contains=function(e){return this.D.va(Lh(e))},Ua.H=function(){return this.D.H()},Ua.clone=function(){return new Ph(this)};var Fh=10;function qh(){this.xg=this.rg=void 0}function jh(){this.jg=new qh}function Uh(e,t,n,r,i){try{e.debug(n),t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(t){e.cb(t)}}(Ua=Mh.prototype).ld=function(e){this.v||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(this.Xb=this.me,this.v=new Ph,this.f&&(this.oc(this.f),this.f=null))},Ua.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},Ua.xf=function(){return this.f?1:this.v?this.v.C():0},Ua.Jc=function(e){return this.f?this.f==e:!!this.v&&this.v.contains(e)},Ua.oc=function(e){this.v?this.v.add(e):this.f=e},Ua.ze=function(e){this.f&&this.f==e?this.f=null:this.v&&this.v.contains(e)&&this.v.remove(e)},Ua.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(pu(this.v.H(),function(e){e.cancel()}),this.v.clear())},Ua.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null==this.v||this.v.X())return vu(this.ba);var t=this.ba;return pu(this.v.H(),function(e){t=t.concat(e.la())}),t},Ua.Re=function(e){this.ba=this.ba.concat(e)},Ua.$e=function(){this.ba.length=0},qh.prototype.stringify=function(e){return Wa.JSON.stringify(e,this.rg)},qh.prototype.parse=function(e){return Wa.JSON.parse(e,this.xg)},jh.prototype.hf=function(e,r,t){var i=t||"";try{bh(e,function(e,t){var n=e;$a(e)&&(n=Tc(e)),r.push(i+t+"="+encodeURIComponent(n))})}catch(e){throw r.push(i+"type="+encodeURIComponent("_badmap")),e}},jh.prototype.jf=function(e,t,n){for(var r=-1;;){var i=["count="+t];-1==r?0<t?(r=e[0].Pc,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,s=0;s<t;s++){var a=e[s].Pc,u=e[s].map;if((a-=r)<0)r=Math.max(0,e[s].Pc-100),o=!1;else try{this.hf(u,i,"req"+a+"_")}catch(e){n&&n(u)}}if(o)return i.join("&")}},jh.prototype.zc=function(e){return this.jg.parse(e)};var Bh=Wa.JSON.parse;function Vh(e){_c.call(this),this.headers=new wh,this.Xa=e||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=Wh,this.jc=this.lg=this.Ab=!1}ou(Vh,_c);var Wh="";Vh.prototype.s=Gc("goog.net.XhrIo");var Hh=/^https?$/i,Kh=["POST","PUT"];function Qh(e){return"content-type"==e.toLowerCase()}function zh(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}}function Gh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(o="",Iu(n,function(e,t){o+=t,o+=":",o+=e,o+="\r\n"}),n=o,Ha(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}var o;return e.l(t,n),e}function Xh(e){this.Bd=22,this.De=0,this.M=[],this.a=new $c,this.Ib=new function(){this.od=this.$d=null},this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!Ka("internalChannelParams.failFast",e),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=Ka("internalChannelParams.baseRetryDelayMs",e)||5e3,this.vg=Ka("internalChannelParams.retryDelaySeedMs",e)||1e4,this.nf=Ka("internalChannelParams.forwardChannelMaxRetries",e)||2,this.Od=Ka("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Xa=e&&e.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=e&&e.supportsCrossDomainXhr||!1,this.ra="",this.G=new Mh(e&&e.concurrentRequestLimit),this.kc=new jh,this.ta=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.Nd=e&&e.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),e&&e.Id&&this.a.Id()}function Yh(){}function $h(){if(Mu&&!(10<=Number(Ku)))throw Error("Environmental error: no available transport.")}function Jh(e,t){_c.call(this),this.b=new Xh(t),this.yb=e,this.Qg=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];t=0==i.lastIndexOf("/",0)?i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),r?t+i:t+"/"+i)}return t}(this.yb,"test"),this.s=Gc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.b.ga(e),e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.zd&&(e?e["X-WebChannel-Client-Profile"]=t.zd:e={"X-WebChannel-Client-Profile":t.zd}),this.b.Eg(e),(e=t&&t.httpHeadersOverwriteParam)&&!bu(e)&&this.b.Cg(e),this.Og=t&&t.supportsCrossDomainXhr||!1,this.zg=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bu(t)&&(this.b.Dg(t),null!==(e=this.Rc)&&t in e&&(t in(e=this.Rc)&&delete e[t],(e=this.s)&&e.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+t,void 0))),this.vd=new tl(this)}function Zh(e){lh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.ne=e)&&(e=this.ne,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function el(e){ph.call(this),this.status=1,this.errorCode=e}function tl(e){this.b=e}(Ua=Vh.prototype).Je=function(e){this.Ab=e},Ua.send=function(e,t,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+e);t=t?t.toUpperCase():"GET",this.Tb=e,this.I="",this.Pa=0,this.ge=t,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():ch.Vd(),this.c.onreadystatechange=nu(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=nu(function(e){this.re(e,!0)},this),this.c.upload&&(this.c.upload.onprogress=nu(this.re,this)));try{Yc(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(t,String(e),!0),this.Lc=!1}catch(e){return Yc(this.s,this.da("Error opening Xhr: "+e.message)),void this.Ld(e)}e=n||"";var i,o=this.headers.clone();r&&bh(r,function(e,t){o.set(t,e)}),r=function(e){e:{for(var t=Qh,n=e.length,r=Ha(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:Ha(e)?e.charAt(t):e[t]}(o.W()),n=Wa.FormData&&e instanceof Wa.FormData,0<=lu(Kh,t)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.c.setRequestHeader(t,e)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=(i=this.c,Mu&&zu(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout),Yc(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=nu(this.Ua,this)):this.hc=Pc(this.Ua,this.vb,this)),Yc(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(e),this.Qb=!1}catch(e){Yc(this.s,this.da("Send error: "+e.message)),this.Ld(e)}},Ua.df=function(){return this.Xa?this.Xa.Dd():ch.Dd()},Ua.Ua=function(){void 0!==Va&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,Yc(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},Ua.Ld=function(e){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=e,this.Pa=5,this.Jd(),this.Gb()},Ua.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},Ua.abort=function(e){this.c&&this.ha&&(Yc(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},Ua.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),Vh.L.F.call(this)},Ua.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},Ua.eg=function(){this.se()},Ua.se=function(){if(this.ha&&void 0!==Va)if(this.mc[1]&&4==this.ma()&&2==this.za())Yc(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Pc(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){Yc(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},Ua.re=function(e,t){this.dispatchEvent(zh(e,"progress")),this.dispatchEvent(zh(e,t?"downloadprogress":"uploadprogress"))},Ua.Gb=function(e){if(this.c){this.yd();var t=this.c,n=this.mc[0]?Qa:null;this.mc=this.c=null,e||this.dispatchEvent("ready");try{t.onreadystatechange=n}catch(t){(e=this.s)&&e.ca("Problem encountered resetting onreadystatechange: "+t.message,void 0)}}},Ua.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(Wa.clearTimeout(this.hc),this.hc=null)},Ua.Ba=function(){return!!this.c},Ua.Mc=function(){return 4==this.ma()},Ua.Rf=function(){var e=this.za();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}return t||0===e&&!this.Of()},Ua.Of=function(){var e=String(this.Tb).match(Th)[1]||null;return!e&&Wa.self&&Wa.self.location&&(e=(e=Wa.self.location.protocol).substr(0,e.length-1)),Hh.test(e?e.toLowerCase():"")},Ua.ma=function(){return this.c?this.c.readyState:0},Ua.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(e){return-1}},Ua.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(e){return Yc(this.s,"Can not get status: "+e.message),""}},Ua.ya=function(){try{return this.c?this.c.responseText:""}catch(e){return Yc(this.s,"Can not get responseText: "+e.message),""}},Ua.yf=function(e){if(this.c){var t=this.c.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bh(t)}},Ua.getResponseHeader=function(e){if(this.c&&this.Mc())return null===(e=this.c.getResponseHeader(e))?void 0:e},Ua.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},Ua.kb=function(e){return this.c?this.c.getResponseHeader(e):null},Ua.Ud=function(){return this.Pa},Ua.Hc=function(){return Ha(this.I)?this.I:String(this.I)},Ua.da=function(e){return e+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(Ua=Xh.prototype).tc=8,Ua.g=1,Ua.connect=function(e,t,n,r,i){this.a.debug("connect()"),nh(0),this.K=t,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(e)},Ua.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var e=this.Yb++,t=this.hb.clone();t.l("SID",this.ra),t.l("RID",e),t.l("TYPE","terminate"),this.Ya(t),new yh(this,this.a,this.ra,e,void 0).yg(t)}this.qe()},Ua.bf=function(e){this.a.debug("connectTest_()"),this.Ja=new Oh(this,this.a),null===this.N&&this.Ja.ga(this.A);var t=e;this.N&&this.A&&(t=Gh(e,this.N,this.A)),this.Ja.connect(t)},Ua.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},Ua.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(Wa.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(Wa.clearTimeout(this.ea),this.ea=null)},Ua.ga=function(e){this.A=e},Ua.Eg=function(e){this.Rb=e},Ua.Cg=function(e){this.N=e},Ua.Dg=function(e){this.aa=e},Ua.Fe=function(e){this.Kc=e},Ua.He=function(e){this.Ra=e},Ua.Hg=function(){this.gc=!0},Ua.Ee=function(e){this.i=e},Ua.Nf=function(){return!this.fd},Ua.Zc=function(e){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+Tc(e)}),this.M.push(new function(e,t){this.Pc=e,this.map=t,this.context=null}(this.ag++,e)),3==this.g&&this.Dc()},Ua.qf=function(){return this.kf?0:this.nf},Ua.de=function(){return 0==this.g},Ua.getState=function(){return this.g},Ua.Dc=function(){this.G.ee()||this.ea||(this.ea=ih(nu(this.we,this),0),this.La=0)},Ua.Yf=function(e){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=e.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf()||(this.a.debug("Going to retry POST"),this.ea=ih(nu(this.we,this,e),this.Xd(this.La)),this.La++,0))},Ua.we=function(e){this.ea=null,this.Mg(e)},Ua.Mg=function(e){this.a.debug("startForwardChannel_"),1==this.g?e?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(e?this.le(e):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},Ua.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var e=this.Yb++,t=new yh(this,this.a,"",e,void 0),n=this.A;this.Rb&&(n?Au(n=Du(n),this.Rb):n=this.Rb),null===this.N&&t.ga(n);var r=this.Hd(t),i=this.hb.clone();i.l("RID",e),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&Gh(i,this.N,n),this.G.oc(t),this.Nd?(i.l("$req",r),i.l("SID","null"),t.Ag(),t.kd(i,null)):t.kd(i,r)},Ua.le=function(e){var t=e?e.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",t),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&Gh(n,this.N,this.A),t=new yh(this,this.a,this.ra,t,this.La+1),null===this.N&&t.ga(this.A),e&&this.sg(e),e=this.Hd(t),t.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(t),t.kd(n,e)},Ua.Ya=function(n){this.i&&bh({},function(e,t){n.l(t,e)})},Ua.Hd=function(e){var t=Math.min(this.M.length,1e3),n=this.i?nu(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,t,n),e.Gg(this.M.splice(0,t)),n},Ua.sg=function(e){this.M=e.la().concat(this.M)},Ua.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var e=this.ve;Ic||function(){if(Wa.Promise&&Wa.Promise.resolve){var e=Wa.Promise.resolve(void 0);Ic=function(){e.then(Rc)}}else Ic=function(){var e=Rc;!Ya(Wa.setImmediate)||Wa.Window&&Wa.Window.prototype&&!Cu("Edge")&&Wa.Window.prototype.setImmediate==Wa.setImmediate?(Cc=Cc||function(){var e=Wa.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Cu("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=nu(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||Cu("Trident")||Cu("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){Wa.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).rd;n.rd=null,e()}},function(e){r.next={rd:e},r=r.next,t.port2.postMessage(0)}}())(e):Wa.setImmediate(e)}}(),kc||(Ic(),kc=!0),Ac.add(e,this),this.Ha=0}},Ua.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha||(this.a.debug("Going to retry GET"),this.rc++,this.ia=ih(nu(this.ve,this),this.Xd(this.Ha)),this.Ha++,0))},Ua.ve=function(){this.ia=null,this.Kg()},Ua.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new yh(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var e=this.md.clone();e.l("RID","rpc"),e.l("SID",this.ra),e.l("CI",this.fd?"0":"1"),e.l("AID",this.Sb),this.Ya(e),e.l("TYPE","xmlhttp"),this.N&&this.A&&Gh(e,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(e,!0,this.na),this.a.debug("New Request created")},Ua.ub=function(e,t){this.a.debug("Test Connection Finished");var n=e.Ad;n&&this.G.ld(n),this.fd=this.Se&&t,this.w=e.w,this.af()},Ua.dd=function(e){this.a.debug("Test Connection Failed"),this.w=e.w,this.sa(2)},Ua.ue=function(e,t){if(0!=this.g&&(this.u==e||this.G.Jc(e)))if(this.w=e.w,!e.lb&&this.G.Jc(e)&&3==this.g){try{var n=this.kc.zc(t)}catch(e){n=null}Ga(n)&&3==n.length?this.Cf(n,e):(this.a.debug("Bad POST response data returned"),this.sa(11))}else!e.lb&&this.u!=e||this.Hb(),bu(t)||(n=this.kc.zc(t),this.dg(n,e))},Ua.Cf=function(e,t){0==e[0]?this.Bf(t):(this.he=e[1],0<(t=this.he-this.Sb)&&(e=e[2],this.a.debug(e+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),this.Jg(e)&&!this.wa&&(this.wa=ih(nu(this.bg,this),6e3))))},Ua.Bf=function(e){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<e.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),nh(18)}},Ua.Jg=function(e){return e<37500&&!this.Nf()&&0==this.Ha},Ua.$a=function(e){return this.Te?this.i?this.i.$a(e):e:null},Ua.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),nh(19))},Ua.Hb=function(){null!=this.wa&&(Wa.clearTimeout(this.wa),this.wa=null)},Ua.Tc=function(e){this.a.debug("Request complete");var t,n,r,i=null;if(this.u==e){this.Hb(),this.u=null;var o=2}else{if(!this.G.Jc(e))return;i=e.la(),this.G.ze(e),o=1}if(this.w=e.w,0!=this.g)if(e.S)1==o?(t=e.Da?e.Da.length:0,n=iu()-e.qb,r=this.La,Jc.dispatchEvent(new rh(Jc,t,n,r)),this.Dc()):this.Kd();else{var s=e.Hc();if(3==s||0==s&&0<this.w)this.a.debug("Not retrying due to error type");else{var a=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(e,t){switch(e){case 0:return"Non-200 return code ("+t+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(s,a.w)}),1==o&&this.Yf(e)||2==o&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(i&&0<i.length&&this.G.Re(i),this.a.debug("Error: HTTP request failed"),s){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},Ua.Xd=function(e){var t=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),t*=2),t*e},Ua.pc=function(e){if(this.ta&&(e=e.h)){var t=e.kb("X-Client-Wire-Protocol");t&&this.G.ld(t),this.aa&&((e=e.kb("X-HTTP-Session-Id"))?(this.Fe(e),this.hb.l(this.aa,e)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},Ua.dg=function(e,t){for(var n=this.i&&this.i.sc?[]:null,r=0;r<e.length;r++){var i=e[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(t),this.g=3,this.i&&this.i.wd(),this.Lg(t)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},Ua.Lg=function(e){this.md=this.Pd(this.na,this.K),e.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(e),e.tg(this.Db),this.u=e):this.Kd()},Ua.sa=function(e){if(this.a.info("Error code "+e),2==e){var t=null;this.i&&(t=null);var n=nu(this.Pg,this);t||(t=new Eh("//www.google.com/images/cleardot.gif"),Wa.location&&"http"==Wa.location.protocol||t.tb("https"),t.Ub()),function(e,t){var n=new $c;n.debug("TestLoadImage: loading "+e);var r=new Image;r.onload=ru(Uh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ru(Uh,n,r,"TestLoadImage: error",!1,t),r.onabort=ru(Uh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ru(Uh,n,r,"TestLoadImage: timeout",!1,t),Wa.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}(t.toString(),n)}else nh(2);this.cg(e)},Ua.Pg=function(e){e?(this.a.info("Successfully pinged google.com"),nh(2)):(this.a.info("Failed to ping google.com"),nh(1))},Ua.cg=function(e){this.a.debug("HttpChannel: error - "+e),this.g=0,this.i&&this.i.td(e),this.qe(),this.qd()},Ua.qe=function(){if(this.g=0,this.w=-1,this.i){var e=this.G.la();if(0!=e.length||0!=this.M.length){var t=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.M.length}),this.G.$e(),vu(this.M),this.M.length=0}this.i.sd()}},Ua.Sd=function(e){return e=this.Cd(null,e),this.a.debug("GetForwardChannelUri: "+e),e},Ua.Pd=function(e,t){return e=this.Cd(this.fc()?e:null,t),this.a.debug("GetBackChannelUri: "+e),e},Ua.Cd=function(e,t){var n,r,i,o,s,a,u=(n=t)instanceof Eh?n.clone():new Eh(n,void 0);if(""!=u.xa)e&&u.rb(e+"."+u.xa),u.sb(u.Ca);else{var c=Wa.location;r=c.protocol,i=e?e+"."+c.hostname:c.hostname,o=+c.port,s=t,a=new Eh(null,void 0),r&&a.tb(r),i&&a.rb(i),o&&a.sb(o),s&&a.ec(s),u=a}return this.gb&&Iu(this.gb,function(e,t){u.l(t,e)}),e=this.aa,t=this.Kc,e&&t&&u.l(e,t),u.l("VER",this.tc),this.Ya(u),u},Ua.Jb=function(e){if(e&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vh(this.Xa)).Je(this.gc),e},Ua.Ba=function(){return!!this.i&&this.i.Ba()},Ua.fc=function(){return this.gc},(Ua=Yh.prototype).sc=null,Ua.wd=function(){},Ua.ud=function(){},Ua.td=function(){},Ua.sd=function(){},Ua.Ba=function(){return!0},Ua.Ue=function(){},Ua.$a=function(e){return e},$h.prototype.cf=function(e,t){return new Jh(e,t)},ou(Jh,_c),(Ua=Jh.prototype).addEventListener=function(e,t,n,r){Jh.L.addEventListener.call(this,e,t,n,r)},Ua.removeEventListener=function(e,t,n,r){Jh.L.removeEventListener.call(this,e,t,n,r)},Ua.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},Ua.close=function(){this.b.disconnect()},Ua.send=function(e){if(Ha(e)){var t={};t.__data__=e,this.b.Zc(t)}else this.zg?((t={}).__data__=Tc(e),this.b.Zc(t)):this.b.Zc(e)},Ua.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,Jh.L.F.call(this)},ou(Zh,lh),ou(el,ph),ou(tl,Yh),tl.prototype.wd=function(){Xc(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},tl.prototype.ud=function(e){this.b.dispatchEvent(new Zh(e))},tl.prototype.td=function(e){Xc(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+e),this.b.dispatchEvent(new el(e))},tl.prototype.sd=function(){Xc(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var nl=ru(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},$h);function rl(){this.V=[],this.Z=[]}function il(e,t){if(uu.call(this),this.oe=e||0,this.Wb=t||10,this.oe>this.Wb)throw Error(ol);this.fa=new rl,this.oa=new Ph,this.Ac=0,this.Nc=null,this.Cb()}(Ua=rl.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},Ua.enqueue=function(e){this.Z.push(e)},Ua.ab=function(){return this.Vf(),this.V.pop()},Ua.C=function(){return this.V.length+this.Z.length},Ua.X=function(){return 0==this.V.length&&0==this.Z.length},Ua.clear=function(){this.V=[],this.Z=[]},Ua.contains=function(e){return 0<=lu(this.V,e)||0<=lu(this.Z,e)},Ua.remove=function(e){var t=this.V,n=fu(t,e);return(t=0<=n&&(Array.prototype.splice.call(t,n,1),!0))||mu(this.Z,e)},Ua.H=function(){for(var e=[],t=this.V.length-1;0<=t;--t)e.push(this.V[t]);var n=this.Z.length;for(t=0;t<n;++t)e.push(this.Z[t]);return e},ou(il,uu);var ol="[goog.structs.Pool] Min can not be greater than max";function sl(e,t){this.fe=e,this.gd=t}function al(e){this.Y=[],e&&this.Lf(e)}function ul(){al.call(this)}function cl(e,t){this.Gd=void 0,this.cc=new ul,il.call(this,e,t)}function hl(e,t,n,r){this.Jf=e,this.Ab=!!r,cl.call(this,t,n)}(Ua=il.prototype).Mb=function(){var e=iu();if(!(null!=this.Nc&&e-this.Nc<this.Ac)){var t=this.qg();return t&&(this.Nc=e,this.oa.add(t)),t}},Ua.og=function(e){return!!this.oa.remove(e)&&(this.nc(e),!0)},Ua.qg=function(){for(var e;0<this.Td()&&(e=this.fa.ab(),!this.Sc(e));)this.Cb();return!e&&this.C()<this.Wb&&(e=this.xc()),e},Ua.nc=function(e){this.oa.remove(e),this.Sc(e)&&this.C()<this.Wb?this.fa.enqueue(e):this.Bc(e)},Ua.Cb=function(){for(var e=this.fa;this.C()<this.oe;)e.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(e.ab())},Ua.xc=function(){return{}},Ua.Bc=function(e){if("function"==typeof e.bb)e.bb();else for(var t in e)e[t]=null},Ua.Sc=function(e){return"function"!=typeof e.Ye||e.Ye()},Ua.contains=function(e){return this.fa.contains(e)||this.oa.contains(e)},Ua.C=function(){return this.fa.C()+this.oa.C()},Ua.rf=function(){return this.oa.C()},Ua.Td=function(){return this.fa.C()},Ua.X=function(){return this.fa.X()&&this.oa.X()},Ua.F=function(){if(il.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var e=this.fa;!e.X();)this.Bc(e.ab());delete this.fa},sl.prototype.getKey=function(){return this.fe},sl.prototype.clone=function(){return new sl(this.fe,this.gd)},(Ua=al.prototype).ce=function(e,t){var n=this.Y;n.push(new sl(e,t)),this.$f(n.length-1)},Ua.Lf=function(e){if(e instanceof al){var t=e.W();if(e=e.H(),this.C()<=0){for(var n=this.Y,r=0;r<t.length;r++)n.push(new sl(t[r],e[r]));return}}else t=Nu(e),e=xu(e);for(r=0;r<t.length;r++)this.ce(t[r],e[r])},Ua.remove=function(){var e=this.Y,t=e.length,n=e[0];if(!(t<=0))return 1==t?yu(e):(e[0]=e.pop(),this.Zf()),n.gd},Ua.Zf=function(){for(var e=0,t=this.Y,n=t.length,r=t[e];e<n>>1;){var i=this.tf(e),o=this.zf(e);if(t[i=o<n&&t[o].getKey()<t[i].getKey()?o:i].getKey()>r.getKey())break;t[e]=t[i],e=i}t[e]=r},Ua.$f=function(e){for(var t=this.Y,n=t[e];0<e;){var r=this.wf(e);if(!(t[r].getKey()>n.getKey()))break;t[e]=t[r],e=r}t[e]=n},Ua.tf=function(e){return 2*e+1},Ua.zf=function(e){return 2*e+2},Ua.wf=function(e){return e-1>>1},Ua.H=function(){for(var e=this.Y,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].gd);return t},Ua.W=function(){for(var e=this.Y,t=[],n=e.length,r=0;r<n;r++)t.push(e[r].getKey());return t},Ua.va=function(t){return du(this.Y,function(e){return e.getKey()==t})},Ua.clone=function(){return new al(this)},Ua.C=function(){return this.Y.length},Ua.X=function(){return 0==this.Y.length},Ua.clear=function(){yu(this.Y)},ou(ul,al),ul.prototype.enqueue=function(e,t){this.ce(e,t)},ul.prototype.ab=function(){return this.remove()},ou(cl,il),(Ua=cl.prototype).Mb=function(e,t){if(!e)return(e=cl.L.Mb.call(this))&&this.Ac&&(this.Gd=Wa.setTimeout(nu(this.Nb,this),this.Ac)),e;this.cc.enqueue(void 0!==t?t:100,e),this.Nb()},Ua.Nb=function(){for(var e=this.cc;0<e.C();){var t=this.Mb();if(!t)break;e.ab().apply(this,[t])}},Ua.nc=function(e){cl.L.nc.call(this,e),this.Nb()},Ua.Cb=function(){cl.L.Cb.call(this),this.Nb()},Ua.F=function(){cl.L.F.call(this),Wa.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},ou(hl,cl),hl.prototype.xc=function(){var n=new Vh,e=this.Jf;return e&&e.forEach(function(e,t){n.headers.set(t,e)}),this.Ab&&n.Je(!0),n},hl.prototype.Sc=function(e){return!e.Ka&&!e.Ba()},$h.prototype.createWebChannel=$h.prototype.cf,Jh.prototype.send=Jh.prototype.send,Jh.prototype.open=Jh.prototype.open,Jh.prototype.close=Jh.prototype.close,oh.NO_ERROR=0,oh.TIMEOUT=8,oh.HTTP_ERROR=6,sh.COMPLETE="complete",(uh.EventType=hh).OPEN="a",hh.CLOSE="b",hh.ERROR="c",hh.MESSAGE="d",_c.prototype.listen=_c.prototype.nb,hl.prototype.getObject=hl.prototype.Mb,hl.prototype.releaseObject=hl.prototype.og,Vh.prototype.listenOnce=Vh.prototype.Oc,Vh.prototype.getLastError=Vh.prototype.Hc,Vh.prototype.getLastErrorCode=Vh.prototype.Ud,Vh.prototype.getStatus=Vh.prototype.za,Vh.prototype.getStatusText=Vh.prototype.Yd,Vh.prototype.getResponseJson=Vh.prototype.yf,Vh.prototype.getResponseText=Vh.prototype.ya,Vh.prototype.getResponseText=Vh.prototype.ya,Vh.prototype.send=Vh.prototype.send;var ll,fl,pl={createWebChannelTransport:nl,ErrorCode:oh,EventType:sh,WebChannel:uh,XhrIoPool:hl},dl=pl.createWebChannelTransport,yl=pl.ErrorCode,ml=pl.EventType,gl=pl.WebChannel,vl=pl.XhrIoPool,bl=fh.SDK_VERSION,wl=new pr("@firebase/firestore");function _l(){return wl.logLevel===Kn.DEBUG?ll.DEBUG:wl.logLevel===Kn.SILENT?ll.SILENT:ll.ERROR}function Tl(e){switch(e){case ll.DEBUG:wl.logLevel=Kn.DEBUG;break;case ll.ERROR:wl.logLevel=Kn.ERROR;break;case ll.SILENT:wl.logLevel=Kn.SILENT;break;default:wl.error("Firestore ("+bl+"): Invalid value passed to `setLogLevel`")}}function El(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(wl.logLevel<=Kn.DEBUG){var i=n.map(Cl);wl.debug.apply(wl,["Firestore ("+bl+") ["+e+"]: "+t].concat(i))}}function Sl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(wl.logLevel<=Kn.ERROR){var r=t.map(Cl);wl.error.apply(wl,["Firestore ("+bl+"): "+e].concat(r))}}function Cl(e){if("string"==typeof e)return e;var t=Nl.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function Il(e){var t="FIRESTORE ("+bl+") INTERNAL ASSERTION FAILED: "+e;throw Sl(t),new Error(t)}function xl(e,t){e||Il(t)}(fl=ll=ll||{})[fl.DEBUG=0]="DEBUG",fl[fl.ERROR=1]="ERROR",fl[fl.SILENT=2]="SILENT";var Nl=(Dl.setPlatform=function(e){Dl.platform&&Il("Platform already defined"),Dl.platform=e},Dl.getPlatform=function(){return Dl.platform||Il("Platform not set"),Dl.platform},Dl);function Dl(){}function kl(){return Nl.getPlatform().emptyByteString}var Al,Rl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ol=(zt(Pl,Al=Error),Pl);function Pl(e,t){var n=Al.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Ll(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Ol(Rl.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function Ml(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fl(e,t){return void 0!==e?e:t}function ql(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function jl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ul(e){for(var t in xl(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Bl(e,t,n){if(t.length!==n)throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires "+nf(n,"argument")+", but was called with "+nf(t.length,"argument")+".")}function Vl(e,t,n){if(t.length<n)throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires at least "+nf(n,"argument")+", but was called with "+nf(t.length,"argument")+".")}function Wl(e,t,n,r){if(t.length<n||t.length>r)throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+nf(t.length,"argument")+".")}function Hl(e,t,n,r){Xl(e,t,tf(n)+" argument",r)}function Kl(e,t,n,r){void 0!==r&&Hl(e,t,n,r)}function Ql(e,t,n,r){Xl(e,t,n+" option",r)}function zl(e,t,n,r){void 0!==r&&Ql(e,t,n,r)}function Gl(e,t,n,r,u){void 0!==r&&function(e,t,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push($l(s))}var a=$l(n);throw new Ol(Rl.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+e+'() for option "'+t+'". Acceptable values: '+r.join(", "))}(e,n,r)}function Xl(e,t,n,r){if(!("object"===t?Yl(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=$l(r);throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Yl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function $l(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Il("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function Jl(e,t,n){if(void 0===n)throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+tf(t)+" argument, but it was undefined.")}function Zl(n,e,r){jl(e,function(e,t){if(r.indexOf(e)<0)throw new Ol(Rl.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function ef(e,t,n,r){var i=$l(r);return new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires its "+tf(n)+" argument to be a "+t+", but it was: "+i)}function tf(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function nf(e,t){return e+" "+t+(1===e?"":"s")}var rf=(of.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return xl(20===t.length,"Invalid auto ID: "+t),t},of);function of(){}function sf(e,t){return e<t?-1:t<e?1:0}function af(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function uf(){if("undefined"==typeof Uint8Array)throw new Ol(Rl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cf(){if(!Nl.getPlatform().base64Available)throw new Ol(Rl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var hf,lf,ff,pf,df,yf,mf,gf,vf,bf=(ep.fromBase64String=function(e){Bl("Blob.fromBase64String",arguments,1),Hl("Blob.fromBase64String","string",1,e),cf();try{return new ep(Nl.getPlatform().atob(e))}catch(e){throw new Ol(Rl.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},ep.fromUint8Array=function(e){if(Bl("Blob.fromUint8Array",arguments,1),uf(),!(e instanceof Uint8Array))throw ef("Blob.fromUint8Array","Uint8Array",1,e);return new ep(Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""))},ep.prototype.toBase64=function(){return Bl("Blob.toBase64",arguments,0),cf(),Nl.getPlatform().btoa(this._binaryString)},ep.prototype.toUint8Array=function(){Bl("Blob.toUint8Array",arguments,0),uf();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},ep.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},ep.prototype.isEqual=function(e){return this._binaryString===e._binaryString},ep.prototype._compareTo=function(e){return sf(this._binaryString,e._binaryString)},ep),wf=Ll(bf,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),_f=(Object.defineProperty(Zf.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Zf.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Zf.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},Zf.prototype._compareTo=function(e){return sf(this._lat,e._lat)||sf(this._long,e._long)},Zf),Tf=(Jf.now=function(){return Jf.fromMillis(Date.now())},Jf.fromDate=function(e){return Jf.fromMillis(e.getTime())},Jf.fromMillis=function(e){var t=Math.floor(e/1e3);return new Jf(t,1e6*(e-1e3*t))},Jf.prototype.toDate=function(){return new Date(this.toMillis())},Jf.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Jf.prototype._compareTo=function(e){return this.seconds===e.seconds?sf(this.nanoseconds,e.nanoseconds):sf(this.seconds,e.seconds)},Jf.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},Jf.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Jf),Ef=function(e,t,n,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r},Sf="(default)",Cf=(Object.defineProperty($f.prototype,"isDefaultDatabase",{get:function(){return this.database===Sf},enumerable:!0,configurable:!0}),$f.prototype.isEqual=function(e){return e instanceof $f&&e.projectId===this.projectId&&e.database===this.database},$f.prototype.compareTo=function(e){return sf(this.projectId,e.projectId)||sf(this.database,e.database)},$f),If=(Yf.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&Il("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&Il("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},Yf.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(Yf.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Yf.prototype.isEqual=function(e){return 0===Yf.comparator(this,e)},Yf.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof Yf?e.forEach(function(e){t.push(e)}):"string"==typeof e?t.push(e):Il("Unknown parameter type for Path.child(): "+e),this.construct(t)},Yf.prototype.limit=function(){return this.offset+this.length},Yf.prototype.popFirst=function(e){return e=void 0===e?1:e,xl(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},Yf.prototype.popLast=function(){return xl(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Yf.prototype.firstSegment=function(){return xl(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Yf.prototype.lastSegment=function(){return xl(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},Yf.prototype.get=function(e){return xl(e<this.length,"Index out of range"),this.segments[this.offset+e]},Yf.prototype.isEmpty=function(){return 0===this.length},Yf.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Yf.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Yf.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},Yf.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Yf.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},Yf),xf=(zt(Xf,mf=If),Xf.prototype.canonicalString=function(){return this.toArray().join("/")},Xf.prototype.toString=function(){return this.canonicalString()},Xf.fromString=function(e){if(0<=e.indexOf("//"))throw new Ol(Rl.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new Xf(e.split("/").filter(function(e){return 0<e.length}))},Xf.EMPTY_PATH=new Xf([]),Xf),Nf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Df=(zt(Gf,yf=If),Gf.isValidIdentifier=function(e){return Nf.test(e)},Gf.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),Gf.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},Gf.prototype.toString=function(){return this.canonicalString()},Gf.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Gf.keyField=function(){return new Gf(["__name__"])},Gf.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var s=e[r];if("\\"===s){if(r+1===e.length)throw new Ol(Rl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var a=e[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Ol(Rl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Ol(Rl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gf(t)},Gf.EMPTY_PATH=new Gf([]),Gf),kf=(zf.prototype.isEqual=function(e){return null!==e&&0===xf.comparator(this.path,e.path)},zf.prototype.toString=function(){return this.path.toString()},zf.comparator=function(e,t){return xf.comparator(e.path,t.path)},zf.isDocumentKey=function(e){return e.length%2==0},zf.fromSegments=function(e){return new zf(new xf(e.slice()))},zf.fromPathString=function(e){return new zf(xf.fromString(e))},zf.EMPTY=new zf(new xf([])),zf),Af=(Qf.compareByKey=function(e,t){return kf.comparator(e.key,t.key)},Qf),Rf=(zt(Kf,df=Af),Kf.prototype.field=function(e){return this.data.field(e)},Kf.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},Kf.prototype.value=function(){return this.data.value()},Kf.prototype.isEqual=function(e){return e instanceof Kf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},Kf.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Kf.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Kf.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):Il("Trying to compare documents on fields that don't exist")},Kf),Of=(zt(Hf,pf=Af),Hf.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hf.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Hf.prototype.isEqual=function(e){return e instanceof Hf&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Hf),Pf=(zt(Wf,ff=Af),Wf.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Wf.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Wf.prototype.isEqual=function(e){return e instanceof Wf&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Wf),Lf=(Vf.prototype.insert=function(e,t){return new Vf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ff.BLACK,null,null))},Vf.prototype.remove=function(e){return new Vf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ff.BLACK,null,null))},Vf.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},Vf.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},Vf.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Vf.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Vf.prototype.minKey=function(){return this.root.minKey()},Vf.prototype.maxKey=function(){return this.root.maxKey()},Vf.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},Vf.prototype.forEach=function(n){this.inorderTraversal(function(e,t){return n(e,t),!1})},Vf.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},Vf.prototype.getIterator=function(){return new Mf(this.root,null,this.comparator,!1)},Vf.prototype.getIteratorFrom=function(e){return new Mf(this.root,e,this.comparator,!1)},Vf.prototype.getReverseIterator=function(){return new Mf(this.root,null,this.comparator,!0)},Vf.prototype.getReverseIteratorFrom=function(e){return new Mf(this.root,e,this.comparator,!0)},Vf),Mf=(Bf.prototype.getNext=function(){xl(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Bf.prototype.hasNext=function(){return 0<this.nodeStack.length},Bf.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Bf),Ff=(Uf.prototype.copy=function(e,t,n,r,i){return new Uf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Uf.prototype.isEmpty=function(){return!1},Uf.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Uf.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Uf.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Uf.prototype.minKey=function(){return this.min().key},Uf.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Uf.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Uf.prototype.removeMin=function(){if(this.left.isEmpty())return Uf.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Uf.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Uf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Uf.prototype.isRed=function(){return this.color},Uf.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Uf.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Uf.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Uf.prototype.rotateLeft=function(){var e=this.copy(null,null,Uf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Uf.prototype.rotateRight=function(){var e=this.copy(null,null,Uf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Uf.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Uf.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Uf.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Il("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Il("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw Il("Black depths differ");return e+(this.isRed()?0:1)},Uf.EMPTY=null,Uf.RED=!0,Uf.BLACK=!1,Uf),qf=(jf.prototype.copy=function(e,t,n,r,i){return this},jf.prototype.insert=function(e,t,n){return new Ff(e,t)},jf.prototype.remove=function(e,t){return this},jf.prototype.isEmpty=function(){return!0},jf.prototype.inorderTraversal=function(e){return!1},jf.prototype.reverseTraversal=function(e){return!1},jf.prototype.minKey=function(){return null},jf.prototype.maxKey=function(){return null},jf.prototype.isRed=function(){return!1},jf.prototype.checkMaxDepth=function(){return!0},jf.prototype.check=function(){return 0},jf);function jf(){this.size=0}function Uf(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Uf.RED,this.left=null!=r?r:Uf.EMPTY,this.right=null!=i?i:Uf.EMPTY,this.size=this.left.size+1+this.right.size}function Bf(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}function Vf(e,t){this.comparator=e,this.root=t||Ff.EMPTY}function Wf(e,t){return ff.call(this,e,t)||this}function Hf(e,t,n){var r=pf.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Kf(e,t,n,r,i){var o=df.call(this,e,t)||this;return o.data=n,o.proto=i,o.hasLocalMutations=!!r.hasLocalMutations,o.hasCommittedMutations=!!r.hasCommittedMutations,o}function Qf(e,t){this.key=e,this.version=t}function zf(e){this.path=e,xl(zf.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}function Gf(){return null!==yf&&yf.apply(this,arguments)||this}function Xf(){return null!==mf&&mf.apply(this,arguments)||this}function Yf(e,t,n){this.init(e,t,n)}function $f(e,t){this.projectId=e,this.database=t||Sf}function Jf(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Ol(Rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Ol(Rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ol(Rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Ol(Rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}function Zf(e,t){if(Bl("GeoPoint",arguments,2),Hl("GeoPoint","number",1,e),Hl("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Ol(Rl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Ol(Rl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}function ep(e){cf(),this._binaryString=e}Ff.EMPTY=new qf,(vf=hf=hf||{})[vf.NullValue=0]="NullValue",vf[vf.BooleanValue=1]="BooleanValue",vf[vf.NumberValue=2]="NumberValue",vf[vf.TimestampValue=3]="TimestampValue",vf[vf.StringValue=4]="StringValue",vf[vf.BlobValue=5]="BlobValue",vf[vf.RefValue=6]="RefValue",vf[vf.GeoPointValue=7]="GeoPointValue",vf[vf.ArrayValue=8]="ArrayValue",vf[vf.ObjectValue=9]="ObjectValue",(gf=lf=lf||{})[gf.Default=0]="Default",gf[gf.Estimate=1]="Estimate",gf[gf.Previous=2]="Previous";var tp,np,rp,ip=(pp.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new pp(lf.Estimate,t);case"previous":return new pp(lf.Previous,t);case"none":case void 0:return new pp(lf.Default,t);default:return Il("fromSnapshotOptions() called with invalid options.")}},pp),op=(fp.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},fp.prototype.defaultCompareTo=function(e){return xl(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),sf(this.typeOrder,e.typeOrder)},fp),sp=(zt(lp,rp=op),lp.prototype.value=function(e){return null},lp.prototype.isEqual=function(e){return e instanceof lp},lp.prototype.compareTo=function(e){return e instanceof lp?0:this.defaultCompareTo(e)},lp.INSTANCE=new lp,lp),ap=(zt(hp,np=op),hp.prototype.value=function(e){return this.internalValue},hp.prototype.isEqual=function(e){return e instanceof hp&&this.internalValue===e.internalValue},hp.prototype.compareTo=function(e){return e instanceof hp?sf(this,e):this.defaultCompareTo(e)},hp.of=function(e){return e?hp.TRUE:hp.FALSE},hp.TRUE=new hp(!0),hp.FALSE=new hp(!1),hp),up=(zt(cp,tp=op),cp.prototype.value=function(e){return this.internalValue},cp.prototype.compareTo=function(e){return e instanceof cp?(t=this.internalValue)<(n=e.internalValue)?-1:n<t?1:t===n?0:isNaN(t)?isNaN(n)?0:-1:1:this.defaultCompareTo(e);var t,n},cp);function cp(e){var t=tp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.NumberValue,t}function hp(e){var t=np.call(this)||this;return t.internalValue=e,t.typeOrder=hf.BooleanValue,t}function lp(){var e=rp.call(this)||this;return e.typeOrder=hf.NullValue,e.internalValue=null,e}function fp(){}function pp(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}function dp(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var yp,mp,gp,vp,bp,wp,_p,Tp,Ep,Sp,Cp=(zt(Gp,Sp=up),Gp.prototype.isEqual=function(e){return e instanceof Gp&&dp(this.internalValue,e.internalValue)},Gp),Ip=(zt(zp,Ep=up),zp.prototype.isEqual=function(e){return e instanceof zp&&dp(this.internalValue,e.internalValue)},zp.NAN=new zp(NaN),zp.POSITIVE_INFINITY=new zp(1/0),zp.NEGATIVE_INFINITY=new zp(-1/0),zp),xp=(zt(Qp,Tp=op),Qp.prototype.value=function(e){return this.internalValue},Qp.prototype.isEqual=function(e){return e instanceof Qp&&this.internalValue===e.internalValue},Qp.prototype.compareTo=function(e){return e instanceof Qp?sf(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Qp),Np=(zt(Kp,_p=op),Kp.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Kp.prototype.isEqual=function(e){return e instanceof Kp&&this.internalValue.isEqual(e.internalValue)},Kp.prototype.compareTo=function(e){return e instanceof Kp?this.internalValue._compareTo(e.internalValue):e instanceof Dp?-1:this.defaultCompareTo(e)},Kp),Dp=(zt(Hp,wp=op),Hp.prototype.value=function(e){return e&&e.serverTimestampBehavior===lf.Estimate?new Np(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===lf.Previous&&this.previousValue?this.previousValue.value(e):null},Hp.prototype.isEqual=function(e){return e instanceof Hp&&this.localWriteTime.isEqual(e.localWriteTime)},Hp.prototype.compareTo=function(e){return e instanceof Hp?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Np?1:this.defaultCompareTo(e)},Hp.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Hp),kp=(zt(Wp,bp=op),Wp.prototype.value=function(e){return this.internalValue},Wp.prototype.isEqual=function(e){return e instanceof Wp&&this.internalValue.isEqual(e.internalValue)},Wp.prototype.compareTo=function(e){return e instanceof Wp?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Wp),Ap=(zt(Vp,vp=op),Vp.prototype.value=function(e){return this.key},Vp.prototype.isEqual=function(e){return e instanceof Vp&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},Vp.prototype.compareTo=function(e){if(e instanceof Vp){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:kf.comparator(this.key,e.key)}return this.defaultCompareTo(e)},Vp),Rp=(zt(Bp,gp=op),Bp.prototype.value=function(e){return this.internalValue},Bp.prototype.isEqual=function(e){return e instanceof Bp&&this.internalValue.isEqual(e.internalValue)},Bp.prototype.compareTo=function(e){return e instanceof Bp?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Bp),Op=(zt(Up,mp=op),Up.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(e,t){r[e]=t.value(n)}),r},Up.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Up.prototype.isEqual=function(e){if(e instanceof Up){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Up.prototype.compareTo=function(e){if(e instanceof Up){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=sf(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return sf(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Up.prototype.set=function(e,t){if(xl(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Up||(n=Up.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Up.prototype.delete=function(e){if(xl(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Up(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Up){var n=t.delete(e.popFirst());return new Up(this.internalValue.insert(e.firstSegment(),n))}return this},Up.prototype.contains=function(e){return void 0!==this.field(e)},Up.prototype.field=function(e){xl(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach(function(e){t=t instanceof Up&&t.internalValue.get(e)||void 0}),t},Up.prototype.toString=function(){return JSON.stringify(this.value())},Up.prototype.child=function(e){return this.internalValue.get(e)||void 0},Up.prototype.setChild=function(e,t){return new Up(this.internalValue.insert(e,t))},Up.EMPTY=new Up(new Lf(sf)),Up),Pp=(zt(jp,yp=op),jp.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},jp.prototype.forEach=function(e){this.internalValue.forEach(e)},jp.prototype.isEqual=function(e){if(e instanceof jp){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},jp.prototype.compareTo=function(e){if(e instanceof jp){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return sf(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},jp.prototype.toString=function(){return JSON.stringify(this.value())},jp),Lp=Number,Mp=Lp.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Fp=Lp.MAX_SAFE_INTEGER||Math.pow(2,53)-1,qp=Lp.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function jp(e){var t=yp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.ArrayValue,t}function Up(e){var t=mp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.ObjectValue,t}function Bp(e){var t=gp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.GeoPointValue,t}function Vp(e,t){var n=vp.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=hf.RefValue,n}function Wp(e){var t=bp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.BlobValue,t}function Hp(e,t){var n=wp.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=hf.TimestampValue,n}function Kp(e){var t=_p.call(this)||this;return t.internalValue=e,t.typeOrder=hf.TimestampValue,t}function Qp(e){var t=Tp.call(this)||this;return t.internalValue=e,t.typeOrder=hf.StringValue,t}function zp(e){var t=Ep.call(this,e)||this;return t.internalValue=e,t}function Gp(e){return Sp.call(this,e)||this}function Xp(e){return null==e}function Yp(e){return qp(e)&&e<=Fp&&Mp<=e}var $p,Jp,Zp,ed,td,nd=(Ed.atPath=function(e){return new Ed(e)},Object.defineProperty(Ed.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[ld]:this.memoizedOrderBy=[new hd(e),ld];else{xl(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var s=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ud.ASCENDING;this.memoizedOrderBy.push(s===ud.ASCENDING?ld:fd)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Ed.prototype.addFilter=function(e){xl(null==this.getInequalityFilterField()||!(e instanceof od)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),xl(!kf.isDocumentKey(this.path),"No filtering allowed for document query");var t=this.filters.concat([e]);return new Ed(this.path,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},Ed.prototype.addOrderBy=function(e){xl(!kf.isDocumentKey(this.path),"No ordering allowed for document query"),xl(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new Ed(this.path,t,this.filters.slice(),this.limit,this.startAt,this.endAt)},Ed.prototype.withLimit=function(e){return new Ed(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},Ed.prototype.withStartAt=function(e){return new Ed(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},Ed.prototype.withEndAt=function(e){return new Ed(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},Ed.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";Xp(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},Ed.prototype.toString=function(){var e="Query("+this.path.canonicalString();return 0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xp(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},Ed.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},Ed.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(e,t);if(0!==s)return s;n=n||o.field.isKeyField()}return xl(n,"orderBy used that doesn't compare on key field"),0},Ed.prototype.matches=function(e){return this.matchesAncestor(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},Ed.prototype.hasLimit=function(){return!Xp(this.limit)},Ed.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Ed.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof od&&n.isInequality())return n.field}return null},Ed.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(e){return e instanceof od&&e.op===id.ARRAY_CONTAINS})},Ed.prototype.isDocumentQuery=function(){return kf.isDocumentKey(this.path)&&0===this.filters.length},Ed.prototype.matchesAncestor=function(e){var t=e.key.path;return kf.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isPrefixOf(t)&&this.path.length===t.length-1},Ed.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},Ed.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},Ed.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},Ed.prototype.assertValidBound=function(e){xl(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Ed),rd=(Td.create=function(e,t,n){if(n.isEqual(sp.INSTANCE)){if(t!==id.EQUAL)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new sd(e)}if(n.isEqual(Ip.NAN)){if(t!==id.EQUAL)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new ad(e)}return new od(e,t,n)},Td),id=(_d.fromString=function(e){switch(e){case"<":return _d.LESS_THAN;case"<=":return _d.LESS_THAN_OR_EQUAL;case"==":return _d.EQUAL;case">=":return _d.GREATER_THAN_OR_EQUAL;case">":return _d.GREATER_THAN;case"array-contains":return _d.ARRAY_CONTAINS;default:return Il("Unknown relation: "+e)}},_d.prototype.toString=function(){return this.name},_d.prototype.isEqual=function(e){return this.name===e.name},_d.LESS_THAN=new _d("<"),_d.LESS_THAN_OR_EQUAL=new _d("<="),_d.EQUAL=new _d("=="),_d.GREATER_THAN=new _d(">"),_d.GREATER_THAN_OR_EQUAL=new _d(">="),_d.ARRAY_CONTAINS=new _d("array-contains"),_d),od=(zt(wd,ed=rd),wd.prototype.matches=function(e){if(this.field.isKeyField()){xl(this.value instanceof Ap,"Comparing on key, but filter value not a RefValue"),xl(this.op!==id.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=this.value,n=kf.comparator(e.key,t.key);return this.matchesComparison(n)}var r=e.field(this.field);return void 0!==r&&this.matchesValue(r)},wd.prototype.matchesValue=function(e){var t=this;return this.op===id.ARRAY_CONTAINS?e instanceof Pp&&void 0!==e.internalValue.find(function(e){return e.isEqual(t.value)}):this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},wd.prototype.matchesComparison=function(e){switch(this.op){case id.LESS_THAN:return e<0;case id.LESS_THAN_OR_EQUAL:return e<=0;case id.EQUAL:return 0===e;case id.GREATER_THAN:return 0<e;case id.GREATER_THAN_OR_EQUAL:return 0<=e;default:return Il("Unknown relation op"+this.op)}},wd.prototype.isInequality=function(){return this.op!==id.EQUAL&&this.op!==id.ARRAY_CONTAINS},wd.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},wd.prototype.isEqual=function(e){return e instanceof wd&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},wd.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},wd),sd=(zt(bd,Zp=rd),bd.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},bd.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},bd.prototype.toString=function(){return this.field.canonicalString()+" IS null"},bd.prototype.isEqual=function(e){return e instanceof bd&&this.field.isEqual(e.field)},bd),ad=(zt(vd,Jp=rd),vd.prototype.matches=function(e){var t=e.field(this.field),n=t&&t.value();return"number"==typeof n&&isNaN(n)},vd.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},vd.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},vd.prototype.isEqual=function(e){return e instanceof vd&&this.field.isEqual(e.field)},vd),ud=(gd.prototype.toString=function(){return this.name},gd.ASCENDING=new gd("asc"),gd.DESCENDING=new gd("desc"),gd),cd=(md.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},md.prototype.sortsBeforeDocument=function(e,t){xl(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())xl(o instanceof Ap,"Bound has a non-key value where the key path is being used."),n=kf.comparator(o.key,t.key);else{var s=t.field(i.field);xl(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===ud.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},md.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];return n.isEqual(r)}return!0},md),hd=(yd.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Rf.compareByKey(e,t):Rf.compareByField(this.field,e,t);switch(this.dir){case ud.ASCENDING:return n;case ud.DESCENDING:return-1*n;default:return Il("Unknown direction: "+this.dir)}},yd.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},yd.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},yd.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},yd),ld=new hd(Df.keyField(),ud.ASCENDING),fd=new hd(Df.keyField(),ud.DESCENDING),pd=(dd.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new dd(new Tf(t,e%1e6*1e3))},dd.fromTimestamp=function(e){return new dd(e)},dd.forDeletedDoc=function(){return dd.MIN},dd.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},dd.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},dd.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},dd.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},dd.prototype.toTimestamp=function(){return this.timestamp},dd.MIN=new dd(new Tf(0,0)),dd);function dd(e){this.timestamp=e}function yd(e,t){this.field=e,void 0===t&&(t=ud.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}function md(e,t){this.position=e,this.before=t}function gd(e){this.name=e}function vd(e){var t=Jp.call(this)||this;return t.field=e,t}function bd(e){var t=Zp.call(this)||this;return t.field=e,t}function wd(e,t,n){var r=ed.call(this)||this;return r.field=e,r.op=t,r.value=n,r}function _d(e){this.name=e}function Td(){}function Ed(e,t,n,r,i,o){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=e,this.explicitOrderBy=t,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}(td=$p=$p||{})[td.Listen=0]="Listen",td[td.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",td[td.LimboResolution=2]="LimboResolution";var Sd,Cd,Id=(Md.prototype.copy=function(e){return new Md(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},Md.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},Md),xd=(Ld.fromMapKeys=function(e){var t=new Ld(e.comparator);return e.forEach(function(e){t=t.add(e)}),t},Ld.prototype.has=function(e){return null!==this.data.get(e)},Ld.prototype.first=function(){return this.data.minKey()},Ld.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Ld.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Ld.prototype.indexOf=function(e){return this.data.indexOf(e)},Ld.prototype.forEach=function(n){this.data.inorderTraversal(function(e,t){return n(e),!1})},Ld.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},Ld.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},Ld.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},Ld.prototype.getIterator=function(){return new Nd(this.data.getIterator())},Ld.prototype.getIteratorFrom=function(e){return new Nd(this.data.getIteratorFrom(e))},Ld.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},Ld.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},Ld.prototype.isEmpty=function(){return this.data.isEmpty()},Ld.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},Ld.prototype.isEqual=function(e){if(!(e instanceof Ld))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Ld.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},Ld.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},Ld.prototype.copy=function(e){var t=new Ld(this.comparator);return t.data=e,t},Ld),Nd=(Pd.prototype.getNext=function(){return this.iter.getNext().key},Pd.prototype.hasNext=function(){return this.iter.hasNext()},Pd),Dd=(Od.fromSet=function(e){return new Od(e)},Od.fromArray=function(e){var t=new xd(Df.comparator);return e.forEach(function(e){return t=t.add(e)}),new Od(t)},Od.prototype.covers=function(t){var n=!1;return this.fields.forEach(function(e){e.isPrefixOf(t)&&(n=!0)}),n},Od.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Od),kd=(Rd.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},Rd),Ad=function(e,t){this.version=e,this.transformResults=t};function Rd(e,t){this.field=e,this.transform=t}function Od(e){this.fields=e}function Pd(e){this.iter=e}function Ld(e){this.comparator=e,this.data=new Lf(this.comparator)}function Md(e,t,n,r,i,o){void 0===i&&(i=pd.MIN),void 0===o&&(o=kl()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}(Cd=Sd=Sd||{})[Cd.Set=0]="Set",Cd[Cd.Patch=1]="Patch",Cd[Cd.Transform=2]="Transform",Cd[Cd.Delete=3]="Delete";var Fd,qd,jd,Ud,Bd=(iy.exists=function(e){return new iy(void 0,e)},iy.updateTime=function(e){return new iy(e)},Object.defineProperty(iy.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),iy.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Rf&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Rf:(xl(this.isNone,"Precondition should be empty"),!0)},iy.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},iy.NONE=new iy,iy),Vd=(ry.prototype.verifyKeyMatches=function(e){null!=e&&xl(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},ry.getPostMutationVersion=function(e){return e instanceof Rf?e.version:pd.MIN},ry),Wd=(zt(ny,Ud=Vd),ny.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),xl(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Rf(this.key,n,this.value,{hasCommittedMutations:!0})},ny.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Vd.getPostMutationVersion(e);return new Rf(this.key,r,this.value,{hasLocalMutations:!0})},ny.prototype.isEqual=function(e){return e instanceof ny&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},ny),Hd=(zt(ty,jd=Vd),ty.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),xl(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Pf(this.key,t.version);var n=this.patchDocument(e);return new Rf(this.key,t.version,n,{hasCommittedMutations:!0})},ty.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Vd.getPostMutationVersion(e),i=this.patchDocument(e);return new Rf(this.key,r,i,{hasLocalMutations:!0})},ty.prototype.isEqual=function(e){return e instanceof ty&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},ty.prototype.patchDocument=function(e){var t;return t=e instanceof Rf?e.data:Op.EMPTY,this.patchObject(t)},ty.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var t=r.data.field(e);n=void 0!==t?n.set(e,t):n.delete(e)}}),n},ty),Kd=(zt(ey,qd=Vd),ey.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),xl(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Pf(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new Rf(this.key,i,o,{hasCommittedMutations:!0})},ey.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,t),o=this.transformObject(r.data,i);return new Rf(this.key,r.version,o,{hasLocalMutations:!0})},ey.prototype.isEqual=function(e){return e instanceof ey&&this.key.isEqual(e.key)&&af(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},ey.prototype.requireDocument=function(e){xl(e instanceof Rf,"Unknown MaybeDocument type "+e);var t=e;return xl(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},ey.prototype.serverTransformResults=function(e,t){var n=[];xl(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;e instanceof Rf&&(s=e.field(i.field)||null),n.push(o.applyToRemoteDocument(s,t[r]))}return n},ey.prototype.localTransformResults=function(e,t){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform,a=null;t instanceof Rf&&(a=t.field(o.field)||null),n.push(s.applyToLocalView(a,e))}return n},ey.prototype.transformObject=function(e,t){xl(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},ey),Qd=(zt(Zd,Fd=Vd),Zd.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),xl(null==t.transformResults,"Transform results received by DeleteMutation."),new Of(this.key,t.version,{hasCommittedMutations:!0})},Zd.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&xl(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Of(this.key,pd.forDeletedDoc())):e},Zd.prototype.isEqual=function(e){return e instanceof Zd&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Zd),zd=(Jd.prototype.applyToLocalView=function(e,t){return new Dp(t,e)},Jd.prototype.applyToRemoteDocument=function(e,t){return t},Jd.prototype.isEqual=function(e){return e instanceof Jd},Jd.instance=new Jd,Jd),Gd=($d.prototype.applyToLocalView=function(e,t){return this.apply(e)},$d.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},$d.prototype.apply=function(e){for(var n=oy(e),t=function(t){n.find(function(e){return e.isEqual(t)})||n.push(t)},r=0,i=this.elements;r<i.length;r++)t(i[r]);return new Pp(n)},$d.prototype.isEqual=function(e){return e instanceof $d&&af(e.elements,this.elements)},$d),Xd=(Yd.prototype.applyToLocalView=function(e,t){return this.apply(e)},Yd.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Yd.prototype.apply=function(e){for(var n=oy(e),t=function(t){n=n.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)t(i[r]);return new Pp(n)},Yd.prototype.isEqual=function(e){return e instanceof Yd&&af(e.elements,this.elements)},Yd);function Yd(e){this.elements=e}function $d(e){this.elements=e}function Jd(){}function Zd(e,t){var n=Fd.call(this)||this;return n.key=e,n.precondition=t,n.type=Sd.Delete,n}function ey(e,t){var n=qd.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=Sd.Transform,n.precondition=Bd.exists(!0),n}function ty(e,t,n,r){var i=jd.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=Sd.Patch,i}function ny(e,t,n){var r=Ud.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=Sd.Set,r}function ry(){}function iy(e,t){this.updateTime=e,this.exists=t,xl(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}function oy(e){return e instanceof Pp?e.internalValue.slice():[]}var sy,ay,uy=(cy.prototype.isEqual=function(e){return e&&e.count===this.count},cy);function cy(e){this.count=e}function hy(e){switch(e){case Rl.OK:return Il("Treated status OK as error");case Rl.CANCELLED:case Rl.UNKNOWN:case Rl.DEADLINE_EXCEEDED:case Rl.RESOURCE_EXHAUSTED:case Rl.INTERNAL:case Rl.UNAVAILABLE:case Rl.UNAUTHENTICATED:return;case Rl.INVALID_ARGUMENT:case Rl.NOT_FOUND:case Rl.ALREADY_EXISTS:case Rl.PERMISSION_DENIED:case Rl.FAILED_PRECONDITION:case Rl.ABORTED:case Rl.OUT_OF_RANGE:case Rl.UNIMPLEMENTED:case Rl.DATA_LOSS:return 1;default:return Il("Unknown status code: "+e)}}function ly(e){if(void 0===e)return Sl("GRPC error has no .code"),Rl.UNKNOWN;switch(e){case sy.OK:return Rl.OK;case sy.CANCELLED:return Rl.CANCELLED;case sy.UNKNOWN:return Rl.UNKNOWN;case sy.DEADLINE_EXCEEDED:return Rl.DEADLINE_EXCEEDED;case sy.RESOURCE_EXHAUSTED:return Rl.RESOURCE_EXHAUSTED;case sy.INTERNAL:return Rl.INTERNAL;case sy.UNAVAILABLE:return Rl.UNAVAILABLE;case sy.UNAUTHENTICATED:return Rl.UNAUTHENTICATED;case sy.INVALID_ARGUMENT:return Rl.INVALID_ARGUMENT;case sy.NOT_FOUND:return Rl.NOT_FOUND;case sy.ALREADY_EXISTS:return Rl.ALREADY_EXISTS;case sy.PERMISSION_DENIED:return Rl.PERMISSION_DENIED;case sy.FAILED_PRECONDITION:return Rl.FAILED_PRECONDITION;case sy.ABORTED:return Rl.ABORTED;case sy.OUT_OF_RANGE:return Rl.OUT_OF_RANGE;case sy.UNIMPLEMENTED:return Rl.UNIMPLEMENTED;case sy.DATA_LOSS:return Rl.DATA_LOSS;default:return Il("Unknown status code: "+e)}}(ay=sy=sy||{})[ay.OK=0]="OK",ay[ay.CANCELLED=1]="CANCELLED",ay[ay.UNKNOWN=2]="UNKNOWN",ay[ay.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ay[ay.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ay[ay.NOT_FOUND=5]="NOT_FOUND",ay[ay.ALREADY_EXISTS=6]="ALREADY_EXISTS",ay[ay.PERMISSION_DENIED=7]="PERMISSION_DENIED",ay[ay.UNAUTHENTICATED=16]="UNAUTHENTICATED",ay[ay.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ay[ay.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ay[ay.ABORTED=10]="ABORTED",ay[ay.OUT_OF_RANGE=11]="OUT_OF_RANGE",ay[ay.UNIMPLEMENTED=12]="UNIMPLEMENTED",ay[ay.INTERNAL=13]="INTERNAL",ay[ay.UNAVAILABLE=14]="UNAVAILABLE",ay[ay.DATA_LOSS=15]="DATA_LOSS";var fy=new Lf(kf.comparator);function py(){return fy}function dy(){return py()}var yy=new Lf(kf.comparator);function my(){return yy}var gy=new Lf(kf.comparator);function vy(){return gy}var by=new xd(kf.comparator);function wy(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=by,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var _y=new xd(sf);function Ty(){return _y}var Ey,Sy,Cy,Iy,xy=(Ny.emptySet=function(e){return new Ny(e.comparator)},Ny.prototype.has=function(e){return null!=this.keyedMap.get(e)},Ny.prototype.get=function(e){return this.keyedMap.get(e)},Ny.prototype.first=function(){return this.sortedSet.minKey()},Ny.prototype.last=function(){return this.sortedSet.maxKey()},Ny.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ny.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Ny.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Ny.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(e,t){return n(e),!1})},Ny.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},Ny.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},Ny.prototype.isEqual=function(e){if(!(e instanceof Ny))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ny.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},Ny.prototype.copy=function(e,t){var n=new Ny;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},Ny);function Ny(n){this.comparator=n?function(e,t){return n(e,t)||kf.comparator(e.key,t.key)}:function(e,t){return kf.comparator(e.key,t.key)},this.keyedMap=my(),this.sortedSet=new Lf(this.comparator)}(Iy=Ey=Ey||{})[Iy.Added=0]="Added",Iy[Iy.Removed=1]="Removed",Iy[Iy.Modified=2]="Modified",Iy[Iy.Metadata=3]="Metadata",(Cy=Sy=Sy||{})[Cy.Local=0]="Local",Cy[Cy.Synced=1]="Synced";var Dy,ky,Ay=(Uy.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Ey.Added&&n.type===Ey.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Ey.Metadata&&n.type!==Ey.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Ey.Modified&&n.type===Ey.Modified?this.changeMap=this.changeMap.insert(t,{type:Ey.Modified,doc:e.doc}):e.type===Ey.Modified&&n.type===Ey.Added?this.changeMap=this.changeMap.insert(t,{type:Ey.Added,doc:e.doc}):e.type===Ey.Removed&&n.type===Ey.Added?this.changeMap=this.changeMap.remove(t):e.type===Ey.Removed&&n.type===Ey.Modified?this.changeMap=this.changeMap.insert(t,{type:Ey.Removed,doc:n.doc}):e.type===Ey.Added&&n.type===Ey.Removed?this.changeMap=this.changeMap.insert(t,{type:Ey.Modified,doc:e.doc}):Il("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},Uy.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(e,t){n.push(t)}),n},Uy),Ry=(jy.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach(function(e){i.push({type:Ey.Added,doc:e})}),new jy(e,t,xy.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(jy.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),jy.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},jy),Oy=(qy.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=Py.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new qy(pd.MIN,r,Ty(),py(),wy())},qy),Py=(Fy.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new Fy(kl(),t,wy(),wy(),wy())},Fy),Ly=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},My=function(e,t){this.targetId=e,this.existenceFilter=t};function Fy(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function qy(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function jy(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}function Uy(){this.changeMap=new Lf(kf.comparator)}(ky=Dy=Dy||{})[ky.NoChange=0]="NoChange",ky[ky.Added=1]="Added",ky[ky.Removed=2]="Removed",ky[ky.Current=3]="Current",ky[ky.Reset=4]="Reset";var By=function(e,t,n,r){void 0===n&&(n=kl()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Vy=(Object.defineProperty(Ky.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Ky.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Ky.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Ky.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Ky.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},Ky.prototype.toTargetChange=function(){var n=wy(),r=wy(),i=wy();return this.documentChanges.forEach(function(e,t){switch(t){case Ey.Added:n=n.add(e);break;case Ey.Modified:r=r.add(e);break;case Ey.Removed:i=i.add(e);break;default:Il("Encountered invalid change type: "+t)}}),new Py(this._resumeToken,this._current,n,r,i)},Ky.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=zy()},Ky.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},Ky.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},Ky.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Ky.prototype.recordTargetResponse=function(){--this.pendingResponses},Ky.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Ky),Wy=(Hy.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Rf?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Of&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},Hy.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(e){var t=r.ensureTargetState(e);switch(n.state){case Dy.NoChange:r.isActiveTarget(e)&&t.updateResumeToken(n.resumeToken);break;case Dy.Added:t.recordTargetResponse(),t.isPending||t.clearPendingChanges(),t.updateResumeToken(n.resumeToken);break;case Dy.Removed:t.recordTargetResponse(),t.isPending||r.removeTarget(e),xl(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case Dy.Current:r.isActiveTarget(e)&&(t.markCurrent(),t.updateResumeToken(n.resumeToken));break;case Dy.Reset:r.isActiveTarget(e)&&(r.resetTarget(e),t.updateResumeToken(n.resumeToken));break;default:Il("Unknown target watch change state: "+n.state)}})},Hy.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):ql(this.targetStates,t)},Hy.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new kf(i.path);this.removeDocumentFromTarget(t,o,new Of(o,pd.forDeletedDoc()))}else xl(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},Hy.prototype.createRemoteEvent=function(i){var o=this,s={};ql(this.targetStates,function(e,t){var n=o.queryDataForActiveTarget(e);if(n){if(t.current&&n.query.isDocumentQuery()){var r=new kf(n.query.path);null!==o.pendingDocumentUpdates.get(r)||o.targetContainsDocument(e,r)||o.removeDocumentFromTarget(e,r,new Of(r,i))}t.hasPendingChanges&&(s[e]=t.toTargetChange(),t.clearPendingChanges())}});var r=wy();this.pendingDocumentTargetMapping.forEach(function(e,t){var n=!0;t.forEachWhile(function(e){var t=o.queryDataForActiveTarget(e);return!t||t.purpose===$p.LimboResolution||(n=!1)}),n&&(r=r.add(e))});var e=new Oy(i,s,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=py(),this.pendingDocumentTargetMapping=Qy(),this.pendingTargetResets=new xd(sf),e},Hy.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Ey.Modified:Ey.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},Hy.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Ey.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},Hy.prototype.removeTarget=function(e){delete this.targetStates[e]},Hy.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},Hy.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},Hy.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Vy),this.targetStates[e]},Hy.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xd(sf),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},Hy.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},Hy.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},Hy.prototype.resetTarget=function(t){var n=this;xl(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Vy,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(e){n.removeDocumentFromTarget(t,e,null)})},Hy.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},Hy);function Hy(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=py(),this.pendingDocumentTargetMapping=Qy(),this.pendingTargetResets=new xd(sf)}function Ky(){this.pendingResponses=0,this.documentChanges=zy(),this._resumeToken=kl(),this._current=!1,this._hasPendingChanges=!0}function Qy(){return new Lf(kf.comparator)}function zy(){return new Lf(kf.comparator)}var Gy,Xy,Yy=((Gy={})[ud.ASCENDING.name]="ASCENDING",Gy[ud.DESCENDING.name]="DESCENDING",Gy),$y=((Xy={})[id.LESS_THAN.name]="LESS_THAN",Xy[id.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Xy[id.GREATER_THAN.name]="GREATER_THAN",Xy[id.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Xy[id.EQUAL.name]="EQUAL",Xy[id.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Xy),Jy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zy(e,t){xl(!Xp(e),t+" is missing")}function em(e){return"number"==typeof e?e:"string"==typeof e?Number(e):Il("can't parse "+e)}var tm=(nm.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},nm.prototype.unsafeCastProtoByteString=function(e){return e},nm.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Rl.UNKNOWN:ly(e.code);return new Ol(t,e.message||"")},nm.prototype.toInt32Value=function(e){return Xp(e)?void 0:{value:e}},nm.prototype.fromInt32Value=function(e){var t;return Xp(t="object"==typeof e?e.value:e)?null:t},nm.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanoseconds}},nm.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);xl(!!e,"Cannot deserialize null or undefined timestamp.");var t=em(e.seconds||"0"),n=e.nanos||0;return new Tf(t,n)},nm.prototype.fromIso8601String=function(e){var t=0,n=Jy.exec(e);if(xl(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Tf(o,t)},nm.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},nm.prototype.fromBlob=function(e){return"string"==typeof e?(xl(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),bf.fromBase64String(e)):(xl(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),bf.fromUint8Array(e))},nm.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},nm.prototype.fromVersion=function(e){return xl(!!e,"Trying to deserialize version that isn't set"),pd.fromTimestamp(this.fromTimestamp(e))},nm.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},nm.prototype.fromResourceName=function(e){var t=xf.fromString(e);return xl(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},nm.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},nm.prototype.fromName=function(e){var t=this.fromResourceName(e);return xl(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),xl(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new kf(this.extractLocalPathFromResourceName(t))},nm.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},nm.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?xf.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(nm.prototype,"encodedDatabaseId",{get:function(){return new xf(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),nm.prototype.fullyQualifiedPrefixPath=function(e){return new xf(["projects",e.projectId,"databases",e.database])},nm.prototype.extractLocalPathFromResourceName=function(e){return xl(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},nm.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},nm.prototype.toValue=function(e){if(e instanceof sp)return{nullValue:"NULL_VALUE"};if(e instanceof ap)return{booleanValue:e.value()};if(e instanceof Cp)return{integerValue:""+e.value()};if(e instanceof Ip){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xp?{stringValue:e.value()}:e instanceof Op?{mapValue:this.toMapValue(e)}:e instanceof Pp?{arrayValue:this.toArrayValue(e)}:e instanceof Np?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Rp?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof kp?{bytesValue:this.toBytes(e.value())}:e instanceof Ap?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:Il("Unknown FieldValue "+JSON.stringify(e))},nm.prototype.fromValue=function(e){var t=this,n=e.value_type;if(rm(e,n,"nullValue"))return sp.INSTANCE;if(rm(e,n,"booleanValue"))return ap.of(e.booleanValue);if(rm(e,n,"integerValue"))return new Cp(em(e.integerValue));if(rm(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ip.NAN;if("Infinity"===e.doubleValue)return Ip.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ip.NEGATIVE_INFINITY}return new Ip(e.doubleValue)}if(rm(e,n,"stringValue"))return new xp(e.stringValue);if(rm(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(rm(e,n,"arrayValue")){Zy(e.arrayValue,"arrayValue");var r=e.arrayValue.values||[];return new Pp(r.map(function(e){return t.fromValue(e)}))}if(rm(e,n,"timestampValue"))return Zy(e.timestampValue,"timestampValue"),new Np(this.fromTimestamp(e.timestampValue));if(rm(e,n,"geoPointValue")){Zy(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new Rp(new _f(i,o))}if(rm(e,n,"bytesValue")){Zy(e.bytesValue,"bytesValue");var s=this.fromBlob(e.bytesValue);return new kp(s)}if(rm(e,n,"referenceValue")){Zy(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),u=new Cf(a.get(1),a.get(3)),c=new kf(this.extractLocalPathFromResourceName(a));return new Ap(u,c)}return Il("Unknown Value proto "+JSON.stringify(e))},nm.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},nm.prototype.toDocument=function(e){return xl(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},nm.prototype.fromDocument=function(e,t){return new Rf(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},nm.prototype.toFields=function(e){var n=this,r={};return e.forEach(function(e,t){r[e]=n.toValue(t)}),r},nm.prototype.fromFields=function(e){var n=this,t=e,r=Op.EMPTY;return jl(t,function(e,t){r=r.set(new Df([e]),n.fromValue(t))}),r},nm.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},nm.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},nm.prototype.fromFound=function(e){xl(!!e.found,"Tried to deserialize a found document from a missing document."),Zy(e.found.name,"doc.found.name"),Zy(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Rf(t,n,r,{},e.found)},nm.prototype.fromMissing=function(e){xl(!!e.missing,"Tried to deserialize a missing document from a found document."),xl(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Of(t,n)},nm.prototype.fromMaybeDocument=function(e){var t=e.result;return rm(e,t,"found")?this.fromFound(e):rm(e,t,"missing")?this.fromMissing(e):Il("invalid batch get response: "+JSON.stringify(e))},nm.prototype.toWatchTargetChangeState=function(e){switch(e){case Dy.Added:return"ADD";case Dy.Current:return"CURRENT";case Dy.NoChange:return"NO_CHANGE";case Dy.Removed:return"REMOVE";case Dy.Reset:return"RESET";default:return Il("Unknown WatchTargetChangeState: "+e)}},nm.prototype.toTestWatchChange=function(e){if(e instanceof My)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Ly){if(e.newDoc instanceof Rf){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Of)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof By){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return sy.OK;switch(e){case Rl.OK:return sy.OK;case Rl.CANCELLED:return sy.CANCELLED;case Rl.UNKNOWN:return sy.UNKNOWN;case Rl.DEADLINE_EXCEEDED:return sy.DEADLINE_EXCEEDED;case Rl.RESOURCE_EXHAUSTED:return sy.RESOURCE_EXHAUSTED;case Rl.INTERNAL:return sy.INTERNAL;case Rl.UNAVAILABLE:return sy.UNAVAILABLE;case Rl.UNAUTHENTICATED:return sy.UNAUTHENTICATED;case Rl.INVALID_ARGUMENT:return sy.INVALID_ARGUMENT;case Rl.NOT_FOUND:return sy.NOT_FOUND;case Rl.ALREADY_EXISTS:return sy.ALREADY_EXISTS;case Rl.PERMISSION_DENIED:return sy.PERMISSION_DENIED;case Rl.FAILED_PRECONDITION:return sy.FAILED_PRECONDITION;case Rl.ABORTED:return sy.ABORTED;case Rl.OUT_OF_RANGE:return sy.OUT_OF_RANGE;case Rl.UNIMPLEMENTED:return sy.UNIMPLEMENTED;case Rl.DATA_LOSS:return sy.DATA_LOSS;default:return Il("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return Il("Unrecognized watch change: "+JSON.stringify(e))},nm.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(rm(e,n,"targetChange")){Zy(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),s=e.targetChange.cause,a=s&&this.fromRpcStatus(s);t=new By(r,i,o,a||null)}else if(rm(e,n,"documentChange")){Zy(e.documentChange,"documentChange"),Zy(e.documentChange.document,"documentChange.name"),Zy(e.documentChange.document.name,"documentChange.document.name"),Zy(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),h=this.fromVersion(u.document.updateTime),l=this.fromFields(u.document.fields||{}),f=new Rf(c,h,l,{},u.document),p=u.targetIds||[],d=u.removedTargetIds||[];t=new Ly(p,d,f.key,f)}else if(rm(e,n,"documentDelete")){Zy(e.documentDelete,"documentDelete"),Zy(e.documentDelete.document,"documentDelete.document");var y=e.documentDelete;c=this.fromName(y.document),h=y.readTime?this.fromVersion(y.readTime):pd.forDeletedDoc(),f=new Of(c,h),d=y.removedTargetIds||[],t=new Ly([],d,f.key,f)}else if(rm(e,n,"documentRemove")){Zy(e.documentRemove,"documentRemove"),Zy(e.documentRemove.document,"documentRemove");var m=e.documentRemove;c=this.fromName(m.document),d=m.removedTargetIds||[],t=new Ly([],d,c,null)}else{if(!rm(e,n,"filter"))return Il("Unknown change type "+JSON.stringify(e));Zy(e.filter,"filter"),Zy(e.filter.targetId,"filter.targetId");var g=e.filter,v=g.count||0,b=new uy(v),w=g.targetId;t=new My(w,b)}return t},nm.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Dy.NoChange:"ADD"===e?Dy.Added:"REMOVE"===e?Dy.Removed:"CURRENT"===e?Dy.Current:"RESET"===e?Dy.Reset:Il("Got unexpected TargetChange.state: "+e)},nm.prototype.versionFromListenResponse=function(e){if(!rm(e,e.response_type,"targetChange"))return pd.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?pd.MIN:t.readTime?this.fromVersion(t.readTime):pd.MIN},nm.prototype.toMutation=function(e){var t,n=this;if(e instanceof Wd)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Qd)t={delete:this.toName(e.key)};else if(e instanceof Hd)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Kd))return Il("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},nm.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Bd.NONE;if(e.update){Zy(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Hd(r,i,o,n)}return new Wd(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Qd(r,n);if(e.transform){r=this.fromName(e.transform.document);var s=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return xl(!0===n.exists,'Transforms only support precondition "exists == true"'),new Kd(r,s)}return Il("unknown mutation proto: "+JSON.stringify(e))},nm.prototype.toPrecondition=function(e){return xl(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Il("Unknown precondition")},nm.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Bd.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Bd.exists(e.exists):Bd.NONE},nm.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new Ad(r,i)},nm.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(xl(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},nm.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof zd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Xd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};throw Il("Unknown transform: "+e.transform)},nm.prototype.fromFieldTransform=function(e){var t=this,n=e.transform_type,r=null;if(rm(e,n,"setToServerValue"))xl("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),r=zd.instance;else if(rm(e,n,"appendMissingElements")){var i=e.appendMissingElements.values||[];r=new Gd(i.map(function(e){return t.fromValue(e)}))}else rm(e,n,"removeAllFromArray")?(i=e.removeAllFromArray.values||[],r=new Xd(i.map(function(e){return t.fromValue(e)}))):Il("Unknown transform proto: "+JSON.stringify(e));var o=Df.fromServerFormat(e.fieldPath);return new kd(o,r)},nm.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},nm.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;xl(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return nd.atPath(this.fromQueryPath(n))},nm.prototype.toQueryTarget=function(e){var t={structuredQuery:{}};if(e.path.isEmpty())t.parent=this.toQueryPath(xf.EMPTY_PATH);else{var n=e.path;xl(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},nm.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0;if(0<r){xl(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];t=t.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new nd(t,s,o,a,u,c)},nm.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},nm.prototype.toLabel=function(e){switch(e){case $p.Listen:return null;case $p.ExistenceFilterMismatch:return"existence-filter-mismatch";case $p.LimboResolution:return"limbo-document";default:return Il("Unrecognized query purpose: "+e)}},nm.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},nm.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof od?t.toRelationFilter(e):t.toUnaryFilter(e)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},nm.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):Il("Unknown filter: "+JSON.stringify(e)):[]},nm.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},nm.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},nm.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},nm.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new cd(r,n)},nm.prototype.toDirection=function(e){return Yy[e.name]},nm.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ud.ASCENDING;case"DESCENDING":return ud.DESCENDING;default:return}},nm.prototype.toOperatorName=function(e){return $y[e.name]},nm.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return id.EQUAL;case"GREATER_THAN":return id.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return id.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return id.LESS_THAN;case"LESS_THAN_OR_EQUAL":return id.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return id.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return Il("Unspecified relation");default:return Il("Unknown relation")}},nm.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},nm.prototype.fromFieldPathReference=function(e){return Df.fromServerFormat(e.fieldPath)},nm.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},nm.prototype.fromPropertyOrder=function(e){return new hd(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},nm.prototype.toRelationFilter=function(e){return e instanceof od?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:Il("Unrecognized filter: "+JSON.stringify(e))},nm.prototype.fromRelationFilter=function(e){return new od(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},nm.prototype.toUnaryFilter=function(e){return e instanceof ad?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof sd?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:Il("Unrecognized filter: "+JSON.stringify(e))},nm.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new ad(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new sd(n);case"OPERATOR_UNSPECIFIED":return Il("Unspecified filter");default:return Il("Unknown filter")}},nm.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},nm.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return Df.fromServerFormat(e)});return Dd.fromArray(t)},nm);function nm(e,t){this.databaseId=e,this.options=t}function rm(e,t,n){return t===n||!t&&n in e}var im=(fm.prototype.onOpen=function(e){xl(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},fm.prototype.onClose=function(e){xl(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},fm.prototype.onMessage=function(e){xl(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},fm.prototype.close=function(){this.closeFn()},fm.prototype.send=function(e){this.sendFn(e)},fm.prototype.callOnOpen=function(){xl(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},fm.prototype.callOnClose=function(e){xl(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},fm.prototype.callOnMessage=function(e){xl(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},fm),om="Connection",sm={BatchGetDocuments:"batchGet",Commit:"commit"},am="gl-js/ fire/"+bl,um=(lm.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=am},lm.prototype.invokeRPC=function(o,s,a){var u=this,c=this.makeUrl(o);return new Promise(function(r,i){u.pool.getObject(function(n){n.listenOnce(ml.COMPLETE,function(){try{switch(n.getLastErrorCode()){case yl.NO_ERROR:var e=n.getResponseJson();El(om,"XHR received:",JSON.stringify(e)),r(e);break;case yl.TIMEOUT:El(om,'RPC "'+o+'" timed out'),i(new Ol(Rl.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:var t=n.getStatus();El(om,'RPC "'+o+'" failed with status:',t,"response text:",n.getResponseText()),0<t?i(new Ol(function(e){switch(e){case 200:return Rl.OK;case 400:return Rl.INVALID_ARGUMENT;case 401:return Rl.UNAUTHENTICATED;case 403:return Rl.PERMISSION_DENIED;case 404:return Rl.NOT_FOUND;case 409:return Rl.ABORTED;case 416:return Rl.OUT_OF_RANGE;case 429:return Rl.RESOURCE_EXHAUSTED;case 499:return Rl.CANCELLED;case 500:return Rl.UNKNOWN;case 501:return Rl.UNIMPLEMENTED;case 503:return Rl.UNAVAILABLE;case 504:return Rl.DEADLINE_EXCEEDED;default:return 200<=e&&e<300?Rl.OK:400<=e&&e<500?Rl.FAILED_PRECONDITION:500<=e&&e<600?Rl.INTERNAL:Rl.UNKNOWN}}(t),"Server responded with status "+n.getStatusText())):(El(om,'RPC "'+o+'" failed'),i(new Ol(Rl.UNAVAILABLE,"Connection failed.")));break;default:Il('RPC "'+o+'" failed with unanticipated webchannel error '+n.getLastErrorCode()+": "+n.getLastError()+", giving up.")}}finally{El(om,'RPC "'+o+'" completed.'),u.pool.releaseObject(n)}});var e=JSON.stringify(s);El(om,"XHR sending: ",c+" "+e);var t={"Content-Type":"text/plain"};u.modifyHeadersForRequest(t,a),n.send(c,"POST",e,t,15)})})},lm.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},lm.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=dl(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,t),an()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(e,t){a.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})}El(om,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new im({sendFn:function(e){c?El(om,"Not sending because WebChannel is closed:",e):(u||(El(om,"Opening WebChannel transport."),a.open(),u=!0),El(om,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}});return s(gl.EventType.OPEN,function(){c||El(om,"WebChannel transport opened.")}),s(gl.EventType.CLOSE,function(){c||(c=!0,El(om,"WebChannel transport closed"),h.callOnClose())}),s(gl.EventType.ERROR,function(e){c||(c=!0,El(om,"WebChannel transport errored:",e),h.callOnClose(new Ol(Rl.UNAVAILABLE,"The operation could not be completed")))}),s(gl.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];xl(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){El(om,"WebChannel received error:",n);var r=n.status,i=function(){var e=sy[r];if(void 0!==e)return ly(e)}(),o=n.message;void 0===i&&(i=Rl.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new Ol(i,o)),a.close()}else El(om,"WebChannel received:",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},lm.prototype.makeUrl=function(e){var t=sm[e];xl(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},lm),cm=(Object.defineProperty(hm.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(hm.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),hm.prototype.loadConnection=function(e){return Promise.resolve(new um(e))},hm.prototype.newSerializer=function(e){return new tm(e,{useProto3Json:!0})},hm.prototype.formatJSON=function(e){return JSON.stringify(e)},hm.prototype.atob=function(e){return atob(e)},hm.prototype.btoa=function(e){return btoa(e)},hm);function hm(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}function lm(e){this.databaseId=e.databaseId,this.pool=new vl;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host}function fm(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}Nl.setPlatform(new cm);var pm,dm,ym=(gm.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},gm.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},gm.INVALID=-1,gm),mm=function(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})};function gm(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}(dm=pm=pm||{}).All="all",dm.ListenStreamIdle="listen_stream_idle",dm.ListenStreamConnectionBackoff="listen_stream_connection_backoff",dm.WriteStreamIdle="write_stream_idle",dm.WriteStreamConnectionBackoff="write_stream_connection_backoff",dm.OnlineStateTimeout="online_state_timeout",dm.ClientMetadataRefresh="client_metadata_refresh",dm.LruGarbageCollection="lru_garbage_collection";var vm=(Cm.createAndSchedule=function(e,t,n,r,i){var o=new Cm(e,t,Date.now()+n,r,i);return o.start(n),o},Cm.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},Cm.prototype.skipDelay=function(){return this.handleDelayElapsed()},Cm.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ol(Rl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},Cm.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},Cm.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Cm),bm=(Sm.prototype.enqueueAndForget=function(e){this.enqueue(e)},Sm.prototype.enqueue=function(e){var n=this;this.verifyNotFailed();var t=this.tail.then(function(){return n.operationInProgress=!0,e().catch(function(e){n.failure=e,n.operationInProgress=!1;var t=e.stack||e.message||"";throw Sl("INTERNAL UNHANDLED ERROR: ",t),t.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return n.operationInProgress=!1,e})});return this.tail=t},Sm.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),xl(0<=t,"Attempted to schedule an operation with a negative delay of "+t),xl(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=vm.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},Sm.prototype.verifyNotFailed=function(){this.failure&&Il("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Sm.prototype.verifyOperationInProgress=function(){xl(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Sm.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},Sm.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Sm.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){xl(r===pm.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var e=0,t=i.delayedOperations;e<t.length;e++){var n=t[e];if(n.skipDelay(),r!==pm.All&&n.timerId===r)break}return i.drain()})},Sm.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);xl(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Sm),wm="",_m="",Tm="",Em="";function Sm(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}function Cm(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new mm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}function Im(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=Nm(t)),t=xm(e.get(n),t);return Nm(t)}function xm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=wm+Tm;break;case wm:n+=wm+Em;break;default:n+=o}}return n}function Nm(e){return e+wm+_m}function Dm(e){var t=e.length;if(xl(2<=t,"Invalid path "+e),2===t)return xl(e.charAt(0)===wm&&e.charAt(1)===_m,"Non-empty path "+e+" had length 2"),xf.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf(wm,o);switch((s<0||n<s)&&Il('Invalid encoded resource path: "'+e+'"'),e.charAt(s+1)){case _m:var a=e.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case Tm:i+=e.substring(o,s),i+="\0";break;case Em:i+=e.substring(o,s+1);break;default:Il('Invalid encoded resource path: "'+e+'"')}o=s+2}return new xf(r)}var km,Am,Rm=(Lm.prototype.applyToRemoteDocument=function(e,t,n){t&&xl(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;xl(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var s=r[i];t=o.applyToRemoteDocument(t,s)}}return t},Lm.prototype.applyToLocalView=function(e,t){t&&xl(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=t,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e)&&(t=i.applyToLocalView(t,n,this.localWriteTime))}return t},Lm.prototype.keys=function(){for(var e=wy(),t=0,n=this.mutations;t<n.length;t++){var r=n[t];e=e.add(r.key)}return e},Lm.prototype.isEqual=function(e){return this.batchId===e.batchId&&af(this.mutations,e.mutations)},Lm),Om=(Pm.from=function(e,t,n,r){xl(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=vy(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new Pm(e,t,n,r,i)},Pm);function Pm(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}function Lm(e,t,n){this.batchId=e,this.localWriteTime=t,xl(0<(this.mutations=n).length,"Cannot create an empty mutation batch")}(Am=km=km||{})[Am.QueryCache=0]="QueryCache",Am[Am.SyncEngine=1]="SyncEngine";var Mm=(zm.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},zm.prototype.after=function(e){return this.seek(e+2),this.next()},zm.prototype.seek=function(e){xl((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},zm.forQueryCache=function(){return new zm(km.QueryCache,2)},zm.forSyncEngine=function(){return new zm(km.SyncEngine)},zm),Fm=(Qm.prototype.catch=function(e){return this.next(void 0,e)},Qm.prototype.next=function(r,i){var o=this;return this.callbackAttached&&Il("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new Qm(function(t,n){o.nextCallback=function(e){o.wrapSuccess(r,e).next(t,n)},o.catchCallback=function(e){o.wrapFailure(i,e).next(t,n)}})},Qm.prototype.toPromise=function(){var n=this;return new Promise(function(e,t){n.next(e,t)})},Qm.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof Qm?t:Qm.resolve(t)}catch(e){return Qm.reject(e)}},Qm.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):Qm.resolve(t)},Qm.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):Qm.reject(t)},Qm.resolve=function(n){return new Qm(function(e,t){e(n)})},Qm.reject=function(n){return new Qm(function(e,t){t(n)})},Qm.waitFor=function(e){return new Qm(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(e){return n(e)})}),o=!0,i===r&&t()})},Qm.or=function(e){for(var n=Qm.resolve(!1),t=function(t){n=n.next(function(e){return e?Qm.resolve(e):t()})},r=0,i=e;r<i.length;r++)t(i[r]);return n},Qm.forEach=function(e,n){var r=this,i=[];return e.forEach(function(e,t){i.push(n.call(r,e,t))}),this.waitFor(i)},Qm),qm=(Km.openOrCreate=function(o,e,s){return xl(Km.isAvailable(),"IndexedDB not supported in current environment."),El("SimpleDb","Opening database:",o),new Fm(function(n,r){var i=window.indexedDB.open(o,e);i.onsuccess=function(e){var t=e.target.result;n(new Km(t))},i.onblocked=function(){r(new Ol(Rl.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var t=e.target.error;"VersionError"===t.name?r(new Ol(Rl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(t)},i.onupgradeneeded=function(e){El("SimpleDb",'Database "'+o+'" requires upgrade from version:',e.oldVersion);var t=e.target.result,n=new Um(i.transaction);s.createOrUpgrade(t,n,e.oldVersion,mg).next(function(){El("SimpleDb","Database upgrade to version "+mg+" complete")})}}).toPromise()},Km.delete=function(e){return El("SimpleDb","Removing database:",e),Gm(window.indexedDB.deleteDatabase(e)).toPromise()},Km.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/"))},Km.getStore=function(e,t){return e.store(t)},Km.prototype.runTransaction=function(e,t,n){var r=Um.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),Fm.reject(e)}).toPromise();return r.completionPromise.then(function(){return i})},Km.prototype.close=function(){this.db.close()},Km),jm=(Object.defineProperty(Hm.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Hm.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Hm.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Hm.prototype.done=function(){this.shouldStop=!0},Hm.prototype.skip=function(e){this.nextKey=e},Hm.prototype.delete=function(){return Gm(this.dbCursor.delete())},Hm),Um=(Wm.open=function(e,t,n){return new Wm(e.transaction(n,t))},Object.defineProperty(Wm.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Wm.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(El("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Wm.prototype.store=function(e){var t=this.transaction.objectStore(e);return xl(!!t,"Object store not part of transaction: "+e),new Bm(t)},Wm),Bm=(Vm.prototype.put=function(e,t){return Gm(void 0!==t?(El("SimpleDb","PUT",this.store.name,e,t),this.store.put(t,e)):(El("SimpleDb","PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Vm.prototype.add=function(e){return El("SimpleDb","ADD",this.store.name,e,e),Gm(this.store.add(e))},Vm.prototype.get=function(t){var n=this;return Gm(this.store.get(t)).next(function(e){return void 0===e&&(e=null),El("SimpleDb","GET",n.store.name,t,e),e})},Vm.prototype.delete=function(e){return El("SimpleDb","DELETE",this.store.name,e),Gm(this.store.delete(e))},Vm.prototype.count=function(){return El("SimpleDb","COUNT",this.store.name),Gm(this.store.count())},Vm.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},Vm.prototype.deleteAll=function(e,t){El("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},Vm.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Vm.prototype.iterateSerial=function(r){var e=this.cursor({});return new Fm(function(n,t){e.onerror=function(e){t(e.target.error)},e.onsuccess=function(e){var t=e.target.result;t?r(t.primaryKey,t.value).next(function(e){e?t.continue():n()}):n()}})},Vm.prototype.iterateCursor=function(e,s){var a=[];return new Fm(function(o,t){e.onerror=function(e){t(e.target.error)},e.onsuccess=function(e){var t=e.target.result;if(t){var n=new jm(t),r=s(t.primaryKey,t.value,n);if(r instanceof Fm){var i=r.catch(function(e){return n.done(),Fm.reject(e)});a.push(i)}n.isDone?o():null===n.skipToKey?t.continue():t.continue(n.skipToKey)}else o()}}).next(function(){return Fm.waitFor(a)})},Vm.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(xl(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Vm.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Vm);function Vm(e){this.store=e}function Wm(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new mm,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){t.completionDeferred.reject(e.target.error)}}function Hm(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}function Km(e){this.db=e}function Qm(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}function zm(e,t){xl((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}function Gm(e){return new Fm(function(n,t){e.onsuccess=function(e){var t=e.target.result;n(t)},e.onerror=function(e){t(e.target.error)}})}var Xm=(Ym.prototype.allocateTargetId=function(t){var n=this;return this.retrieveMetadata(t).next(function(e){return e.highestTargetId=n.targetIdGenerator.after(e.highestTargetId),n.saveMetadata(t,e).next(function(){return e.highestTargetId})})},Ym.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return pd.fromTimestamp(new Tf(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},Ym.prototype.getHighestSequenceNumber=function(e){return Zm(e.simpleDbTransaction)},Ym.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.retrieveMetadata(t).next(function(e){return e.highestListenSequenceNumber=n,r&&(e.lastRemoteSnapshotVersion=r.toTimestamp()),n>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=n),i.saveMetadata(t,e)})},Ym.prototype.addQueryData=function(t,n){var r=this;return this.saveQueryData(t,n).next(function(){return r.retrieveMetadata(t).next(function(e){return e.targetCount+=1,r.updateMetadataFromQueryData(n,e),r.saveMetadata(t,e)})})},Ym.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},Ym.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return $m(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return xl(0<e.targetCount,"Removing from an empty query cache"),--e.targetCount,n.saveMetadata(t,e)})},Ym.prototype.removeTargets=function(r,i,o){var s=this,a=0,u=[];return $m(r).iterate(function(e,t){var n=s.serializer.fromDbTarget(t);n.sequenceNumber<=i&&void 0===o[n.targetId]&&(a++,u.push(s.removeQueryData(r,n)))}).next(function(){return Fm.waitFor(u)}).next(function(){return a})},Ym.prototype.forEachTarget=function(e,r){var i=this;return $m(e).iterate(function(e,t){var n=i.serializer.fromDbTarget(t);r(n)})},Ym.prototype.retrieveMetadata=function(e){return Jm(e.simpleDbTransaction)},Ym.prototype.saveMetadata=function(e,t){return pv.getStore(e,Mg.store).put(Mg.key,t)},Ym.prototype.saveQueryData=function(e,t){return $m(e).put(this.serializer.toDbTarget(t))},Ym.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Ym.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},Ym.prototype.getQueryData=function(e,i){var o=this,t=i.canonicalId(),n=IDBKeyRange.bound([t,Number.NEGATIVE_INFINITY],[t,Number.POSITIVE_INFINITY]),s=null;return $m(e).iterate({range:n,index:Pg.queryTargetsIndexName},function(e,t,n){var r=o.serializer.fromDbTarget(t);i.isEqual(r.query)&&(s=r,n.done())}).next(function(){return s})},Ym.prototype.addMatchingKeys=function(n,e,r){var i=this,o=[],s=eg(n);return e.forEach(function(e){var t=Im(e.path);o.push(s.put(new Lg(r,t))),o.push(i.referenceDelegate.addReference(n,e))}),Fm.waitFor(o)},Ym.prototype.removeMatchingKeys=function(n,e,r){var i=this,o=eg(n);return Fm.forEach(e,function(e){var t=Im(e.path);return Fm.waitFor([o.delete([r,t]),i.referenceDelegate.removeReference(n,e)])})},Ym.prototype.removeMatchingKeysForTargetId=function(e,t){var n=eg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Ym.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=eg(e),o=wy();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=Dm(e[1]),i=new kf(r);o=o.add(i)}).next(function(){return o})},Ym.prototype.containsKey=function(e,t){var n=Im(t.path),r=IDBKeyRange.bound([n],[n+"\0"],!1,!0),i=0;return eg(e).iterate({index:Lg.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},Ym.prototype.getQueryDataForTarget=function(e,t){var n=this;return $m(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},Ym);function Ym(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Mm.forQueryCache()}function $m(e){return pv.getStore(e,Pg.store)}function Jm(e){return qm.getStore(e,Mg.store).get(Mg.key).next(function(e){return xl(null!==e,"Missing metadata row."),e})}function Zm(e){return Jm(e).next(function(e){return e.highestListenSequenceNumber})}function eg(e){return pv.getStore(e,Lg.store)}var tg=(ag.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(e))return a}},ag.prototype.has=function(e){return void 0!==this.get(e)},ag.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},ag.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},ag.prototype.forEach=function(a){jl(this.inner,function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},ag.prototype.isEmpty=function(){return Ul(this.inner)},ag),ng=(sg.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},sg.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges().get(t);return r?Fm.resolve(r):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},sg.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},sg.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},sg.prototype.assertChanges=function(){return xl(null!==this.changes,"Changes have already been applied."),this.changes},sg),rg="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",ig=(Object.defineProperty(og.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),og.prototype.start=function(e){var t=qm.getStore(e,Bg.store);return this.synchronizeLastDocumentChangeId(t)},og.prototype.addEntries=function(e,t,n){var r=[];if(0<t.length){for(var i=fg(e),o=wy(),s=0,a=t;s<a.length;s++){var u=a[s],c=u.key,h=u.doc;r.push(i.put(dg(c),h)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(pg(e).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(e,n))}return Fm.waitFor(r)},og.prototype.removeEntry=function(e,t){var n=fg(e),r=dg(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return yg(e)}):Fm.resolve(0)})},og.prototype.getEntry=function(e,t){var n=this;return fg(e).get(dg(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},og.prototype.getSizedEntry=function(e,t){var n=this;return fg(e).get(dg(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:yg(e)}:null})},og.prototype.getEntries=function(e,t){var n=this,r=dy();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},og.prototype.getSizedEntries=function(e,t){var n=this,r=dy(),i=new Lf(kf.comparator);return this.forEachDbEntry(e,t,function(e,t){i=t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i.insert(e,yg(t))):(r=r.insert(e,null),i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},og.prototype.forEachDbEntry=function(e,t,i){if(t.isEmpty())return Fm.resolve();var n=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),s=o.getNext();return fg(e).iterate({range:n},function(e,t,n){for(var r=kf.fromSegments(e);s&&kf.comparator(s,r)<0;)i(s,null),s=o.getNext();s&&s.isEqual(r)&&(i(s,t),s=o.hasNext()?o.getNext():null),s?n.skip(s.path.toArray()):n.done()}).next(function(){for(;s;)i(s,null),s=o.hasNext()?o.getNext():null})},og.prototype.getDocumentsMatchingQuery=function(e,i){var o=this,s=my(),t=i.path.toArray(),n=IDBKeyRange.lowerBound(t);return fg(e).iterate({range:n},function(e,t,n){var r=o.serializer.fromDbRemoteDocument(t);i.path.isPrefixOf(r.key.path)?r instanceof Rf&&i.matches(r)&&(s=s.insert(r.key,r)):n.done()}).next(function(){return s})},og.prototype.getNewDocumentChanges=function(t){var r=this;xl(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=wy(),i=py(),e=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=pg(t);return s.iterate({range:e},function(e,t){if(o&&(o=!1,r._lastProcessedDocumentChangeId+1!==t.id))return r.synchronizeLastDocumentChangeId(s).next(function(){return Fm.reject(new Ol(Rl.DATA_LOSS,rg))});n=n.unionWith(r.serializer.fromDbResourcePaths(t.changes)),r._lastProcessedDocumentChangeId=t.id}).next(function(){var e=[];return n.forEach(function(n){e.push(r.getEntry(t,n).next(function(e){var t=e||new Of(n,pd.forDeletedDoc());i=i.insert(n,t)}))}),Fm.waitFor(e)}).next(function(){return i})},og.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return pg(e).delete(n)},og.prototype.synchronizeLastDocumentChangeId=function(e){var r=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,t,n){r._lastProcessedDocumentChangeId=e,n.done()})},og.prototype.newChangeBuffer=function(){return new hg(this)},og.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},og.prototype.getMetadata=function(e){return ug(e).get(Ag.key).next(function(e){return xl(!!e,"Missing document cache metadata"),e})},og.prototype.setMetadata=function(e,t){return ug(e).put(Ag.key,t)},og.prototype.updateSize=function(t,n){var r=this;return this.getMetadata(t).next(function(e){return e.byteSize+=n,r.setMetadata(t,e)})},og);function og(e,t){this.serializer=e,this.keepDocumentChangeLog=t,this._lastProcessedDocumentChangeId=0}function sg(){this.changes=py(),this.documentSizes=new tg(function(e){return e.toString()})}function ag(e){this.mapKeyFn=e,this.inner={}}function ug(e){return pv.getStore(e,Ag.store)}var cg,hg=(zt(lg,cg=ng),lg.prototype.applyChanges=function(e){var o=this,s=0,a=[];return this.assertChanges().forEach(function(e,t){var n=o.documentCache.serializer.toDbRemoteDocument(t),r=o.documentSizes.get(e);xl(void 0!==r,"Attempting to change document "+e.toString()+" without having read it first");var i=yg(n);s+=i-r,a.push({key:e,doc:n})}),this.documentCache.addEntries(e,a,s)},lg.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},lg.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},lg);function lg(e){var t=cg.call(this)||this;return t.documentCache=e,t}function fg(e){return pv.getStore(e,kg.store)}function pg(e){return pv.getStore(e,Bg.store)}function dg(e){return e.path.toArray()}function yg(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Il("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var mg=7,gg=(vg.prototype.createOrUpgrade=function(e,n,t,r){var i,o=this;xl(t<r&&0<=t&&r<=mg,"Unexpected schema upgrade from v"+t+" to v{toVersion}."),t<1&&1<=r&&(e.createObjectStore(wg.store),(i=e).createObjectStore(Tg.store,{keyPath:Tg.keyPath}),i.createObjectStore(Eg.store,{keyPath:Eg.keyPath,autoIncrement:!0}).createIndex(Eg.userMutationsIndex,Eg.userMutationsKeyPath,{unique:!0}),i.createObjectStore(Ig.store),Ug(e),e.createObjectStore(kg.store));var s,a=Fm.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(Lg.store),s.deleteObjectStore(Pg.store),s.deleteObjectStore(Mg.store),Ug(e)),a=a.next(function(){return e=n.store(Mg.store),t=new Mg(0,0,pd.MIN.toTimestamp(),0),e.put(Mg.key,t);var e,t})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return r=e,(i=n).store(Eg.store).loadAll().next(function(e){r.deleteObjectStore(Eg.store),r.createObjectStore(Eg.store,{keyPath:Eg.keyPath,autoIncrement:!0}).createIndex(Eg.userMutationsIndex,Eg.userMutationsKeyPath,{unique:!0});var t=i.store(Eg.store),n=e.map(function(e){return t.put(e)});return Fm.waitFor(n)});var r,i})),a=a.next(function(){e.createObjectStore(Wg.store,{keyPath:Wg.keyPath}),e.createObjectStore(Bg.store,{keyPath:"id",autoIncrement:!0})})),t<5&&5<=r&&(a=a.next(function(){return o.removeAcknowledgedMutations(n)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(Ag.store),o.addDocumentGlobal(n)})),t<7&&7<=r&&(a=a.next(function(){return o.ensureSequenceNumbers(n)})),a},vg.prototype.addDocumentGlobal=function(t){var n=0;return t.store(kg.store).iterate(function(e,t){n+=yg(t)}).next(function(){var e=new Ag(n);return t.store(Ag.store).put(Ag.key,e)})},vg.prototype.removeAcknowledgedMutations=function(r){var i=this,e=r.store(Tg.store),t=r.store(Eg.store);return e.loadAll().next(function(e){return Fm.forEach(e,function(n){var e=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return t.loadAll(Eg.userMutationsIndex,e).next(function(e){return Fm.forEach(e,function(e){xl(e.userId===n.userId,"Cannot process batch "+e.batchId+" from unexpected user");var t=i.serializer.fromDbMutationBatch(e);return Xg(r,n.userId,t).next(function(){})})})})})},vg.prototype.ensureSequenceNumbers=function(e){var s=e.store(Lg.store),t=e.store(kg.store);return Zm(e).next(function(i){var o=[];return t.iterate(function(e,t){var n=new xf(e),r=[0,Im(n)];o.push(s.get(r).next(function(e){return e?Fm.resolve():(t=n,s.put(new Lg(0,Im(t),i)));var t}))}).next(function(){return Fm.waitFor(o)})})},vg);function vg(e){this.serializer=e}var bg=function(e,t){this.seconds=e,this.nanoseconds=t},wg=(_g.store="owner",_g.key="owner",_g);function _g(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Tg=(Cg.store="mutationQueues",Cg.keyPath="userId",Cg),Eg=(Sg.store="mutations",Sg.keyPath="batchId",Sg.userMutationsIndex="userMutationsIndex",Sg.userMutationsKeyPath=["userId","batchId"],Sg);function Sg(e,t,n,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.mutations=r}function Cg(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var Ig=(xg.prefixForUser=function(e){return[e]},xg.prefixForPath=function(e,t){return[e,Im(t)]},xg.key=function(e,t,n){return[e,Im(t),n]},xg.store="documentMutations",xg.PLACEHOLDER=new xg,xg);function xg(){}var Ng=function(e,t){this.path=e,this.readTime=t},Dg=function(e,t){this.path=e,this.version=t},kg=(Og.store="remoteDocuments",Og),Ag=(Rg.store="remoteDocumentGlobal",Rg.key="remoteDocumentGlobalKey",Rg);function Rg(e){this.byteSize=e}function Og(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}var Pg=(jg.store="targets",jg.keyPath="targetId",jg.queryTargetsIndexName="queryTargetsIndex",jg.queryTargetsKeyPath=["canonicalId","targetId"],jg),Lg=(qg.store="targetDocuments",qg.keyPath=["targetId","path"],qg.documentTargetsIndex="documentTargetsIndex",qg.documentTargetsKeyPath=["path","targetId"],qg),Mg=(Fg.key="targetGlobalKey",Fg.store="targetGlobal",Fg);function Fg(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function qg(e,t,n){this.targetId=e,this.path=t,xl(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function jg(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}function Ug(e){e.createObjectStore(Lg.store,{keyPath:Lg.keyPath}).createIndex(Lg.documentTargetsIndex,Lg.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Pg.store,{keyPath:Pg.keyPath}).createIndex(Pg.queryTargetsIndexName,Pg.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Mg.store)}var Bg=(Vg.store="remoteDocumentChanges",Vg.keyPath="id",Vg);function Vg(e){this.changes=e}var Wg=(Hg.store="clientMetadata",Hg.keyPath="clientId",Hg);function Hg(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}var Kg=[Tg.store,Eg.store,Ig.store,kg.store,Pg.store,wg.store,Mg.store,Lg.store].concat([Wg.store,Bg.store]).concat([Ag.store]),Qg=(zg.forUser=function(e,t,n){return xl(""!==e.uid,"UserID must not be an empty string."),new zg(e.isAuthenticated()?e.uid:"",t,n)},zg.prototype.checkEmpty=function(e){var r=!0,t=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $g(e).iterate({index:Eg.userMutationsIndex,range:t},function(e,t,n){r=!1,n.done()}).next(function(){return r})},zg.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Yg(n),Zg(t).put(e)})},zg.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},zg.prototype.setLastStreamToken=function(t,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=Yg(n),Zg(t).put(e)})},zg.prototype.addMutationBatch=function(e,u,c){var h=this,l=Jg(e),f=$g(e);return f.add({}).next(function(e){xl("number"==typeof e,"Auto-generated key is not a number");var t=new Rm(e,u,c),n=h.serializer.toDbMutationBatch(h.userId,t);h.documentKeysByBatchId[e]=t.keys();for(var r=[],i=0,o=c;i<o.length;i++){var s=o[i],a=Ig.key(h.userId,s.key.path,e);r.push(f.put(n)),r.push(l.put(a,Ig.PLACEHOLDER))}return Fm.waitFor(r).next(function(){return t})})},zg.prototype.lookupMutationBatch=function(e,t){var n=this;return $g(e).get(t).next(function(e){return e?(xl(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},zg.prototype.lookupMutationKeys=function(e,n){var r=this;return this.documentKeysByBatchId[n]?Fm.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(e,n).next(function(e){if(e){var t=e.keys();return r.documentKeysByBatchId[n]=t}return null})},zg.prototype.getNextMutationBatchAfterBatchId=function(n,o){var s=this;return this.getMutationQueueMetadata(n).next(function(e){var r=o+1,t=IDBKeyRange.lowerBound([s.userId,r]),i=null;return $g(n).iterate({index:Eg.userMutationsIndex,range:t},function(e,t,n){t.userId===s.userId&&(xl(t.batchId>=r,"Should have found mutation after "+r),i=s.serializer.fromDbMutationBatch(t)),n.done()}).next(function(){return i})})},zg.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $g(e).loadAll(Eg.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},zg.prototype.getAllMutationBatchesAffectingDocumentKey=function(a,u){var c=this,e=Ig.prefixForPath(this.userId,u.path),t=IDBKeyRange.lowerBound(e),h=[];return Jg(a).iterate({range:t},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Dm(i);if(r===c.userId&&u.path.isEqual(s))return $g(a).get(o).next(function(e){if(!e)throw Il("Dangling document-mutation reference found: "+t+" which points to "+o);xl(e.userId===c.userId,"Unexpected user '"+e.userId+"' for mutation batch "+o),h.push(c.serializer.fromDbMutationBatch(e))});n.done()}).next(function(){return h})},zg.prototype.getAllMutationBatchesAffectingDocumentKeys=function(r,e){var u=this,c=new xd(sf),i=[];return e.forEach(function(a){var e=Ig.prefixForPath(u.userId,a.path),t=IDBKeyRange.lowerBound(e),n=Jg(r).iterate({range:t},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=Dm(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),Fm.waitFor(i).next(function(){return u.lookupMutationBatches(r,c)})},zg.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var a=this;xl(!t.isDocumentQuery(),"Document queries shouldn't go down this path");var u=t.path,c=u.length+1,n=Ig.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new xd(sf);return Jg(e).iterate({range:r},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=Dm(i);r===a.userId&&u.isPrefixOf(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.lookupMutationBatches(e,h)})},zg.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push($g(e).get(t).next(function(e){if(null===e)throw Il("Dangling document-mutation reference found, which points to "+t);xl(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Fm.waitFor(i).next(function(){return r})},zg.prototype.removeMutationBatch=function(t,n){var r=this;return Xg(t.simpleDbTransaction,this.userId,n).next(function(e){return r.removeCachedMutationKeys(n.batchId),Fm.forEach(e,function(e){return r.referenceDelegate.removeMutationReference(t,e)})})},zg.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},zg.prototype.performConsistencyCheck=function(n){var o=this;return this.checkEmpty(n).next(function(e){if(!e)return Fm.resolve();var t=IDBKeyRange.lowerBound(Ig.prefixForUser(o.userId)),i=[];return Jg(n).iterate({range:t},function(e,t,n){if(e[0]===o.userId){var r=Dm(e[1]);i.push(r)}else n.done()}).next(function(){xl(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},zg.prototype.containsKey=function(e,t){return Gg(e,this.userId,t)},zg.prototype.getMutationQueueMetadata=function(e){var t=this;return Zg(e).get(this.userId).next(function(e){return e||new Tg(t.userId,-1,"")})},zg);function zg(e,t,n){this.userId=e,this.serializer=t,this.referenceDelegate=n,this.documentKeysByBatchId={}}function Gg(e,o,t){var n=Ig.prefixForPath(o,t.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return Jg(e).iterate({range:r,keysOnly:!0},function(e,t,n){var r=e[0],i=e[1];e[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function Xg(e,t,n){var r=e.store(Eg.store),i=e.store(Ig.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(e,t,n){return a++,n.delete()});o.push(u.next(function(){xl(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Ig.key(t,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Fm.waitFor(o).next(function(){return c})}function Yg(e){return e instanceof Uint8Array?(xl("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function $g(e){return pv.getStore(e,Eg.store)}function Jg(e){return pv.getStore(e,Ig.store)}function Zg(e){return pv.getStore(e,Tg.store)}var ev=(tv.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=kf.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Of(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=kf.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Pf(t,n)):Il("Unexpected DbRemoteDocument")},tv.prototype.toDbRemoteDocument=function(e){if(e instanceof Rf){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new kg(null,null,t,n)}if(e instanceof Of){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return n=e.hasCommittedMutations,new kg(null,new Ng(r,i),null,n)}return e instanceof Pf?(r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),new kg(new Dg(r,i),null,null,!0)):Il("Unexpected MaybeDocumment")},tv.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new bg(t.seconds,t.nanoseconds)},tv.prototype.fromDbTimestamp=function(e){var t=new Tf(e.seconds,e.nanoseconds);return pd.fromTimestamp(t)},tv.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Eg(e,t.batchId,t.localWriteTime.toMillis(),r)},tv.prototype.fromDbMutationBatch=function(e){var t=this,n=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),r=Tf.fromMillis(e.localWriteTimeMs);return new Rm(e.batchId,r,n)},tv.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Im(e.path))}),t},tv.prototype.fromDbResourcePaths=function(e){for(var t=wy(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new kf(Dm(i)))}return t},tv.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Id(t,e.targetId,$p.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},tv.prototype.toDbTarget=function(e){xl($p.Listen===e.purpose,"Only queries with purpose "+$p.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(xl("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new Pg(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},tv);function tv(e){this.remoteSerializer=e}function nv(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],s=sf(n,i);return 0===s?sf(r,o):s}var rv,iv=(bv.prototype.nextIndex=function(){return++this.previousIndex},bv.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();nv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(bv.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),bv),ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sv=(vv.withCacheSize=function(e){return new vv(e,vv.DEFAULT_COLLECTION_PERCENTILE,vv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},vv.COLLECTION_DISABLED=-1,vv.MINIMUM_CACHE_SIZE_BYTES=1048576,vv.DEFAULT=new vv(vv.DEFAULT_CACHE_SIZE_BYTES=41943040,vv.DEFAULT_COLLECTION_PERCENTILE=10,vv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),vv.DISABLED=new vv(vv.COLLECTION_DISABLED,0,0),vv),av=(gv.prototype.start=function(){xl(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==sv.COLLECTION_DISABLED&&this.scheduleGC()},gv.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(gv.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),gv.prototype.scheduleGC=function(){var e=this;xl(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;El("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(pm.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(wv)})},gv),uv=(mv.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},mv.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Fm.resolve(ym.INVALID);var r=new iv(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},mv.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},mv.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},mv.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===sv.COLLECTION_DISABLED?(El("LruGarbageCollector","Garbage collection skipped; disabled"),Fm.resolve(ov)):this.getCacheSize(t).next(function(e){return e<r.params.cacheSizeCollectionThreshold?(El("LruGarbageCollector","Garbage collection skipped; Cache size "+e+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),ov):r.runGarbageCollection(t,n)})},mv.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},mv.prototype.runGarbageCollection=function(t,n){var r,i,o,s,a,u,c,h,l=this;return s=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return i=e>l.params.maximumSequenceNumbersToCollect?(El("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),l.params.maximumSequenceNumbersToCollect):e,a=Date.now(),l.nthSequenceNumber(t,i)}).next(function(e){return r=e,u=Date.now(),l.removeTargets(t,r,n)}).next(function(e){return o=e,c=Date.now(),l.removeOrphanedDocuments(t,r)}).next(function(e){return h=Date.now(),_l()<=ll.DEBUG&&El("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-s)+"ms\n\tDetermined least recently used "+i+" in "+(u-a)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+e+" documents in "+(h-c)+"ms\nTotal Duration: "+(h-s)+"ms"),Fm.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:e})})},mv),cv="IndexedDbPersistence",hv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lv="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",fv=(zt(yv,rv=function(){}),yv),pv=(dv.getStore=function(e,t){if(e instanceof fv)return qm.getStore(e.simpleDbTransaction,t);throw Il("IndexedDbPersistence must use instances of IndexedDbTransaction")},dv.createIndexedDbPersistence=function(n,r,i,o,s,a){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return[4,(t=new dv(n,r,i,o,s,a)).start()];case 1:return e.sent(),[2,t]}})})},dv.createMultiClientIndexedDbPersistence=function(n,r,i,o,s,a,u){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return[4,(t=new dv(n,r,i,o,s,a,u)).start()];case 1:return e.sent(),[2,t]}})})},dv.prototype.start=function(){var n=this;return xl(!this.started,"IndexedDbPersistence double-started!"),xl(null!==this.window,"Expected 'window' to be defined"),qm.openOrCreate(this.dbName,mg,new gg(this.serializer)).then(function(e){n.simpleDb=e}).then(function(){return n.startRemoteDocumentCache()}).then(function(){return n.attachVisibilityHandler(),n.attachWindowUnloadHook(),n.updateClientMetadataAndTryBecomePrimary().then(function(){return n.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return n.simpleDb.runTransaction("readonly",[Mg.store],function(e){return Zm(e).next(function(e){var t=n.multiClientParams?n.multiClientParams.sequenceNumberSyncer:void 0;n.listenSequence=new ym(e,t)})})}).then(function(){n._started=!0}).catch(function(e){return n.simpleDb&&n.simpleDb.close(),Promise.reject(e)})},dv.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Kg,function(e){return t.remoteDocumentCache.start(e)})},dv.prototype.setPrimaryStateListener=function(n){var e=this;return this.primaryStateListener=function(t){return Xt(e,void 0,void 0,function(){return Yt(this,function(e){return this.started?[2,n(t)]:[2]})})},n(this.isPrimary)},dv.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Xt(t,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},dv.prototype.updateClientMetadataAndTryBecomePrimary=function(){var r=this;return this.simpleDb.runTransaction("readwrite",Kg,function(n){return Tv(n).put(new Wg(r.clientId,Date.now(),r.networkEnabled,r.inForeground,r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(r.isPrimary)return r.verifyPrimaryLease(n).next(function(e){e||(r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}))})}).next(function(){return r.canActAsPrimary(n)}).next(function(e){var t=r.isPrimary;return r.isPrimary=e,t!==r.isPrimary&&r.queue.enqueueAndForget(function(){return r.primaryStateListener(r.isPrimary)}),t&&!r.isPrimary?r.releasePrimaryLeaseIfHeld(n):r.isPrimary?r.acquireOrExtendPrimaryLease(n):void 0})})},dv.prototype.verifyPrimaryLease=function(e){var t=this;return _v(e).get(wg.key).next(function(e){return Fm.resolve(t.isLocalClient(e))})},dv.prototype.removeClientMetadata=function(e){return Tv(e).delete(this.clientId)},dv.prototype.maybeGarbageCollectMultiClientState=function(){return Xt(this,void 0,void 0,function(){var r,i,o=this;return Yt(this,function(e){switch(e.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),i=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(n){var t=dv.getStore(n,Wg.store);return t.loadAll().next(function(e){r=o.filterActiveClients(e,18e5),i=e.filter(function(e){return-1===r.indexOf(e)})}).next(function(){return Fm.forEach(i,function(e){return t.delete(e.clientId)})}).next(function(){if(0<(r=r.filter(function(e){return e.clientId!==o.clientId})).length){var e=r.map(function(e){return e.lastProcessedDocumentChangeId||0}),t=Math.min.apply(Math,e);return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n,t)}})})]);case 1:e.sent(),i.forEach(function(e){o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(e.clientId))}),e.label=2;case 2:return[2]}})})},dv.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(pm.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},dv.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},dv.prototype.canActAsPrimary=function(t){var i=this;return _v(t).get(wg.key).next(function(e){if(null!==e&&i.isWithinAge(e.leaseTimestampMs,5e3)&&!i.isClientZombied(e.ownerId)){if(i.isLocalClient(e)&&i.networkEnabled)return!0;if(!i.isLocalClient(e)){if(!e.allowTabSynchronization)throw new Ol(Rl.FAILED_PRECONDITION,lv);return!1}}return!(!i.networkEnabled||!i.inForeground)||Tv(t).loadAll().next(function(e){return void 0===i.filterActiveClients(e,5e3).find(function(e){if(i.clientId!==e.clientId){var t=!i.networkEnabled&&e.networkEnabled,n=!i.inForeground&&e.inForeground,r=i.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1})})}).next(function(e){return i.isPrimary!==e&&El(cv,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},dv.prototype.shutdown=function(n){return Xt(this,void 0,void 0,function(){var t=this;return Yt(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[wg.store,Wg.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),n?[4,qm.delete(this.dbName)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},dv.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},dv.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Wg.store],function(e){return Tv(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(dv.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),dv.prototype.getMutationQueue=function(e){return xl(this.started,"Cannot initialize MutationQueue before persistence is started."),Qg.forUser(e,this.serializer,this.referenceDelegate)},dv.prototype.getQueryCache=function(){return xl(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},dv.prototype.getRemoteDocumentCache=function(){return xl(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},dv.prototype.runTransaction=function(n,e,r){var i=this;return El(cv,"Starting transaction:",n),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Kg,function(t){return"readwrite-primary"===e?i.verifyPrimaryLease(t).next(function(e){if(!e)throw Sl("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new Ol(Rl.FAILED_PRECONDITION,hv);return r(new fv(t,i.listenSequence.next()))}).next(function(e){return i.acquireOrExtendPrimaryLease(t).next(function(){return e})}):i.verifyAllowTabSynchronization(t).next(function(){return r(new fv(t,i.listenSequence.next()))})})},dv.prototype.verifyAllowTabSynchronization=function(e){var t=this;return _v(e).get(wg.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Ol(Rl.FAILED_PRECONDITION,lv)})},dv.prototype.acquireOrExtendPrimaryLease=function(e){var t=new wg(this.clientId,this.allowTabSynchronization,Date.now());return _v(e).put(wg.key,t)},dv.isAvailable=function(){return qm.isAvailable()},dv.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},dv.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=_v(e);return n.get(wg.key).next(function(e){return t.isLocalClient(e)?(El(cv,"Releasing primary lease."),n.delete(wg.key)):Fm.resolve()})},dv.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(Sl("Detected an update time that is in the future: "+e+" > "+n),1))},dv.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},dv.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(xl(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},dv.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},dv.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(xl("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},dv.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return El(cv,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return Sl(cv,"Failed to get zombied client id.",e),!1}},dv.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){Sl("Failed to set zombie client id.",e)}},dv.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},dv.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},dv.MAIN_DATABASE="main",dv);function dv(e,t,n,r,i,o,s){if(this.persistenceKey=e,this.clientId=t,this.queue=r,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!dv.isAvailable())throw new Ol(Rl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new Ev(this,o),this.dbName=e+dv.MAIN_DATABASE,this.serializer=new ev(i),this.document=n.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new Xm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new ig(this.serializer,this.allowTabSynchronization),!n.window||!n.window.localStorage)throw new Ol(Rl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=n.window,this.webStorage=this.window.localStorage}function yv(e,t){var n=rv.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}function mv(e,t){this.delegate=e,this.params=t}function gv(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}function vv(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}function bv(e){this.maxElements=e,this.buffer=new xd(nv),this.previousIndex=0}function wv(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){if(t.code!==Rl.FAILED_PRECONDITION||t.message!==hv)throw t;return El(cv,"Unexpectedly lost primary lease"),[2]})})}function _v(e){return e.store(wg.store)}function Tv(e){return e.store(Wg.store)}var Ev=(Sv.prototype.getSequenceNumberCount=function(e){var n=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(t){return n.next(function(e){return t+e})})},Sv.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},Sv.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},Sv.prototype.forEachOrphanedDocumentSequenceNumber=function(e,n){return this.forEachOrphanedDocument(e,function(e,t){return n(t)})},Sv.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Sv.prototype.addReference=function(e,t){return Cv(e,t)},Sv.prototype.removeReference=function(e,t){return Cv(e,t)},Sv.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},Sv.prototype.removeMutationReference=function(e,t){return Cv(e,t)},Sv.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Fm.resolve(!0):(r=t,i=!1,Zg(n=e).iterateSerial(function(e){return Gg(n,e,r).next(function(e){return e&&(i=!0),Fm.resolve(!e)})}).next(function(){return i}));var n,r,i},Sv.prototype.removeOrphanedDocuments=function(r,i){var o=this,s=0,a=0,u=[];return this.forEachOrphanedDocument(r,function(t,e){if(e<=i){var n=o.isPinned(r,t).next(function(e){if(!e)return s++,o.removeOrphanedDocument(r,t).next(function(e){a+=e})});u.push(n)}}).next(function(){return Fm.waitFor(u)}).next(function(){return o.db.getRemoteDocumentCache().updateSize(r,-a)}).next(function(){return s})},Sv.prototype.removeOrphanedDocument=function(e,t){var n=0,r=this.db.getRemoteDocumentCache();return Fm.waitFor([eg(e).delete([0,Im(t.path)]),r.removeEntry(e,t).next(function(e){n+=e})]).next(function(){return n})},Sv.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},Sv.prototype.updateLimboDocument=function(e,t){return Cv(e,t)},Sv.prototype.forEachOrphanedDocument=function(e,o){var s,t=eg(e),a=ym.INVALID;return t.iterate({index:Lg.documentTargetsIndex},function(e,t){var n=e[0],r=(e[1],t.path),i=t.sequenceNumber;0===n?(a!==ym.INVALID&&o(new kf(Dm(s)),a),a=i,s=r):a=ym.INVALID}).next(function(){a!==ym.INVALID&&o(new kf(Dm(s)),a)})},Sv.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},Sv);function Sv(e,t){this.db=e,this.garbageCollector=new uv(this,t)}function Cv(e,t){return eg(e).put((n=t,r=e.currentSequenceNumber,new Lg(0,Im(n.path),r)));var n,r}var Iv=(Fv.prototype.getDocument=function(t,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(e){return r.getDocumentInternal(t,n,e)})},Fv.prototype.getDocumentInternal=function(e,r,i){return this.remoteDocumentCache.getEntry(e,r).next(function(e){for(var t=0,n=i;t<n.length;t++)e=n[t].applyToLocalView(r,e);return e})},Fv.prototype.applyLocalMutationsToDocuments=function(e,t,i){var o=dy();return t.forEach(function(e,t){for(var n=0,r=i;n<r.length;n++)t=r[n].applyToLocalView(e,t);o=o.insert(e,t)}),o},Fv.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},Fv.prototype.getLocalViewOfDocuments=function(r,i){var o=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,i).next(function(e){var t=o.applyLocalMutationsToDocuments(r,i,e),n=py();return t.forEach(function(e,t){t=t||new Of(e,pd.forDeletedDoc()),n=n.insert(e,t)}),n})},Fv.prototype.getDocumentsMatchingQuery=function(e,t){return kf.isDocumentKey(t.path)?this.getDocumentsMatchingDocumentQuery(e,t.path):this.getDocumentsMatchingCollectionQuery(e,t)},Fv.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new kf(t)).next(function(e){var t=my();return e instanceof Rf&&(t=t.insert(e.key,e)),t})},Fv.prototype.getDocumentsMatchingCollectionQuery=function(t,h){var l,n=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,h).next(function(e){return l=e,n.mutationQueue.getAllMutationBatchesAffectingQuery(t,h)}).next(function(e){for(var t=0,n=e;t<n.length;t++)for(var r=n[t],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key;if(h.path.isImmediateParentOf(a.path)){var u=l.get(a),c=s.applyToLocalView(u,u,r.localWriteTime);l=c instanceof Rf?l.insert(a,c):l.remove(a)}}}).next(function(){return l.forEach(function(e,t){h.matches(t)||(l=l.remove(e))}),l})},Fv),xv=(Mv.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},Mv.prototype.addReference=function(e,t){var n=new Nv(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},Mv.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},Mv.prototype.removeReference=function(e,t){this.removeRef(new Nv(e,t))},Mv.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},Mv.prototype.removeReferencesForId=function(e){var t=this,n=kf.EMPTY,r=new Nv(n,e),i=new Nv(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},Mv.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},Mv.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},Mv.prototype.referencesForId=function(e){var t=kf.EMPTY,n=new Nv(t,e),r=new Nv(t,e+1),i=wy();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},Mv.prototype.containsKey=function(e){var t=new Nv(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},Mv),Nv=(Lv.compareByKey=function(e,t){return kf.comparator(e.key,t.key)||sf(e.targetOrBatchId,t.targetOrBatchId)},Lv.compareByTargetId=function(e,t){return sf(e.targetOrBatchId,t.targetOrBatchId)||kf.comparator(e.key,t.key)},Lv),Dv=(Pv.prototype.handleUserChange=function(t){var m=this;return this.persistence.runTransaction("Handle user change","readonly",function(d){var y;return m.mutationQueue.getAllMutationBatches(d).next(function(e){return y=e,m.mutationQueue=m.persistence.getMutationQueue(t),m.localDocuments=new Iv(m.remoteDocuments,m.mutationQueue),m.mutationQueue.getAllMutationBatches(d)}).next(function(e){for(var t=[],n=[],r=wy(),i=0,o=y;i<o.length;i++){var s=o[i];t.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=e;h<l.length;h++){s=l[h],n.push(s.batchId);for(var f=0,p=s.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return m.localDocuments.getDocuments(d,r).next(function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:n}})})})},Pv.prototype.localWrite=function(t){var i=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,e=Tf.now();return i.mutationQueue.addMutationBatch(n,e,t).next(function(e){var t=(r=e).keys();return i.localDocuments.getDocuments(n,t)}).next(function(e){return{batchId:r.batchId,changes:e}})})},Pv.prototype.lookupMutationDocuments=function(e){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return n.mutationQueue.lookupMutationKeys(t,e).next(function(e){return e?n.localDocuments.getDocuments(t,e):Fm.resolve(null)})})},Pv.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var t=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer();return i.mutationQueue.acknowledgeBatch(e,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(e,r,n)}).next(function(){return n.apply(e)}).next(function(){return i.mutationQueue.performConsistencyCheck(e)}).next(function(){return i.localDocuments.getDocuments(e,t)})})},Pv.prototype.rejectBatch=function(e){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var n;return r.mutationQueue.lookupMutationBatch(t,e).next(function(e){return xl(null!==e,"Attempt to reject nonexistent batch!"),n=e.keys(),r.mutationQueue.removeMutationBatch(t,e)}).next(function(){return r.mutationQueue.performConsistencyCheck(t)}).next(function(){return r.localDocuments.getDocuments(t,n)})})},Pv.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},Pv.prototype.setLastStreamToken=function(t){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(e){return n.mutationQueue.setLastStreamToken(e,t)})},Pv.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},Pv.prototype.applyRemoteEvent=function(u){var c=this,h=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=[],a=wy();ql(u.targetChanges,function(e,t){var n=c.queryDataByTarget[e];if(n){t.addedDocuments.forEach(function(e){a=a.add(e)}),t.modifiedDocuments.forEach(function(e){a=a.add(e)}),s.push(c.queryCache.removeMatchingKeys(o,t.removedDocuments,e).next(function(){return c.queryCache.addMatchingKeys(o,t.addedDocuments,e)}));var r=t.resumeToken;if(0<r.length){var i=n;n=n.copy({resumeToken:r,snapshotVersion:u.snapshotVersion}),c.queryDataByTarget[e]=n,Pv.shouldPersistQueryData(i,n,t)&&s.push(c.queryCache.updateQueryData(o,n))}}});var i=py(),n=wy();u.documentUpdates.forEach(function(e,t){n=n.add(e)}),s.push(h.getEntries(o,n).next(function(r){u.documentUpdates.forEach(function(e,t){var n=r.get(e);null==n||t.version.isEqual(pd.MIN)||a.has(t.key)&&!n.hasPendingWrites||0<=t.version.compareTo(n.version)?(h.addEntry(t),i=i.insert(e,t)):El("LocalStore","Ignoring outdated watch update for ",e,". Current version:",n.version," Watch version:",t.version),u.resolvedLimboDocuments.has(e)&&s.push(c.persistence.referenceDelegate.updateLimboDocument(o,e))})}));var t=u.snapshotVersion;if(!t.isEqual(pd.MIN)){var e=c.queryCache.getLastRemoteSnapshotVersion(o).next(function(e){return xl(0<=t.compareTo(e),"Watch stream reverted to previous snapshot?? "+t+" < "+e),c.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,t)});s.push(e)}return Fm.waitFor(s).next(function(){return h.apply(o)}).next(function(){return c.localDocuments.getLocalViewOfDocuments(o,i)})})},Pv.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size)},Pv.prototype.notifyLocalViewChanges=function(e){var n=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Fm.forEach(e,function(e){return n.localViewReferences.addReferences(e.addedKeys,e.targetId),n.localViewReferences.removeReferences(e.removedKeys,e.targetId),Fm.forEach(e.removedKeys,function(e){return n.persistence.referenceDelegate.removeReference(t,e)})})})},Pv.prototype.nextMutationBatch=function(t){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)})},Pv.prototype.readDocument=function(t){var n=this;return this.persistence.runTransaction("read document","readonly",function(e){return n.localDocuments.getDocument(e,t)})},Pv.prototype.allocateQuery=function(r){var i=this;return this.persistence.runTransaction("Allocate query","readwrite",function(t){var n;return i.queryCache.getQueryData(t,r).next(function(e){return e?(n=e,Fm.resolve()):i.queryCache.allocateTargetId(t).next(function(e){return n=new Id(r,e,$p.Listen,t.currentSequenceNumber),i.queryCache.addQueryData(t,n)})}).next(function(){return xl(!i.queryDataByTarget[n.targetId],"Tried to allocate an already allocated query: "+r),i.queryDataByTarget[n.targetId]=n})})},Pv.prototype.releaseQuery=function(o,s){var a=this,e=s?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",e,function(i){return a.queryCache.getQueryData(i,o).next(function(e){xl(null!=e,"Tried to release nonexistent query: "+o);var t=e.targetId,n=a.queryDataByTarget[t],r=a.localViewReferences.removeReferencesForId(t);return delete a.queryDataByTarget[t],s?Fm.resolve():Fm.forEach(r,function(e){return a.persistence.referenceDelegate.removeReference(i,e)}).next(function(){return a.persistence.referenceDelegate.removeTarget(i,n)})})})},Pv.prototype.executeQuery=function(t){var n=this;return this.persistence.runTransaction("Execute query","readonly",function(e){return n.localDocuments.getDocumentsMatchingQuery(e,t)})},Pv.prototype.remoteDocumentKeys=function(t){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(e){return n.queryCache.getMatchingKeysForTargetId(e,t)})},Pv.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Pv.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},Pv.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},Pv.prototype.applyWriteToRemoteDocuments=function(e,i,o){var t=this,s=i.batch,n=s.keys(),a=Fm.resolve();return n.forEach(function(r){a=a.next(function(){return o.getEntry(e,r)}).next(function(e){var t=e,n=i.docVersions.get(r);xl(null!==n,"ackVersions should contain every doc in the write."),(!t||t.version.compareTo(n)<0)&&((t=s.applyToRemoteDocument(r,t,i))?o.addEntry(t):xl(!e,"Mutation batch "+s+" applied to document "+e+" resulted in null"))})}),a.next(function(){return t.mutationQueue.removeMutationBatch(e,s)})},Pv.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(e){return t.collect(e,n.queryDataByTarget)})},Pv.prototype.getQueryForTarget=function(t){var n=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(e){return n.queryCache.getQueryDataForTarget(e,t).next(function(e){return e?e.query:null})})},Pv.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},Pv.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Pv),kv=(Ov.prototype.checkEmpty=function(e){return Fm.resolve(0===this.mutationQueue.length)},Ov.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");xl(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return xl(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Fm.resolve()},Ov.prototype.getLastStreamToken=function(e){return Fm.resolve(this.lastStreamToken)},Ov.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Fm.resolve()},Ov.prototype.addMutationBatch=function(e,t,n){xl(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&xl(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new Rm(r,t,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++){var a=s[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Nv(a.key,r))}return Fm.resolve(i)},Ov.prototype.lookupMutationBatch=function(e,t){return Fm.resolve(this.findMutationBatch(t))},Ov.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return xl(null!=n,"Failed to find local mutation batch."),Fm.resolve(n.keys())},Ov.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Fm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},Ov.prototype.getAllMutationBatches=function(e){return Fm.resolve(this.mutationQueue.slice())},Ov.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,t=new Nv(n,0),i=new Nv(n,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([t,i],function(e){xl(n.isEqual(e.key),"Should only iterate over a single key's batches");var t=r.findMutationBatch(e.targetOrBatchId);xl(null!==t,"Batches in the index must exist in the main table"),o.push(t)}),Fm.resolve(o)},Ov.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var r=this,i=new xd(sf);return t.forEach(function(t){var e=new Nv(t,0),n=new Nv(t,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([e,n],function(e){xl(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),i=i.add(e.targetOrBatchId)})}),Fm.resolve(this.findMutationBatches(i))},Ov.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;kf.isDocumentKey(i)||(i=i.child(""));var o=new Nv(new kf(i),0),s=new xd(sf);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.targetOrBatchId)),!0)},o),Fm.resolve(this.findMutationBatches(s))},Ov.prototype.findMutationBatches=function(e){var n=this,r=[];return e.forEach(function(e){var t=n.findMutationBatch(e);null!==t&&r.push(t)}),r},Ov.prototype.removeMutationBatch=function(n,r){var i=this;xl(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var o=this.batchesByDocumentKey;return Fm.forEach(r.mutations,function(e){var t=new Nv(e.key,r.batchId);return o=o.delete(t),i.referenceDelegate.removeMutationReference(n,e.key)}).next(function(){i.batchesByDocumentKey=o})},Ov.prototype.removeCachedMutationKeys=function(e){},Ov.prototype.containsKey=function(e,t){var n=new Nv(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Fm.resolve(t.isEqual(r&&r.key))},Ov.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&xl(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Fm.resolve()},Ov.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return xl(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},Ov.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},Ov.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return xl(n.batchId===e,"If found batch must match"),n},Ov),Av=(Rv.prototype.getTargetCount=function(e){return Fm.resolve(this.targetCount)},Rv.prototype.forEachTarget=function(e,n){return this.queries.forEach(function(e,t){return n(t)}),Fm.resolve()},Rv.prototype.getLastRemoteSnapshotVersion=function(e){return Fm.resolve(this.lastRemoteSnapshotVersion)},Rv.prototype.getHighestSequenceNumber=function(e){return Fm.resolve(this.highestSequenceNumber)},Rv.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Fm.resolve(t)},Rv.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Fm.resolve()},Rv.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},Rv.prototype.addQueryData=function(e,t){return xl(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Fm.resolve()},Rv.prototype.updateQueryData=function(e,t){return xl(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Fm.resolve()},Rv.prototype.removeQueryData=function(e,t){return xl(0<this.targetCount,"Removing a target from an empty cache"),xl(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),--this.targetCount,Fm.resolve()},Rv.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return this.queries.forEach(function(e,t){t.sequenceNumber<=r&&!i[t.targetId]&&(o.queries.delete(e),a.push(o.removeMatchingKeysForTargetId(n,t.targetId)),s++)}),Fm.waitFor(a).next(function(){return s})},Rv.prototype.getQueryCount=function(e){return Fm.resolve(this.targetCount)},Rv.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Fm.resolve(n)},Rv.prototype.getQueryDataForTarget=function(e,t){return Il("Not yet implemented.")},Rv.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Fm.waitFor(i)},Rv.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Fm.waitFor(i)},Rv.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Fm.resolve()},Rv.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Fm.resolve(n)},Rv.prototype.containsKey=function(e,t){return Fm.resolve(this.references.containsKey(t))},Rv);function Rv(e){this.persistence=e,this.queries=new tg(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=pd.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new xv,this.targetCount=0,this.targetIdGenerator=Mm.forQueryCache()}function Ov(e){this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=kl(),this.batchesByDocumentKey=new xd(Nv.compareByKey)}function Pv(e,t){this.persistence=e,this.localViewReferences=new xv,this.queryDataByTarget={},xl(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Iv(this.remoteDocuments,this.mutationQueue)}function Lv(e,t){this.key=e,this.targetOrBatchId=t}function Mv(){this.refsByKey=new xd(Nv.compareByKey),this.refsByTarget=new xd(Nv.compareByTargetId)}function Fv(e,t){this.remoteDocumentCache=e,this.mutationQueue=t}var qv,jv,Uv,Bv=(Zv.prototype.addEntries=function(e,t,n){for(var r=0,i=t;r<i.length;r++){var o=i[r],s=o.maybeDocument.key;this.docs=this.docs.insert(s,o),this.newDocumentChanges=this.newDocumentChanges.add(s)}return this.size+=n,Fm.resolve()},Zv.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,Fm.resolve(n.size)):Fm.resolve(0)},Zv.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Fm.resolve(n?n.maybeDocument:null)},Zv.prototype.getSizedEntry=function(e,t){return Fm.resolve(this.docs.get(t))},Zv.prototype.getEntries=function(e,t){var n=this,r=dy();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Fm.resolve(r)},Zv.prototype.getSizedEntries=function(e,t){var n=this,r=dy(),i=new Lf(kf.comparator);return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),i=i.insert(e,t?t.size:0)}),Fm.resolve({maybeDocuments:r,sizeMap:i})},Zv.prototype.getDocumentsMatchingQuery=function(e,t){for(var n=my(),r=new kf(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.key,a=o.value.maybeDocument;if(!t.path.isPrefixOf(s.path))break;a instanceof Rf&&t.matches(a)&&(n=n.insert(a.key,a))}return Fm.resolve(n)},Zv.prototype.forEachDocumentKey=function(e,t){return Fm.forEach(this.docs,function(e){return t(e)})},Zv.prototype.getNewDocumentChanges=function(e){var r=this,i=py();return this.newDocumentChanges.forEach(function(e){var t=r.docs.get(e),n=t?t.maybeDocument:new Of(e,pd.forDeletedDoc());i=i.insert(e,n)}),this.newDocumentChanges=wy(),Fm.resolve(i)},Zv.prototype.newChangeBuffer=function(){return new Vv(this.sizer,this)},Zv.prototype.getSize=function(e){return Fm.resolve(this.size)},Zv),Vv=(zt(Jv,jv=ng),Jv.prototype.applyChanges=function(e){var i=this,o=0,s=[];return this.assertChanges().forEach(function(e,t){var n=i.documentSizes.get(e);xl(void 0!==n,"Attempting to change document "+e.toString()+" without having read it first");var r=i.sizer(t);o+=r-n,s.push({maybeDocument:t,size:r})}),this.documentCache.addEntries(e,s,o)},Jv.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},Jv.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},Jv),Wv=($v.createLruPersistence=function(e,t,n){return new $v(e,function(e){return new Qv(e,new ev(t),n)})},$v.createEagerPersistence=function(e){return new $v(e,function(e){return new Kv(e)})},$v.prototype.shutdown=function(e){return this._started=!1,Promise.resolve()},Object.defineProperty($v.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),$v.prototype.getActiveClients=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return[2,[this.clientId]]})})},$v.prototype.setPrimaryStateListener=function(e){return e(!0)},$v.prototype.setNetworkEnabled=function(e){},$v.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new kv(this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},$v.prototype.getQueryCache=function(){return this.queryCache},$v.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},$v.prototype.runTransaction=function(e,t,n){var r=this;El("MemoryPersistence","Starting transaction:",e);var i=new Hv(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},$v.prototype.mutationQueuesContainKey=function(t,n){return Fm.or((e=this.mutationQueues,r=[],jl(e,function(e,t){return r.push(t)}),r).map(function(e){return function(){return e.containsKey(t,n)}}));var e,r},$v),Hv=function(e){this.currentSequenceNumber=e},Kv=(Yv.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Yv.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Fm.resolve()},Yv.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Fm.resolve()},Yv.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Fm.resolve()},Yv.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},Yv.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},Yv.prototype.onTransactionCommitted=function(n){var e=this,r=this.persistence.getRemoteDocumentCache();return Fm.forEach(this.orphanedDocuments,function(t){return e.isReferenced(n,t).next(function(e){return e?Fm.resolve():r.removeEntry(n,t).next(function(){})})})},Yv.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},Yv.prototype.documentSize=function(e){return 0},Yv.prototype.isReferenced=function(e,t){var n=this;return Fm.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Fm.resolve(n.inMemoryPins.containsKey(t))}])},Yv),Qv=(Xv.prototype.onTransactionStarted=function(){},Xv.prototype.onTransactionCommitted=function(e){return Fm.resolve()},Xv.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},Xv.prototype.getSequenceNumberCount=function(e){var n=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(t){return n.next(function(e){return t+e})})},Xv.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},Xv.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return Fm.forEach(this.orphanedSequenceNumbers,function(e,t){return i.isPinned(n,e,t).next(function(e){return e?Fm.resolve():r(t)})})},Xv.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Xv.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},Xv.prototype.removeOrphanedDocuments=function(n,e){var r=this,i=0,o=this.persistence.getRemoteDocumentCache();return o.forEachDocumentKey(n,function(t){return r.isPinned(n,t,e).next(function(e){return e?Fm.resolve():(i++,o.removeEntry(n,t).next())})}).next(function(){return i})},Xv.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Fm.resolve()},Xv.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},Xv.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Fm.resolve()},Xv.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Fm.resolve()},Xv.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Fm.resolve()},Xv.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Il("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},Xv.prototype.isPinned=function(e,t,n){var r=this;return Fm.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Fm.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Fm.resolve(void 0!==e&&n<e)}])},Xv.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},Xv),zv=(Gv.prototype.reset=function(){this.currentBaseMs=0},Gv.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Gv.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&El("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Gv.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Gv.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Gv);function Gv(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}function Xv(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new tg(function(e){return Im(e.path)}),this.garbageCollector=new uv(this,n)}function Yv(e){this.persistence=e}function $v(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ym(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Av(this),this.remoteDocumentCache=new Bv(function(e){return n.referenceDelegate.documentSize(e)})}function Jv(e,t){var n=jv.call(this)||this;return n.sizer=e,n.documentCache=t,n}function Zv(e){this.sizer=e,this.docs=new Lf(kf.comparator),this.newDocumentChanges=wy(),this.size=0}(Uv=qv=qv||{})[Uv.Initial=0]="Initial",Uv[Uv.Starting=1]="Starting",Uv[Uv.Open=2]="Open",Uv[Uv.Error=3]="Error",Uv[Uv.Backoff=4]="Backoff";var eb,tb,nb,rb,ib,ob,sb=(yb.prototype.isStarted=function(){return this.state===qv.Starting||this.state===qv.Open||this.state===qv.Backoff},yb.prototype.isOpen=function(){return this.state===qv.Open},yb.prototype.start=function(){this.state!==qv.Error?(xl(this.state===qv.Initial,"Already started"),this.auth()):this.performBackoff()},yb.prototype.stop=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(qv.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},yb.prototype.inhibitBackoff=function(){xl(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=qv.Initial,this.backoff.reset()},yb.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},yb.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},yb.prototype.handleIdleCloseTimer=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return this.isOpen()?[2,this.close(qv.Initial)]:[2]})})},yb.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},yb.prototype.close=function(t,n){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return xl(this.isStarted(),"Only started streams should be closed."),xl(t===qv.Error||Xp(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==qv.Error?this.backoff.reset():n&&n.code===Rl.RESOURCE_EXHAUSTED?(Sl(n.toString()),Sl("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===Rl.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(n)];case 1:return e.sent(),[2]}})})},yb.prototype.tearDown=function(){},yb.prototype.auth=function(){var n=this;xl(this.state===qv.Initial,"Must be in initial state to auth"),this.state=qv.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;this.credentialsProvider.getToken().then(function(e){n.closeCount===t&&n.startStream(e)},function(t){e(function(){var e=new Ol(Rl.UNKNOWN,"Fetching auth token failed: "+t.message);return n.handleStreamClose(e)})})},yb.prototype.startStream=function(e){var t=this;xl(this.state===qv.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return xl(t.state===qv.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=qv.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},yb.prototype.performBackoff=function(){var e=this;xl(this.state===qv.Error,"Should only perform backoff when in Error state"),this.state=qv.Backoff,this.backoff.backoffAndRun(function(){return Xt(e,void 0,void 0,function(){return Yt(this,function(e){return xl(this.state===qv.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=qv.Initial,this.start(),xl(this.isStarted(),"PersistentStream should have started"),[2]})})})},yb.prototype.handleStreamClose=function(e){return xl(this.isStarted(),"Can't handle server close on non-started stream"),El("PersistentStream","close with error: "+e),this.stream=null,this.close(qv.Error,e)},yb.prototype.getCloseGuardedDispatcher=function(t){var n=this;return function(e){n.queue.enqueueAndForget(function(){return n.closeCount===t?e():(El("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},yb),ab=(zt(db,rb=sb),db.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},db.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},db.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},db.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},db),ub=(zt(pb,nb=sb),Object.defineProperty(pb.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),pb.prototype.start=function(){this.handshakeComplete_=!1,nb.prototype.start.call(this)},pb.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},pb.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},pb.prototype.onMessage=function(e){if(xl(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return xl(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},pb.prototype.writeHandshake=function(){xl(this.isOpen(),"Writing handshake requires an opened stream"),xl(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},pb.prototype.writeMutations=function(e){var t=this;xl(this.isOpen(),"Writing mutations requires an opened stream"),xl(this.handshakeComplete_,"Handshake must be complete before writing mutations"),xl(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},pb),cb=(fb.prototype.newPersistentWriteStream=function(e){return new ub(this.queue,this.connection,this.credentials,this.serializer,e)},fb.prototype.newPersistentWatchStream=function(e){return new ab(this.queue,this.connection,this.credentials,this.serializer,e)},fb.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},fb.prototype.lookup=function(t){var i=this,e={database:this.serializer.encodedDatabaseId,documents:t.map(function(e){return i.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",e).then(function(e){var n=py();e.forEach(function(e){var t=i.serializer.fromMaybeDocument(e);n=n.insert(t.key,t)});var r=[];return t.forEach(function(e){var t=n.get(e);xl(!!t,"Missing entity in write response for "+e),r.push(t)}),r})},fb.prototype.invokeRPC=function(t,n){var r=this;return this.credentials.getToken().then(function(e){return r.connection.invokeRPC(t,n,e)}).catch(function(e){throw e.code===Rl.UNAUTHENTICATED&&r.credentials.invalidateToken(),e})},fb.prototype.invokeStreamingRPC=function(t,n){var r=this;return this.credentials.getToken().then(function(e){return r.connection.invokeStreamingRPC(t,n,e)}).catch(function(e){throw e.code===Rl.UNAUTHENTICATED&&r.credentials.invalidateToken(),e})},fb),hb=(lb.prototype.recordVersion=function(e){var t;if(e instanceof Rf)t=e.version;else{if(!(e instanceof Of))throw Il("Document in a transaction was a "+e.constructor.name);t=pd.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Ol(Rl.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},lb.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):0<this.mutations.length?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then(function(e){return e.forEach(function(e){e instanceof Of||e instanceof Rf?t.recordVersion(e):Il("Document in a transaction was a "+e.constructor.name)}),e})},lb.prototype.write=function(e){if(this.committed)throw new Ol(Rl.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},lb.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?Bd.updateTime(t):Bd.NONE},lb.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(pd.forDeletedDoc()))throw new Ol(Rl.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return t?Bd.updateTime(t):Bd.exists(!0)},lb.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},lb.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},lb.prototype.delete=function(e){this.write([new Qd(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,pd.forDeletedDoc())},lb.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach(function(e){t=t.remove(e.key)}),t.isEmpty()?this.datastore.commit(this.mutations).then(function(){e.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},lb);function lb(e){this.datastore=e,this.readVersions=vy(),this.mutations=[],this.committed=!1}function fb(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}function pb(e,t,n,r,i){var o=nb.call(this,e,pm.WriteStreamConnectionBackoff,pm.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o}function db(e,t,n,r,i){var o=rb.call(this,e,pm.ListenStreamConnectionBackoff,pm.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}function yb(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=qv.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new zv(e,t,1e3,1.5,6e4)}(ob=eb=eb||{})[ob.Unknown=0]="Unknown",ob[ob.Online=1]="Online",ob[ob.Offline=2]="Offline",(ib=tb=tb||{})[ib.RemoteStore=0]="RemoteStore",ib[ib.SharedClientState=1]="SharedClientState";var mb=(kb.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(eb.Unknown),xl(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(pm.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,xl(e.state===eb.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(eb.Offline),Promise.resolve()}))},kb.prototype.handleWatchStreamFailure=function(e){this.state===eb.Online?(this.setAndBroadcast(eb.Unknown),xl(0===this.watchStreamFailures,"watchStreamFailures must be 0"),xl(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(eb.Offline)))},kb.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===eb.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},kb.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},kb.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Sl(t),this.shouldWarnClientIsOffline=!1):El("OnlineStateTracker",t)},kb.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},kb),gb=(Db.prototype.start=function(){return this.enableNetwork()},Db.prototype.enableNetwork=function(){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(eb.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Db.prototype.disableNetwork=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(eb.Offline),[2]}})})},Db.prototype.disableNetworkInternal=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(El("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},Db.prototype.shutdown=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return El("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(eb.Unknown),[2]}})})},Db.prototype.listen=function(e){xl(!Ml(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},Db.prototype.unlisten=function(e){xl(Ml(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),Ul(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(eb.Unknown))},Db.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},Db.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Db.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Db.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Db.prototype.startWatchStream=function(){xl(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Wy(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Db.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Ul(this.listenTargets)},Db.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Db.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Db.prototype.onWatchStreamOpen=function(){return Xt(this,void 0,void 0,function(){var n=this;return Yt(this,function(e){return ql(this.listenTargets,function(e,t){n.sendWatchRequest(t)}),[2]})})},Db.prototype.onWatchStreamClose=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return void 0===t&&xl(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(eb.Unknown),[2]})})},Db.prototype.onWatchStreamChange=function(n,r){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return this.onlineStateTracker.set(eb.Online),n instanceof By&&n.state===Dy.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof Ly?this.watchChangeAggregator.handleDocumentChange(n):n instanceof My?this.watchChangeAggregator.handleExistenceFilter(n):(xl(n instanceof By,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(pd.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return t=e.sent(),0<=r.compareTo(t)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Db.prototype.raiseWatchSnapshot=function(r){var i=this;xl(!r.isEqual(pd.MIN),"Can't raise event for unknown SnapshotVersion");var e=this.watchChangeAggregator.createRemoteEvent(r);return ql(e.targetChanges,function(e,t){if(0<t.resumeToken.length){var n=i.listenTargets[e];n&&(i.listenTargets[e]=n.copy({resumeToken:t.resumeToken,snapshotVersion:r}))}}),e.targetMismatches.forEach(function(e){var t=i.listenTargets[e];if(t){i.listenTargets[e]=t.copy({resumeToken:kl()}),i.sendUnwatchRequest(e);var n=new Id(t.query,e,$p.ExistenceFilterMismatch,t.sequenceNumber);i.sendWatchRequest(n)}}),this.syncEngine.applyRemoteEvent(e)},Db.prototype.handleTargetError=function(e){var n=this;xl(!!e.cause,"Handling target error without a cause");var r=e.cause,i=Promise.resolve();return e.targetIds.forEach(function(t){i=i.then(function(){return Xt(n,void 0,void 0,function(){return Yt(this,function(e){return Ml(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,r)]):[2]})})})}),i},Db.prototype.fillWritePipeline=function(){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?(t=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(n=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},Db.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Db.prototype.outstandingWrites=function(){return this.writePipeline.length},Db.prototype.addToWritePipeline=function(e){xl(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Db.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Db.prototype.startWriteStream=function(){xl(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Db.prototype.onWriteStreamOpen=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return this.writeStream.writeHandshake(),[2]})})},Db.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,t=r.writePipeline;e<t.length;e++){var n=t[e];r.writeStream.writeMutations(n.mutations)}}).catch(wv)},Db.prototype.onMutationResult=function(e,t){var n=this;xl(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Om.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},Db.prototype.onWriteStreamClose=function(n){return Xt(this,void 0,void 0,function(){var t=this;return Yt(this,function(e){return void 0===n&&xl(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},Db.prototype.handleHandshakeError=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return hy(t.code)?(El("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=kl(),[2,this.localStore.setLastStreamToken(kl()).catch(wv)]):[2]})})},Db.prototype.handleWriteError=function(i){return Xt(this,void 0,void 0,function(){var n,r=this;return Yt(this,function(e){return hy(t=i.code)&&t!==Rl.ABORTED?(n=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(n.batchId,i).then(function(){return r.fillWritePipeline()})]):[2];var t})})},Db.prototype.createTransaction=function(){return new hb(this.datastore)},Db.prototype.handleCredentialChange=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(El("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return e.sent(),this.onlineStateTracker.set(eb.Unknown),[4,this.enableNetwork()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Db.prototype.applyPrimaryState=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(eb.Unknown),e.label=4;case 4:return[2]}})})},Db),vb=function(){this.listeners=[]},bb=(Nb.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new vb,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e}):Promise.resolve(r.targetId)},Nb.prototype.unlisten=function(o){return Xt(this,void 0,void 0,function(){var t,n,r,i;return Yt(this,function(e){return t=o.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},Nb.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(r);o.viewSnap=r}}},Nb.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},Nb.prototype.onOnlineStateChange=function(i){this.onlineState=i,this.queries.forEach(function(e,t){for(var n=0,r=t.listeners;n<r.length;n++)r[n].applyOnlineStateChange(i)})},Nb),wb=(xb.prototype.onViewSnapshot=function(e){if(xl(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Ey.Metadata&&t.push(i)}e=new Ry(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},xb.prototype.onError=function(e){this.queryObserver.error(e)},xb.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},xb.prototype.shouldRaiseInitialEvent=function(e,t){if(xl(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==eb.Offline;return this.options.waitForSyncWhenOnline&&n?(xl(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===eb.Offline},xb.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},xb.prototype.raiseInitialEvent=function(e){xl(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Ry.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},xb),_b=(Ib.fromSnapshot=function(e,t){for(var n=wy(),r=wy(),i=0,o=t.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case Ey.Added:n=n.add(s.doc.key);break;case Ey.Removed:r=r.add(s.doc.key)}}return new Ib(e,n,r)},Ib),Tb=function(e){this.key=e},Eb=function(e){this.key=e},Sb=(Object.defineProperty(Cb.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),Cb.prototype.computeDocChanges=function(e,t){var a=this,u=t?t.changeSet:new Ay,c=t?t.documentSet:this.documentSet,h=t?t.mutatedKeys:this.mutatedKeys,l=c,f=!1,p=this.query.hasLimit()&&c.size===this.query.limit?c.last():null;if(e.inorderTraversal(function(e,t){var n=c.get(e),r=t instanceof Rf?t:null;r&&(xl(e.isEqual(r.key),"Mismatching keys found in document changes: "+e+" != "+r.key),r=a.query.matches(r)?r:null);var i=!!n&&a.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||a.mutatedKeys.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(u.track({type:Ey.Metadata,doc:r}),s=!0):a.shouldWaitForSyncedDocument(n,r)||(u.track({type:Ey.Modified,doc:r}),s=!0,p&&0<a.query.docComparator(r,p)&&(f=!0)):!n&&r?(u.track({type:Ey.Added,doc:r}),s=!0):n&&!r&&(u.track({type:Ey.Removed,doc:n}),s=!0,p&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(e):h.delete(e)):(l=l.delete(e),h.delete(e)))}),this.query.hasLimit())for(;l.size>this.query.limit;){var n=l.last();l=l.delete(n.key),h=h.delete(n.key),u.track({type:Ey.Removed,doc:n})}return xl(!f||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:u,needsRefill:f,mutatedKeys:h}},Cb.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},Cb.prototype.applyChanges=function(e,t,n){var o=this;xl(!e.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var i=e.changeSet.getChanges();i.sort(function(e,t){return r=e.type,i=t.type,n(r)-n(i)||o.query.docComparator(e.doc,t.doc);function n(e){switch(e){case Ey.Added:return 1;case Ey.Modified:case Ey.Metadata:return 2;case Ey.Removed:return 0;default:return Il("Unknown ChangeType: "+e)}}var r,i}),this.applyTargetChange(n);var s=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Sy.Synced:Sy.Local,u=a!==this.syncState;return this.syncState=a,0!==i.length||u?{snapshot:new Ry(this.query,e.documentSet,r,i,e.mutatedKeys,a===Sy.Local,u,!1),limboChanges:s}:{limboChanges:s}},Cb.prototype.applyOnlineStateChange=function(e){return this.current&&e===eb.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ay,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},Cb.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},Cb.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return xl(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},Cb.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var n=this.limboDocuments;this.limboDocuments=wy(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var r=[];return n.forEach(function(e){t.limboDocuments.has(e)||r.push(new Eb(e))}),this.limboDocuments.forEach(function(e){n.has(e)||r.push(new Tb(e))}),r},Cb.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=wy();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},Cb.prototype.computeInitialSnapshot=function(){return Ry.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Sy.Local)},Cb);function Cb(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=wy(),this.mutatedKeys=wy(),this.documentSet=new xy(e.docComparator.bind(e))}function Ib(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}function xb(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=eb.Unknown,this.options=n||{}}function Nb(e){this.syncEngine=e,this.queries=new tg(function(e){return e.canonicalId()}),this.onlineState=eb.Unknown,this.syncEngine.subscribe(this)}function Db(e,t,n,r){this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new mb(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}function kb(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=eb.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}var Ab=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Rb=function(e){this.key=e},Ob=(Object.defineProperty(Jb.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),Jb.prototype.subscribe=function(e){xl(null!==e,"SyncEngine listener cannot be null"),xl(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},Jb.prototype.listen=function(s){return Xt(this,void 0,void 0,function(){var t,n,r,i,o;return Yt(this,function(e){switch(e.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(s))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(s)];case 2:return i=e.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=e.sent(),this.isPrimary&&this.remoteStore.listen(i),e.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},Jb.prototype.initializeViewAndComputeSnapshot=function(a,u){var c=this,h=a.query;return this.localStore.executeQuery(h).then(function(s){return c.localStore.remoteDocumentKeys(a.targetId).then(function(e){var t=new Sb(h,e),n=t.computeDocChanges(s),r=Py.createSynthesizedTargetChangeForCurrentChange(a.targetId,u&&c.onlineState!==eb.Offline),i=t.applyChanges(n,!0===c.isPrimary,r);xl(0===i.limboChanges.length,"View returned limbo docs before target ack from the server."),xl(!!i.snapshot,"applyChanges for new view should always return a snapshot");var o=new Ab(h,a.targetId,t);return c.queryViewsByQuery.set(h,o),c.queryViewsByTarget[a.targetId]=o,i.snapshot})})},Jb.prototype.synchronizeViewAndComputeSnapshot=function(i){var e=this;return this.localStore.executeQuery(i.query).then(function(r){return e.localStore.remoteDocumentKeys(i.targetId).then(function(n){return Xt(e,void 0,void 0,function(){var t;return Yt(this,function(e){return t=i.view.synchronizeWithPersistedState(r,n),this.isPrimary&&this.updateTrackedLimbos(i.targetId,t.limboChanges),[2,t]})})})})},Jb.prototype.unlisten=function(r){return Xt(this,void 0,void 0,function(){var t,n=this;return Yt(this,function(e){switch(e.label){case 0:return this.assertSubscribed("unlisten()"),xl(!!(t=this.queryViewsByQuery.get(r)),"Trying to unlisten on query not found:"+r),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(r,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(wv)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(r,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}})})},Jb.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},Jb.prototype.wrapUpdateFunctionError=function(e){return e},Jb.prototype.runTransaction=function(t,n){var r=this;void 0===n&&(n=5),xl(0<=n,"Got negative number of retries for transaction.");var i=this.remoteStore.createTransaction();return function(){try{var e=t(i);return!Xp(e)&&e.catch&&e.then?e.catch(function(e){return Promise.reject(r.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(e){return Promise.reject(r.wrapUpdateFunctionError(e))}}().then(function(e){return i.commit().then(function(){return e}).catch(function(e){return 0===n?Promise.reject(e):r.runTransaction(t,n-1)})})},Jb.prototype.applyRemoteEvent=function(t){var r=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(e){return jl(t.targetChanges,function(e,t){var n=r.limboResolutionsByTarget[e];n&&(xl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?n.receivedDocument=!0:0<t.modifiedDocuments.size?xl(n.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(xl(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),r.emitNewSnapsAndNotifyLocalStore(e,t)}).catch(wv)},Jb.prototype.applyOnlineStateChange=function(r,e){if(this.isPrimary&&e===tb.RemoteStore||!this.isPrimary&&e===tb.SharedClientState){var i=[];this.queryViewsByQuery.forEach(function(e,t){var n=t.view.applyOnlineStateChange(r);xl(0===n.limboChanges.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.syncEngineListener.onOnlineStateChange(r),this.syncEngineListener.onWatchChange(i),this.onlineState=r,this.isPrimary&&this.sharedClientState.setOnlineState(r)}},Jb.prototype.rejectListen=function(u,c){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a=this;return Yt(this,function(e){switch(e.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(u,"rejected",c),t=this.limboResolutionsByTarget[u],(n=t&&t.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[u],r=(r=new Lf(kf.comparator)).insert(n,new Of(n,pd.forDeletedDoc())),i=wy().add(n),o=new Oy(pd.MIN,{},new xd(sf),r,i),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return xl(!!(s=this.queryViewsByTarget[u]),"Unknown targetId: "+u),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return a.removeAndCleanupQuery(s)}).catch(wv)];case 2:e.sent(),this.syncEngineListener.onWatchError(s.query,c),e.label=3;case 3:return[2]}})})},Jb.prototype.applyBatchState=function(n,r,i){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(t=e.sent())?(El("SyncEngine","Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):Il("Unknown batchState: "+r),e.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(t)];case 5:return e.sent(),[2]}})})},Jb.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)}).catch(wv)},Jb.prototype.rejectFailedWrite=function(t,n){var r=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,n),this.localStore.rejectBatch(t).then(function(e){return r.sharedClientState.updateMutationState(t,"rejected",n),r.emitNewSnapsAndNotifyLocalStore(e)}).catch(wv)},Jb.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Lf(sf)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},Jb.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(xl(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},Jb.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},Jb.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},Jb.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Tb?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Eb?(El("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):Il("Unknown limbo change: "+JSON.stringify(i))}},Jb.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){El("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=nd.atPath(t.path);this.limboResolutionsByTarget[n]=new Rb(t),this.remoteStore.listen(new Id(r,n,$p.LimboResolution,ym.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},Jb.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},Jb.prototype.emitNewSnapsAndNotifyLocalStore=function(n,u){return Xt(this,void 0,void 0,function(){var o,s,t,a=this;return Yt(this,function(e){switch(e.label){case 0:return o=[],s=[],t=[],this.queryViewsByQuery.forEach(function(e,i){t.push(Promise.resolve().then(function(){var t=i.view.computeDocChanges(n);return t.needsRefill?a.localStore.executeQuery(i.query).then(function(e){return i.view.computeDocChanges(e,t)}):t}).then(function(e){var t=u&&u.targetChanges[i.targetId],n=i.view.applyChanges(e,!0===a.isPrimary,t);if(a.updateTrackedLimbos(i.targetId,n.limboChanges),n.snapshot){a.isPrimary&&a.sharedClientState.updateQueryState(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=_b.fromSnapshot(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(t)];case 1:return e.sent(),this.syncEngineListener.onWatchChange(o),[4,this.localStore.notifyLocalViewChanges(s)];case 2:return e.sent(),[2]}})})},Jb.prototype.assertSubscribed=function(e){xl(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},Jb.prototype.handleCredentialChange=function(r){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return t=!this.currentUser.isEqual(r),this.currentUser=r,t?[4,this.localStore.handleUserChange(r)]:[3,3];case 1:return n=e.sent(),this.sharedClientState.handleUserChange(r,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:e.sent(),e.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return e.sent(),[2]}})})},Jb.prototype.applyPrimaryState=function(c){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u=this;return Yt(this,function(e){switch(e.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return e.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=e.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),ql(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?s.push(e):a=a.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,a]);case 4:return e.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return e.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:e.sent(),e.label=7;case 7:return[2]}})})},Jb.prototype.resetLimboDocuments=function(){var t=this;ql(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Lf(kf.comparator)},Jb.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){for(var t=this,n=Promise.resolve(),s=[],a=[],r=function(o){n=n.then(function(){return Xt(t,void 0,void 0,function(){var t,n,r,i;return Yt(this,function(e){switch(e.label){case 0:return(n=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return e.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=e.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(r=e.sent()).snapshot&&a.push(r.snapshot),[3,8];case 4:return xl(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 5:return xl(!!(i=e.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(i)];case 6:return t=e.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:e.sent(),e.label=8;case 8:return s.push(t),[2]}})})})},i=0,o=e;i<o.length;i++)r(o[i]);return n.then(function(){return t.syncEngineListener.onWatchChange(a),s})},Jb.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},Jb.prototype.applyTargetState=function(i,o,n){return Xt(this,void 0,void 0,function(){var t,r=this;return Yt(this,function(e){switch(e.label){case 0:if(this.isPrimary)return El("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[i])return[3,5];switch(o){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return Xt(r,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return t=Oy.createSynthesizedRemoteEventForCurrentChange(i,"current"===o),[4,this.emitNewSnapsAndNotifyLocalStore(n,t)];case 1:return e.sent(),[2]}})})},function(n){return Xt(r,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return n.code===Rl.DATA_LOSS&&n.message===rg?(t=[],ql(this.queryViewsByTarget,function(e){return t.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]):[3,2];case 1:return e.sent(),[3,3];case 2:throw n;case 3:return[2]}})})})];case 2:return t=this.queryViewsByTarget[i],this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(t.query,!0)];case 3:return e.sent(),this.syncEngineListener.onWatchError(t.query,n),[3,5];case 4:Il("Unexpected target state: "+o),e.label=5;case 5:return[2]}})})},Jb.prototype.applyActiveTargetsChange=function(l,f){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,h=this;return Yt(this,function(e){switch(e.label){case 0:if(!this.isPrimary)return[2];t=0,n=l,e.label=1;case 1:return t<n.length?(c=n[t],xl(!this.queryViewsByTarget[c],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(c)]):[3,6];case 2:return xl(!!(r=e.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateQuery(r)];case 3:return i=e.sent(),[4,this.initializeViewAndComputeSnapshot(i,!1)];case 4:e.sent(),this.remoteStore.listen(i),e.label=5;case 5:return t++,[3,1];case 6:o=function(t){var n;return Yt(this,function(e){switch(e.label){case 0:return(n=s.queryViewsByTarget[t])?[4,s.localStore.releaseQuery(n.query,!1).then(function(){h.remoteStore.unlisten(t),h.removeAndCleanupQuery(n)}).catch(wv)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},s=this,a=0,u=f,e.label=7;case 7:return a<u.length?(c=u[a],[5,o(c)]):[3,10];case 8:e.sent(),e.label=9;case 9:return a++,[3,7];case 10:return[2]}})})},Jb.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},Jb.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},Jb.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?wy().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:wy()},Jb),Pb=($b.prototype.isAuthenticated=function(){return null!=this.uid},$b.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},$b.prototype.isEqual=function(e){return e.uid===this.uid},$b.UNAUTHENTICATED=new $b(null),$b.GOOGLE_CREDENTIALS=new $b("google-credentials-uid"),$b.FIRST_PARTY=new $b("first-party-uid"),$b),Lb="SharedClientState",Mb="firestore_clients",Fb="firestore_mutations",qb="firestore_targets",jb=(Yb.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ol(r.error.code,r.error.message)),i?new Yb(e,t,r.state,o):(Sl(Lb,"Failed to parse mutation state for ID '"+t+"': "+n),null)},Yb.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Yb),Ub=(Xb.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Ol(n.error.code,n.error.message)),r?new Xb(e,n.state,i):(Sl(Lb,"Failed to parse target state for ID '"+e+"': "+t),null)},Xb.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Xb),Bb=(Gb.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ty(),o=0;r&&o<n.activeTargetIds.length;++o)r=Yp(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Gb(e,i):(Sl(Lb,"Failed to parse client data for instance '"+e+"': "+t),null)},Gb),Vb=(zb.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&void 0!==eb[t.onlineState]&&"string"==typeof t.clientId?new zb(t.clientId,eb[t.onlineState]):(Sl(Lb,"Failed to parse online state: "+e),null)},zb),Wb=(Qb.prototype.addQueryTarget=function(e){xl(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},Qb.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},Qb.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},Qb),Hb=(Kb.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},Kb.prototype.start=function(){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,h,l,f=this;return Yt(this,function(e){switch(e.label){case 0:return xl(!this.started,"WebStorageSharedClientState already started"),xl(null!==this.syncEngine,"syncEngine property must be set before calling start()"),xl(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(i)))&&(s=Bb.fromWebStorageEntry(i,o))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,h=this.earlyEvents;c<h.length;c++)l=h[c],this.handleWebStorageEvent(l);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},Kb.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},Kb.prototype.getAllActiveQueryTargets=function(){var n=Ty();return jl(this.activeClients,function(e,t){n=n.unionWith(t.activeTargetIds)}),n},Kb.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},Kb.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},Kb.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},Kb.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Ub.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},Kb.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},Kb.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},Kb.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},Kb.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},Kb.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},Kb.prototype.setOnlineState=function(e){this.persistOnlineState(e)},Kb.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Kb.prototype.getItem=function(e){var t=this.storage.getItem(e);return El(Lb,"READ",e,t),t},Kb.prototype.setItem=function(e,t){El(Lb,"SET",e,t),this.storage.setItem(e,t)},Kb.prototype.removeItem=function(e){El(Lb,"REMOVE",e),this.storage.removeItem(e)},Kb.prototype.handleWebStorageEvent=function(a){var e=this;if(a.storageArea===this.storage){if(El(Lb,"EVENT",a.key,a.newValue),a.key===this.localClientStorageKey)return void Sl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Xt(e,void 0,void 0,function(){var t,n,r,i,o,s;return Yt(this,function(e){if(!this.started)return this.earlyEvents.push(a),[2];if(null===a.key)return[2];if(this.clientStateKeyRe.test(a.key)){if(null==a.newValue)return n=this.fromWebStorageClientStateKey(a.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(a.key,a.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(a.key)){if(null!==a.newValue&&(r=this.fromWebStorageMutationMetadata(a.key,a.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(a.key)){if(null!==a.newValue&&(i=this.fromWebStorageQueryTargetMetadata(a.key,a.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(a.key===this.onlineStateKey){if(null!==a.newValue&&(o=this.fromWebStorageOnlineState(a.newValue)))return[2,this.handleOnlineStateEvent(o)]}else a.key===this.sequenceNumberKey&&(xl(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ym.INVALID;if(null!=e)try{var n=JSON.parse(e);xl("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){Sl(Lb,"Failed to read sequence number from WebStorage",e)}return t}(a.newValue))!==ym.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(Kb.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Kb.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Kb.prototype.persistMutationState=function(e,t,n){var r=new jb(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},Kb.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},Kb.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:eb[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},Kb.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Ub(e,t,n);this.setItem(r,i.toWebStorageJSON())},Kb.prototype.toWebStorageClientStateKey=function(e){return xl(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Mb+"_"+this.persistenceKey+"_"+e},Kb.prototype.toWebStorageQueryTargetMetadataKey=function(e){return qb+"_"+this.persistenceKey+"_"+e},Kb.prototype.toWebStorageMutationBatchKey=function(e){var t=Fb+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},Kb.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},Kb.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return xl(null!==n,"Cannot parse client state key '"+e+"'"),Bb.fromWebStorageEntry(n,t)},Kb.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);xl(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jb.fromWebStorageEntry(new Pb(i),r,t)},Kb.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);xl(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ub.fromWebStorageEntry(r,t)},Kb.prototype.fromWebStorageOnlineState=function(e){return Vb.fromWebStorageEntry(e)},Kb.prototype.handleMutationBatchEvent=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return t.user.uid!==this.currentUser.uid?(El(Lb,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},Kb.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},Kb.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return Xt(n,void 0,void 0,function(){return Yt(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return Xt(n,void 0,void 0,function(){return Yt(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},Kb.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},Kb);function Kb(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Kb.isAvailable(this.platform))throw new Ol(Rl.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new Wb,this.clientStateKeyRe=new RegExp("^"+Mb+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Fb+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+qb+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}function Qb(){this.activeTargetIds=Ty()}function zb(e,t){this.clientId=e,this.onlineState=t}function Gb(e,t){this.clientId=e,this.activeTargetIds=t}function Xb(e,t,n){this.targetId=e,this.state=t,xl(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function Yb(e,t,n,r){this.user=e,this.batchId=t,this.state=n,xl(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function $b(e){this.uid=e}function Jb(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new tg(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Lf(kf.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new xv,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Mm.forSyncEngine(),this.isPrimary=void 0,this.onlineState=eb.Unknown}var Zb=(hw.prototype.addPendingMutation=function(e){},hw.prototype.updateMutationState=function(e,t,n){},hw.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},hw.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},hw.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},hw.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},hw.prototype.clearQueryState=function(e){delete this.queryState[e]},hw.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},hw.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},hw.prototype.start=function(){return this.localState=new Wb,Promise.resolve()},hw.prototype.handleUserChange=function(e,t,n){},hw.prototype.setOnlineState=function(e){},hw.prototype.shutdown=function(){},hw.prototype.writeSequenceNumber=function(e){},hw),ew=(cw.prototype.lruParams=function(){return sv.withCacheSize(this.cacheSizeBytes)},cw),tw=function(){},nw=(uw.prototype.start=function(e){var n=this,r=new mm,i=new mm,o=!1;return this.credentials.setChangeListener(function(t){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(t)}):(o=!0,n.initializePersistence(e,i,t).then(function(e){return n.initializeRest(t,e)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},uw.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},uw.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof ew?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},uw.prototype.canFallback=function(e){return e instanceof Ol?e.code===Rl.FAILED_PRECONDITION||e.code===Rl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code},uw.prototype.startIndexedDbPersistence=function(r,i){var e=this,o=pv.buildStoragePrefix(this.databaseInfo),s=new tm(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Xt(e,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:if(i.experimentalTabSynchronization&&!Hb.isAvailable(this.platform))throw new Ol(Rl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=i.lruParams(),i.experimentalTabSynchronization?(this.sharedClientState=new Hb(this.asyncQueue,this.platform,o,this.clientId,r),[4,pv.createMultiClientIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,s,n,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return t=e.sent(),[3,4];case 2:return this.sharedClientState=new Zb,[4,pv.createIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,s,n)];case 3:t=e.sent(),e.label=4;case 4:return[2,(this.persistence=t).referenceDelegate.garbageCollector]}})})})},uw.prototype.startMemoryPersistence=function(){return this.persistence=Wv.createEagerPersistence(this.clientId),this.sharedClientState=new Zb,Promise.resolve(null)},uw.prototype.initializeRest=function(a,u){var e=this;return El("FirestoreClient","Initializing. user=",a.uid),this.platform.loadConnection(this.databaseInfo).then(function(s){return Xt(e,void 0,void 0,function(){var t,n,r,i,o=this;return Yt(this,function(e){switch(e.label){case 0:return this.localStore=new Dv(this.persistence,a),u&&(this.lruScheduler=new av(u,this.asyncQueue,this.localStore)),t=this.platform.newSerializer(this.databaseInfo.databaseId),n=new cb(this.asyncQueue,s,this.credentials,t),r=function(e){return o.syncEngine.applyOnlineStateChange(e,tb.RemoteStore)},i=function(e){return o.syncEngine.applyOnlineStateChange(e,tb.SharedClientState)},this.remoteStore=new gb(this.localStore,n,this.asyncQueue,r),this.syncEngine=new Ob(this.localStore,this.remoteStore,this.sharedClientState,a),this.sharedClientState.onlineStateHandler=i,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new bb(this.syncEngine),[4,this.sharedClientState.start()];case 1:return e.sent(),[4,this.remoteStore.start()];case 2:return e.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return Xt(o,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 3:return e.sent(),[2]}})})})},uw.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),El("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},uw.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},uw.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return Xt(e,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},uw.prototype.listen=function(e,t,n){var r=this,i=new wb(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},uw.prototype.unlisten=function(e){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},uw.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Rf)return e;if(e instanceof Of)return null;throw new Ol(Rl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},uw.prototype.getDocumentsFromLocalCache=function(i){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(i)}).then(function(e){var t=wy(),n=new Sb(i,t),r=n.computeDocChanges(e);return n.applyChanges(r,!1).snapshot})},uw.prototype.write=function(e){var t=this,n=new mm;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},uw.prototype.databaseId=function(){return this.databaseInfo.databaseId},uw.prototype.transaction=function(e){var t=this;return this.asyncQueue.enqueue(function(){return Xt(t,void 0,void 0,function(){return Yt(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},uw),rw=(aw.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},aw.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},aw.prototype.mute=function(){this.muted=!0},aw.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},aw),iw=(sw.documentId=function(){return sw._DOCUMENT_ID},sw.prototype.isEqual=function(e){if(!(e instanceof sw))throw ef("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},sw._DOCUMENT_ID=new sw(Df.keyField().canonicalString()),sw),ow=new RegExp("[~\\*/\\[\\]]");function sw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(){if(!(e instanceof Array)||e.length<1)throw new Ol(Rl.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var n=0;n<e.length;++n)if(Hl("FieldPath","string",n,e[n]),0===e[n].length)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Df(e)}function aw(e){this.observer=e,this.muted=!1}function uw(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=rf.newId()}function cw(e,t){this.cacheSizeBytes=e,this.experimentalTabSynchronization=t}function hw(){this.localState=new Wb,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var lw=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},fw=(bw.prototype.getToken=function(){return Promise.resolve(null)},bw.prototype.invalidateToken=function(){},bw.prototype.setChangeListener=function(e){xl(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Pb.UNAUTHENTICATED)},bw.prototype.removeChangeListener=function(){xl(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},bw),pw=(vw.prototype.getToken=function(){var t=this;xl(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.tokenCounter,e=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(e).then(function(e){if(t.tokenCounter!==n)throw new Ol(Rl.ABORTED,"getToken aborted due to token change.");return e?(xl("string"==typeof e.accessToken,"Invalid tokenData returned from getToken():"+e),new lw(e.accessToken,t.currentUser)):null})},vw.prototype.invalidateToken=function(){this.forceRefresh=!0},vw.prototype.setChangeListener=function(e){xl(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},vw.prototype.removeChangeListener=function(){xl(null!=this.tokenListener,"removeChangeListener() called twice"),xl(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},vw.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return xl(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pb(e)},vw),dw=(Object.defineProperty(gw.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),gw),yw=(mw.prototype.getToken=function(){return Promise.resolve(new dw(this.gapi,this.sessionIndex))},mw.prototype.setChangeListener=function(e){e(Pb.FIRST_PARTY)},mw.prototype.removeChangeListener=function(){},mw.prototype.invalidateToken=function(){},mw);function mw(e,t){this.gapi=e,this.sessionIndex=t,xl(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}function gw(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pb.FIRST_PARTY,xl(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}function vw(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}function bw(){this.changeListener=null}function ww(i){return function(){if("object"==typeof i&&null!==i)for(var e=i,t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return 1}}()}var _w,Tw,Ew,Sw,Cw,Iw,xw=(Vw.delete=function(){return Nw.instance},Vw.serverTimestamp=function(){return Dw.instance},Vw.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Vl("FieldValue.arrayUnion",arguments,1),new kw(e)},Vw.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Vl("FieldValue.arrayRemove",arguments,1),new Aw(e)},Vw.prototype.isEqual=function(e){return this===e},Vw),Nw=(zt(Bw,Cw=xw),Bw.instance=new Bw,Bw),Dw=(zt(Uw,Sw=xw),Uw.instance=new Uw,Uw),kw=(zt(jw,Ew=xw),jw),Aw=(zt(qw,Tw=xw),qw),Rw=Ll(xw,"Use FieldValue.<field>() instead."),Ow=/^__.*__$/,Pw=(Fw.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Hd(e,this.data,this.fieldMask,t)):n.push(new Wd(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Kd(e,this.fieldTransforms)),n},Fw),Lw=(Mw.prototype.toMutations=function(e,t){var n=[new Hd(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Kd(e,this.fieldTransforms)),n},Mw);function Mw(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function Fw(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function qw(e){var t=Tw.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}function jw(e){var t=Ew.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}function Uw(){return Sw.call(this,"FieldValue.serverTimestamp")||this}function Bw(){return Cw.call(this,"FieldValue.delete")||this}function Vw(e){this._methodName=e}function Ww(e){switch(e){case _w.Set:case _w.MergeSet:case _w.Update:return 1;case _w.Argument:return;default:throw Il("Unexpected case for UserDataSource: "+e)}}(Iw=_w=_w||{})[Iw.Set=0]="Set",Iw[Iw.Update=1]="Update",Iw[Iw.MergeSet=2]="MergeSet",Iw[Iw.Argument=3]="Argument";var Hw=(Gw.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new Gw(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},Gw.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new Gw(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Gw.prototype.childContextForArray=function(e){return new Gw(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Gw.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Ol(Rl.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},Gw.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},Gw.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},Gw.prototype.validatePathSegment=function(e){if(Ww(this.dataSource)&&Ow.test(e))throw this.createError("Document fields cannot begin and end with __")},Gw),Kw=function(e,t){this.databaseId=e,this.key=t},Qw=(zw.prototype.parseSetData=function(e,t){var n=new Hw(_w.Set,e,Df.EMPTY_PATH);Yw("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Pw(r,null,n.fieldTransforms)},zw.prototype.parseMergeData=function(e,t,n){var r=new Hw(_w.MergeSet,e,Df.EMPTY_PATH);Yw("Data must be an object, but it was:",r,t);var i,o,s=this.parseData(t,r);if(n){for(var a=new xd(Df.comparator),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof iw)l=h._internalPath;else{if("string"!=typeof h)throw Il("Expected stringOrFieldPath to be a string or a FieldPath");l=Jw(e,h)}if(!r.contains(l))throw new Ol(Rl.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=Dd.fromSet(a),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Dd.fromArray(r.fieldMask),o=r.fieldTransforms;return new Pw(s,i,o)},zw.prototype.parseUpdateData=function(o,e){var s=this,a=new Hw(_w.Update,o,Df.EMPTY_PATH);Yw("Data must be an object, but it was:",a,e);var u=new xd(Df.comparator),c=Op.EMPTY;jl(e,function(e,t){var n=Jw(o,e),r=a.childContextForFieldPath(n);if((t=s.runPreConverter(t,r))instanceof Nw)u=u.add(n);else{var i=s.parseData(t,r);null!=i&&(u=u.add(n),c=c.set(n,i))}});var t=Dd.fromSet(u);return new Lw(c,t,a.fieldTransforms)},zw.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Hw(_w.Update,e,Df.EMPTY_PATH),o=[$w(e,t)],s=[n];if(r.length%2!=0)throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push($w(e,r[a])),s.push(r[a+1]);var u=new xd(Df.comparator),c=Op.EMPTY;for(a=0;a<o.length;++a){var h=o[a],l=i.childContextForFieldPath(h),f=this.runPreConverter(s[a],l);if(f instanceof Nw)u=u.add(h);else{var p=this.parseData(f,l);null!=p&&(u=u.add(h),c=c.set(h,p))}}var d=Dd.fromSet(u);return new Lw(c,d,i.fieldTransforms)},zw.prototype.parseQueryValue=function(e,t){var n=new Hw(_w.Argument,e,Df.EMPTY_PATH),r=this.parseData(t,n);return xl(null!=r,"Parsed data should not be null."),xl(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},zw.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Zw(e);throw t.createError(n)}},zw.prototype.parseData=function(e,t){if(Xw(e=this.runPreConverter(e,t)))return Yw("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof xw)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},zw.prototype.parseObject=function(e,r){var i=this,o=new Lf(sf);return Ul(e)?r.path&&0<r.path.length&&r.fieldMask.push(r.path):jl(e,function(e,t){var n=i.parseData(t,r.childContextForField(e));null!=n&&(o=o.insert(e,n))}),new Op(o)},zw.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var s=o[i],a=this.parseData(s,t.childContextForArray(r));null==a&&(a=sp.INSTANCE),n.push(a),r++}return new Pp(n)},zw.prototype.parseSentinelFieldValue=function(e,t){if(!Ww(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Nw){if(t.dataSource!==_w.MergeSet)throw t.dataSource===_w.Update?(xl(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Dw)t.fieldTransforms.push(new kd(t.path,zd.instance));else if(e instanceof kw){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Gd(n);t.fieldTransforms.push(new kd(t.path,r))}else if(e instanceof Aw){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new Xd(n);t.fieldTransforms.push(new kd(t.path,i))}else Il("Unknown FieldValue type: "+e)},zw.prototype.parseScalarValue=function(e,t){if(null===e)return sp.INSTANCE;if("number"==typeof e)return new(Yp(e)?Cp:Ip)(e);if("boolean"==typeof e)return ap.of(e);if("string"==typeof e)return new xp(e);if(e instanceof Date)return new Np(Tf.fromDate(e));if(e instanceof Tf)return new Np(new Tf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof _f)return new Rp(e);if(e instanceof bf)return new kp(e);if(e instanceof Kw)return new Ap(e.databaseId,e.key);throw t.createError("Unsupported field value: "+$l(e))},zw.prototype.parseArrayTransformElements=function(r,e){var i=this;return e.map(function(e,t){var n=new Hw(_w.Argument,r,Df.EMPTY_PATH);return i.parseData(e,n.childContextForArray(t))})},zw);function zw(e){this.preConverter=e}function Gw(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}function Xw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tf||e instanceof _f||e instanceof bf||e instanceof Kw||e instanceof xw)}function Yw(e,t,n){if(!Xw(n)||!Yl(n)){var r=$l(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function $w(e,t){if(t instanceof iw)return t._internalPath;if("string"==typeof t)return Jw(e,t);throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Jw(e,t){try{return function(t){if(0<=t.search(ow))throw new Ol(Rl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(iw.bind.apply(iw,[void 0].concat(t.split("."))))}catch(e){throw new Ol(Rl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Zw(t);throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Zw(e){return e instanceof Error?e.message:e.toString()}var e_,t_=sv.COLLECTION_DISABLED,n_=(T_.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes},T_),r_=function(){},i_=(__.prototype.settings=function(e){if(Bl("Firestore.settings",arguments,1),Hl("Firestore.settings","object",1,e),Ml(e,"persistence"))throw new Ol(Rl.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new n_(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new Ol(Rl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=t).credentials&&(this._config.credentials=function(e){if(!e)return new fw;switch(e.type){case"gapi":return new yw(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new Ol(Rl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},__.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},__.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},__.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Ol(Rl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new ew(this._config.settings.cacheSizeBytes,void 0!==e&&Fl(e.experimentalTabSynchronization,!1)))},__.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new tw),this._firestoreClient},__.prototype.configureClient=function(e){var r=this;xl(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),xl(!this._firestoreClient,"configureClient() called multiple times");var t=new Ef(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new Qw(function(e){if(e instanceof a_){var t=r._config.databaseId,n=e.firestore._config.databaseId;if(!n.isEqual(t))throw new Ol(Rl.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+t.projectId+"/"+t.database);return new Kw(r._config.databaseId,e._key)}return e}),this._firestoreClient=new nw(Nl.getPlatform(),t,this._config.credentials,this._queue),this._firestoreClient.start(e)},__.databaseIdFromApp=function(e){var t=e.options;if(!Ml(t,"projectId"))throw new Ol(Rl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Ol(Rl.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Cf(n)},Object.defineProperty(__.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Ol(Rl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),__.prototype.collection=function(e){if(Bl("Firestore.collection",arguments,1),Hl("Firestore.collection","non-empty string",1,e),!e)throw new Ol(Rl.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new S_(xf.fromString(e),this)},__.prototype.doc=function(e){if(Bl("Firestore.doc",arguments,1),Hl("Firestore.doc","non-empty string",1,e),!e)throw new Ol(Rl.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),a_.forPath(xf.fromString(e),this)},__.prototype.runTransaction=function(t){var n=this;return Bl("Firestore.runTransaction",arguments,1),Hl("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(e){return t(new o_(n,e))})},__.prototype.batch=function(){return this.ensureClientConfigured(),new s_(this)},Object.defineProperty(__,"logLevel",{get:function(){switch(_l()){case ll.DEBUG:return"debug";case ll.ERROR:return"error";case ll.SILENT:return"silent";default:return Il("Unknown log level: "+_l())}},enumerable:!0,configurable:!0}),__.setLogLevel=function(e){switch(Bl("Firestore.setLogLevel",arguments,1),Hl("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":Tl(ll.DEBUG);break;case"error":Tl(ll.ERROR);break;case"silent":Tl(ll.SILENT);break;default:throw new Ol(Rl.INVALID_ARGUMENT,"Invalid log level: "+e)}},__.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},__),o_=(w_.prototype.get=function(e){var n=this;Bl("Transaction.get",arguments,1);var r=D_("Transaction.get",e,this._firestore);return this._transaction.lookup([r._key]).then(function(e){if(!e||1!==e.length)return Il("Mismatch in docs returned from document lookup.");var t=e[0];if(t instanceof Of)return new c_(n._firestore,r._key,null,!1,!1);if(t instanceof Rf)return new c_(n._firestore,r._key,t,!1,!1);throw Il("BatchGetDocumentsRequest returned unexpected document type: "+t.constructor.name)})},w_.prototype.set=function(e,t,n){Wl("Transaction.set",arguments,2,3);var r=D_("Transaction.set",e,this._firestore),i=(n=I_("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},w_.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof t||t instanceof iw?(Vl("Transaction.update",arguments,3),r=D_("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(Bl("Transaction.update",arguments,2),r=D_("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},w_.prototype.delete=function(e){Bl("Transaction.delete",arguments,1);var t=D_("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},w_),s_=(b_.prototype.set=function(e,t,n){Wl("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=D_("WriteBatch.set",e,this._firestore),i=(n=I_("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Bd.NONE)),this},b_.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof iw?(Vl("WriteBatch.update",arguments,3),r=D_("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(Bl("WriteBatch.update",arguments,2),r=D_("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Bd.exists(!0))),this},b_.prototype.delete=function(e){Bl("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=D_("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Qd(t._key,Bd.NONE)),this},b_.prototype.commit=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},b_.prototype.verifyNotCommitted=function(){if(this._committed)throw new Ol(Rl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},b_),a_=(v_.forPath=function(e,t){if(e.length%2!=0)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new v_(new kf(e),t)},Object.defineProperty(v_.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(v_.prototype,"parent",{get:function(){return new S_(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(v_.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),v_.prototype.collection=function(e){if(Bl("DocumentReference.collection",arguments,1),Hl("DocumentReference.collection","non-empty string",1,e),!e)throw new Ol(Rl.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=xf.fromString(e);return new S_(this._key.path.child(t),this.firestore)},v_.prototype.isEqual=function(e){if(!(e instanceof v_))throw ef("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},v_.prototype.set=function(e,t){Wl("DocumentReference.set",arguments,1,2);var n=(t=I_("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Bd.NONE))},v_.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof iw?(Vl("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(Bl("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Bd.exists(!0)))},v_.prototype.delete=function(){return Bl("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Qd(this._key,Bd.NONE)])},v_.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Wl("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||ww(e[i])||(Zl("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),zl("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=ww(e[i])?e[i]:(Hl("DocumentReference.onSnapshot","function",i,e[i]),Kl("DocumentReference.onSnapshot","function",i+1,e[i+1]),Kl("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},v_.prototype.onSnapshotInternal=function(e,n){var r=this,t=function(e){console.error("Uncaught Error in onSnapshot:",e)};n.error&&(t=n.error.bind(n));var i=new rw({next:function(e){if(n.next){xl(e.docs.size<=1,"Too many documents returned on a document query");var t=e.docs.get(r._key);n.next(new c_(r.firestore,r._key,t,e.fromCache,e.hasPendingWrites))}},error:t}),o=this._firestoreClient.listen(nd.atPath(this._key.path),i,e);return function(){i.mute(),r._firestoreClient.unlisten(o)}},v_.prototype.get=function(n){var r=this;return Wl("DocumentReference.get",arguments,0,1),N_("DocumentReference.get",n),new Promise(function(t,e){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(e){t(new c_(r.firestore,r._key,e,!0,e instanceof Rf&&e.hasLocalMutations))},e):r.getViaSnapshotListener(t,e,n)})},v_.prototype.getViaSnapshotListener=function(t,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){i(),!e.exists&&e.metadata.fromCache?n(new Ol(Rl.UNAVAILABLE,"Failed to get document because the client is offline.")):e.exists&&e.metadata.fromCache&&r&&"server"===r.source?n(new Ol(Rl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(e)},error:n})},v_),u_=(g_.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},g_),c_=(m_.prototype.data=function(e){return Wl("DocumentSnapshot.data",arguments,0,1),e=x_("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,ip.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},m_.prototype.get=function(e,t){if(Wl("DocumentSnapshot.get",arguments,1,2),t=x_("DocumentSnapshot.get",t),this._document){var n=this._document.data.field($w("DocumentSnapshot.get",e));if(void 0!==n)return this.convertValue(n,ip.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(m_.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"ref",{get:function(){return new a_(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"metadata",{get:function(){return new u_(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),m_.prototype.isEqual=function(e){if(!(e instanceof m_))throw ef("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},m_.prototype.convertObject=function(e,n){var r=this,i={};return e.forEach(function(e,t){i[e]=r.convertValue(t,n)}),i},m_.prototype.convertValue=function(e,t){if(e instanceof Op)return this.convertObject(e,t);if(e instanceof Pp)return this.convertArray(e,t);if(e instanceof Ap){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||Sl("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new a_(n,this._firestore)}return e.value(t)},m_.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},m_),h_=(zt(y_,e_=c_),y_.prototype.data=function(e){var t=e_.prototype.data.call(this,e);return xl("object"==typeof t,"Document in a QueryDocumentSnapshot should exist"),t},y_),l_=(d_.prototype.where=function(e,t,n){var r;Bl("Query.where",arguments,3),Hl("Query.where","non-empty string",2,t),Jl("Query.where",3,n);var i=$w("Query.where",e),o=id.fromString(t);if(i.isKeyField()){if(o===id.ARRAY_CONTAINS)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof n){if(-1!==n.indexOf("/"))throw new Ol(Rl.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===n)throw new Ol(Rl.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new xf([n]));xl(s.length%2==0,"Path should be a document key"),r=new Ap(this.firestore._databaseId,new kf(s))}else{if(!(n instanceof a_))throw new Ol(Rl.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+$l(n)+".");var a=n;r=new Ap(this.firestore._databaseId,a._key)}}else r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var u=rd.create(i,o,r);return this.validateNewFilter(u),new d_(this._query.addFilter(u),this.firestore)},d_.prototype.orderBy=function(e,t){var n;if(Wl("Query.orderBy",arguments,1,2),Kl("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=ud.ASCENDING;else{if("desc"!==t)throw new Ol(Rl.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=ud.DESCENDING}if(null!==this._query.startAt)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=$w("Query.orderBy",e),i=new hd(r,n);return this.validateNewOrderBy(i),new d_(this._query.addOrderBy(i),this.firestore)},d_.prototype.limit=function(e){if(Bl("Query.limit",arguments,1),Hl("Query.limit","number",1,e),e<=0)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new d_(this._query.withLimit(e),this.firestore)},d_.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vl("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new d_(this._query.withStartAt(r),this.firestore)},d_.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vl("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new d_(this._query.withStartAt(r),this.firestore)},d_.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vl("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new d_(this._query.withEndAt(r),this.firestore)},d_.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vl("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new d_(this._query.withEndAt(r),this.firestore)},d_.prototype.isEqual=function(e){if(!(e instanceof d_))throw ef("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},d_.prototype.boundFromDocOrFields=function(e,t,n,r){if(Jl(e,1,t),t instanceof c_){if(0<n.length)throw new Ol(Rl.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Ol(Rl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},d_.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Ap(this.firestore._databaseId,t.key));else{var a=t.field(s.field);if(a instanceof Dp)throw new Ol(Rl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===a){var u=s.field.canonicalString();throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new cd(r,n)},d_.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Ol(Rl.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var s=t[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+e+"()");var a=new kf(this._query.path.child(s));i.push(new Ap(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(e,s);i.push(u)}}return new cd(i,n)},d_.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Wl("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||ww(e[i])||(Zl("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),zl("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=ww(e[i])?e[i]:(Hl("Query.onSnapshot","function",i,e[i]),Kl("Query.onSnapshot","function",i+1,e[i+1]),Kl("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},d_.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new rw({next:function(e){t.next&&t.next(new f_(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(s)}},d_.prototype.get=function(n){var r=this;return Wl("Query.get",arguments,0,1),N_("Query.get",n),new Promise(function(t,e){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(e){t(new f_(r.firestore,r._query,e))},e):r.getViaSnapshotListener(t,e,n)})},d_.prototype.getViaSnapshotListener=function(t,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){i(),e.metadata.fromCache&&r&&"server"===r.source?n(new Ol(Rl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(e)},error:n})},d_.prototype.validateNewFilter=function(e){if(e instanceof od)if(e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(e.field))throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}else if(e.op===id.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},d_.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},d_.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Ol(Rl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},d_),f_=(Object.defineProperty(p_.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(p_.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(p_.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),p_.prototype.forEach=function(t,n){var r=this;Wl("QuerySnapshot.forEach",arguments,1,2),Hl("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(e){t.call(n,r.convertToDocumentImpl(e))})},Object.defineProperty(p_.prototype,"query",{get:function(){return new l_(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),p_.prototype.docChanges=function(e){e&&(Zl("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),zl("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Ol(Rl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,t,o){if(o.oldDocs.isEmpty()){var n,r=0;return o.docChanges.map(function(e){var t=new h_(i,e.doc.key,e.doc,o.fromCache,o.mutatedKeys.has(e.doc.key));return xl(e.type===Ey.Added,"Invalid event type for first snapshot"),xl(!n||o.query.docComparator(n,e.doc)<0,"Got added events in wrong order"),n=e.doc,{type:"added",doc:t,oldIndex:-1,newIndex:r++}})}var s=o.oldDocs;return o.docChanges.filter(function(e){return t||e.type!==Ey.Metadata}).map(function(e){var t=new h_(i,e.doc.key,e.doc,o.fromCache,o.mutatedKeys.has(e.doc.key)),n=-1,r=-1;return e.type!==Ey.Added&&(xl(0<=(n=s.indexOf(e.doc.key)),"Index for document not found"),s=s.delete(e.doc.key)),e.type!==Ey.Removed&&(r=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:function(e){switch(e){case Ey.Added:return"added";case Ey.Modified:case Ey.Metadata:return"modified";case Ey.Removed:return"removed";default:return Il("Unknown change type: "+e)}}(e.type),doc:t,oldIndex:n,newIndex:r}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},p_.prototype.isEqual=function(e){if(!(e instanceof p_))throw ef("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},p_.prototype.convertToDocumentImpl=function(e){return new h_(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},p_);function p_(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new u_(n.hasPendingWrites,n.fromCache)}function d_(e,t){this._query=e,this.firestore=t}function y_(e,t,n,r,i){return e_.call(this,e,t,n,r,i)||this}function m_(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}function g_(e,t){this.hasPendingWrites=e,this.fromCache=t}function v_(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}function b_(e){this._firestore=e,this._mutations=[],this._committed=!1}function w_(e,t){this._firestore=e,this._transaction=t}function __(e){var n=this;this._queue=new bm,this.INTERNAL={delete:function(t){return Xt(n,void 0,void 0,function(){return Yt(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var t=new r_;if("object"==typeof e.options){var r=e;t.firebaseApp=r,t.databaseId=__.databaseIdFromApp(r),t.persistenceKey=t.firebaseApp.name,t.credentials=new pw(r)}else{var i=e;if(!i.projectId)throw new Ol(Rl.INVALID_ARGUMENT,"Must provide projectId");t.databaseId=new Cf(i.projectId,i.database),t.persistenceKey="[DEFAULT]",t.credentials=new fw}t.settings=new n_({}),this._config=t,this._databaseId=t.databaseId}function T_(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Ol(Rl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Ql("settings","non-empty string","host",e.host),this.host=e.host,zl("settings","boolean","ssl",e.ssl),this.ssl=Fl(e.ssl,!0);if(Zl("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),zl("settings","object","credentials",e.credentials),this.credentials=e.credentials,zl("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?Sl("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&Sl("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Fl(e.timestampsInSnapshots,!0),zl("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=sv.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==t_&&e.cacheSizeBytes<sv.MINIMUM_CACHE_SIZE_BYTES)throw new Ol(Rl.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+sv.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}}["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(f_.prototype.docChanges,e,{get:function(){return function(){throw new Ol(Rl.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var E_,S_=(zt(C_,E_=l_),Object.defineProperty(C_.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new a_(new kf(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),C_.prototype.doc=function(e){if(Wl("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=rf.newId()),Hl("CollectionReference.doc","non-empty string",1,e),""===e)throw new Ol(Rl.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=xf.fromString(e);return a_.forPath(this._query.path.child(t),this.firestore)},C_.prototype.add=function(e){Bl("CollectionReference.add",arguments,1),Hl("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},C_);function C_(e,t){var n=E_.call(this,nd.atPath(e),t)||this;if(e.length%2!=1)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return n}function I_(e,t){if(void 0===t)return{merge:!1};if(Zl(e,t,["merge","mergeFields"]),zl(e,"boolean","merge",t.merge),n=e,r="mergeFields",i="a string or a FieldPath",o=t.mergeFields,s=function(e){return"string"==typeof e||e instanceof iw},void 0!==o&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+$l(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ol(Rl.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+$l(r[o]))}(n,r,i,o,s),void 0!==t.mergeFields&&void 0!==t.merge)throw new Ol(Rl.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n,r,i,o,s;return t}function x_(e,t){return void 0===t?{}:(Zl(e,t,["serverTimestamps"]),Gl(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function N_(e,t){Kl(e,"object",1,t),t&&(Zl(e,t,["source"]),Gl(e,0,"source",t.source,["default","server","cache"]))}function D_(e,t,n){if(t instanceof a_){if(t.firestore!==n)throw new Ol(Rl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw ef(e,"DocumentReference",1,t)}var k_=Ll(i_,"Use firebase.firestore() instead."),A_=Ll(o_,"Use firebase.firestore().runTransaction() instead."),R_=Ll(s_,"Use firebase.firestore().batch() instead."),O_=Ll(a_,"Use firebase.firestore().doc() instead."),P_=Ll(c_),L_=Ll(h_),M_=Ll(l_),F_=Ll(f_),q_=Ll(S_,"Use firebase.firestore().collection() instead."),j_={Firestore:k_,GeoPoint:_f,Timestamp:Tf,Blob:wf,Transaction:A_,WriteBatch:R_,DocumentReference:O_,DocumentSnapshot:P_,Query:M_,QueryDocumentSnapshot:L_,QuerySnapshot:F_,CollectionReference:q_,FieldPath:iw,FieldValue:Rw,setLogLevel:i_.setLogLevel,CACHE_SIZE_UNLIMITED:t_};fh.INTERNAL.registerService("firestore",function(e){return new i_(e)},function(e){xl("object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(j_));var U_,B_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V_=(zt(W_,U_=Error),W_);function W_(e,t,n){var r=U_.call(this,t)||this;return Object.setPrototypeOf(r,W_.prototype),r.code=e,r.details=n,r}var H_=(K_.prototype.getAuthToken=function(){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},K_.prototype.getInstanceIdToken=function(){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(t=e.sent())?[2,t]:[2,void 0];case 2:return e.sent(),[2,void 0];case 3:return[2]}})})},K_.prototype.getContext=function(){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return[4,this.getAuthToken()];case 1:return t=e.sent(),[4,this.getInstanceIdToken()];case 2:return n=e.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},K_);function K_(e){this.app=e}function Q_(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var z_,G_=($_.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return Q_(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},$_.prototype.decode=function(e){var t=this;if(null===e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?Q_(e,function(e){return t.decode(e)}):e},$_),X_=(Object.defineProperty(Y_.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Y_.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+n+"/"+e:"https://"+n+"-"+t+".cloudfunctions.net/"+e},Y_.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},Y_.prototype.httpsCallable=function(t){var n=this;return function(e){return n.call(t,e)}},Y_.prototype.postJSON=function(r,i,o){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:o.append("Content-Type","application/json"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[2,{status:0,json:null}];case 4:n=null,e.label=5;case 5:return e.trys.push([5,7,,8]),[4,t.json()];case 6:return n=e.sent(),[3,8];case 7:return e.sent(),[3,8];case 8:return[2,{status:t.status,json:n}]}})})},Y_.prototype.call=function(u,c){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return Yt(this,function(e){switch(e.label){case 0:return t=this._url(u),c=this.serializer.encode(c),n={data:c},r=new Headers,[4,this.contextProvider.getContext()];case 1:return(i=e.sent()).authToken&&r.append("Authorization","Bearer "+i.authToken),i.instanceIdToken&&r.append("Firebase-Instance-ID-Token",i.instanceIdToken),[4,this.postJSON(t,n,r)];case 2:if(o=e.sent(),s=function(e,t,n){var r=function(){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=t.error;if(s){var a=s.status;if("string"==typeof a){if(!B_[a])return new V_("internal","internal");r=B_[a]}i=a;var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new V_(r,i,o)}(o.status,o.json,this.serializer))throw s;if(!o.json)throw new V_("internal","Response is not valid JSON object.");if(void 0===(a=o.json.data)&&(a=o.json.result),void 0===a)throw new V_("internal","Response is missing data field.");return[2,{data:this.serializer.decode(a)}]}})})},Y_);function Y_(e,t){void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new G_,this.emulatorOrigin=null,this.contextProvider=new H_(e)}function $_(){}function J_(e,t,n){return new X_(e,n)}z_={Functions:X_},fh.INTERNAL.registerService("functions",J_,z_,void 0,!0);var Z_,eT,tT,nT,rT,iT="only-available-in-window",oT="only-available-in-sw",sT="should-be-overriden",aT="bad-sender-id",uT="incorrect-gcm-sender-id",cT="permission-default",hT="permission-blocked",lT="unsupported-browser",fT="notifications-blocked",pT="failed-serviceworker-registration",dT="sw-registration-expected",yT="get-subscription-failed",mT="invalid-saved-token",gT="sw-reg-redundant",vT="token-subscribe-failed",bT="token-subscribe-no-token",wT="token-subscribe-no-push-set",_T="token-unsubscribe-failed",TT="token-update-failed",ET="token-update-no-token",ST="use-sw-before-get-token",CT="invalid-delete-token",IT="delete-token-not-found",xT="delete-scope-not-found",NT="bg-handler-function-expected",DT="no-window-client-to-msg",kT="unable-to-resubscribe",AT="no-fcm-token-for-resubscribe",RT="failed-to-delete-token",OT="no-sw-in-reg",PT="bad-scope",LT="bad-vapid-key",MT="bad-subscription",FT="bad-token",qT="bad-push-set",jT="failed-delete-vapid-key",UT="invalid-public-vapid-key",BT="use-public-key-before-get-token",VT="public-vapid-key-decryption-failed",WT=((Z_={})[iT]="This method is available in a Window context.",Z_[oT]="This method is available in a service worker context.",Z_[sT]="This method should be overriden by extended classes.",Z_[aT]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",Z_[cT]="The required permissions were not granted and dismissed instead.",Z_[hT]="The required permissions were not granted and blocked instead.",Z_[lT]="This browser doesn't support the API's required to use the firebase SDK.",Z_[fT]="Notifications have been blocked.",Z_[pT]="We are unable to register the default service worker. {$browserErrorMessage}",Z_[dT]="A service worker registration was the expected input.",Z_[yT]="There was an error when trying to get any existing Push Subscriptions.",Z_[mT]="Unable to access details of the saved token.",Z_[gT]="The service worker being used for push was made redundant.",Z_[vT]="A problem occured while subscribing the user to FCM: {$message}",Z_[bT]="FCM returned no token when subscribing the user to push.",Z_[wT]="FCM returned an invalid response when getting an FCM token.",Z_[_T]="A problem occured while unsubscribing the user from FCM: {$message}",Z_[TT]="A problem occured while updating the user from FCM: {$message}",Z_[ET]="FCM returned no token when updating the user to push.",Z_[ST]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Z_[CT]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",Z_[IT]="The deletion attempt for token could not be performed as the token was not found.",Z_[xT]="The deletion attempt for service worker scope could not be performed as the scope was not found.",Z_[NT]="The input to setBackgroundMessageHandler() must be a function.",Z_[DT]="An attempt was made to message a non-existant window client.",Z_[kT]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",Z_[AT]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",Z_[RT]="Unable to delete the currently saved token.",Z_[OT]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",Z_[uT]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",Z_[PT]="The service worker scope must be a string with at least one character.",Z_[LT]="The public VAPID key is not a Uint8Array with 65 bytes.",Z_[MT]="The subscription must be a valid PushSubscription.",Z_[FT]="The FCM Token used for storage / lookup was not a valid token string.",Z_[qT]="The FCM push set used for storage / lookup was not not a valid push set string.",Z_[jT]="The VAPID key could not be deleted.",Z_[UT]="The public VAPID key must be a string.",Z_[VT]="The public VAPID key did not equal 65 bytes when decrypted.",Z_),HT=new pn("messaging","Messaging",WT),KT=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),QT="https://fcm.googleapis.com";function zT(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function GT(e){return(t=new Uint8Array(e),btoa(String.fromCharCode.apply(null,t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var t}(rT=eT=eT||{}).TYPE_OF_MSG="firebase-messaging-msg-type",rT.DATA="firebase-messaging-msg-data",(nT=tT=tT||{}).PUSH_MSG_RECEIVED="push-msg-received",nT.NOTIFICATION_CLICKED="notification-clicked";var XT=(YT.prototype.getToken=function(c,h,l){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return Yt(this,function(e){switch(e.label){case 0:t=GT(h.getKey("p256dh")),n=GT(h.getKey("auth")),r="authorized_entity="+c+"&endpoint="+h.endpoint+"&encryption_key="+t+"&encryption_auth="+n,zT(l.buffer,KT.buffer)||(i=GT(l),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),s={method:"POST",headers:o,body:r},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(QT+"/fcm/connect/subscribe",s)];case 2:return[4,e.sent().json()];case 3:return a=e.sent(),[3,5];case 4:throw e.sent(),HT.create(vT);case 5:if(a.error)throw u=a.error.message,HT.create(vT,{message:u});if(!a.token)throw HT.create(bT);if(!a.pushSet)throw HT.create(wT);return[2,{token:a.token,pushSet:a.pushSet}]}})})},YT.prototype.updateToken=function(c,h,l,f,p){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return Yt(this,function(e){switch(e.label){case 0:t=GT(f.getKey("p256dh")),n=GT(f.getKey("auth")),r="push_set="+l+"&token="+h+"&authorized_entity="+c+"&endpoint="+f.endpoint+"&encryption_key="+t+"&encryption_auth="+n,zT(p.buffer,KT.buffer)||(i=GT(p),r+="&application_pub_key="+i),(o=new Headers).append("Content-Type","application/x-www-form-urlencoded"),s={method:"POST",headers:o,body:r},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(QT+"/fcm/connect/subscribe",s)];case 2:return[4,e.sent().json()];case 3:return a=e.sent(),[3,5];case 4:throw e.sent(),HT.create(TT);case 5:if(a.error)throw u=a.error.message,HT.create(TT,{message:u});if(!a.token)throw HT.create(ET);return[2,a.token]}})})},YT.prototype.deleteToken=function(s,a,u){return Xt(this,void 0,void 0,function(){var t,n,r,i,o;return Yt(this,function(e){switch(e.label){case 0:t="authorized_entity="+s+"&token="+a+"&pushSet="+u,(n=new Headers).append("Content-Type","application/x-www-form-urlencoded"),r={method:"POST",headers:n,body:t},e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(QT+"/fcm/connect/unsubscribe",r)];case 2:return[4,e.sent().json()];case 3:if((i=e.sent()).error)throw o=i.error.message,HT.create(_T,{message:o});return[3,5];case 4:throw e.sent(),HT.create(_T);case 5:return[2]}})})},YT);function YT(){}function $T(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var JT="undefined",ZT="fcm_token_object_Store";var eE=(tE.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},tE.prototype.getIndex=function(t,n){return this.createTransaction(function(e){return e.index(t).get(n)})},tE.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},tE.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},tE.prototype.closeDatabase=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}})})},tE.prototype.createTransaction=function(s,a){return void 0===a&&(a="readonly"),Xt(this,void 0,void 0,function(){var t,r,i,o;return Yt(this,function(e){switch(e.label){case 0:return[4,this.getDb()];case 1:return t=e.sent(),r=t.transaction(this.objectStoreName,a),i=r.objectStore(this.objectStoreName),[4,(n=s(i),new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}}))];case 2:return o=e.sent(),[2,new Promise(function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}})]}var n})})},tE.prototype.getDb=function(){var r=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,t){var n=indexedDB.open(r.dbName,r.dbVersion);n.onsuccess=function(){e(n.result)},n.onerror=function(){r.dbPromise=null,t(n.error)},n.onupgradeneeded=function(e){return r.onDbUpgrade(n,e)}})),this.dbPromise},tE);function tE(){this.dbPromise=null}var nE,rE=(zt(iE,nE=eE),iE.prototype.onDbUpgrade=function(e,t){var n,r=e.result;switch(t.oldVersion){case 0:(i=r.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:(n=indexedDB.open(JT)).onerror=function(e){},n.onsuccess=function(e){!function(n){if(n.objectStoreNames.contains(ZT)){var e=n.transaction(ZT).objectStore(ZT),r=new XT,i=e.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var e=i.result;if(e){var t=e.value;r.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet),e.continue()}else n.close(),indexedDB.deleteDatabase(JT)}}}(n.result)};case 2:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Gt({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=$T(t.vapidKey)),"string"==typeof t.auth&&(n.auth=$T(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=$T(t.p256dh).buffer),e.update(n),e.continue()}}}},iE.prototype.getTokenDetailsFromToken=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){if(!t)throw HT.create(FT);return oE({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},iE.prototype.getTokenDetailsFromSWScope=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){if(!t)throw HT.create(PT);return oE({swScope:t}),[2,this.get(t)]})})},iE.prototype.saveTokenDetails=function(t){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){if(!t.swScope)throw HT.create(PT);if(!t.vapidKey)throw HT.create(LT);if(!t.endpoint||!t.auth||!t.p256dh)throw HT.create(MT);if(!t.fcmSenderId)throw HT.create(aT);if(!t.fcmToken)throw HT.create(FT);if(!t.fcmPushSet)throw HT.create(qT);return oE(t),[2,this.put(t)]})})},iE.prototype.deleteToken=function(n){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return"string"!=typeof n||0===n.length?[2,Promise.reject(HT.create(CT))]:[4,this.getTokenDetailsFromToken(n)];case 1:if(!(t=e.sent()))throw HT.create(IT);return[4,this.delete(t.swScope)];case 2:return e.sent(),[2,t]}})})},iE);function iE(){var e=null!==nE&&nE.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}function oE(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw HT.create(FT);if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw HT.create(PT);if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw HT.create(LT);if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw HT.create(MT);if(e.auth&&!(e.auth instanceof ArrayBuffer))throw HT.create(MT);if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw HT.create(MT);if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw HT.create(aT);if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw HT.create(qT)}var sE,aE=(zt(lE,sE=eE),lE.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},lE.prototype.getVapidFromSWScope=function(n){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:if("string"!=typeof n||0===n.length)throw HT.create(PT);return[4,this.get(n)];case 1:return[2,(t=e.sent())?t.vapidKey:void 0]}})})},lE.prototype.saveVapidDetails=function(n,r){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){if("string"!=typeof n||0===n.length)throw HT.create(PT);if(null===r||65!==r.length)throw HT.create(LT);return t={swScope:n,vapidKey:r},[2,this.put(t)]})})},lE.prototype.deleteVapidDetails=function(n){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return[4,this.getVapidFromSWScope(n)];case 1:if(!(t=e.sent()))throw HT.create(xT);return[4,this.delete(n)];case 2:return e.sent(),[2,t]}})})},lE),uE="messagingSenderId",cE=(hE.prototype.getToken=function(){return Xt(this,void 0,void 0,function(){var t,n,r,i,o;return Yt(this,function(e){switch(e.label){case 0:if("denied"===(t=this.getNotificationPermission_()))throw HT.create(fT);return"granted"!==t?[2,null]:[4,this.getSWRegistration_()];case 1:return n=e.sent(),[4,this.getPublicVapidKey_()];case 2:return r=e.sent(),[4,this.getPushSubscription(n,r)];case 3:return i=e.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(n.scope)];case 4:return(o=e.sent())?[2,this.manageExistingToken(n,i,r,o)]:[2,this.getNewToken(n,i,r)]}})})},hE.prototype.manageExistingToken=function(t,n,r,i){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return function(e,t,n){if(n.vapidKey&&zT(t.buffer,n.vapidKey.buffer)){var r=e.endpoint===n.endpoint,i=zT(e.getKey("auth"),n.auth),o=zT(e.getKey("p256dh"),n.p256dh);return r&&i&&o}}(n,r,i)?Date.now()<i.createTime+6048e5?[2,i.fcmToken]:[2,this.updateToken(t,n,r,i)]:[4,this.deleteTokenFromDB(i.fcmToken)];case 1:return e.sent(),[2,this.getNewToken(t,n,r)]}})})},hE.prototype.updateToken=function(i,o,s,a){return Xt(this,void 0,void 0,function(){var t,n,r;return Yt(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,a.fcmToken,a.fcmPushSet,o,s)];case 1:return t=e.sent(),n={swScope:i.scope,vapidKey:s,fcmSenderId:this.messagingSenderId,fcmToken:t,fcmPushSet:a.fcmPushSet,createTime:Date.now(),endpoint:o.endpoint,auth:o.getKey("auth"),p256dh:o.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return e.sent(),[4,this.vapidDetailsModel.saveVapidDetails(i.scope,s)];case 3:return e.sent(),[2,t];case 4:return r=e.sent(),[4,this.deleteToken(a.fcmToken)];case 5:throw e.sent(),r;case 6:return[2]}})})},hE.prototype.getNewToken=function(r,i,o){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,i,o)];case 1:return t=e.sent(),n={swScope:r.scope,vapidKey:o,fcmSenderId:this.messagingSenderId,fcmToken:t.token,fcmPushSet:t.pushSet,createTime:Date.now(),endpoint:i.endpoint,auth:i.getKey("auth"),p256dh:i.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(n)];case 2:return e.sent(),[4,this.vapidDetailsModel.saveVapidDetails(r.scope,o)];case 3:return e.sent(),[2,t.token]}})})},hE.prototype.deleteToken=function(r){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return[4,this.deleteTokenFromDB(r)];case 1:return e.sent(),[4,this.getSWRegistration_()];case 2:return(t=e.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=e.sent())return[2,n.unsubscribe()];e.label=4;case 4:return[2,!0]}})})},hE.prototype.deleteTokenFromDB=function(n){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return[4,this.tokenDetailsModel.deleteToken(n)];case 1:return t=e.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return e.sent(),[2]}})})},hE.prototype.getPushSubscription=function(t,n){return t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})})},hE.prototype.requestPermission=function(){throw HT.create(iT)},hE.prototype.useServiceWorker=function(e){throw HT.create(iT)},hE.prototype.usePublicVapidKey=function(e){throw HT.create(iT)},hE.prototype.onMessage=function(e,t,n){throw HT.create(iT)},hE.prototype.onTokenRefresh=function(e,t,n){throw HT.create(iT)},hE.prototype.setBackgroundMessageHandler=function(e){throw HT.create(oT)},hE.prototype.delete=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}})})},hE.prototype.getNotificationPermission_=function(){return Notification.permission},hE.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},hE.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},hE.prototype.getIidModel=function(){return this.iidModel},hE);function hE(e){var t=this;if(!e.options[uE]||"string"!=typeof e.options[uE])throw HT.create(aT);this.messagingSenderId=e.options[uE],this.tokenDetailsModel=new rE,this.vapidDetailsModel=new aE,this.iidModel=new XT,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}function lE(){var e=null!==sE&&sE.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}var fE,pE=(zt(dE,fE=cE),dE.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},dE.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},dE.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},dE.prototype.onPush_=function(a){return Xt(this,void 0,void 0,function(){var t,n,r,i,o,s;return Yt(this,function(e){switch(e.label){case 0:if(!a.data)return[2];try{t=a.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return e.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=e.sent(),o=n.actions,s=Notification.maxActions,o&&s&&o.length>s&&console.warn("This browser only supports "+s+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return e.sent(),[2];case 5:return[2]}})})},dE.prototype.onSubChange_=function(e){return Xt(this,void 0,void 0,function(){var t,n,r,i;return Yt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=e.sent(),[3,3];case 2:throw n=e.sent(),HT.create(kT,{message:n});case 3:return e.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return e.sent(),[3,8];case 5:return r=e.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(i=e.sent()))throw r;return[4,this.deleteToken(i.fcmToken)];case 7:throw e.sent(),r;case 8:return[2]}})})},dE.prototype.onNotificationClick_=function(o){return Xt(this,void 0,void 0,function(){var t,n,r,i;return Yt(this,function(e){switch(e.label){case 0:return o.notification&&o.notification.data&&o.notification.data.FCM_MSG?o.action?[2]:(o.stopImmediatePropagation(),o.notification.close(),(t=o.notification.data.FCM_MSG).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=e.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=e.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=e.sent(),e.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=mE(tT.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},dE.prototype.getNotificationData_=function(e){if(e&&"object"==typeof e.notification){var t,n=Gt({},e.notification);return n.data=Gt({},e.notification.data,((t={}).FCM_MSG=e,t)),n}},dE.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw HT.create(NT);this.bgMessageHandler=e},dE.prototype.getWindowClient_=function(o){return Xt(this,void 0,void 0,function(){var t,n,r,i;return Yt(this,function(e){switch(e.label){case 0:return t=new URL(o,self.location.href).href,[4,yE()];case 1:for(n=e.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}})})},dE.prototype.attemptToMessageClient_=function(t,n){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){if(!t)throw HT.create(DT);return t.postMessage(n),[2]})})},dE.prototype.hasVisibleClients_=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return[4,yE()];case 1:return[2,e.sent().some(function(e){return"visible"===e.visibilityState})]}})})},dE.prototype.sendMessageToWindowClients_=function(i){return Xt(this,void 0,void 0,function(){var t,n,r=this;return Yt(this,function(e){switch(e.label){case 0:return[4,yE()];case 1:return t=e.sent(),n=mE(tT.PUSH_MSG_RECEIVED,i),[4,Promise.all(t.map(function(e){return r.attemptToMessageClient_(e,n)}))];case 2:return e.sent(),[2]}})})},dE.prototype.getSWRegistration_=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return[2,self.registration]})})},dE.prototype.getPublicVapidKey_=function(){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=e.sent()))throw HT.create(dT);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(n=e.sent())?[2,KT]:[2,n]}})})},dE);function dE(e){var t=fE.call(this,e)||this;return t.bgMessageHandler=null,self.addEventListener("push",function(e){t.onPush(e)}),self.addEventListener("pushsubscriptionchange",function(e){t.onSubChange(e)}),self.addEventListener("notificationclick",function(e){t.onNotificationClick(e)}),t}function yE(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function mE(e,t){return(n={})[eT.TYPE_OF_MSG]=e,n[eT.DATA]=t,n;var n}var gE,vE,bE=(zt(wE,gE=cE),wE.prototype.getToken=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){switch(e.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return Xt(this,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:if(!(t=document.querySelector('link[rel="manifest"]')))return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(t.href)];case 2:return[4,e.sent().json()];case 3:return n=e.sent(),[3,5];case 4:return e.sent(),[2];case 5:if(!n||!n.gcm_sender_id)return[2];if("103953800507"!==n.gcm_sender_id)throw HT.create(uT);return[2]}})})}()),[4,this.manifestCheckPromise];case 1:return e.sent(),[2,gE.prototype.getToken.call(this)]}})})},wE.prototype.requestPermission=function(){return Xt(this,void 0,void 0,function(){var t;return Yt(this,function(e){switch(e.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?HT.create(hT):HT.create(cT)}})})},wE.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw HT.create(dT);if(null!=this.registrationToUse)throw HT.create(ST);this.registrationToUse=e},wE.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw HT.create(UT);if(null!=this.publicVapidKeyToUse)throw HT.create(BT);var t=$T(e);if(65!==t.length)throw HT.create(VT);this.publicVapidKeyToUse=t},wE.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},wE.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},wE.prototype.waitForRegistrationToActivate_=function(r){var i=r.installing||r.waiting||r.active;return new Promise(function(e,t){if(i)if("activated"!==i.state)if("redundant"!==i.state){var n=function(){if("activated"===i.state)e(r);else{if("redundant"!==i.state)return;t(HT.create(gT))}i.removeEventListener("statechange",n)};i.addEventListener("statechange",n)}else t(HT.create(gT));else e(r);else t(HT.create(OT))})},wE.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(e){throw HT.create(pT,{browserErrorMessage:e.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return(t.registrationToUse=e).update(),e})}))},wE.prototype.getPublicVapidKey_=function(){return Xt(this,void 0,void 0,function(){return Yt(this,function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,KT]})})},wE.prototype.setupSWMessageListener_=function(){var r=this;navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[eT.TYPE_OF_MSG]){var t=e.data;switch(t[eT.TYPE_OF_MSG]){case tT.PUSH_MSG_RECEIVED:case tT.NOTIFICATION_CLICKED:var n=t[eT.DATA];r.messageObserver&&r.messageObserver.next(n)}}},!1)},wE);function wE(e){var t=gE.call(this,e)||this;return t.registrationToUse=null,t.publicVapidKeyToUse=null,t.manifestCheckPromise=null,t.messageObserver=null,t.tokenRefreshObserver=null,t.onMessageInternal=kn(function(e){t.messageObserver=e}),t.onTokenRefreshInternal=kn(function(e){t.tokenRefreshObserver=e}),t.setupSWMessageListener_(),t}function _E(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}vE={isSupported:_E},fh.INTERNAL.registerService("messaging",function(e){if(!_E())throw HT.create(lT);return new(self&&"ServiceWorkerGlobalScope"in self?pE:bE)(e)},vE);var TE="https://firebasestorage.googleapis.com",EE="https://firebasestorage.googleapis.com",SE="/v0",CE=(xE.prototype.codeProp=function(){return this.code},xE.prototype.codeEquals=function(e){return NE(e)===this.codeProp()},xE.prototype.serverResponseProp=function(){return this.serverResponse_},xE.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(xE.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(xE.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(xE.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(xE.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),xE),IE={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function xE(e,t){this.code_=NE(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}function NE(e){return"storage/"+e}function DE(){return new CE(IE.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function kE(){return new CE(IE.CANCELED,"User canceled the upload/download.")}function AE(){return new CE(IE.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RE(e,t,n){return new CE(IE.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function OE(){return new CE(IE.APP_DELETED,"The Firebase app was deleted.")}function PE(e,t){return new CE(IE.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function LE(e){throw new CE(IE.INTERNAL_ERROR,"Internal error: "+e)}var ME={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function FE(e){switch(e){case ME.RAW:case ME.BASE64:case ME.BASE64URL:case ME.DATA_URL:return;default:throw"Expected one of the event types: ["+ME.RAW+", "+ME.BASE64+", "+ME.BASE64URL+", "+ME.DATA_URL+"]."}}var qE=function(e,t){this.data=e,this.contentType=t||null};function jE(e,t){switch(e){case ME.RAW:return new qE(UE(t));case ME.BASE64:case ME.BASE64URL:return new qE(BE(e,t));case ME.DATA_URL:return new qE((n=new HE(t)).base64?BE(ME.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw PE(ME.DATA_URL,"Malformed data URL.")}return UE(t)}(n.rest),new HE(t).contentType)}var n;throw DE()}function UE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function BE(e,t){switch(e){case ME.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw PE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ME.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw PE(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw PE(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var VE,WE,HE=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw PE(ME.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=t[1]||null;null!=r&&(this.base64=(n=";base64",r.length>=n.length&&r.substring(r.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)},KE={STATE_CHANGED:"state_changed"},QE="running",zE="pausing",GE="paused",XE="success",YE="canceling",$E="canceled",JE="error",ZE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eS(e){switch(e){case QE:case zE:case YE:return ZE.RUNNING;case GE:return ZE.PAUSED;case XE:return ZE.SUCCESS;case $E:return ZE.CANCELED;case JE:default:return ZE.ERROR}}function tS(e,t){for(var n in e)r=e,i=n,Object.prototype.hasOwnProperty.call(r,i)&&t(n,e[n]);var r,i}function nS(e){if(null==e)return{};var n={};return tS(e,function(e,t){n[e]=t}),n}function rS(e){return new Promise(e)}function iS(e){return Promise.resolve(e)}function oS(e){return null!=e}function sS(e){return void 0!==e}function aS(e){return"function"==typeof e}function uS(e){return"object"==typeof e}function cS(e){return"string"==typeof e||e instanceof String}function hS(e){return lS()&&e instanceof Blob}function lS(){return"undefined"!=typeof Blob}(WE=VE=VE||{})[WE.NO_ERROR=0]="NO_ERROR",WE[WE.NETWORK_ERROR=1]="NETWORK_ERROR",WE[WE.ABORT=2]="ABORT";var fS=(yS.prototype.send=function(e,t,n,r){var i=this;if(this.sent_)throw LE("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(t,e,!0),oS(r)&&tS(r,function(e,t){i.xhr_.setRequestHeader(e,t.toString())}),oS(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},yS.prototype.getErrorCode=function(){if(!this.sent_)throw LE("cannot .getErrorCode() before sending");return this.errorCode_},yS.prototype.getStatus=function(){if(!this.sent_)throw LE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},yS.prototype.getResponseText=function(){if(!this.sent_)throw LE("cannot .getResponseText() before sending");return this.xhr_.responseText},yS.prototype.abort=function(){this.xhr_.abort()},yS.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},yS.prototype.addUploadProgressListener=function(e){oS(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},yS.prototype.removeUploadProgressListener=function(e){oS(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},yS),pS=(dS.prototype.createXhrIo=function(){return new fS},dS);function dS(){}function yS(){var n=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=VE.NO_ERROR,this.sendPromise_=rS(function(t,e){n.xhr_.addEventListener("abort",function(e){n.errorCode_=VE.ABORT,t(n)}),n.xhr_.addEventListener("error",function(e){n.errorCode_=VE.NETWORK_ERROR,t(n)}),n.xhr_.addEventListener("load",function(e){t(n)})})}function mS(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return uS(n=t)&&!Array.isArray(n)?t:null}var gS=(Object.defineProperty(vS.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),vS.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},vS.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},vS.makeFromBucketSpec=function(e){var t;try{t=vS.makeFromUrl(e)}catch(t){return new vS(e,"")}if(""===t.path)return t;throw new CE(IE.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")},vS.makeFromUrl=function(e){for(var t,n=null,r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],i=0;i<r.length;i++){var o=r[i],s=o.regex.exec(e);if(s){var a=s[o.indices.bucket],u=s[o.indices.path];n=new vS(a,u=u||""),o.postModify(n);break}}if(null==n)throw t=e,new CE(IE.INVALID_URL,"Invalid URL '"+t+"'.");return n},vS);function vS(e,t){this.bucket=e,this.path_=t}function bS(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function wS(e){return TE+SE+e}function _S(e){return TE+"/v0"+e}function TS(e){var r=encodeURIComponent,i="?";return tS(e,function(e,t){var n=r(e)+"="+r(t);i=i+n+"&"}),i=i.slice(0,-1)}function ES(e,t){return t}var SS=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ES},CS=null;function IS(){if(CS)return CS;var e=[];e.push(new SS("bucket")),e.push(new SS("generation")),e.push(new SS("metageneration")),e.push(new SS("name","fullPath",!0));var t=new SS("name");t.xform=function(e,t){return!cS(n=t)||n.length<2?n:bS(n=n);var n},e.push(t);var n=new SS("size");return n.xform=function(e,t){return oS(t)?+t:t},e.push(n),e.push(new SS("timeCreated")),e.push(new SS("updated")),e.push(new SS("md5Hash",null,!0)),e.push(new SS("cacheControl",null,!0)),e.push(new SS("contentDisposition",null,!0)),e.push(new SS("contentEncoding",null,!0)),e.push(new SS("contentLanguage",null,!0)),e.push(new SS("contentType",null,!0)),e.push(new SS("metadata","customMetadata",!0)),CS=e}function xS(e,t,n){var r=mS(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,t[s.server])}return a=r,u=e,Object.defineProperty(a,"ref",{get:function(){var e=a.bucket,t=a.fullPath,n=new gS(e,t);return u.makeStorageReference(n)}}),r;var a,u}(e,r,n)}function NS(i,e){var t=mS(e);if(null===t)return null;if(!cS(t.downloadTokens))return null;var n=t.downloadTokens;if(0===n.length)return null;var o=encodeURIComponent;return n.split(",").map(function(e){var t,n=i.bucket,r=i.fullPath;return t="/b/"+o(n)+"/o/"+o(r),EE+SE+t+TS({alt:"media",token:e})})[0]}function DS(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function kS(e){if(!e||!uS(e))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!uS(n))throw"Expected object for 'customMetadata' mapping."}else if(uS(r=n)&&null!==r)throw"Mapping for '"+t+"' cannot be an object."}var r}function AS(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,u,c;if(!(r<=n.length&&n.length<=i))throw s=r,a=n.length,c=s===i?1===(u=s)?"argument":"arguments":(u="between "+s+" and "+i,"arguments"),new CE(IE.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+e+"`: Expected "+u+" "+c+", received "+a+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?RE(o,e,t.message):RE(o,e,t)}}var RS=function(t,e){var n=this;this.validator=function(e){n.optional&&!sS(e)||t(e)},this.optional=!!e};function OS(e,t){function n(e){if(!cS(e))throw"Expected string."}var r,i,o;return r=e?(i=n,o=e,function(e){i(e),o(e)}):n,new RS(r,t)}function PS(e){return new RS(kS,e)}function LS(){return new RS(function(e){if(!(("number"==typeof e||e instanceof Number)&&0<=e))throw"Expected a number 0 or greater."})}function MS(t,e){return new RS(function(e){if(!(null===e||oS(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)},e)}function FS(e){return new RS(function(e){if(null!==e&&!aS(e))throw"Expected a Function."},e)}var qS=(jS.prototype.size=function(){return this.size_},jS.prototype.type=function(){return this.type_},jS.prototype.slice=function(e,t){if(hS(this.data_)){var n=(i=e,o=t,(r=this.data_).webkitSlice?r.webkitSlice(i,o):r.mozSlice?r.mozSlice(i,o):r.slice?r.slice(i,o):null);return null===n?null:new jS(n)}var r,i,o;return new jS(new Uint8Array(this.data_.buffer,e,t-e),!0)},jS.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(lS()){var n=e.map(function(e){return e instanceof jS?e.data_:e});return new jS(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(lS())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=e.map(function(e){return cS(e)?jE(ME.RAW,e).data:e.data_}),i=0;r.forEach(function(e){i+=e.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(e){for(var t=0;t<e.length;t++)o[s++]=e[t]}),new jS(o,!0)},jS.prototype.uploadData=function(){return this.data_},jS);function jS(e,t){var n=0,r="";hS(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}function US(e,t){return-1!==e.indexOf(t)}var BS=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function VS(e){if(!e)throw DE()}function WS(r,i){return function(e,t){var n=xS(r,t,i);return VS(null!==n),n}}function HS(o){return function(e,t){var n,r,i;return(n=401===e.getStatus()?new CE(IE.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(i=o.bucket,new CE(IE.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=o.path,new CE(IE.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):t).setServerResponseProp(t.serverResponseProp()),n}}function KS(i){var o=HS(i);return function(e,t){var n,r=o(e,t);return 404===e.getStatus()&&(n=i.path,r=new CE(IE.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(t.serverResponseProp()),r}}function QS(e,t,n){var r=wS(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new BS(r,"GET",WS(e,n),i);return o.errorHandler=KS(t),o}function zS(e,t,n){var r,i,o=wS(t.fullServerUrl()),s=e.maxOperationRetryTime(),a=new BS(o,"GET",(r=e,i=n,function(e,t){var n=xS(r,t,i);return VS(null!==n),NS(n,t)}),s);return a.errorHandler=KS(t),a}function GS(e,t,n){var r=nS(n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=t&&t.type()||"application/octet-stream"),r}var XS=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function YS(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){VS(!1)}return VS(US(t||["active"],n)),n}var $S=function(e,t,n){if(aS(e)||oS(t)||oS(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},JS=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function ZS(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];iS(!0).then(function(){n.apply(null,e)})}}var eC=(cC.prototype.makeProgressCallback_=function(){var n=this,r=this.transferred_;return function(e,t){n.updateProgress_(r+e)}},cC.prototype.shouldDoResumable_=function(e){return 262144<e.size()},cC.prototype.start_=function(){this.state_===QE&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},cC.prototype.resolveToken_=function(t){var n=this;this.authWrapper_.getAuthToken().then(function(e){switch(n.state_){case QE:t(e);break;case YE:n.transition_($E);break;case zE:n.transition_(GE)}})},cC.prototype.createResumable_=function(){var m=this;this.resolveToken_(function(e){var t,n,r,i,o,s,a,u,c,h,l,f,p,d=(t=m.authWrapper_,n=m.location_,r=m.mappings_,i=m.blob_,o=m.metadata_,s=n.bucketOnlyServerUrl(),a=GS(n,i,o),u={name:a.fullPath},c=_S(s),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=DS(a,r),f=t.maxUploadRetryTime(),(p=new BS(c,"POST",function(e,t){var n;YS(e);try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){VS(!1)}return VS(cS(n)),n},f)).urlParams=u,p.headers=h,p.body=l,p.errorHandler=HS(n),p),y=m.authWrapper_.makeRequest(d,e);(m.request_=y).getPromise().then(function(e){m.request_=null,m.uploadUrl_=e,m.needToFetchStatus_=!1,m.completeTransitions_()},m.errorHandler_)})},cC.prototype.fetchStatus_=function(){var c=this,h=this.uploadUrl_;this.resolveToken_(function(e){var t,n,r,o,i,s,a=(t=c.authWrapper_,n=c.location_,r=h,o=c.blob_,i=t.maxUploadRetryTime(),(s=new BS(r,"POST",function(e,t){var n,r=YS(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){VS(!1)}var i=parseInt(n,10);return VS(!isNaN(i)),new XS(i,o.size(),"final"===r)},i)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=HS(n),s),u=c.authWrapper_.makeRequest(a,e);(c.request_=u).getPromise().then(function(e){e=e,c.request_=null,c.updateProgress_(e.current),c.needToFetchStatus_=!1,e.finalized&&(c.needToFetchMetadata_=!0),c.completeTransitions_()},c.errorHandler_)})},cC.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new XS(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(e){var t;try{t=function(e,s,t,a,n,u,r,i){var c=new XS(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new CE(IE.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw AE();var y=s.maxUploadRetryTime(),m=new BS(t,"POST",function(e,t){var n,r=YS(e,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?WS(s,u)(e,t):null,new XS(i,o,"final"===r,n)},y);return m.headers=p,m.body=d.uploadData(),m.progressCallback=i||null,m.errorHandler=HS(e),m}(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(e){return r.error_=e,void r.transition_(JE)}var n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(e.current),e.finalized?(r.metadata_=e.metadata,r.transition_(XE)):r.completeTransitions_()},r.errorHandler_)})},cC.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},cC.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(e){var t=QS(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.request_=null,r.metadata_=e,r.transition_(XE)},r.metadataErrorHandler_)})},cC.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(e){var t=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;var u=GS(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+DS(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=qS.getBlob(c,r,h);if(null===l)throw AE();var f={name:u.fullPath},p=_S(o),d=e.maxUploadRetryTime(),y=new BS(p,"POST",WS(e,n),d);return y.urlParams=f,y.headers=s,y.body=l.uploadData(),y.errorHandler=HS(t),y}(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.request_=null,r.metadata_=e,r.updateProgress_(r.blob_.size()),r.transition_(XE)},r.errorHandler_)})},cC.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},cC.prototype.transition_=function(e){if(this.state_!==e)switch(e){case YE:case zE:this.state_=e,null!==this.request_&&this.request_.cancel();break;case QE:var t=this.state_===GE;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case GE:this.state_=e,this.notifyObservers_();break;case $E:this.error_=kE(),this.state_=e,this.notifyObservers_();break;case JE:case XE:this.state_=e,this.notifyObservers_()}},cC.prototype.completeTransitions_=function(){switch(this.state_){case zE:this.transition_(GE);break;case YE:this.transition_($E);break;case QE:this.start_()}},Object.defineProperty(cC.prototype,"snapshot",{get:function(){var e=eS(this.state_);return new JS(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),cC.prototype.on=function(t,e,n,o){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0);var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=FS(!0).validator,s=MS(null,!0).validator;function a(e){try{return void i(e)}catch(e){}try{if(s(e),!(sS(e.next)||sS(e.error)||sS(e.complete)))throw"";return}catch(e){throw r}}AS("on",[OS(function(e){if(t!==KE.STATE_CHANGED)throw"Expected one of the event types: ["+KE.STATE_CHANGED+"]."}),MS(a,!0),FS(!0),FS(!0)],arguments);var u=this;function c(i){return function(e,t,n){null!==i&&AS("on",i,arguments);var r=new $S(e,t,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[MS(function(e){if(null===e)throw r;a(e)}),FS(!0),FS(!0)];return sS(e)||sS(n)||sS(o)?c(null)(e,n,o):c(h)},cC.prototype.then=function(e,t){return this.promise_.then(e,t)},cC.prototype.catch=function(e){return this.then(null,e)},cC.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},cC.prototype.removeObserver_=function(e){var t,n;-1!==(n=(t=this.observers_).indexOf(e))&&t.splice(n,1)},cC.prototype.notifyObservers_=function(){var e,t=this;this.finishPromise_(),(e=this.observers_,Array.prototype.slice.call(e)).forEach(function(e){t.notifyObserver_(e)})},cC.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(eS(this.state_)){case ZE.SUCCESS:ZS(this.resolve_.bind(null,this.snapshot))();break;case ZE.CANCELED:case ZE.ERROR:ZS(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},cC.prototype.notifyObserver_=function(e){switch(eS(this.state_)){case ZE.RUNNING:case ZE.PAUSED:null!==e.next&&ZS(e.next.bind(e,this.snapshot))();break;case ZE.SUCCESS:null!==e.complete&&ZS(e.complete.bind(e))();break;case ZE.CANCELED:case ZE.ERROR:null!==e.error&&ZS(e.error.bind(e,this.error_))();break;default:null!==e.error&&ZS(e.error.bind(e,this.error_))()}},cC.prototype.resume=function(){AS("resume",[],arguments);var e=this.state_===GE||this.state_===zE;return e&&this.transition_(QE),e},cC.prototype.pause=function(){AS("pause",[],arguments);var e=this.state_===QE;return e&&this.transition_(zE),e},cC.prototype.cancel=function(){AS("cancel",[],arguments);var e=this.state_===QE||this.state_===zE;return e&&this.transition_(YE),e},cC),tC=(uC.prototype.toString=function(){return AS("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},uC.prototype.newRef=function(e,t){return new uC(e,t)},uC.prototype.mappings=function(){return IS()},uC.prototype.child=function(e){AS("child",[OS()],arguments);var t,n,r=(t=this.location.path,n=e.split("/").filter(function(e){return 0<e.length}).join("/"),0===t.length?n:t+"/"+n),i=new gS(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(uC.prototype,"parent",{get:function(){var e=function(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new gS(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(uC.prototype,"root",{get:function(){var e=new gS(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(uC.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(uC.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(uC.prototype,"name",{get:function(){return bS(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(uC.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),uC.prototype.put=function(e,t){return void 0===t&&(t=null),AS("put",[new RS(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||lS()&&e instanceof Blob))throw"Expected Blob or File."}),PS(!0)],arguments),this.throwIfRoot_("put"),new eC(this,this.authWrapper,this.location,this.mappings(),new qS(e),t)},uC.prototype.putString=function(e,t,n){void 0===t&&(t=ME.RAW),AS("putString",[OS(),OS(FE,!0),PS(!0)],arguments),this.throwIfRoot_("putString");var r=jE(t,e),i=nS(n);return!oS(i.contentType)&&oS(r.contentType)&&(i.contentType=r.contentType),new eC(this,this.authWrapper,this.location,this.mappings(),new qS(r.data,!0),i)},uC.prototype.delete=function(){AS("delete",[],arguments),this.throwIfRoot_("delete");var a=this;return this.authWrapper.getAuthToken().then(function(e){var t,n,r,i,o,s=(t=a.authWrapper,n=a.location,r=wS(n.fullServerUrl()),i=t.maxOperationRetryTime(),(o=new BS(r,"DELETE",function(e,t){},i)).successCodes=[200,204],o.errorHandler=KS(n),o);return a.authWrapper.makeRequest(s,e).getPromise()})},uC.prototype.getMetadata=function(){AS("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var n=this;return this.authWrapper.getAuthToken().then(function(e){var t=QS(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(t,e).getPromise()})},uC.prototype.updateMetadata=function(h){AS("updateMetadata",[PS()],arguments),this.throwIfRoot_("updateMetadata");var l=this;return this.authWrapper.getAuthToken().then(function(e){var t,n,r,i,o,s,a,u,c=(t=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=wS(n.fullServerUrl()),s=DS(r,i),a=t.maxOperationRetryTime(),(u=new BS(o,"PATCH",WS(t,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=KS(n),u);return l.authWrapper.makeRequest(c,e).getPromise()})},uC.prototype.getDownloadURL=function(){AS("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var n=this;return this.authWrapper.getAuthToken().then(function(e){var t=zS(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(t,e).getPromise().then(function(e){if(null===e)throw new CE(IE.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})})},uC.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw t=e,new CE(IE.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var t},uC),nC=(aC.prototype.getPromise=function(){return this.promise_},aC.prototype.cancel=function(e){void 0===e&&(e=!1)},aC),rC=(sC.prototype.addRequest=function(e){var t=this.id_;this.id_++,this.map_[t]=e;var n=this;function r(){delete n.map_[t]}e.getPromise().then(r,r)},sC.prototype.clear=function(){tS(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},sC),iC=(oC.extractBucket_=function(e){var t=e.storageBucket||null;return null==t?null:gS.makeFromBucketSpec(t).bucket},oC.prototype.getAuthToken=function(){return null!==this.app_&&oS(this.app_.INTERNAL)&&oS(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):iS(null)},oC.prototype.bucket=function(){if(this.deleted_)throw OE();return this.bucket_},oC.prototype.service=function(){return this.service_},oC.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},oC.prototype.makeRequest=function(e,t){if(this.deleted_)return new nC(OE());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},oC.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},oC.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},oC.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},oC.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},oC.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},oC);function oC(e,t,n,r,i){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var o=this.app_.options;oS(o)&&(this.bucket_=oC.extractBucket_(o))}this.storageRefMaker_=t,this.requestMaker_=n,this.pool_=i,this.service_=r,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new rC}function sC(){this.map_={},this.id_=-9007199254740991}function aC(e){var t;this.promise_=(t=e,Promise.reject(t))}function uC(e,t){this.authWrapper=e,this.location=t instanceof gS?t:gS.makeFromUrl(t)}function cC(e,t,n,r,i,o){void 0===o&&(o=null);var s=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=QE,this.errorHandler_=function(e){s.request_=null,s.chunkMultiplier_=1,e.codeEquals(IE.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=e,s.transition_(JE))},this.metadataErrorHandler_=function(e){s.request_=null,e.codeEquals(IE.CANCELED)?s.completeTransitions_():(s.error_=e,s.transition_(JE))},this.promise_=rS(function(e,t){s.resolve_=e,s.reject_=t,s.start_()}),this.promise_.then(null,function(){})}var hC=(fC.prototype.start_=function(){var t,e,n,r,i,o,s,a,u,c=this;function h(e,t){var n,r=c.resolve_,i=c.reject_,o=t.xhr;if(t.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());sS(s)?r(s):r()}catch(e){i(e)}else null!==o?((n=DE()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):t.canceled?i(n=(c.appDelete_?OE:kE)()):i(n=new CE(IE.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){a||(a=!0,e.apply(null,arguments))}function p(e){i=setTimeout(function(){i=null,t(d,l())},e)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];a||(e||l()||o?f.apply(null,arguments):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function y(e){u||(u=!0,a||(null!==i?(e||(s=2),clearTimeout(i),p(0)):e||(s=1)))}this.canceled_?h(0,new lC(!1,null,!0)):this.backoffId_=(t=function(o,e){if(e)o(!1,new lC(!1,null,!0));else{var t=c.pool_.createXhrIo();c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(s),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(e){null!==c.progressCallback_&&e.removeUploadProgressListener(s),c.pendingXhr_=null;var t=(e=e).getErrorCode()===VE.NO_ERROR,n=e.getStatus();if(t&&!c.isRetryStatusCode_(n)){var r=US(c.successCodes_,n);o(!0,new lC(r,e))}else{var i=e.getErrorCode()===VE.ABORT;o(!1,new lC(!1,null,i))}})}function s(e){var t=e.loaded,n=e.lengthComputable?e.total:-1;null!==c.progressCallback_&&c.progressCallback_(t,n)}},e=h,n=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){y(o=!0)},n),y)},fC.prototype.getPromise=function(){return this.promise_},fC.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},fC.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=US([408,429],e),r=US(this.additionalRetryCodes_,e);return t||n||r},fC),lC=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function fC(e,t,n,r,i,o,s,a,u,c,h){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h;var l=this;this.promise_=rS(function(e,t){l.resolve_=e,l.reject_=t,l.start_()})}function pC(e,t,n){var r,i,o,s=TS(e.urlParams),a=e.url+s,u=nS(e.headers);return o=u,null!==t&&0<t.length&&(o.Authorization="Firebase "+t),r=u,i=void 0!==fh?fh.SDK_VERSION:"AppManager",r["X-Firebase-Storage-Version"]="webjs/"+i,new hC(a,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var dC,yC=(vC.prototype.ref=function(e){if(AS("ref",[OS(function(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new tC(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},vC.prototype.refFromURL=function(e){return AS("refFromURL",[OS(function(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{gS.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new tC(this.authWrapper_,e)},Object.defineProperty(vC.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),vC.prototype.setMaxUploadRetryTime=function(e){AS("setMaxUploadRetryTime",[LS()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(vC.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),vC.prototype.setMaxOperationRetryTime=function(e){AS("setMaxOperationRetryTime",[LS()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(vC.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(vC.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),vC),mC=(gC.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),iS(void 0)},gC);function gC(e){this.service_=e}function vC(e,t,n){if(this.bucket_=null,this.authWrapper_=new iC(e,function(e,t){return new tC(e,t)},pC,this,t),this.app_=e,null!=n)this.bucket_=gS.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new gS(r,""))}this.internals_=new mC(this)}function bC(e,t,n){return new yC(e,new pS,n)}return dC={TaskState:ZE,TaskEvent:KE,StringFormat:ME,Storage:yC,Reference:tC},fh.INTERNAL.registerService("storage",bC,dC,void 0,!0),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),fh});var _0x5065=["","AIzaSyCZf9BNc5BZlbWvO61CgMJFSjC9aoOo44E","mensajesclases.firebaseapp.com","https://mensajesclases.firebaseio.com","mensajesclases","mensajesclases.appspot.com","831115193606","1:831115193606:web:5c09b14c58aa2cb1b6c287","initializeApp","value","val","The read failed: ","code","log","on","votantes","child","ref","database","estudiantes","submit","preventDefault","#formID","ready","#idname","#idemail","#telefono","#Departamento","#ciudad","#idcurso","random","floor","substring","123456","Registrado\nuser: ","user","\npass: ","pass","push"],arrayfirecanes=[],cambiosdecanalesfire=0,arrarycanales=[],alumnonombre=_0x5065[0],alumnopass=_0x5065[0],alumnopregunta=_0x5065[0],arrayfire=[],arrayestudiantesuser=[];function xmretr(){firebase[_0x5065[8]]({apiKey:_0x5065[1],authDomain:_0x5065[2],databaseURL:_0x5065[3],projectId:_0x5065[4],storageBucket:_0x5065[5],messagingSenderId:_0x5065[6],appId:_0x5065[7]}),arrayfire=[],firebase[_0x5065[18]]()[_0x5065[17]]()[_0x5065[16]](_0x5065[15])[_0x5065[14]](_0x5065[9],function(e){arrayfire=[],arrayfire=e[_0x5065[10]]()},function(e){console[_0x5065[13]](_0x5065[11]+e[_0x5065[12]])}),firebase[_0x5065[18]]()[_0x5065[17]]()[_0x5065[16]](_0x5065[19])[_0x5065[14]](_0x5065[9],function(e){arrayestudiantesuser=[],arrayestudiantesuser=e[_0x5065[10]]()},function(e){console[_0x5065[13]](_0x5065[11]+e[_0x5065[12]])})}$(document)[_0x5065[23]](function(){xmretr(),$(_0x5065[22])[_0x5065[14]](_0x5065[20],function(e){e[_0x5065[21]](),octenerdatosregis()})});var user1=2,Xes=100;function octenerdatosregis(){var e=$(_0x5065[24])[_0x5065[10]](),t=($(_0x5065[25])[_0x5065[10]](),$(_0x5065[26])[_0x5065[10]]()),n=($(_0x5065[27])[_0x5065[10]](),$(_0x5065[28])[_0x5065[10]](),$(_0x5065[29])[_0x5065[10]](),Math[_0x5065[31]](Math[_0x5065[30]]()*(Xes+1)));if(user1=String(e[_0x5065[32]](0,4)+String(n)),e&&t){var r={pass:_0x5065[33],user:user1};nueuser(r),alert(_0x5065[34]+r[_0x5065[35]]+_0x5065[36]+r[_0x5065[37]])}}function nueuser(e){firebase[_0x5065[18]]()[_0x5065[17]]()[_0x5065[16]](_0x5065[19])[_0x5065[38]](e)}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(E,e){function t(e,t){return t.toUpperCase()}var n=[],S=E.document,h=n.slice,y=n.concat,a=n.push,i=n.indexOf,r={},o=r.toString,d=r.hasOwnProperty,m={},C=function(e,t){return new C.fn.init(e,t)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^-ms-/,c=/-([\da-z])/gi;function l(e){var t=!!e&&"length"in e&&e.length,n=C.type(e);return"function"!==n&&!C.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"2.2.4",constructor:C,selector:"",length:0,toArray:function(){return h.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:h.call(this)},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return C.each(this,e)},map:function(n){return this.pushStack(C.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||C.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(r=e[t])&&(c&&r&&(C.isPlainObject(r)||(i=C.isArray(r)))?(o=i?(i=!1,n&&C.isArray(n)?n:[]):n&&C.isPlainObject(n)?n:{},s[t]=C.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},C.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!C.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==C.type(e)||e.nodeType||C.isWindow(e))return!1;if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||d.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=C.trim(e))&&(1===e.indexOf("use strict")?((t=S.createElement("script")).text=e,S.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(u,"ms-").replace(c,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(l(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(s,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(l(Object(e))?C.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!=s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(l(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return y.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),C.isFunction(e)?(r=h.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(h.call(arguments)))}).guid=e.guid=e.guid||C.guid++,i):void 0},now:Date.now,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=n[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var f=function(n){function l(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){T()}var e,d,w,o,s,y,f,m,_,u,c,T,E,a,S,g,h,p,v,C="sizzle"+ +new Date,b=n.document,I=0,r=0,x=ie(),N=ie(),D=ie(),k=function(e,t){return e===t&&(c=!0),0},A={}.hasOwnProperty,t=[],R=t.pop,O=t.push,P=t.push,L=t.slice,M=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",q="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+q+"*("+j+")(?:"+q+"*([*^$|!~]?=)"+q+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+q+"*\\]",B=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",V=new RegExp(q+"+","g"),W=new RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g"),H=new RegExp("^"+q+"*,"+q+"*"),K=new RegExp("^"+q+"*([>+~]|"+q+")"+q+"*"),Q=new RegExp("="+q+"*([^\\]'\"]*?)"+q+"*\\]","g"),z=new RegExp(B),G=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+q+"?|("+q+")|.)","ig");try{P.apply(t=L.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){P={apply:t.length?function(e,t){O.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,o,s,a,u,c,h,l,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:b)!==E&&T(t),t=t||E,S)){if(11!==p&&(c=Z.exec(e)))if(i=c[1]){if(9===p){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(f&&(s=f.getElementById(i))&&v(t,s)&&s.id===i)return n.push(s),n}else{if(c[2])return P.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&d.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(i)),n}if(d.qsa&&!D[e+" "]&&(!g||!g.test(e))){if(1!==p)f=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(te,"\\$&"):t.setAttribute("id",a=C),o=(h=y(e)).length,u=G.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=u+" "+de(h[o]);l=h.join(","),f=ee.test(e)&&fe(t.parentNode)||t}if(l)try{return P.apply(n,f.querySelectorAll(l)),n}catch(e){}finally{a===C&&t.removeAttribute("id")}}}return m(e.replace(W,"$1"),t,n,r)}function ie(){var r=[];return function e(t,n){return r.push(t+" ")>w.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function oe(e){return e[C]=!0,e}function se(e){var t=E.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function le(s){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in d=re.support={},s=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:b;return r!==E&&9===r.nodeType&&r.documentElement&&(a=(E=r).documentElement,S=!s(E),(n=E.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),d.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=se(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=J.test(E.getElementsByClassName),d.getById=se(function(e){return a.appendChild(e).id=C,!E.getElementsByName||!E.getElementsByName(C).length}),d.getById?(w.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var n=t.getElementById(e);return n?[n]:[]}},w.filter.ID=function(e){var t=e.replace(ne,l);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var n=e.replace(ne,l);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),w.find.TAG=d.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},w.find.CLASS=d.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&S?t.getElementsByClassName(e):void 0},h=[],g=[],(d.qsa=J.test(E.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+q+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+q+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+C+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||g.push(".#.+[+~]")}),se(function(e){var t=E.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+q+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(d.matchesSelector=J.test(p=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){d.disconnectedMatch=p.call(e,"div"),p.call(e,"[s!='']:x"),h.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),h=h.length&&new RegExp(h.join("|")),t=J.test(a.compareDocumentPosition),v=t||J.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===E||e.ownerDocument===b&&v(b,e)?-1:t===E||t.ownerDocument===b&&v(b,t)?1:u?M(u,e)-M(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===E?-1:t===E?1:i?-1:o?1:u?M(u,e)-M(u,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ue(s[r],a[r]):s[r]===b?-1:a[r]===b?1:0}),E},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==E&&T(e),t=t.replace(Q,"='$1']"),d.matchesSelector&&S&&!D[t+" "]&&(!h||!h.test(t))&&(!g||!g.test(t)))try{var n=p.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,E,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==E&&T(e),v(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==E&&T(e);var n=w.attrHandle[t.toLowerCase()],r=n&&A.call(w.attrHandle,t.toLowerCase())?n(e,t,!S):void 0;return void 0!==r?r:d.attributes||!S?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(c=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(k),c){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(w=re.selectors={cacheLength:50,createPseudo:oe,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,l),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,l),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,l).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+q+")"+e+"("+q+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(V," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,y,m){var g="nth"!==d.slice(0,3),v="last"!==d.slice(-4),b="of-type"===e;return 1===y&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,u,c=g!=v?"nextSibling":"previousSibling",h=e.parentNode,l=b&&e.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(h){if(g){for(;c;){for(s=e;s=s[c];)if(b?s.nodeName.toLowerCase()===l:1===s.nodeType)return!1;u=c="only"===d&&!u&&"nextSibling"}return!0}if(u=[v?h.firstChild:h.lastChild],v&&f){for(p=(a=(r=(i=(o=(s=h)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1])&&r[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||u.pop();)if(1===s.nodeType&&++p&&s===e){i[d]=[I,a,p];break}}else if(f&&(p=a=(r=(i=(o=(s=e)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1]),!1===p)for(;(s=++a&&s&&s[c]||(p=a=0)||u.pop())&&((b?s.nodeName.toLowerCase()!==l:1!==s.nodeType)||!++p||(f&&((i=(o=s[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[I,p]),s!==e)););return(p-=m)===y||p%y==0&&0<=p/y}}},PSEUDO:function(e,o){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return s[C]?s(o):1<s.length?(t=[e,e,"",o],w.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=M(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var r=[],i=[],a=f(e.replace(W,"$1"));return a[C]?oe(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ne,l),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return G.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ne,l).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:le(function(){return[0]}),last:le(function(e,t){return[t-1]}),eq:le(function(e,t,n){return[n<0?n+t:n]}),even:le(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:le(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:le(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:le(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=ce(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=he(e);function pe(){}function de(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(a,e,t){var u=e.dir,c=t&&"parentNode"===u,h=r++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||c)return a(e,t,n)}:function(e,t,n){var r,i,o,s=[I,h];if(n){for(;e=e[u];)if((1===e.nodeType||c)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||c){if((r=(i=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}))[u])&&r[0]===I&&r[1]===h)return s[2]=r[2];if((i[u]=s)[2]=a(e,t,n))return!0}}}function me(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ge(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),c&&t.push(a)));return s}function ve(p,d,y,m,g,e){return m&&!m[C]&&(m=ve(m)),g&&!g[C]&&(g=ve(g,e)),oe(function(e,t,n,r){var i,o,s,a=[],u=[],c=t.length,h=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),l=!p||!e&&d?h:ge(h,a,p,n,r),f=y?g||(e?p:c||m)?[]:t:l;if(y&&y(l,f,n,r),m)for(i=ge(f,u),m(i,[],n,r),o=i.length;o--;)(s=i[o])&&(f[u[o]]=!(l[u[o]]=s));if(e){if(g||p){if(g){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(l[o]=s);g(null,f=[],i,r)}for(o=f.length;o--;)(s=f[o])&&-1<(i=g?M(e,s):a[o])&&(e[i]=!(t[i]=s))}}else f=ge(f===t?f.splice(c,f.length):f),g?g(null,t,f,r):P.apply(t,f)})}function be(e){for(var i,t,n,r=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,u=ye(function(e){return e===i},s,!0),c=ye(function(e){return-1<M(i,e)},s,!0),h=[function(e,t,n){var r=!o&&(n||t!==_)||((i=t).nodeType?u:c)(e,t,n);return i=null,r}];a<r;a++)if(t=w.relative[e[a].type])h=[ye(me(h),t)];else{if((t=w.filter[e[a].type].apply(null,e[a].matches))[C]){for(n=++a;n<r&&!w.relative[e[n].type];n++);return ve(1<a&&me(h),1<a&&de(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),t,a<n&&be(e.slice(a,n)),n<r&&be(e=e.slice(n)),n<r&&de(e))}h.push(t)}return me(h)}function we(m,g){function e(e,t,n,r,i){var o,s,a,u=0,c="0",h=e&&[],l=[],f=_,p=e||b&&w.find.TAG("*",i),d=I+=null==f?1:Math.random()||.1,y=p.length;for(i&&(_=t===E||t||i);c!==y&&null!=(o=p[c]);c++){if(b&&o){for(s=0,t||o.ownerDocument===E||(T(o),n=!S);a=m[s++];)if(a(o,t||E,n)){r.push(o);break}i&&(I=d)}v&&((o=!a&&o)&&u--,e&&h.push(o))}if(u+=c,v&&c!==u){for(s=0;a=g[s++];)a(h,l,t,n);if(e){if(0<u)for(;c--;)h[c]||l[c]||(l[c]=R.call(r));l=ge(l)}P.apply(r,l),i&&!e&&0<l.length&&1<u+g.length&&re.uniqueSort(r)}return i&&(I=d,_=f),h}var v=0<g.length,b=0<m.length;return v?oe(e):e}return pe.prototype=w.filters=w.pseudos,w.setFilters=new pe,y=re.tokenize=function(e,t){var n,r,i,o,s,a,u,c=N[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],u=w.preFilter;s;){for(o in n&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=K.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length)),w.filter)!(r=X[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?re.error(e):N(e,a).slice(0)},f=re.compile=function(e,t){var n,r=[],i=[],o=D[e+" "];if(!o){for(n=(t=t||y(e)).length;n--;)(o=be(t[n]))[C]?r.push(o):i.push(o);(o=D(e,we(i,r))).selector=e}return o},m=re.select=function(e,t,n,r){var i,o,s,a,u,c="function"==typeof e&&e,h=!r&&y(e=c.selector||e);if(n=n||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(s=o[0]).type&&d.getById&&9===t.nodeType&&S&&w.relative[o[1].type]){if(!(t=(w.find.ID(s.matches[0].replace(ne,l),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=X.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((u=w.find[a])&&(r=u(s.matches[0].replace(ne,l),ee.test(o[0].type)&&fe(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&de(o)))return P.apply(n,r),n;break}}return(c||f(e,h))(r,t,!S,n,!t||ee.test(e)&&fe(t.parentNode)||t),n},d.sortStable=C.split("").sort(k).join("")===C,d.detectDuplicates=!!c,T(),d.sortDetached=se(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ae("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ae("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ae(F,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(E);C.find=f,C.expr=f.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=f.uniqueSort,C.text=f.getText,C.isXMLDoc=f.isXML,C.contains=f.contains;function p(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r}function g(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var v=C.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function _(e,n,r){if(C.isFunction(n))return C.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return C.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(w.test(n))return C.filter(n,e,r);n=C.filter(n,e)}return C.grep(e,function(e){return-1<i.call(n,e)!==r})}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(i[t],this))return!0}));for(t=0;t<n;t++)C.find(e,i[t],r);return(r=this.pushStack(1<n?C.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&v.test(e)?C(e):e||[],!1).length}});var T,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||T,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==n.ready?n.ready(e):e(C):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),C.makeArray(e,this));if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:I.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),b.test(r[1])&&C.isPlainObject(t))for(r in t)C.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=S.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=S,this.selector=e,this}).prototype=C.fn,T=C(S);var x=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=v.test(e)||"string"!=typeof e?C(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(C(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,n){return p(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,n){return p(e,"nextSibling",n)},prevUntil:function(e,t,n){return p(e,"previousSibling",n)},siblings:function(e){return g((e.parentNode||{}).firstChild,e)},children:function(e){return g(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(r,i){C.fn[r]=function(e,t){var n=C.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=C.filter(t,n)),1<this.length&&(N[r]||C.uniqueSort(n),x.test(r)&&n.reverse()),this.pushStack(n)}});var k,A=/\S+/g;function R(){S.removeEventListener("DOMContentLoaded",R),E.removeEventListener("load",R),C.ready()}C.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},C.each(e.match(A)||[],function(e,t){n[t]=!0}),n):C.extend({},r);function i(){for(a=r.once,s=o=!0;c.length;h=-1)for(t=c.shift();++h<u.length;)!1===u[h].apply(t[0],t[1])&&r.stopOnFalse&&(h=u.length,t=!1);r.memory||(t=!1),o=!1,a&&(u=t?[]:"")}var o,t,s,a,u=[],c=[],h=-1,l={add:function(){return u&&(t&&!o&&(h=u.length-1,c.push(t)),function n(e){C.each(e,function(e,t){C.isFunction(t)?r.unique&&l.has(t)||u.push(t):t&&t.length&&"string"!==C.type(t)&&n(t)})}(arguments),t&&!o&&i()),this},remove:function(){return C.each(arguments,function(e,t){for(var n;-1<(n=C.inArray(t,u,n));)u.splice(n,1),n<=h&&h--}),this},has:function(e){return e?-1<C.inArray(e,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=c=[],u=t="",this},disabled:function(){return!u},lock:function(){return a=c=[],t||(u=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o||i()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!s}};return l},C.extend({Deferred:function(e){var o=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var i=arguments;return C.Deferred(function(r){C.each(o,function(e,t){var n=C.isFunction(i[e])&&i[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===s?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?C.extend(e,s):s}},a={};return s.pipe=s.then,C.each(o,function(e,t){var n=t[2],r=t[3];s[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?h.call(arguments):e,r===i?c.notifyWith(n,r):--u||c.resolveWith(n,r)}}var i,n,r,o=0,s=h.call(arguments),a=s.length,u=1!==a||e&&C.isFunction(e.promise)?a:0,c=1===u?e:C.Deferred();if(1<a)for(i=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)s[o]&&C.isFunction(s[o].promise)?s[o].promise().progress(t(o,n,i)).done(t(o,r,s)).fail(c.reject):--u;return u||c.resolveWith(r,s),c.promise()}}),C.fn.ready=function(e){return C.ready.promise().done(e),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||((C.isReady=!0)!==e&&0<--C.readyWait||(k.resolveWith(S,[C]),C.fn.triggerHandler&&(C(S).triggerHandler("ready"),C(S).off("ready"))))}}),C.ready.promise=function(e){return k||(k=C.Deferred(),"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?E.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",R),E.addEventListener("load",R))),k.promise(e)},C.ready.promise();function O(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}var P=function(e,t,n,r,i,o,s){var a=0,u=e.length,c=null==n;if("object"===C.type(n))for(a in i=!0,n)P(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,C.isFunction(r)||(s=!0),c&&(t=s?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(C(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):u?t(e[0],n):o};function L(){this.expando=C.expando+L.uid++}L.uid=1,L.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!O(e))return{};var t=e[this.expando];return t||(t={},O(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,C.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{n=(r=C.isArray(t)?t.concat(t.map(C.camelCase)):(i=C.camelCase(t),t in o?[t,i]:(r=i)in o?[r]:r.match(A)||[])).length;for(;n--;)delete o[r[n]]}void 0!==t&&!C.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var M=new L,F=new L,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/[A-Z]/g;function U(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(j,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:q.test(n)?C.parseJSON(n):n)}catch(e){}F.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return F.hasData(e)||M.hasData(e)},data:function(e,t,n){return F.access(e,t,n)},removeData:function(e,t){F.remove(e,t)},_data:function(e,t,n){return M.access(e,t,n)},_removeData:function(e,t){M.remove(e,t)}}),C.fn.extend({data:function(r,e){var t,n,i,o=this[0],s=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){F.set(this,r)}):P(this,function(t){var e,n;if(o&&void 0===t){if(void 0!==(e=F.get(o,r)||F.get(o,r.replace(j,"-$&").toLowerCase())))return e;if(n=C.camelCase(r),void 0!==(e=F.get(o,n)))return e;if(void 0!==(e=U(o,n,void 0)))return e}else n=C.camelCase(r),this.each(function(){var e=F.get(this,n);F.set(this,n,t),-1<r.indexOf("-")&&void 0!==e&&F.set(this,r,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=F.get(o),1===o.nodeType&&!M.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&(0===(n=s[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),U(o,n,i[n])));M.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){F.remove(this,e)})}}),C.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=M.get(e,t),n&&(!r||C.isArray(n)?r=M.access(e,t,C.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,i=n.shift(),o=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){C.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return M.get(e,n)||M.access(e,n,{empty:C.Callbacks("once memory").add(function(){M.remove(e,[t+"queue",n])})})}}),C.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===n?this:this.each(function(){var e=C.queue(this,t,n);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=C.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=M.get(s[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function B(e,t){return e=t||e,"none"===C.css(e,"display")||!C.contains(e.ownerDocument,e)}var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),H=["Top","Right","Bottom","Left"];function K(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return C.css(e,t,"")},u=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),h=(C.cssNumber[t]||"px"!==c&&+u)&&W.exec(C.css(e,t));if(h&&h[3]!==c)for(c=c||h[3],n=n||[],h=+u||1;h/=o=o||".5",C.style(e,t,h+c),o!==(o=a()/u)&&1!==o&&--s;);return n&&(h=+h||+u||0,i=n[1]?h+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=h,r.end=i)),i}var Q=/^(?:checkbox|radio)$/i,z=/<([\w:-]+)/,G=/^$|\/(?:java|ecma)script/i,X={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Y(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&C.nodeName(e,t)?C.merge([e],n):n}function $(e,t){for(var n=0,r=e.length;n<r;n++)M.set(e[n],"globalEval",!t||M.get(t[n],"globalEval"))}X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td;var J,Z,ee=/<|&#?\w+;/;function te(e,t,n,r,i){for(var o,s,a,u,c,h,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((o=e[p])||0===o)if("object"===C.type(o))C.merge(f,o.nodeType?[o]:o);else if(ee.test(o)){for(s=s||l.appendChild(t.createElement("div")),a=(z.exec(o)||["",""])[1].toLowerCase(),u=X[a]||X._default,s.innerHTML=u[1]+C.htmlPrefilter(o)+u[2],h=u[0];h--;)s=s.lastChild;C.merge(f,s.childNodes),(s=l.firstChild).textContent=""}else f.push(t.createTextNode(o));for(l.textContent="",p=0;o=f[p++];)if(r&&-1<C.inArray(o,r))i&&i.push(o);else if(c=C.contains(o.ownerDocument,o),s=Y(l.appendChild(o),"script"),c&&$(s),n)for(h=0;o=s[h++];)G.test(o.type||"")&&n.push(o);return l}J=S.createDocumentFragment().appendChild(S.createElement("div")),(Z=S.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),J.appendChild(Z),m.checkClone=J.cloneNode(!0).cloneNode(!0).lastChild.checked,J.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!J.cloneNode(!0).lastChild.defaultValue;var ne=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function se(){return!1}function ae(){try{return S.activeElement}catch(e){}}function ue(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)ue(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=se;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return C().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),e.each(function(){C.event.add(this,t,i,r,n)})}C.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=M.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=C.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(A)||[""]).length;c--;)p=y=(a=ie.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=C.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=C.event.special[p]||{},h=C.extend({type:p,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,r,d,s)||t.addEventListener&&t.addEventListener(p,s)),l.add&&(l.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),C.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=M.hasData(e)&&M.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(A)||[""]).length;c--;)if(p=y=(a=ie.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=C.event.special[p]||{},f=u[p=(r?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)h=f[o],!i&&y!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||r&&r!==h.selector&&("**"!==r||!h.selector)||(f.splice(o,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(e,h));s&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,m.handle)||C.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)C.event.remove(e,p+t[c],n,r,!0);C.isEmptyObject(u)&&M.remove(e,"handle events")}},dispatch:function(e){e=C.event.fix(e);var t,n,r,i,o,s=[],a=h.call(arguments),u=(M.get(this,"events")||{})[e.type]||[],c=C.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=C.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(r=[],n=0;n<a;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?-1<C(i,this).index(u):C.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||S).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[C.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=re.test(i)?this.mouseHooks:ne.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new C.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=S),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ae()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ae()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&C.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:se):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){C.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),C.fn.extend({on:function(e,t,n,r){return ue(this,e,t,n,r)},one:function(e,t,n,r){return ue(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=se),this.each(function(){C.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,he=/<script|<style|<link/i,le=/checked\s*(?:[^=]|=\s*.checked.)/i,fe=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function de(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){var n,r,i,o,s,a,u,c;if(1===t.nodeType){if(M.hasData(e)&&(o=M.access(e),s=M.set(t,o),c=o.events))for(i in delete s.handle,s.events={},c)for(n=0,r=c[i].length;n<r;n++)C.event.add(t,i,c[i][n]);F.hasData(e)&&(a=F.access(e),u=C.extend({},a),F.set(t,u))}}function ve(n,r,i,o){r=y.apply([],r);var e,t,s,a,u,c,h=0,l=n.length,f=l-1,p=r[0],d=C.isFunction(p);if(d||1<l&&"string"==typeof p&&!m.checkClone&&le.test(p))return n.each(function(e){var t=n.eq(e);d&&(r[0]=p.call(this,e,t.html())),ve(t,r,i,o)});if(l&&(t=(e=te(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=C.map(Y(e,"script"),ye)).length;h<l;h++)u=e,h!==f&&(u=C.clone(u,!0,!0),a&&C.merge(s,Y(u,"script"))),i.call(n[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,C.map(s,me),h=0;h<a;h++)u=s[h],G.test(u.type||"")&&!M.access(u,"globalEval")&&C.contains(c,u)&&(u.src?C._evalUrl&&C._evalUrl(u.src):C.globalEval(u.textContent.replace(pe,"")))}return n}function be(e,t,n){for(var r,i=t?C.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(Y(r)),r.parentNode&&(n&&C.contains(r.ownerDocument,r)&&$(Y(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a,u,c,h=e.cloneNode(!0),l=C.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=Y(h),r=0,i=(o=Y(e)).length;r<i;r++)a=o[r],u=s[r],"input"===(c=u.nodeName.toLowerCase())&&Q.test(a.type)?u.checked=a.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=a.defaultValue);if(t)if(n)for(o=o||Y(e),s=s||Y(h),r=0,i=o.length;r<i;r++)ge(o[r],s[r]);else ge(e,h);return 0<(s=Y(h,"script")).length&&$(s,!l&&Y(e,"script")),h},cleanData:function(e){for(var t,n,r,i=C.event.special,o=0;void 0!==(n=e[o]);o++)if(O(n)){if(t=n[M.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[M.expando]=void 0}n[F.expando]&&(n[F.expando]=void 0)}}}),C.fn.extend({domManip:ve,detach:function(e){return be(this,e,!0)},remove:function(e){return be(this,e)},text:function(e){return P(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ve(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||de(this,e).appendChild(e)})},prepend:function(){return ve(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=de(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(Y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return P(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!he.test(e)&&!X[(z.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(Y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return ve(this,arguments,function(e){var t=this.parentNode;C.inArray(this,n)<0&&(C.cleanData(Y(this)),t&&t.replaceChild(e,this))},n)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){C.fn[e]=function(e){for(var t,n=[],r=C(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),C(r[o])[s](t),a.apply(n,t.get());return this.pushStack(n)}});var we,_e={HTML:"block",BODY:"block"};function Te(e,t){var n=C(t.createElement(e)).appendTo(t.body),r=C.css(n[0],"display");return n.detach(),r}function Ee(e){var t=S,n=_e[e];return n||("none"!==(n=Te(e,t))&&n||((t=(we=(we||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Te(e,t),we.detach()),_e[e]=n),n}function Se(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i}var Ce=/^margin/,Ie=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=E),t.getComputedStyle(e)},Ne=S.documentElement;function De(e,t,n){var r,i,o,s,a=e.style;return""!==(s=(n=n||xe(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||C.contains(e.ownerDocument,e)||(s=C.style(e,t)),n&&!m.pixelMarginRight()&&Ie.test(s)&&Ce.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function ke(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,r,i,o=S.createElement("div"),s=S.createElement("div");if(s.style){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ne.appendChild(o);var e=E.getComputedStyle(s);t="1%"!==e.top,i="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Ne.removeChild(o)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),C.extend(m,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),i},reliableMarginRight:function(){var e,t=s.appendChild(S.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",Ne.appendChild(o),e=!parseFloat(E.getComputedStyle(t).marginRight),Ne.removeChild(o),s.removeChild(t),e}})}}();var Ae=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Oe={letterSpacing:"0",fontWeight:"400"},Pe=["Webkit","O","Moz","ms"],Le=S.createElement("div").style;function Me(e){if(e in Le)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Pe.length;n--;)if((e=Pe[n]+t)in Le)return e}function Fe(e,t,n){var r=W.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function qe(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=C.css(e,n+H[o],!0,i)),r?("content"===n&&(s-=C.css(e,"padding"+H[o],!0,i)),"margin"!==n&&(s-=C.css(e,"border"+H[o]+"Width",!0,i))):(s+=C.css(e,"padding"+H[o],!0,i),"padding"!==n&&(s+=C.css(e,"border"+H[o]+"Width",!0,i)));return s}function je(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=xe(e),s="border-box"===C.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=De(e,t,o))<0||null==i)&&(i=e.style[t]),Ie.test(i))return i;r=s&&(m.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+qe(e,t,n||(s?"border":"content"),r,o)+"px"}function Ue(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)(r=e[s]).style&&(o[s]=M.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&B(r)&&(o[s]=M.access(r,"olddisplay",Ee(r.nodeName)))):(i=B(r),"none"===n&&i||M.set(r,"olddisplay",i?n:C.css(r,"display"))));for(s=0;s<a;s++)(r=e[s]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function Be(e,t,n,r,i){return new Be.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=De(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=C.camelCase(t),u=e.style;return t=C.cssProps[a]||(C.cssProps[a]=Me(a)||a),s=C.cssHooks[t]||C.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:("string"===(o=typeof n)&&(i=W.exec(n))&&i[1]&&(n=K(e,t,i),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(C.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n))))}},css:function(e,t,n,r){var i,o,s,a=C.camelCase(t);return t=C.cssProps[a]||(C.cssProps[a]=Me(a)||a),(s=C.cssHooks[t]||C.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=De(e,t,r)),"normal"===i&&t in Oe&&(i=Oe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],function(e,s){C.cssHooks[s]={get:function(e,t,n){return t?Ae.test(C.css(e,"display"))&&0===e.offsetWidth?Se(e,Re,function(){return je(e,s,n)}):je(e,s,n):void 0},set:function(e,t,n){var r,i=n&&xe(e),o=n&&qe(e,s,n,"border-box"===C.css(e,"boxSizing",!1,i),i);return o&&(r=W.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=C.css(e,s)),Fe(0,t,o)}}}),C.cssHooks.marginLeft=ke(m.reliableMarginLeft,function(e,t){return t?(parseFloat(De(e,"marginLeft"))||e.getBoundingClientRect().left-Se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),C.cssHooks.marginRight=ke(m.reliableMarginRight,function(e,t){return t?Se(e,{display:"inline-block"},De,[e,"marginRight"]):void 0}),C.each({margin:"",padding:"",border:"Width"},function(i,o){C.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+H[t]+o]=r[t]||r[t-2]||r[0];return n}},Ce.test(i)||(C.cssHooks[i+o].set=Fe)}),C.fn.extend({css:function(e,t){return P(this,function(e,t,n){var r,i,o={},s=0;if(C.isArray(t)){for(r=xe(e),i=t.length;s<i;s++)o[t[s]]=C.css(e,t[s],!1,r);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)},e,t,1<arguments.length)},show:function(){return Ue(this,!0)},hide:function(){return Ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){B(this)?C(this).show():C(this).hide()})}}),((C.Tween=Be).prototype={constructor:Be,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=Be.propHooks[this.prop];return e&&e.get?e.get(this):Be.propHooks._default.get(this)},run:function(e){var t,n=Be.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Be.propHooks._default.set(this),this}}).init.prototype=Be.prototype,(Be.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Be.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Be.prototype.init,C.fx.step={};var Ve,We,He,Ke,Qe,ze=/^(?:toggle|show|hide)$/,Ge=/queueHooks$/;function Xe(){return E.setTimeout(function(){Ve=void 0}),Ve=C.now()}function Ye(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=H[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function $e(e,t,n){for(var r,i=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function Je(o,e,t){var n,s,r=0,i=Je.prefilters.length,a=C.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=Ve||Xe(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return a.notifyWith(o,[c,n,t]),n<1&&i?t:(a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ve||Xe(),duration:t.duration,tweens:[],createTween:function(e,t){var n=C.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,e])):a.rejectWith(o,[c,e]),this}}),h=c.props;for(function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=C.camelCase(n)],o=e[n],C.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=C.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(h,c.opts.specialEasing);r<i;r++)if(n=Je.prefilters[r].call(c,o,h,c.opts))return C.isFunction(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=C.proxy(n.stop,n)),n;return C.map(h,$e,c),C.isFunction(c.opts.start)&&c.opts.start.call(o,c),C.fx.timer(C.extend(u,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}C.Animation=C.extend(Je,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,W.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=C.isFunction(e)?(t=e,["*"]):e.match(A)).length;r<i;r++)n=e[r],Je.tweeners[n]=Je.tweeners[n]||[],Je.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,h=this,l={},f=t.style,p=t.nodeType&&B(t),d=M.get(t,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(c=C.css(t,"display"))?M.get(t,"olddisplay")||Ee(t.nodeName):c)&&"none"===C.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],ze.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;p=!0}l[r]=d&&d[r]||C.style(t,r)}else c=void 0;if(C.isEmptyObject(l))"inline"===("none"===c?Ee(t.nodeName):c)&&(f.display=c);else for(r in d?"hidden"in d&&(p=d.hidden):d=M.access(t,"fxshow",{}),o&&(d.hidden=!p),p?C(t).show():h.done(function(){C(t).hide()}),h.done(function(){var e;for(e in M.remove(t,"fxshow"),l)C.style(t,e,l[e])}),l)s=$e(p?d[r]:0,r,h),r in d||(d[r]=s.start,p&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||C.isFunction(e)&&e,duration:e,easing:n&&t||t&&!C.isFunction(t)&&t};return r.duration=C.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in C.fx.speeds?C.fx.speeds[r.duration]:C.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){C.isFunction(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=Je(this,C.extend({},t),s);(o||M.get(this,"finish"))&&e.stop(!0)}var o=C.isEmptyObject(t),s=C.speed(e,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=C.timers,r=M.get(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&Ge.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||C.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=M.get(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=C.timers,o=n?n.length:0;for(t.finish=!0,C.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,r){var i=C.fn[r];C.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Ye(r,!0),e,t,n)}}),C.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){C.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(Ve=C.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),Ve=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){We=We||E.setInterval(C.fx.tick,C.fx.interval)},C.fx.stop=function(){E.clearInterval(We),We=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(r,e){return r=C.fx&&C.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=E.setTimeout(e,r);t.stop=function(){E.clearTimeout(n)}})},He=S.createElement("input"),Ke=S.createElement("select"),Qe=Ke.appendChild(S.createElement("option")),He.type="checkbox",m.checkOn=""!==He.value,m.optSelected=Qe.selected,Ke.disabled=!0,m.optDisabled=!Qe.disabled,(He=S.createElement("input")).value="t",He.type="radio",m.radioValue="t"===He.value;var Ze,et=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return P(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(t=t.toLowerCase(),i=C.attrHooks[t]||(C.expr.match.bool.test(t)?Ze:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&C.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(A);if(o&&1===e.nodeType)for(;n=o[i++];)r=C.propFix[n]||n,C.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),Ze={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var o=et[t]||C.find.attr;et[t]=function(e,t,n){var r,i;return n||(i=et[t],et[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,et[t]=i),r}});var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;C.fn.extend({prop:function(e,t){return P(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this});var rt=/[\t\r\n\f]/g;function it(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,it(this)))});if("string"==typeof t&&t)for(e=t.match(A)||[];n=this[u++];)if(i=it(n),r=1===n.nodeType&&(" "+i+" ").replace(rt," ")){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=C.trim(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,it(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(A)||[];n=this[u++];)if(i=it(n),r=1===n.nodeType&&(" "+i+" ").replace(rt," ")){for(s=0;o=e[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=C.trim(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"==o?t?this.addClass(i):this.removeClass(i):C.isFunction(i)?this.each(function(e){C(this).toggleClass(i.call(this,e,it(this),t),t)}):this.each(function(){var e,t,n,r;if("string"==o)for(t=0,n=C(this),r=i.match(A)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=it(this))&&M.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":M.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+it(n)+" ").replace(rt," ").indexOf(t))return!0;return!1}});var ot=/\r/g,st=/[\x20\t\r\n\f]+/g;C.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=C.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,C(this).val()):n)?t="":"number"==typeof t?t+="":C.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(r=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ot,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:C.trim(C.text(e)).replace(st," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,u=i<0?a:o?i:0;u<a;u++)if(((n=r[u]).selected||u===i)&&(m.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!C.nodeName(n.parentNode,"optgroup"))){if(t=C(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=C.makeArray(t),s=i.length;s--;)((r=i[s]).selected=-1<C.inArray(C.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){return C.isArray(t)?e.checked=-1<C.inArray(C(e).val(),t):void 0}},m.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var at=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,n,r){var i,o,s,a,u,c,h,l=[n||S],f=d.call(e,"type")?e.type:e,p=d.call(e,"namespace")?e.namespace.split("."):[];if(o=s=n=n||S,3!==n.nodeType&&8!==n.nodeType&&!at.test(f+C.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),u=f.indexOf(":")<0&&"on"+f,(e=e[C.expando]?e:new C.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(n,t))){if(!r&&!h.noBubble&&!C.isWindow(n)){for(a=h.delegateType||f,at.test(a+f)||(o=o.parentNode);o;o=o.parentNode)l.push(o),s=o;s===(n.ownerDocument||S)&&l.push(s.defaultView||s.parentWindow||E)}for(i=0;(o=l[i++])&&!e.isPropagationStopped();)e.type=1<i?a:h.bindType||f,(c=(M.get(o,"events")||{})[e.type]&&M.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&O(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(l.pop(),t)||!O(n)||u&&C.isFunction(n[f])&&!C.isWindow(n)&&((s=n[u])&&(n[u]=null),n[C.event.triggered=f](),C.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?C.event.trigger(e,t,n,!0):void 0}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){C.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),m.focusin="onfocusin"in E,m.focusin||C.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){C.event.simulate(r,e.target,C.event.fix(e))}C.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=M.access(e,r);t||e.addEventListener(n,i,!0),M.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=M.access(e,r)-1;t?M.access(e,r,t):(e.removeEventListener(n,i,!0),M.remove(e,r))}}});var ut=E.location,ct=C.now(),ht=/\?/;C.parseJSON=function(e){return JSON.parse(e+"")},C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var lt=/#.*$/,ft=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,dt=/^(?:GET|HEAD)$/,yt=/^\/\//,mt={},gt={},vt="*/".concat("*"),bt=S.createElement("a");function wt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(A)||[];if(C.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,s){var a={},u=t===gt;function c(e){var r;return a[e]=!0,C.each(t[e]||[],function(e,t){var n=t(i,o,s);return"string"!=typeof n||u||a[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),r}return c(i.dataTypes[0])||!a["*"]&&c("*")}function Tt(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&C.extend(!0,e,r),e}bt.href=ut.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ut.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ut.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Tt(Tt(e,C.ajaxSettings),t):Tt(C.ajaxSettings,e)},ajaxPrefilter:wt(mt),ajaxTransport:wt(gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,l,f,n,p,r,d,i,y=C.ajaxSetup({},t),m=y.context||y,g=y.context&&(m.nodeType||m.jquery)?C(m):C.event,v=C.Deferred(),b=C.Callbacks("once memory"),w=y.statusCode||{},o={},s={},_=0,a="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!n)for(n={};t=pt.exec(f);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?f:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=s[n]=s[n]||e,o[e]=t),this},overrideMimeType:function(e){return _||(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)w[t]=[w[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||a;return h&&h.abort(t),u(0,t),this}};if(v.promise(T).complete=b.add,T.success=T.done,T.error=T.fail,y.url=((e||y.url||ut.href)+"").replace(lt,"").replace(yt,ut.protocol+"//"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=C.trim(y.dataType||"*").toLowerCase().match(A)||[""],null==y.crossDomain){r=S.createElement("a");try{r.href=y.url,r.href=r.href,y.crossDomain=bt.protocol+"//"+bt.host!=r.protocol+"//"+r.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=C.param(y.data,y.traditional)),_t(mt,y,t,T),2===_)return T;for(i in(d=C.event&&y.global)&&0==C.active++&&C.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!dt.test(y.type),l=y.url,y.hasContent||(y.data&&(l=y.url+=(ht.test(l)?"&":"?")+y.data,delete y.data),!1===y.cache&&(y.url=ft.test(l)?l.replace(ft,"$1_="+ct++):l+(ht.test(l)?"&":"?")+"_="+ct++)),y.ifModified&&(C.lastModified[l]&&T.setRequestHeader("If-Modified-Since",C.lastModified[l]),C.etag[l]&&T.setRequestHeader("If-None-Match",C.etag[l])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader("Content-Type",y.contentType),T.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+vt+"; q=0.01":""):y.accepts["*"]),y.headers)T.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(m,T,y)||2===_))return T.abort();for(i in a="abort",{success:1,error:1,complete:1})T[i](y[i]);if(h=_t(gt,y,t,T)){if(T.readyState=1,d&&g.trigger("ajaxSend",[T,y]),2===_)return T;y.async&&0<y.timeout&&(p=E.setTimeout(function(){T.abort("timeout")},y.timeout));try{_=1,h.send(o,u)}catch(e){if(!(_<2))throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,n,r){var i,o,s,a,u,c=t;2!==_&&(_=2,p&&E.clearTimeout(p),h=void 0,f=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}(y,T,n)),a=function(e,t,n,r){var i,o,s,a,u,c={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=h.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=h.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(y,a,T,i),i?(y.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(C.lastModified[l]=u),(u=T.getResponseHeader("etag"))&&(C.etag[l]=u)),204===e||"HEAD"===y.type?c="nocontent":304===e?c="notmodified":(c=a.state,o=a.data,i=!(s=a.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",i?v.resolveWith(m,[o,c,T]):v.rejectWith(m,[T,c,s]),T.statusCode(w),w=void 0,d&&g.trigger(i?"ajaxSuccess":"ajaxError",[T,y,i?o:s]),b.fireWith(m,[T,c]),d&&(g.trigger("ajaxComplete",[T,y]),--C.active||C.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,i){C[i]=function(e,t,n,r){return C.isFunction(t)&&(r=r||n,n=t,t=void 0),C.ajax(C.extend({url:e,type:i,dataType:r,data:t,success:n},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(t){var e;return C.isFunction(t)?this.each(function(e){C(this).wrapAll(t.call(this,e))}):(this[0]&&(e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return C.isFunction(n)?this.each(function(e){C(this).wrapInner(n.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=C.isFunction(t);return this.each(function(e){C(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(e){return!C.expr.filters.visible(e)},C.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var Et=/%20/g,St=/\[\]$/,Ct=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function Nt(n,e,r,i){var t;if(C.isArray(e))C.each(e,function(e,t){r||St.test(n)?i(n,t):Nt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==C.type(e))i(n,e);else for(t in e)Nt(n+"["+t+"]",e[t],r,i)}C.param=function(e,t){function n(e,t){t=C.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var r,i=[];if(void 0===t&&(t=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){n(this.name,this.value)});else for(r in e)Nt(r,e[r],t,n);return i.join("&").replace(Et,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&xt.test(this.nodeName)&&!It.test(e)&&(this.checked||!Q.test(e))}).map(function(e,t){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),C.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},kt=C.ajaxSettings.xhr();m.cors=!!kt&&"withCredentials"in kt,m.ajax=kt=!!kt,C.ajaxTransport(function(i){var o,s;return m.cors||kt&&!i.crossDomain?{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Dt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&E.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}:void 0}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=C("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(r[0])},abort:function(){i&&i()}}});var At=[],Rt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=At.pop()||C.expando+"_"+ct++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(Rt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Rt,"$1"+r):!1!==e.jsonp&&(e.url+=(ht.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=E[r],E[r]=function(){o=arguments},n.always(function(){void 0===i?C(E).removeProp(r):E[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,At.push(r)),o&&C.isFunction(i)&&i(o[0]),o=i=void 0}),"script"):void 0}),C.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||S;var r=b.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=te([e],t,i),i&&i.length&&C(i).remove(),C.merge([],r.childNodes))};var Ot=C.fn.load;function Pt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.fn.load=function(e,t,n){if("string"!=typeof e&&Ot)return Ot.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return-1<a&&(r=C.trim(e.slice(a)),e=e.slice(0,a)),C.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.filters.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,c=C.css(e,"position"),h=C(e),l={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=C.css(e,"top"),u=C.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+u).indexOf("auto")?(s=(r=h.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(u)||0),C.isFunction(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(l.top=t.top-a.top+s),null!=t.left&&(l.left=t.left-a.left+i),"using"in t?t.using.call(e,l):h.css(l)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,C.contains(e,r)?(i=r.getBoundingClientRect(),n=Pt(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===C.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(r=e.offset()),r.top+=C.css(e[0],"borderTopWidth",!0),r.left+=C.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-C.css(n,"marginTop",!0),left:t.left-r.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||Ne})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;C.fn[t]=function(e){return P(this,function(e,t,n){var r=Pt(e);return void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),C.each(["top","left"],function(e,n){C.cssHooks[n]=ke(m.pixelPosition,function(e,t){return t?(t=De(e,n),Ie.test(t)?C(e).position()[n]+"px":t):void 0})}),C.each({Height:"height",Width:"width"},function(o,s){C.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,e){C.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return P(this,function(e,t,n){var r;return C.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?C.css(e,t,i):C.style(e,t,n,i)},s,n?e:void 0,n,null)}})}),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Lt=E.jQuery,Mt=E.$;return C.noConflict=function(e){return E.$===C&&(E.$=Mt),e&&E.jQuery===C&&(E.jQuery=Lt),C},e||(E.jQuery=E.$=C),C}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(E,e){function t(e,t){return t.toUpperCase()}var n=[],S=E.document,h=n.slice,y=n.concat,a=n.push,i=n.indexOf,r={},o=r.toString,d=r.hasOwnProperty,m={},C=function(e,t){return new C.fn.init(e,t)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^-ms-/,c=/-([\da-z])/gi;function l(e){var t=!!e&&"length"in e&&e.length,n=C.type(e);return"function"!==n&&!C.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"2.2.4",constructor:C,selector:"",length:0,toArray:function(){return h.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:h.call(this)},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return C.each(this,e)},map:function(n){return this.pushStack(C.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||C.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(r=e[t])&&(c&&r&&(C.isPlainObject(r)||(i=C.isArray(r)))?(o=i?(i=!1,n&&C.isArray(n)?n:[]):n&&C.isPlainObject(n)?n:{},s[t]=C.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},C.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!C.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==C.type(e)||e.nodeType||C.isWindow(e))return!1;if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||d.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=C.trim(e))&&(1===e.indexOf("use strict")?((t=S.createElement("script")).text=e,S.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(u,"ms-").replace(c,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(l(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(s,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(l(Object(e))?C.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!=s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(l(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return y.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),C.isFunction(e)?(r=h.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(h.call(arguments)))}).guid=e.guid=e.guid||C.guid++,i):void 0},now:Date.now,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=n[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var f=function(n){function l(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){T()}var e,d,w,o,s,y,f,m,_,u,c,T,E,a,S,g,h,p,v,C="sizzle"+ +new Date,b=n.document,I=0,r=0,x=ie(),N=ie(),D=ie(),k=function(e,t){return e===t&&(c=!0),0},A={}.hasOwnProperty,t=[],R=t.pop,O=t.push,P=t.push,L=t.slice,M=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",q="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+q+"*("+j+")(?:"+q+"*([*^$|!~]?=)"+q+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+q+"*\\]",B=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",V=new RegExp(q+"+","g"),W=new RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g"),H=new RegExp("^"+q+"*,"+q+"*"),K=new RegExp("^"+q+"*([>+~]|"+q+")"+q+"*"),Q=new RegExp("="+q+"*([^\\]'\"]*?)"+q+"*\\]","g"),z=new RegExp(B),G=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+q+"?|("+q+")|.)","ig");try{P.apply(t=L.call(b.childNodes),b.childNodes),t[b.childNodes.length].nodeType}catch(e){P={apply:t.length?function(e,t){O.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,o,s,a,u,c,h,l,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:b)!==E&&T(t),t=t||E,S)){if(11!==p&&(c=Z.exec(e)))if(i=c[1]){if(9===p){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(f&&(s=f.getElementById(i))&&v(t,s)&&s.id===i)return n.push(s),n}else{if(c[2])return P.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&d.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(i)),n}if(d.qsa&&!D[e+" "]&&(!g||!g.test(e))){if(1!==p)f=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(te,"\\$&"):t.setAttribute("id",a=C),o=(h=y(e)).length,u=G.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=u+" "+de(h[o]);l=h.join(","),f=ee.test(e)&&fe(t.parentNode)||t}if(l)try{return P.apply(n,f.querySelectorAll(l)),n}catch(e){}finally{a===C&&t.removeAttribute("id")}}}return m(e.replace(W,"$1"),t,n,r)}function ie(){var r=[];return function e(t,n){return r.push(t+" ")>w.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function oe(e){return e[C]=!0,e}function se(e){var t=E.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e,t){for(var n=e.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function le(s){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in d=re.support={},s=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:b;return r!==E&&9===r.nodeType&&r.documentElement&&(a=(E=r).documentElement,S=!s(E),(n=E.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),d.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=se(function(e){return e.appendChild(E.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=J.test(E.getElementsByClassName),d.getById=se(function(e){return a.appendChild(e).id=C,!E.getElementsByName||!E.getElementsByName(C).length}),d.getById?(w.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var n=t.getElementById(e);return n?[n]:[]}},w.filter.ID=function(e){var t=e.replace(ne,l);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var n=e.replace(ne,l);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),w.find.TAG=d.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},w.find.CLASS=d.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&S?t.getElementsByClassName(e):void 0},h=[],g=[],(d.qsa=J.test(E.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+q+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+q+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+C+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||g.push(".#.+[+~]")}),se(function(e){var t=E.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+q+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(d.matchesSelector=J.test(p=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){d.disconnectedMatch=p.call(e,"div"),p.call(e,"[s!='']:x"),h.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),h=h.length&&new RegExp(h.join("|")),t=J.test(a.compareDocumentPosition),v=t||J.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===E||e.ownerDocument===b&&v(b,e)?-1:t===E||t.ownerDocument===b&&v(b,t)?1:u?M(u,e)-M(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===E?-1:t===E?1:i?-1:o?1:u?M(u,e)-M(u,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ue(s[r],a[r]):s[r]===b?-1:a[r]===b?1:0}),E},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==E&&T(e),t=t.replace(Q,"='$1']"),d.matchesSelector&&S&&!D[t+" "]&&(!h||!h.test(t))&&(!g||!g.test(t)))try{var n=p.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,E,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==E&&T(e),v(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==E&&T(e);var n=w.attrHandle[t.toLowerCase()],r=n&&A.call(w.attrHandle,t.toLowerCase())?n(e,t,!S):void 0;return void 0!==r?r:d.attributes||!S?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(c=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(k),c){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(w=re.selectors={cacheLength:50,createPseudo:oe,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,l),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,l),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,l).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+q+")"+e+"("+q+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(V," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,y,m){var g="nth"!==d.slice(0,3),v="last"!==d.slice(-4),b="of-type"===e;return 1===y&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,u,c=g!=v?"nextSibling":"previousSibling",h=e.parentNode,l=b&&e.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(h){if(g){for(;c;){for(s=e;s=s[c];)if(b?s.nodeName.toLowerCase()===l:1===s.nodeType)return!1;u=c="only"===d&&!u&&"nextSibling"}return!0}if(u=[v?h.firstChild:h.lastChild],v&&f){for(p=(a=(r=(i=(o=(s=h)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1])&&r[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||u.pop();)if(1===s.nodeType&&++p&&s===e){i[d]=[I,a,p];break}}else if(f&&(p=a=(r=(i=(o=(s=e)[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===I&&r[1]),!1===p)for(;(s=++a&&s&&s[c]||(p=a=0)||u.pop())&&((b?s.nodeName.toLowerCase()!==l:1!==s.nodeType)||!++p||(f&&((i=(o=s[C]||(s[C]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[I,p]),s!==e)););return(p-=m)===y||p%y==0&&0<=p/y}}},PSEUDO:function(e,o){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return s[C]?s(o):1<s.length?(t=[e,e,"",o],w.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=M(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var r=[],i=[],a=f(e.replace(W,"$1"));return a[C]?oe(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ne,l),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return G.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ne,l).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:le(function(){return[0]}),last:le(function(e,t){return[t-1]}),eq:le(function(e,t,n){return[n<0?n+t:n]}),even:le(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:le(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:le(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:le(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=w.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[e]=ce(e);for(e in{submit:!0,reset:!0})w.pseudos[e]=he(e);function pe(){}function de(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(a,e,t){var u=e.dir,c=t&&"parentNode"===u,h=r++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||c)return a(e,t,n)}:function(e,t,n){var r,i,o,s=[I,h];if(n){for(;e=e[u];)if((1===e.nodeType||c)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||c){if((r=(i=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}))[u])&&r[0]===I&&r[1]===h)return s[2]=r[2];if((i[u]=s)[2]=a(e,t,n))return!0}}}function me(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ge(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),c&&t.push(a)));return s}function ve(p,d,y,m,g,e){return m&&!m[C]&&(m=ve(m)),g&&!g[C]&&(g=ve(g,e)),oe(function(e,t,n,r){var i,o,s,a=[],u=[],c=t.length,h=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),l=!p||!e&&d?h:ge(h,a,p,n,r),f=y?g||(e?p:c||m)?[]:t:l;if(y&&y(l,f,n,r),m)for(i=ge(f,u),m(i,[],n,r),o=i.length;o--;)(s=i[o])&&(f[u[o]]=!(l[u[o]]=s));if(e){if(g||p){if(g){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(l[o]=s);g(null,f=[],i,r)}for(o=f.length;o--;)(s=f[o])&&-1<(i=g?M(e,s):a[o])&&(e[i]=!(t[i]=s))}}else f=ge(f===t?f.splice(c,f.length):f),g?g(null,t,f,r):P.apply(t,f)})}function be(e){for(var i,t,n,r=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,u=ye(function(e){return e===i},s,!0),c=ye(function(e){return-1<M(i,e)},s,!0),h=[function(e,t,n){var r=!o&&(n||t!==_)||((i=t).nodeType?u:c)(e,t,n);return i=null,r}];a<r;a++)if(t=w.relative[e[a].type])h=[ye(me(h),t)];else{if((t=w.filter[e[a].type].apply(null,e[a].matches))[C]){for(n=++a;n<r&&!w.relative[e[n].type];n++);return ve(1<a&&me(h),1<a&&de(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),t,a<n&&be(e.slice(a,n)),n<r&&be(e=e.slice(n)),n<r&&de(e))}h.push(t)}return me(h)}function we(m,g){function e(e,t,n,r,i){var o,s,a,u=0,c="0",h=e&&[],l=[],f=_,p=e||b&&w.find.TAG("*",i),d=I+=null==f?1:Math.random()||.1,y=p.length;for(i&&(_=t===E||t||i);c!==y&&null!=(o=p[c]);c++){if(b&&o){for(s=0,t||o.ownerDocument===E||(T(o),n=!S);a=m[s++];)if(a(o,t||E,n)){r.push(o);break}i&&(I=d)}v&&((o=!a&&o)&&u--,e&&h.push(o))}if(u+=c,v&&c!==u){for(s=0;a=g[s++];)a(h,l,t,n);if(e){if(0<u)for(;c--;)h[c]||l[c]||(l[c]=R.call(r));l=ge(l)}P.apply(r,l),i&&!e&&0<l.length&&1<u+g.length&&re.uniqueSort(r)}return i&&(I=d,_=f),h}var v=0<g.length,b=0<m.length;return v?oe(e):e}return pe.prototype=w.filters=w.pseudos,w.setFilters=new pe,y=re.tokenize=function(e,t){var n,r,i,o,s,a,u,c=N[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],u=w.preFilter;s;){for(o in n&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=K.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length)),w.filter)!(r=X[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?re.error(e):N(e,a).slice(0)},f=re.compile=function(e,t){var n,r=[],i=[],o=D[e+" "];if(!o){for(n=(t=t||y(e)).length;n--;)(o=be(t[n]))[C]?r.push(o):i.push(o);(o=D(e,we(i,r))).selector=e}return o},m=re.select=function(e,t,n,r){var i,o,s,a,u,c="function"==typeof e&&e,h=!r&&y(e=c.selector||e);if(n=n||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(s=o[0]).type&&d.getById&&9===t.nodeType&&S&&w.relative[o[1].type]){if(!(t=(w.find.ID(s.matches[0].replace(ne,l),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=X.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((u=w.find[a])&&(r=u(s.matches[0].replace(ne,l),ee.test(o[0].type)&&fe(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&de(o)))return P.apply(n,r),n;break}}return(c||f(e,h))(r,t,!S,n,!t||ee.test(e)&&fe(t.parentNode)||t),n},d.sortStable=C.split("").sort(k).join("")===C,d.detectDuplicates=!!c,T(),d.sortDetached=se(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ae("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ae("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ae(F,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(E);C.find=f,C.expr=f.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=f.uniqueSort,C.text=f.getText,C.isXMLDoc=f.isXML,C.contains=f.contains;function p(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r}function g(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var v=C.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function _(e,n,r){if(C.isFunction(n))return C.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return C.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(w.test(n))return C.filter(n,e,r);n=C.filter(n,e)}return C.grep(e,function(e){return-1<i.call(n,e)!==r})}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(i[t],this))return!0}));for(t=0;t<n;t++)C.find(e,i[t],r);return(r=this.pushStack(1<n?C.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&v.test(e)?C(e):e||[],!1).length}});var T,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||T,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==n.ready?n.ready(e):e(C):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),C.makeArray(e,this));if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:I.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),b.test(r[1])&&C.isPlainObject(t))for(r in t)C.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=S.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=S,this.selector=e,this}).prototype=C.fn,T=C(S);var x=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=v.test(e)||"string"!=typeof e?C(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&C.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(C(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,n){return p(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,n){return p(e,"nextSibling",n)},prevUntil:function(e,t,n){return p(e,"previousSibling",n)},siblings:function(e){return g((e.parentNode||{}).firstChild,e)},children:function(e){return g(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(r,i){C.fn[r]=function(e,t){var n=C.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=C.filter(t,n)),1<this.length&&(N[r]||C.uniqueSort(n),x.test(r)&&n.reverse()),this.pushStack(n)}});var k,A=/\S+/g;function R(){S.removeEventListener("DOMContentLoaded",R),E.removeEventListener("load",R),C.ready()}C.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},C.each(e.match(A)||[],function(e,t){n[t]=!0}),n):C.extend({},r);function i(){for(a=r.once,s=o=!0;c.length;h=-1)for(t=c.shift();++h<u.length;)!1===u[h].apply(t[0],t[1])&&r.stopOnFalse&&(h=u.length,t=!1);r.memory||(t=!1),o=!1,a&&(u=t?[]:"")}var o,t,s,a,u=[],c=[],h=-1,l={add:function(){return u&&(t&&!o&&(h=u.length-1,c.push(t)),function n(e){C.each(e,function(e,t){C.isFunction(t)?r.unique&&l.has(t)||u.push(t):t&&t.length&&"string"!==C.type(t)&&n(t)})}(arguments),t&&!o&&i()),this},remove:function(){return C.each(arguments,function(e,t){for(var n;-1<(n=C.inArray(t,u,n));)u.splice(n,1),n<=h&&h--}),this},has:function(e){return e?-1<C.inArray(e,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=c=[],u=t="",this},disabled:function(){return!u},lock:function(){return a=c=[],t||(u=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),o||i()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!s}};return l},C.extend({Deferred:function(e){var o=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var i=arguments;return C.Deferred(function(r){C.each(o,function(e,t){var n=C.isFunction(i[e])&&i[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===s?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?C.extend(e,s):s}},a={};return s.pipe=s.then,C.each(o,function(e,t){var n=t[2],r=t[3];s[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?h.call(arguments):e,r===i?c.notifyWith(n,r):--u||c.resolveWith(n,r)}}var i,n,r,o=0,s=h.call(arguments),a=s.length,u=1!==a||e&&C.isFunction(e.promise)?a:0,c=1===u?e:C.Deferred();if(1<a)for(i=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)s[o]&&C.isFunction(s[o].promise)?s[o].promise().progress(t(o,n,i)).done(t(o,r,s)).fail(c.reject):--u;return u||c.resolveWith(r,s),c.promise()}}),C.fn.ready=function(e){return C.ready.promise().done(e),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||((C.isReady=!0)!==e&&0<--C.readyWait||(k.resolveWith(S,[C]),C.fn.triggerHandler&&(C(S).triggerHandler("ready"),C(S).off("ready"))))}}),C.ready.promise=function(e){return k||(k=C.Deferred(),"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?E.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",R),E.addEventListener("load",R))),k.promise(e)},C.ready.promise();function O(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}var P=function(e,t,n,r,i,o,s){var a=0,u=e.length,c=null==n;if("object"===C.type(n))for(a in i=!0,n)P(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,C.isFunction(r)||(s=!0),c&&(t=s?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(C(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):u?t(e[0],n):o};function L(){this.expando=C.expando+L.uid++}L.uid=1,L.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!O(e))return{};var t=e[this.expando];return t||(t={},O(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,C.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{n=(r=C.isArray(t)?t.concat(t.map(C.camelCase)):(i=C.camelCase(t),t in o?[t,i]:(r=i)in o?[r]:r.match(A)||[])).length;for(;n--;)delete o[r[n]]}void 0!==t&&!C.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var M=new L,F=new L,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/[A-Z]/g;function U(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(j,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:q.test(n)?C.parseJSON(n):n)}catch(e){}F.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return F.hasData(e)||M.hasData(e)},data:function(e,t,n){return F.access(e,t,n)},removeData:function(e,t){F.remove(e,t)},_data:function(e,t,n){return M.access(e,t,n)},_removeData:function(e,t){M.remove(e,t)}}),C.fn.extend({data:function(r,e){var t,n,i,o=this[0],s=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){F.set(this,r)}):P(this,function(t){var e,n;if(o&&void 0===t){if(void 0!==(e=F.get(o,r)||F.get(o,r.replace(j,"-$&").toLowerCase())))return e;if(n=C.camelCase(r),void 0!==(e=F.get(o,n)))return e;if(void 0!==(e=U(o,n,void 0)))return e}else n=C.camelCase(r),this.each(function(){var e=F.get(this,n);F.set(this,n,t),-1<r.indexOf("-")&&void 0!==e&&F.set(this,r,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=F.get(o),1===o.nodeType&&!M.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&(0===(n=s[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),U(o,n,i[n])));M.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){F.remove(this,e)})}}),C.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=M.get(e,t),n&&(!r||C.isArray(n)?r=M.access(e,t,C.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,i=n.shift(),o=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){C.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return M.get(e,n)||M.access(e,n,{empty:C.Callbacks("once memory").add(function(){M.remove(e,[t+"queue",n])})})}}),C.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===n?this:this.each(function(){var e=C.queue(this,t,n);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=C.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=M.get(s[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function B(e,t){return e=t||e,"none"===C.css(e,"display")||!C.contains(e.ownerDocument,e)}var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),H=["Top","Right","Bottom","Left"];function K(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return C.css(e,t,"")},u=a(),c=n&&n[3]||(C.cssNumber[t]?"":"px"),h=(C.cssNumber[t]||"px"!==c&&+u)&&W.exec(C.css(e,t));if(h&&h[3]!==c)for(c=c||h[3],n=n||[],h=+u||1;h/=o=o||".5",C.style(e,t,h+c),o!==(o=a()/u)&&1!==o&&--s;);return n&&(h=+h||+u||0,i=n[1]?h+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=h,r.end=i)),i}var Q=/^(?:checkbox|radio)$/i,z=/<([\w:-]+)/,G=/^$|\/(?:java|ecma)script/i,X={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Y(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&C.nodeName(e,t)?C.merge([e],n):n}function $(e,t){for(var n=0,r=e.length;n<r;n++)M.set(e[n],"globalEval",!t||M.get(t[n],"globalEval"))}X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td;var J,Z,ee=/<|&#?\w+;/;function te(e,t,n,r,i){for(var o,s,a,u,c,h,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((o=e[p])||0===o)if("object"===C.type(o))C.merge(f,o.nodeType?[o]:o);else if(ee.test(o)){for(s=s||l.appendChild(t.createElement("div")),a=(z.exec(o)||["",""])[1].toLowerCase(),u=X[a]||X._default,s.innerHTML=u[1]+C.htmlPrefilter(o)+u[2],h=u[0];h--;)s=s.lastChild;C.merge(f,s.childNodes),(s=l.firstChild).textContent=""}else f.push(t.createTextNode(o));for(l.textContent="",p=0;o=f[p++];)if(r&&-1<C.inArray(o,r))i&&i.push(o);else if(c=C.contains(o.ownerDocument,o),s=Y(l.appendChild(o),"script"),c&&$(s),n)for(h=0;o=s[h++];)G.test(o.type||"")&&n.push(o);return l}J=S.createDocumentFragment().appendChild(S.createElement("div")),(Z=S.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),J.appendChild(Z),m.checkClone=J.cloneNode(!0).cloneNode(!0).lastChild.checked,J.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!J.cloneNode(!0).lastChild.defaultValue;var ne=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ie=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function se(){return!1}function ae(){try{return S.activeElement}catch(e){}}function ue(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)ue(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=se;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return C().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=C.guid++)),e.each(function(){C.event.add(this,t,i,r,n)})}C.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=M.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=C.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(A)||[""]).length;c--;)p=y=(a=ie.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=C.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=C.event.special[p]||{},h=C.extend({type:p,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,r,d,s)||t.addEventListener&&t.addEventListener(p,s)),l.add&&(l.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),C.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,c,h,l,f,p,d,y,m=M.hasData(e)&&M.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match(A)||[""]).length;c--;)if(p=y=(a=ie.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=C.event.special[p]||{},f=u[p=(r?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)h=f[o],!i&&y!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||r&&r!==h.selector&&("**"!==r||!h.selector)||(f.splice(o,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(e,h));s&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,m.handle)||C.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)C.event.remove(e,p+t[c],n,r,!0);C.isEmptyObject(u)&&M.remove(e,"handle events")}},dispatch:function(e){e=C.event.fix(e);var t,n,r,i,o,s=[],a=h.call(arguments),u=(M.get(this,"events")||{})[e.type]||[],c=C.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=C.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(r=[],n=0;n<a;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?-1<C(i,this).index(u):C.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||S).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[C.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=re.test(i)?this.mouseHooks:ne.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new C.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=S),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ae()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ae()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&C.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:se):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){C.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||C.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),C.fn.extend({on:function(e,t,n,r){return ue(this,e,t,n,r)},one:function(e,t,n,r){return ue(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=se),this.each(function(){C.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,he=/<script|<style|<link/i,le=/checked\s*(?:[^=]|=\s*.checked.)/i,fe=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function de(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){var n,r,i,o,s,a,u,c;if(1===t.nodeType){if(M.hasData(e)&&(o=M.access(e),s=M.set(t,o),c=o.events))for(i in delete s.handle,s.events={},c)for(n=0,r=c[i].length;n<r;n++)C.event.add(t,i,c[i][n]);F.hasData(e)&&(a=F.access(e),u=C.extend({},a),F.set(t,u))}}function ve(n,r,i,o){r=y.apply([],r);var e,t,s,a,u,c,h=0,l=n.length,f=l-1,p=r[0],d=C.isFunction(p);if(d||1<l&&"string"==typeof p&&!m.checkClone&&le.test(p))return n.each(function(e){var t=n.eq(e);d&&(r[0]=p.call(this,e,t.html())),ve(t,r,i,o)});if(l&&(t=(e=te(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=C.map(Y(e,"script"),ye)).length;h<l;h++)u=e,h!==f&&(u=C.clone(u,!0,!0),a&&C.merge(s,Y(u,"script"))),i.call(n[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,C.map(s,me),h=0;h<a;h++)u=s[h],G.test(u.type||"")&&!M.access(u,"globalEval")&&C.contains(c,u)&&(u.src?C._evalUrl&&C._evalUrl(u.src):C.globalEval(u.textContent.replace(pe,"")))}return n}function be(e,t,n){for(var r,i=t?C.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(Y(r)),r.parentNode&&(n&&C.contains(r.ownerDocument,r)&&$(Y(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a,u,c,h=e.cloneNode(!0),l=C.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(s=Y(h),r=0,i=(o=Y(e)).length;r<i;r++)a=o[r],u=s[r],"input"===(c=u.nodeName.toLowerCase())&&Q.test(a.type)?u.checked=a.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=a.defaultValue);if(t)if(n)for(o=o||Y(e),s=s||Y(h),r=0,i=o.length;r<i;r++)ge(o[r],s[r]);else ge(e,h);return 0<(s=Y(h,"script")).length&&$(s,!l&&Y(e,"script")),h},cleanData:function(e){for(var t,n,r,i=C.event.special,o=0;void 0!==(n=e[o]);o++)if(O(n)){if(t=n[M.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[M.expando]=void 0}n[F.expando]&&(n[F.expando]=void 0)}}}),C.fn.extend({domManip:ve,detach:function(e){return be(this,e,!0)},remove:function(e){return be(this,e)},text:function(e){return P(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ve(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||de(this,e).appendChild(e)})},prepend:function(){return ve(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=de(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(Y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return P(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!he.test(e)&&!X[(z.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(Y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return ve(this,arguments,function(e){var t=this.parentNode;C.inArray(this,n)<0&&(C.cleanData(Y(this)),t&&t.replaceChild(e,this))},n)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){C.fn[e]=function(e){for(var t,n=[],r=C(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),C(r[o])[s](t),a.apply(n,t.get());return this.pushStack(n)}});var we,_e={HTML:"block",BODY:"block"};function Te(e,t){var n=C(t.createElement(e)).appendTo(t.body),r=C.css(n[0],"display");return n.detach(),r}function Ee(e){var t=S,n=_e[e];return n||("none"!==(n=Te(e,t))&&n||((t=(we=(we||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Te(e,t),we.detach()),_e[e]=n),n}function Se(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i}var Ce=/^margin/,Ie=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=E),t.getComputedStyle(e)},Ne=S.documentElement;function De(e,t,n){var r,i,o,s,a=e.style;return""!==(s=(n=n||xe(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||C.contains(e.ownerDocument,e)||(s=C.style(e,t)),n&&!m.pixelMarginRight()&&Ie.test(s)&&Ce.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function ke(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,r,i,o=S.createElement("div"),s=S.createElement("div");if(s.style){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ne.appendChild(o);var e=E.getComputedStyle(s);t="1%"!==e.top,i="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Ne.removeChild(o)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),C.extend(m,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),i},reliableMarginRight:function(){var e,t=s.appendChild(S.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",Ne.appendChild(o),e=!parseFloat(E.getComputedStyle(t).marginRight),Ne.removeChild(o),s.removeChild(t),e}})}}();var Ae=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Oe={letterSpacing:"0",fontWeight:"400"},Pe=["Webkit","O","Moz","ms"],Le=S.createElement("div").style;function Me(e){if(e in Le)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Pe.length;n--;)if((e=Pe[n]+t)in Le)return e}function Fe(e,t,n){var r=W.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function qe(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=C.css(e,n+H[o],!0,i)),r?("content"===n&&(s-=C.css(e,"padding"+H[o],!0,i)),"margin"!==n&&(s-=C.css(e,"border"+H[o]+"Width",!0,i))):(s+=C.css(e,"padding"+H[o],!0,i),"padding"!==n&&(s+=C.css(e,"border"+H[o]+"Width",!0,i)));return s}function je(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=xe(e),s="border-box"===C.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=De(e,t,o))<0||null==i)&&(i=e.style[t]),Ie.test(i))return i;r=s&&(m.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+qe(e,t,n||(s?"border":"content"),r,o)+"px"}function Ue(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)(r=e[s]).style&&(o[s]=M.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&B(r)&&(o[s]=M.access(r,"olddisplay",Ee(r.nodeName)))):(i=B(r),"none"===n&&i||M.set(r,"olddisplay",i?n:C.css(r,"display"))));for(s=0;s<a;s++)(r=e[s]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function Be(e,t,n,r,i){return new Be.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=De(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=C.camelCase(t),u=e.style;return t=C.cssProps[a]||(C.cssProps[a]=Me(a)||a),s=C.cssHooks[t]||C.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:("string"===(o=typeof n)&&(i=W.exec(n))&&i[1]&&(n=K(e,t,i),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(C.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n))))}},css:function(e,t,n,r){var i,o,s,a=C.camelCase(t);return t=C.cssProps[a]||(C.cssProps[a]=Me(a)||a),(s=C.cssHooks[t]||C.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=De(e,t,r)),"normal"===i&&t in Oe&&(i=Oe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],function(e,s){C.cssHooks[s]={get:function(e,t,n){return t?Ae.test(C.css(e,"display"))&&0===e.offsetWidth?Se(e,Re,function(){return je(e,s,n)}):je(e,s,n):void 0},set:function(e,t,n){var r,i=n&&xe(e),o=n&&qe(e,s,n,"border-box"===C.css(e,"boxSizing",!1,i),i);return o&&(r=W.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=C.css(e,s)),Fe(0,t,o)}}}),C.cssHooks.marginLeft=ke(m.reliableMarginLeft,function(e,t){return t?(parseFloat(De(e,"marginLeft"))||e.getBoundingClientRect().left-Se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),C.cssHooks.marginRight=ke(m.reliableMarginRight,function(e,t){return t?Se(e,{display:"inline-block"},De,[e,"marginRight"]):void 0}),C.each({margin:"",padding:"",border:"Width"},function(i,o){C.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+H[t]+o]=r[t]||r[t-2]||r[0];return n}},Ce.test(i)||(C.cssHooks[i+o].set=Fe)}),C.fn.extend({css:function(e,t){return P(this,function(e,t,n){var r,i,o={},s=0;if(C.isArray(t)){for(r=xe(e),i=t.length;s<i;s++)o[t[s]]=C.css(e,t[s],!1,r);return o}return void 0!==n?C.style(e,t,n):C.css(e,t)},e,t,1<arguments.length)},show:function(){return Ue(this,!0)},hide:function(){return Ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){B(this)?C(this).show():C(this).hide()})}}),((C.Tween=Be).prototype={constructor:Be,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var e=Be.propHooks[this.prop];return e&&e.get?e.get(this):Be.propHooks._default.get(this)},run:function(e){var t,n=Be.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Be.propHooks._default.set(this),this}}).init.prototype=Be.prototype,(Be.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Be.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Be.prototype.init,C.fx.step={};var Ve,We,He,Ke,Qe,ze=/^(?:toggle|show|hide)$/,Ge=/queueHooks$/;function Xe(){return E.setTimeout(function(){Ve=void 0}),Ve=C.now()}function Ye(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=H[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function $e(e,t,n){for(var r,i=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function Je(o,e,t){var n,s,r=0,i=Je.prefilters.length,a=C.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=Ve||Xe(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return a.notifyWith(o,[c,n,t]),n<1&&i?t:(a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ve||Xe(),duration:t.duration,tweens:[],createTween:function(e,t){var n=C.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,e])):a.rejectWith(o,[c,e]),this}}),h=c.props;for(function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=C.camelCase(n)],o=e[n],C.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=C.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(h,c.opts.specialEasing);r<i;r++)if(n=Je.prefilters[r].call(c,o,h,c.opts))return C.isFunction(n.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=C.proxy(n.stop,n)),n;return C.map(h,$e,c),C.isFunction(c.opts.start)&&c.opts.start.call(o,c),C.fx.timer(C.extend(u,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}C.Animation=C.extend(Je,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return K(n.elem,e,W.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=C.isFunction(e)?(t=e,["*"]):e.match(A)).length;r<i;r++)n=e[r],Je.tweeners[n]=Je.tweeners[n]||[],Je.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,h=this,l={},f=t.style,p=t.nodeType&&B(t),d=M.get(t,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(c=C.css(t,"display"))?M.get(t,"olddisplay")||Ee(t.nodeName):c)&&"none"===C.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],ze.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;p=!0}l[r]=d&&d[r]||C.style(t,r)}else c=void 0;if(C.isEmptyObject(l))"inline"===("none"===c?Ee(t.nodeName):c)&&(f.display=c);else for(r in d?"hidden"in d&&(p=d.hidden):d=M.access(t,"fxshow",{}),o&&(d.hidden=!p),p?C(t).show():h.done(function(){C(t).hide()}),h.done(function(){var e;for(e in M.remove(t,"fxshow"),l)C.style(t,e,l[e])}),l)s=$e(p?d[r]:0,r,h),r in d||(d[r]=s.start,p&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||C.isFunction(e)&&e,duration:e,easing:n&&t||t&&!C.isFunction(t)&&t};return r.duration=C.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in C.fx.speeds?C.fx.speeds[r.duration]:C.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){C.isFunction(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=Je(this,C.extend({},t),s);(o||M.get(this,"finish"))&&e.stop(!0)}var o=C.isEmptyObject(t),s=C.speed(e,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=C.timers,r=M.get(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&Ge.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||C.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=M.get(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=C.timers,o=n?n.length:0;for(t.finish=!0,C.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,r){var i=C.fn[r];C.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Ye(r,!0),e,t,n)}}),C.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){C.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(Ve=C.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),Ve=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){We=We||E.setInterval(C.fx.tick,C.fx.interval)},C.fx.stop=function(){E.clearInterval(We),We=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(r,e){return r=C.fx&&C.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=E.setTimeout(e,r);t.stop=function(){E.clearTimeout(n)}})},He=S.createElement("input"),Ke=S.createElement("select"),Qe=Ke.appendChild(S.createElement("option")),He.type="checkbox",m.checkOn=""!==He.value,m.optSelected=Qe.selected,Ke.disabled=!0,m.optDisabled=!Qe.disabled,(He=S.createElement("input")).value="t",He.type="radio",m.radioValue="t"===He.value;var Ze,et=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return P(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,n):(1===o&&C.isXMLDoc(e)||(t=t.toLowerCase(),i=C.attrHooks[t]||(C.expr.match.bool.test(t)?Ze:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&C.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(A);if(o&&1===e.nodeType)for(;n=o[i++];)r=C.propFix[n]||n,C.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),Ze={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var o=et[t]||C.find.attr;et[t]=function(e,t,n){var r,i;return n||(i=et[t],et[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,et[t]=i),r}});var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;C.fn.extend({prop:function(e,t){return P(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this});var rt=/[\t\r\n\f]/g;function it(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,it(this)))});if("string"==typeof t&&t)for(e=t.match(A)||[];n=this[u++];)if(i=it(n),r=1===n.nodeType&&(" "+i+" ").replace(rt," ")){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=C.trim(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,it(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(A)||[];n=this[u++];)if(i=it(n),r=1===n.nodeType&&(" "+i+" ").replace(rt," ")){for(s=0;o=e[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=C.trim(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"==o?t?this.addClass(i):this.removeClass(i):C.isFunction(i)?this.each(function(e){C(this).toggleClass(i.call(this,e,it(this),t),t)}):this.each(function(){var e,t,n,r;if("string"==o)for(t=0,n=C(this),r=i.match(A)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=it(this))&&M.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":M.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+it(n)+" ").replace(rt," ").indexOf(t))return!0;return!1}});var ot=/\r/g,st=/[\x20\t\r\n\f]+/g;C.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=C.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,C(this).val()):n)?t="":"number"==typeof t?t+="":C.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(r=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ot,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:C.trim(C.text(e)).replace(st," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,u=i<0?a:o?i:0;u<a;u++)if(((n=r[u]).selected||u===i)&&(m.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!C.nodeName(n.parentNode,"optgroup"))){if(t=C(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=C.makeArray(t),s=i.length;s--;)((r=i[s]).selected=-1<C.inArray(C.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){return C.isArray(t)?e.checked=-1<C.inArray(C(e).val(),t):void 0}},m.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var at=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,n,r){var i,o,s,a,u,c,h,l=[n||S],f=d.call(e,"type")?e.type:e,p=d.call(e,"namespace")?e.namespace.split("."):[];if(o=s=n=n||S,3!==n.nodeType&&8!==n.nodeType&&!at.test(f+C.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),u=f.indexOf(":")<0&&"on"+f,(e=e[C.expando]?e:new C.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(n,t))){if(!r&&!h.noBubble&&!C.isWindow(n)){for(a=h.delegateType||f,at.test(a+f)||(o=o.parentNode);o;o=o.parentNode)l.push(o),s=o;s===(n.ownerDocument||S)&&l.push(s.defaultView||s.parentWindow||E)}for(i=0;(o=l[i++])&&!e.isPropagationStopped();)e.type=1<i?a:h.bindType||f,(c=(M.get(o,"events")||{})[e.type]&&M.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&O(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(l.pop(),t)||!O(n)||u&&C.isFunction(n[f])&&!C.isWindow(n)&&((s=n[u])&&(n[u]=null),n[C.event.triggered=f](),C.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?C.event.trigger(e,t,n,!0):void 0}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){C.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),m.focusin="onfocusin"in E,m.focusin||C.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){C.event.simulate(r,e.target,C.event.fix(e))}C.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=M.access(e,r);t||e.addEventListener(n,i,!0),M.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=M.access(e,r)-1;t?M.access(e,r,t):(e.removeEventListener(n,i,!0),M.remove(e,r))}}});var ut=E.location,ct=C.now(),ht=/\?/;C.parseJSON=function(e){return JSON.parse(e+"")},C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var lt=/#.*$/,ft=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,dt=/^(?:GET|HEAD)$/,yt=/^\/\//,mt={},gt={},vt="*/".concat("*"),bt=S.createElement("a");function wt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(A)||[];if(C.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,s){var a={},u=t===gt;function c(e){var r;return a[e]=!0,C.each(t[e]||[],function(e,t){var n=t(i,o,s);return"string"!=typeof n||u||a[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),r}return c(i.dataTypes[0])||!a["*"]&&c("*")}function Tt(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&C.extend(!0,e,r),e}bt.href=ut.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ut.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ut.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Tt(Tt(e,C.ajaxSettings),t):Tt(C.ajaxSettings,e)},ajaxPrefilter:wt(mt),ajaxTransport:wt(gt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,l,f,n,p,r,d,i,y=C.ajaxSetup({},t),m=y.context||y,g=y.context&&(m.nodeType||m.jquery)?C(m):C.event,v=C.Deferred(),b=C.Callbacks("once memory"),w=y.statusCode||{},o={},s={},_=0,a="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!n)for(n={};t=pt.exec(f);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?f:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=s[n]=s[n]||e,o[e]=t),this},overrideMimeType:function(e){return _||(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)w[t]=[w[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||a;return h&&h.abort(t),u(0,t),this}};if(v.promise(T).complete=b.add,T.success=T.done,T.error=T.fail,y.url=((e||y.url||ut.href)+"").replace(lt,"").replace(yt,ut.protocol+"//"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=C.trim(y.dataType||"*").toLowerCase().match(A)||[""],null==y.crossDomain){r=S.createElement("a");try{r.href=y.url,r.href=r.href,y.crossDomain=bt.protocol+"//"+bt.host!=r.protocol+"//"+r.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=C.param(y.data,y.traditional)),_t(mt,y,t,T),2===_)return T;for(i in(d=C.event&&y.global)&&0==C.active++&&C.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!dt.test(y.type),l=y.url,y.hasContent||(y.data&&(l=y.url+=(ht.test(l)?"&":"?")+y.data,delete y.data),!1===y.cache&&(y.url=ft.test(l)?l.replace(ft,"$1_="+ct++):l+(ht.test(l)?"&":"?")+"_="+ct++)),y.ifModified&&(C.lastModified[l]&&T.setRequestHeader("If-Modified-Since",C.lastModified[l]),C.etag[l]&&T.setRequestHeader("If-None-Match",C.etag[l])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader("Content-Type",y.contentType),T.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+vt+"; q=0.01":""):y.accepts["*"]),y.headers)T.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(m,T,y)||2===_))return T.abort();for(i in a="abort",{success:1,error:1,complete:1})T[i](y[i]);if(h=_t(gt,y,t,T)){if(T.readyState=1,d&&g.trigger("ajaxSend",[T,y]),2===_)return T;y.async&&0<y.timeout&&(p=E.setTimeout(function(){T.abort("timeout")},y.timeout));try{_=1,h.send(o,u)}catch(e){if(!(_<2))throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,n,r){var i,o,s,a,u,c=t;2!==_&&(_=2,p&&E.clearTimeout(p),h=void 0,f=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}(y,T,n)),a=function(e,t,n,r){var i,o,s,a,u,c={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=h.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=h.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(y,a,T,i),i?(y.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(C.lastModified[l]=u),(u=T.getResponseHeader("etag"))&&(C.etag[l]=u)),204===e||"HEAD"===y.type?c="nocontent":304===e?c="notmodified":(c=a.state,o=a.data,i=!(s=a.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",i?v.resolveWith(m,[o,c,T]):v.rejectWith(m,[T,c,s]),T.statusCode(w),w=void 0,d&&g.trigger(i?"ajaxSuccess":"ajaxError",[T,y,i?o:s]),b.fireWith(m,[T,c]),d&&(g.trigger("ajaxComplete",[T,y]),--C.active||C.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,i){C[i]=function(e,t,n,r){return C.isFunction(t)&&(r=r||n,n=t,t=void 0),C.ajax(C.extend({url:e,type:i,dataType:r,data:t,success:n},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(t){var e;return C.isFunction(t)?this.each(function(e){C(this).wrapAll(t.call(this,e))}):(this[0]&&(e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return C.isFunction(n)?this.each(function(e){C(this).wrapInner(n.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=C.isFunction(t);return this.each(function(e){C(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)}).end()}}),C.expr.filters.hidden=function(e){return!C.expr.filters.visible(e)},C.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var Et=/%20/g,St=/\[\]$/,Ct=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function Nt(n,e,r,i){var t;if(C.isArray(e))C.each(e,function(e,t){r||St.test(n)?i(n,t):Nt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==C.type(e))i(n,e);else for(t in e)Nt(n+"["+t+"]",e[t],r,i)}C.param=function(e,t){function n(e,t){t=C.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var r,i=[];if(void 0===t&&(t=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){n(this.name,this.value)});else for(r in e)Nt(r,e[r],t,n);return i.join("&").replace(Et,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&xt.test(this.nodeName)&&!It.test(e)&&(this.checked||!Q.test(e))}).map(function(e,t){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),C.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},kt=C.ajaxSettings.xhr();m.cors=!!kt&&"withCredentials"in kt,m.ajax=kt=!!kt,C.ajaxTransport(function(i){var o,s;return m.cors||kt&&!i.crossDomain?{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Dt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&E.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}:void 0}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=C("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(r[0])},abort:function(){i&&i()}}});var At=[],Rt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=At.pop()||C.expando+"_"+ct++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(Rt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Rt,"$1"+r):!1!==e.jsonp&&(e.url+=(ht.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=E[r],E[r]=function(){o=arguments},n.always(function(){void 0===i?C(E).removeProp(r):E[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,At.push(r)),o&&C.isFunction(i)&&i(o[0]),o=i=void 0}),"script"):void 0}),C.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||S;var r=b.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=te([e],t,i),i&&i.length&&C(i).remove(),C.merge([],r.childNodes))};var Ot=C.fn.load;function Pt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.fn.load=function(e,t,n){if("string"!=typeof e&&Ot)return Ot.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return-1<a&&(r=C.trim(e.slice(a)),e=e.slice(0,a)),C.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.filters.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,c=C.css(e,"position"),h=C(e),l={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=C.css(e,"top"),u=C.css(e,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+u).indexOf("auto")?(s=(r=h.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(u)||0),C.isFunction(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(l.top=t.top-a.top+s),null!=t.left&&(l.left=t.left-a.left+i),"using"in t?t.using.call(e,l):h.css(l)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,C.contains(e,r)?(i=r.getBoundingClientRect(),n=Pt(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===C.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(r=e.offset()),r.top+=C.css(e[0],"borderTopWidth",!0),r.left+=C.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-C.css(n,"marginTop",!0),left:t.left-r.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||Ne})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;C.fn[t]=function(e){return P(this,function(e,t,n){var r=Pt(e);return void 0===n?r?r[i]:e[t]:void(r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n)},t,e,arguments.length)}}),C.each(["top","left"],function(e,n){C.cssHooks[n]=ke(m.pixelPosition,function(e,t){return t?(t=De(e,n),Ie.test(t)?C(e).position()[n]+"px":t):void 0})}),C.each({Height:"height",Width:"width"},function(o,s){C.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,e){C.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return P(this,function(e,t,n){var r;return C.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?C.css(e,t,i):C.style(e,t,n,i)},s,n?e:void 0,n,null)}})}),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),C.fn.andSelf=C.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Lt=E.jQuery,Mt=E.$;return C.noConflict=function(e){return E.$===C&&(E.$=Mt),e&&E.jQuery===C&&(E.jQuery=Lt),C},e||(E.jQuery=E.$=C),C});